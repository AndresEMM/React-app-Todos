/*! For license information please see 2.a5ba9d28.chunk.js.LICENSE.txt */
(this.webpackJsonpmyfirstapp=this.webpackJsonpmyfirstapp||[]).push([[2],[function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",(function(){return i})),n.d(e,"__assign",(function(){return o})),n.d(e,"__rest",(function(){return s})),n.d(e,"__decorate",(function(){return a})),n.d(e,"__param",(function(){return u})),n.d(e,"__metadata",(function(){return c})),n.d(e,"__awaiter",(function(){return l})),n.d(e,"__generator",(function(){return h})),n.d(e,"__createBinding",(function(){return f})),n.d(e,"__exportStar",(function(){return p})),n.d(e,"__values",(function(){return d})),n.d(e,"__read",(function(){return v})),n.d(e,"__spread",(function(){return y})),n.d(e,"__spreadArrays",(function(){return g})),n.d(e,"__await",(function(){return m})),n.d(e,"__asyncGenerator",(function(){return b})),n.d(e,"__asyncDelegator",(function(){return _})),n.d(e,"__asyncValues",(function(){return w})),n.d(e,"__makeTemplateObject",(function(){return E})),n.d(e,"__importStar",(function(){return T})),n.d(e,"__importDefault",(function(){return I})),n.d(e,"__classPrivateFieldGet",(function(){return S})),n.d(e,"__classPrivateFieldSet",(function(){return C}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function h(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function f(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}function p(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||(e[n]=t[n])}function d(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(v(arguments[e]));return t}function g(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function m(t){return this instanceof m?(this.v=t,this):new m(t)}function b(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||a(t,e)}))})}function a(t,e){try{(n=i[t](e)).value instanceof m?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(t){a("next",t)}function c(t){a("throw",t)}function l(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function _(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:m(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function w(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=d(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,i,(e=t[n](e)).done,e.value)}))}}}function E(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function T(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function I(t){return t&&t.__esModule?t:{default:t}}function S(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function C(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}},function(t,e,n){"use strict";t.exports=n(24)},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw s(e)},s=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var l=s<<4&240|a>>2;if(r.push(l),64!==u){var h=a<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},c=function(t){try{return u.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=l(t[n],e[n]));return t}var h=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"===typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function f(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function p(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(e){return!1}}var d=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name="FirebaseError",Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,v.prototype.create),i}return r.__extends(e,t),e}(Error),v=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?y(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new d(i,a),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},t}();function y(t,e){return t.replace(g,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var g=/\{\$([^}]+)}/g;function m(t){return JSON.parse(t)}var b=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=m(c(o[0])||""),n=m(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}};var _=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"===typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),s=1518500249):(o=u^c^l,s=1859775393):r<60?(o=u&c|l&(u|c),s=2400959708):(o=u^c^l,s=3395469782);i=(a<<5|a>>>27)+o+h+s+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"===typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();var w=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!==typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"===typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=E),void 0===r.error&&(r.error=E),void 0===r.complete&&(r.complete=E);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function E(){}function T(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}e.CONSTANTS=i,e.Deferred=h,e.ErrorFactory=v,e.FirebaseError=d,e.Sha1=_,e.areCookiesEnabled=function(){return!(!navigator||!navigator.cookieEnabled)},e.assert=o,e.assertionError=s,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}},e.base64=u,e.base64Decode=c,e.base64Encode=function(t){var e=a(t);return u.encodeByteArray(e,!0)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new w(t,e);return n.subscribe.bind(n)},e.decode=b,e.deepCopy=function(t){return l(void 0,t)},e.deepExtend=l,e.errorPrefix=T,e.getUA=f,e.isAdmin=function(t){var e=b(t).claims;return"object"===typeof e&&!0===e.admin},e.isBrowser=function(){return"object"===typeof self&&self.self===self},e.isBrowserExtension=function(){var t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id},e.isElectron=function(){return f().indexOf("Electron/")>=0},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isIE=function(){var t=f();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0},e.isIndexedDBAvailable=function(){return"indexedDB"in self&&null!==indexedDB},e.isMobileCordova=function(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())},e.isNode=p,e.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},e.isReactNative=function(){return"object"===typeof navigator&&"ReactNative"===navigator.product},e.isSafari=function(){return!p()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},e.isUWP=function(){return f().indexOf("MSAppHost/")>=0},e.isValidFormat=function(t){var e=b(t).claims;return!!e&&"object"===typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e=b(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"===typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},e.issuedAtTime=function(t){var e=b(t).claims;return"object"===typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=m,e.map=function(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r},e.querystring=function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}})),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var s=i-55296;r++,o(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(T(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(T(t,e,r)+"must be a valid context object.")},e.validateIndexedDBOpenable=function(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}}))},e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!==typeof n)throw new Error(T(t,e,r)+"must be a valid firebase namespace.")}}).call(this,n(12))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o=n(0),s=n(2),a=n(4),u=n(11),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.ErrorFactory("app","Firebase",c),h=((i={})["@firebase/app"]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),f=new u.Logger("@firebase/app"),p=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=s.deepCopy(t),this.container=new a.ComponentContainer(e.name),this._addComponent(new a.Component("app",(function(){return u}),"PUBLIC"));try{for(var c=o.__values(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next()){var h=l.value;this._addComponent(h)}}catch(f){r={error:f}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){f.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();p.prototype.name&&p.prototype.options||p.prototype.delete||console.log("dc");var d=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!==typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var a=o.name;if("string"!==typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(s.contains(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=h[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void f.warn(u.join(" "))}c(new a.Component(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.setLogLevel,onLog:function(t,e){if(null!==t&&"function"!==typeof t)throw l.create("invalid-log-argument",{appName:name});u.setUserLogHandler(t,e)},apps:null,SDK_VERSION:"7.18.0",INTERNAL:{registerComponent:c,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(t=t||"[DEFAULT]",!s.contains(e,t))throw l.create("no-app",{appName:t});return e[t]}function c(a){var u,c,h=a.name;if(n.has(h))return f.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===a.type?r[h]:null;if(n.set(h,a),"PUBLIC"===a.type){var p=function(t){if(void 0===t&&(t=i()),"function"!==typeof t[h])throw l.create("invalid-app-argument",{appName:h});return t[h]()};void 0!==a.serviceProps&&s.deepExtend(p,a.serviceProps),r[h]=p,t.prototype[h]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,h);return n.apply(this,a.multipleInstances?t:[])}}try{for(var d=o.__values(Object.keys(e)),v=d.next();!v.done;v=d.next()){var y=v.value;e[y]._addComponent(a)}}catch(g){u={error:g}}finally{try{v&&!v.done&&(c=d.return)&&c.call(d)}finally{if(u)throw u.error}}return"PUBLIC"===a.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(p);return e.INTERNAL=o.__assign(o.__assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){s.deepExtend(e,t)},createSubscribe:s.createSubscribe,ErrorFactory:s.ErrorFactory,deepExtend:s.deepExtend}),e}(),v=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(s.isBrowser()&&void 0!==self.firebase){f.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&f.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var g=d.initializeApp;d.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return s.isNode()&&f.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),g.apply(void 0,t)};var m=d;!function(t,e){t.INTERNAL.registerComponent(new a.Component("platform-logger",(function(t){return new v(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.10",e),t.registerVersion("fire-js","")}(m),e.default=m,e.firebase=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.Deferred;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=r.__assign({identifier:"[DEFAULT]",optional:!1},t),n=e.identifier,i=e.optional,o=this.normalizeInstanceIdentifier(n);try{var s=this.getOrInitializeService(o);if(!s){if(i)return null;throw Error("Service "+this.name+" is not available")}return s}catch(a){if(i)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService("[DEFAULT]")}catch(h){}try{for(var i=r.__values(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=r.__read(o.value,2),a=s[0],u=s[1],c=this.normalizeInstanceIdentifier(a);try{var l=this.getOrInitializeService(c);u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}();var a=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();e.Component=o,e.ComponentContainer=a,e.Provider=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function o(t){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(e,"a",(function(){return u}));var s=n(9);function a(t,e){return!e||"object"!==o(e)&&"function"!==typeof e?Object(s.a)(t):e}function u(t){return function(){var e,n=r(t);if(i()){var o=r(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return a(this,e)}}},function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",(function(){return r}))},function(t,e,n){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function r(t,e,r){var i,o=new Promise((function(o,s){n(i=t[e].apply(t,r)).then(o,s)}));return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then((function(t){if(t)return new l(t,i.request)}))}function o(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function s(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})}))}function a(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function u(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})}))}function c(t){this._index=t}function l(t,e){this._cursor=t,this._request=e}function h(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function p(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function d(t){this._db=t}o(c,"_index",["name","keyPath","multiEntry","unique"]),s(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),s(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(l.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then((function(t){if(t)return new l(t,e._request)}))}))})})),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),s(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),a(f,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["deleteObjectStore","close"]),d.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),a(d,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[h,c].forEach((function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,h].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})})),t.openDb=function(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new p(o.result,t.oldVersion,o.transaction))}),i.then((function(t){return new d(t)}))},t.deleteDb=function(t){return r(indexedDB,"deleteDatabase",[t])},Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.r(e),n.d(e,"LogLevel",(function(){return o})),n.d(e,"Logger",(function(){return h})),n.d(e,"setLogLevel",(function(){return f})),n.d(e,"setUserLogHandler",(function(){return p}));var o,s=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={}));var a={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,s.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"===typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function f(t){s.forEach((function(e){e.setLogLevel(t)}))}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=i.map((function(t){if(null==t)return null;if("string"===typeof t)return t;if("number"===typeof t||"boolean"===typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!==r&&void 0!==r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=s;r<i.length;r++){n(i[r])}}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.r(e),n.d(e,"registerInstallations",(function(){return Q}));var r,i=n(3),o=n.n(i),s=n(4),a=n(0),u=n(2),c=n(10),l=((r={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',r["not-registered"]="Firebase Installation is not registered.",r["installation-not-found"]="Firebase Installation not found.",r["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',r["app-offline"]="Could not process request. Application offline.",r["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",r),h=new u.ErrorFactory("installations","Installations",l);function f(t){return t instanceof u.FirebaseError&&t.code.includes("request-failed")}function p(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function d(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function v(t,e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),r=n.error,[2,h.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function y(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function g(t,e){var n=e.refreshToken,r=y(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}(n)),r}function m(t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var e;return Object(a.__generator)(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function b(t,e){var n=e.fid;return Object(a.__awaiter)(this,void 0,void 0,(function(){var e,r,i,o,s,u;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:return e=p(t),r=y(t),i={fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:"w:0.4.16"},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,m((function(){return fetch(e,o)}))];case 1:return(s=a.sent()).ok?[4,s.json()]:[3,3];case 2:return u=a.sent(),[2,{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:d(u.authToken)}];case 3:return[4,v("Create Installation",s)];case 4:throw a.sent()}}))}))}function _(t){return new Promise((function(e){setTimeout(e,t)}))}var w=/^[cdef][\w-]{21}$/;function E(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,Object(a.__spread)(e))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return w.test(e)?e:""}catch(r){return""}}function T(t){return t.appName+"!"+t.appId}var I=new Map;function S(t,e){var n=T(t);C(n,e),function(t,e){var n=N();n&&n.postMessage({key:t,fid:e});A()}(n,e)}function C(t,e){var n,r,i=I.get(t);if(i)try{for(var o=Object(a.__values)(i),s=o.next();!s.done;s=o.next()){(0,s.value)(e)}}catch(u){n={error:u}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var k=null;function N(){return!k&&"BroadcastChannel"in self&&((k=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){C(t.data.key,t.data.fid)}),k}function A(){0===I.size&&k&&(k.close(),k=null)}var O="firebase-installations-store",P=null;function R(){return P||(P=Object(c.openDb)("firebase-installations-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(O)}}))),P}function x(t,e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:return n=T(t),[4,R()];case 1:return r=a.sent(),i=r.transaction(O,"readwrite"),[4,(o=i.objectStore(O)).get(n)];case 2:return s=a.sent(),[4,o.put(e,n)];case 3:return a.sent(),[4,i.complete];case 4:return a.sent(),s&&s.fid===e.fid||S(t,e.fid),[2,e]}}))}))}function D(t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return e=T(t),[4,R()];case 1:return n=i.sent(),[4,(r=n.transaction(O,"readwrite")).objectStore(O).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function L(t,e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,u;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:return n=T(t),[4,R()];case 1:return r=a.sent(),i=r.transaction(O,"readwrite"),[4,(o=i.objectStore(O)).get(n)];case 2:return s=a.sent(),void 0!==(u=e(s))?[3,4]:[4,o.delete(n)];case 3:return a.sent(),[3,6];case 4:return[4,o.put(u,n)];case 5:a.sent(),a.label=6;case 6:return[4,i.complete];case 7:return a.sent(),!u||s&&s.fid===u.fid||S(t,u.fid),[2,u]}}))}))}function M(t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return[4,L(t,(function(n){var r=function(t){return j(t||{fid:E(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine){var n=Promise.reject(h.create("app-offline"));return{installationEntry:e,registrationPromise:n}}var r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=function(t,e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,b(t,e)];case 1:return n=i.sent(),[2,x(t,n)];case 2:return f(r=i.sent())&&409===r.serverCode?[4,D(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,x(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(t,r);return{installationEntry:r,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:F(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry}))];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function F(t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var e,n,r,i;return Object(a.__generator)(this,(function(o){switch(o.label){case 0:return[4,U(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,_(100)];case 3:return o.sent(),[4,U(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,M(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}}))}))}function U(t){return L(t,(function(t){if(!t)throw h.create("installation-not-found");return j(t)}))}function j(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function V(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return Object(a.__awaiter)(this,void 0,void 0,(function(){var t,i,o,s,u,c,l;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:return t=function(t,e){var n=e.fid;return p(t)+"/"+n+"/authTokens:generate"}(n,e),i=g(n,e),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),s={installation:{sdkVersion:"w:0.4.16"}},u={method:"POST",headers:i,body:JSON.stringify(s)},[4,m((function(){return fetch(t,u)}))];case 1:return(c=a.sent()).ok?[4,c.json()]:[3,3];case 2:return l=a.sent(),[2,d(l)];case 3:return[4,v("Generate Auth Token",c)];case 4:throw a.sent()}}))}))}function q(t,e){return void 0===e&&(e=!1),Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(a.__generator)(this,(function(o){switch(o.label){case 0:return[4,L(t.appConfig,(function(r){if(!W(r))throw h.create("not-registered");var i=r.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(t)}(i))return r;if(1===i.requestStatus)return n=function(t,e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return[4,B(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,_(100)];case 3:return i.sent(),[4,B(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,q(t,e)]:[2,r]}}))}))}(t,e),r;if(!navigator.onLine)throw h.create("app-offline");var o=function(t){var e={requestStatus:1,requestTime:Date.now()};return Object(a.__assign)(Object(a.__assign)({},t),{authToken:e})}(r);return n=function(t,e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(a.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,V(t,e)];case 1:return n=o.sent(),i=Object(a.__assign)(Object(a.__assign)({},e),{authToken:n}),[4,x(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!f(r=o.sent())||401!==r.serverCode&&404!==r.serverCode?[3,5]:[4,D(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=Object(a.__assign)(Object(a.__assign)({},e),{authToken:{requestStatus:0}}),[4,x(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(t,o),o}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function B(t){return L(t,(function(t){if(!W(t))throw h.create("not-registered");var e,n=t.authToken;return 1===(e=n).requestStatus&&e.requestTime+1e4<Date.now()?Object(a.__assign)(Object(a.__assign)({},t),{authToken:{requestStatus:0}}):t}))}function W(t){return void 0!==t&&2===t.registrationStatus}function H(t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var e;return Object(a.__generator)(this,(function(n){switch(n.label){case 0:return[4,M(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}function z(t,e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return Object(a.__generator)(this,(function(s){switch(s.label){case 0:return n=function(t,e){var n=e.fid;return p(t)+"/"+n}(t,e),r=g(t,e),i={method:"DELETE",headers:r},[4,m((function(){return fetch(n,i)}))];case 1:return(o=s.sent()).ok?[3,3]:[4,v("Delete Installation",o)];case 2:throw s.sent();case 3:return[2]}}))}))}function G(t,e){var n=t.appConfig;return function(t,e){N();var n=T(t),r=I.get(n);r||(r=new Set,I.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=T(t),r=I.get(n);r&&(r.delete(e),0===r.size&&I.delete(n),A())}(n,e)}}function K(t){return h.create("missing-app-config-values",{valueName:t})}function Q(t){t.INTERNAL.registerComponent(new s.Component("installations",(function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw K("App Configuration");if(!t.name)throw K("App Name");try{for(var r=Object(a.__values)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw K(o)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return[4,M(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):q(t).catch(console.error),[2,n.fid]}}))}))}(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),Object(a.__awaiter)(this,void 0,void 0,(function(){return Object(a.__generator)(this,(function(n){switch(n.label){case 0:return[4,H(t.appConfig)];case 1:return n.sent(),[4,q(t,e)];case 2:return[2,n.sent().token]}}))}))}(n,t)},delete:function(){return function(t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var e,n;return Object(a.__generator)(this,(function(r){switch(r.label){case 0:return[4,L(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw h.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw h.create("app-offline");case 3:return[4,z(e,n)];case 4:return r.sent(),[4,D(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)},onIdChange:function(t){return G(n,t)}}}),"PUBLIC")),t.registerVersion("@firebase/installations","0.4.16")}Q(o.a)},function(t,e,n){"use strict";var r,i=(r=n(3))&&"object"===typeof r&&"default"in r?r.default:r;n(31),n(32),n(33),n(35),n(36),n(37),n(38),n(39),n(40);i.registerVersion("firebase","7.19.0","app");console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport * as firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),i.registerVersion("firebase","7.19.0"),t.exports=i},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"===typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,c=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&p())}function p(){if(!l){var t=a(f);l=!0;for(var e=c.length;e;){for(u=c,c=[];++h<e;)u&&u[h].run();h=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||l||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){t.exports=n(30)},function(t,e,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function s(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(t,e){for(var n,a,u=s(t),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))i.call(n,l)&&(u[l]=n[l]);if(r){a=r(n);for(var h=0;h<a.length;h++)o.call(n,a[h])&&(u[a[h]]=n[a[h]])}}return u}},function(t,e,n){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}}(),t.exports=n(25)},,function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t,e,n,r,i,o,s){try{var a=t[o](s),u=a.value}catch(c){return void n(c)}a.done?e(u):Promise.resolve(u).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var s=t.apply(e,n);function a(t){r(s,i,o,a,u,"next",t)}function u(t){r(s,i,o,a,u,"throw",t)}a(void 0)}))}}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(e,"a",(function(){return i}))},,function(t,e,n){"use strict";var r=n(17),i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,s=i?Symbol.for("react.portal"):60106,a=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,d=i?Symbol.for("react.memo"):60115,v=i?Symbol.for("react.lazy"):60116,y="function"===typeof Symbol&&Symbol.iterator;function g(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function _(t,e,n){this.props=t,this.context=e,this.refs=b,this.updater=n||m}function w(){}function E(t,e,n){this.props=t,this.context=e,this.refs=b,this.updater=n||m}_.prototype.isReactComponent={},_.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(g(85));this.updater.enqueueSetState(this,t,e,"setState")},_.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},w.prototype=_.prototype;var T=E.prototype=new w;T.constructor=E,r(T,_.prototype),T.isPureReactComponent=!0;var I={current:null},S=Object.prototype.hasOwnProperty,C={key:!0,ref:!0,__self:!0,__source:!0};function k(t,e,n){var r,i={},s=null,a=null;if(null!=e)for(r in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(s=""+e.key),e)S.call(e,r)&&!C.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:t,key:s,ref:a,props:i,_owner:I.current}}function N(t){return"object"===typeof t&&null!==t&&t.$$typeof===o}var A=/\/+/g,O=[];function P(t,e,n,r){if(O.length){var i=O.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function R(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>O.length&&O.push(t)}function x(t,e,n){return null==t?0:function t(e,n,r,i){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var u=!1;if(null===e)u=!0;else switch(a){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case o:case s:u=!0}}if(u)return r(i,e,""===n?"."+D(e,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=n+D(a=e[c],c);u+=t(a,l,r,i)}else if(null===e||"object"!==typeof e?l=null:l="function"===typeof(l=y&&e[y]||e["@@iterator"])?l:null,"function"===typeof l)for(e=l.call(e),c=0;!(a=e.next()).done;)u+=t(a=a.value,l=n+D(a,c++),r,i);else if("object"===a)throw r=""+e,Error(g(31,"[object Object]"===r?"object with keys {"+Object.keys(e).join(", ")+"}":r,""));return u}(t,"",e,n)}function D(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function L(t,e){t.func.call(t.context,e,t.count++)}function M(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?F(t,r,n,(function(t){return t})):null!=t&&(N(t)&&(t=function(t,e){return{$$typeof:o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(A,"$&/")+"/")+n)),r.push(t))}function F(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(A,"$&/")+"/"),x(t,M,e=P(e,o,r,i)),R(e)}var U={current:null};function j(){var t=U.current;if(null===t)throw Error(g(321));return t}var V={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:I,IsSomeRendererActing:{current:!1},assign:r};e.Children={map:function(t,e,n){if(null==t)return t;var r=[];return F(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;x(t,L,e=P(null,null,e,n)),R(e)},count:function(t){return x(t,(function(){return null}),null)},toArray:function(t){var e=[];return F(t,e,null,(function(t){return t})),e},only:function(t){if(!N(t))throw Error(g(143));return t}},e.Component=_,e.Fragment=a,e.Profiler=c,e.PureComponent=E,e.StrictMode=u,e.Suspense=p,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V,e.cloneElement=function(t,e,n){if(null===t||void 0===t)throw Error(g(267,t));var i=r({},t.props),s=t.key,a=t.ref,u=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,u=I.current),void 0!==e.key&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(l in e)S.call(e,l)&&!C.hasOwnProperty(l)&&(i[l]=void 0===e[l]&&void 0!==c?c[l]:e[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){c=Array(l);for(var h=0;h<l;h++)c[h]=arguments[h+2];i.children=c}return{$$typeof:o,type:t.type,key:s,ref:a,props:i,_owner:u}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:h,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:t},t.Consumer=t},e.createElement=k,e.createFactory=function(t){var e=k.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:f,render:t}},e.isValidElement=N,e.lazy=function(t){return{$$typeof:v,_ctor:t,_status:-1,_result:null}},e.memo=function(t,e){return{$$typeof:d,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return j().useCallback(t,e)},e.useContext=function(t,e){return j().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return j().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return j().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return j().useLayoutEffect(t,e)},e.useMemo=function(t,e){return j().useMemo(t,e)},e.useReducer=function(t,e,n){return j().useReducer(t,e,n)},e.useRef=function(t){return j().useRef(t)},e.useState=function(t){return j().useState(t)},e.version="16.13.1"},function(t,e,n){"use strict";var r=n(1),i=n(17),o=n(26);function s(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(s(227));function a(t,e,n,r,i,o,s,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(l){this.onError(l)}}var u=!1,c=null,l=!1,h=null,f={onError:function(t){u=!0,c=t}};function p(t,e,n,r,i,o,s,l,h){u=!1,c=null,a.apply(f,arguments)}var d=null,v=null,y=null;function g(t,e,n){var r=t.type||"unknown-event";t.currentTarget=y(n),function(t,e,n,r,i,o,a,f,d){if(p.apply(this,arguments),u){if(!u)throw Error(s(198));var v=c;u=!1,c=null,l||(l=!0,h=v)}}(r,e,void 0,t),t.currentTarget=null}var m=null,b={};function _(){if(m)for(var t in b){var e=b[t],n=m.indexOf(t);if(!(-1<n))throw Error(s(96,t));if(!E[n]){if(!e.extractEvents)throw Error(s(97,t));for(var r in E[n]=e,n=e.eventTypes){var i=void 0,o=n[r],a=e,u=r;if(T.hasOwnProperty(u))throw Error(s(99,u));T[u]=o;var c=o.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&w(c[i],a,u);i=!0}else o.registrationName?(w(o.registrationName,a,u),i=!0):i=!1;if(!i)throw Error(s(98,r,t))}}}}function w(t,e,n){if(I[t])throw Error(s(100,t));I[t]=e,S[t]=e.eventTypes[n].dependencies}var E=[],T={},I={},S={};function C(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var r=t[e];if(!b.hasOwnProperty(e)||b[e]!==r){if(b[e])throw Error(s(102,e));b[e]=r,n=!0}}n&&_()}var k=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),N=null,A=null,O=null;function P(t){if(t=v(t)){if("function"!==typeof N)throw Error(s(280));var e=t.stateNode;e&&(e=d(e),N(t.stateNode,t.type,e))}}function R(t){A?O?O.push(t):O=[t]:A=t}function x(){if(A){var t=A,e=O;if(O=A=null,P(t),e)for(t=0;t<e.length;t++)P(e[t])}}function D(t,e){return t(e)}function L(t,e,n,r,i){return t(e,n,r,i)}function M(){}var F=D,U=!1,j=!1;function V(){null===A&&null===O||(M(),x())}function q(t,e,n){if(j)return t(e,n);j=!0;try{return F(t,e,n)}finally{j=!1,V()}}var B=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,W=Object.prototype.hasOwnProperty,H={},z={};function G(t,e,n,r,i,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o}var K={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){K[t]=new G(t,0,!1,t,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];K[e]=new G(e,1,!1,t[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){K[t]=new G(t,2,!1,t.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){K[t]=new G(t,2,!1,t,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){K[t]=new G(t,3,!1,t.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(t){K[t]=new G(t,3,!0,t,null,!1)})),["capture","download"].forEach((function(t){K[t]=new G(t,4,!1,t,null,!1)})),["cols","rows","size","span"].forEach((function(t){K[t]=new G(t,6,!1,t,null,!1)})),["rowSpan","start"].forEach((function(t){K[t]=new G(t,5,!1,t.toLowerCase(),null,!1)}));var Q=/[\-:]([a-z])/g;function Y(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(Q,Y);K[e]=new G(e,1,!1,t,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(Q,Y);K[e]=new G(e,1,!1,t,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(Q,Y);K[e]=new G(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(t){K[t]=new G(t,1,!1,t.toLowerCase(),null,!1)})),K.xlinkHref=new G("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(t){K[t]=new G(t,1,!1,t.toLowerCase(),null,!0)}));var X=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function $(t,e,n,r){var i=K.hasOwnProperty(e)?K[e]:null;(null!==i?0===i.type:!r&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!W.call(z,t)||!W.call(H,t)&&(B.test(t)?z[t]=!0:(H[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}X.hasOwnProperty("ReactCurrentDispatcher")||(X.ReactCurrentDispatcher={current:null}),X.hasOwnProperty("ReactCurrentBatchConfig")||(X.ReactCurrentBatchConfig={suspense:null});var J=/^(.*)[\\\/]/,Z="function"===typeof Symbol&&Symbol.for,tt=Z?Symbol.for("react.element"):60103,et=Z?Symbol.for("react.portal"):60106,nt=Z?Symbol.for("react.fragment"):60107,rt=Z?Symbol.for("react.strict_mode"):60108,it=Z?Symbol.for("react.profiler"):60114,ot=Z?Symbol.for("react.provider"):60109,st=Z?Symbol.for("react.context"):60110,at=Z?Symbol.for("react.concurrent_mode"):60111,ut=Z?Symbol.for("react.forward_ref"):60112,ct=Z?Symbol.for("react.suspense"):60113,lt=Z?Symbol.for("react.suspense_list"):60120,ht=Z?Symbol.for("react.memo"):60115,ft=Z?Symbol.for("react.lazy"):60116,pt=Z?Symbol.for("react.block"):60121,dt="function"===typeof Symbol&&Symbol.iterator;function vt(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=dt&&t[dt]||t["@@iterator"])?t:null}function yt(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case nt:return"Fragment";case et:return"Portal";case it:return"Profiler";case rt:return"StrictMode";case ct:return"Suspense";case lt:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case st:return"Context.Consumer";case ot:return"Context.Provider";case ut:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case ht:return yt(t.type);case pt:return yt(t.render);case ft:if(t=1===t._status?t._result:null)return yt(t)}return null}function gt(t){var e="";do{t:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break t;default:var r=t._debugOwner,i=t._debugSource,o=yt(t.type);n=null,r&&(n=yt(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(J,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}e+=n,t=t.return}while(t);return e}function mt(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function bt(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function _t(t){t._valueTracker||(t._valueTracker=function(t){var e=bt(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function wt(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=bt(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function Et(t,e){var n=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function Tt(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=mt(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function It(t,e){null!=(e=e.checked)&&$(t,"checked",e,!1)}function St(t,e){It(t,e);var n=mt(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?kt(t,e.type,n):e.hasOwnProperty("defaultValue")&&kt(t,e.type,mt(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Ct(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function kt(t,e,n){"number"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function Nt(t,e){return t=i({children:void 0},e),(e=function(t){var e="";return r.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function At(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+mt(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function Ot(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(s(91));return i({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Pt(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(s(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(s(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:mt(n)}}function Rt(t,e){var n=mt(e.value),r=mt(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function xt(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var Dt="http://www.w3.org/1999/xhtml",Lt="http://www.w3.org/2000/svg";function Mt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ft(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?Mt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var Ut,jt=function(t){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction((function(){return t(e,n)}))}:t}((function(t,e){if(t.namespaceURI!==Lt||"innerHTML"in t)t.innerHTML=e;else{for((Ut=Ut||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ut.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}}));function Vt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}function qt(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Bt={animationend:qt("Animation","AnimationEnd"),animationiteration:qt("Animation","AnimationIteration"),animationstart:qt("Animation","AnimationStart"),transitionend:qt("Transition","TransitionEnd")},Wt={},Ht={};function zt(t){if(Wt[t])return Wt[t];if(!Bt[t])return t;var e,n=Bt[t];for(e in n)if(n.hasOwnProperty(e)&&e in Ht)return Wt[t]=n[e];return t}k&&(Ht=document.createElement("div").style,"AnimationEvent"in window||(delete Bt.animationend.animation,delete Bt.animationiteration.animation,delete Bt.animationstart.animation),"TransitionEvent"in window||delete Bt.transitionend.transition);var Gt=zt("animationend"),Kt=zt("animationiteration"),Qt=zt("animationstart"),Yt=zt("transitionend"),Xt="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$t=new("function"===typeof WeakMap?WeakMap:Map);function Jt(t){var e=$t.get(t);return void 0===e&&(e=new Map,$t.set(t,e)),e}function Zt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(1026&(e=t).effectTag)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function te(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function ee(t){if(Zt(t)!==t)throw Error(s(188))}function ne(t){if(!(t=function(t){var e=t.alternate;if(!e){if(null===(e=Zt(t)))throw Error(s(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return ee(i),t;if(o===r)return ee(i),e;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,u=i.child;u;){if(u===n){a=!0,n=i,r=o;break}if(u===r){a=!0,r=i,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,r=i;break}if(u===r){a=!0,r=o,n=i;break}u=u.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function re(t,e){if(null==e)throw Error(s(30));return null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function ie(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}var oe=null;function se(t){if(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e))for(var r=0;r<e.length&&!t.isPropagationStopped();r++)g(t,e[r],n[r]);else e&&g(t,e,n);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function ae(t){if(null!==t&&(oe=re(oe,t)),t=oe,oe=null,t){if(ie(t,se),oe)throw Error(s(95));if(l)throw t=h,l=!1,h=null,t}}function ue(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function ce(t){if(!k)return!1;var e=(t="on"+t)in document;return e||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"===typeof e[t]),e}var le=[];function he(t){t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>le.length&&le.push(t)}function fe(t,e,n,r){if(le.length){var i=le.pop();return i.topLevelType=t,i.eventSystemFlags=r,i.nativeEvent=e,i.targetInst=n,i}return{topLevelType:t,eventSystemFlags:r,nativeEvent:e,targetInst:n,ancestors:[]}}function pe(t){var e=t.targetInst,n=e;do{if(!n){t.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(e=n.tag)&&6!==e||t.ancestors.push(n),n=kn(r)}while(n);for(n=0;n<t.ancestors.length;n++){e=t.ancestors[n];var i=ue(t.nativeEvent);r=t.topLevelType;var o=t.nativeEvent,s=t.eventSystemFlags;0===n&&(s|=64);for(var a=null,u=0;u<E.length;u++){var c=E[u];c&&(c=c.extractEvents(r,e,o,i,s))&&(a=re(a,c))}ae(a)}}function de(t,e,n){if(!n.has(t)){switch(t){case"scroll":Qe(e,"scroll",!0);break;case"focus":case"blur":Qe(e,"focus",!0),Qe(e,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":ce(t)&&Qe(e,t,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Xt.indexOf(t)&&Ke(t,e)}n.set(t,null)}}var ve,ye,ge,me=!1,be=[],_e=null,we=null,Ee=null,Te=new Map,Ie=new Map,Se=[],Ce="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),ke="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Ne(t,e,n,r,i){return{blockedOn:t,topLevelType:e,eventSystemFlags:32|n,nativeEvent:i,container:r}}function Ae(t,e){switch(t){case"focus":case"blur":_e=null;break;case"dragenter":case"dragleave":we=null;break;case"mouseover":case"mouseout":Ee=null;break;case"pointerover":case"pointerout":Te.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ie.delete(e.pointerId)}}function Oe(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t=Ne(e,n,r,i,o),null!==e&&(null!==(e=Nn(e))&&ye(e)),t):(t.eventSystemFlags|=r,t)}function Pe(t){var e=kn(t.target);if(null!==e){var n=Zt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=te(n)))return t.blockedOn=e,void o.unstable_runWithPriority(t.priority,(function(){ge(n)}))}else if(3===e&&n.stateNode.hydrate)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Re(t){if(null!==t.blockedOn)return!1;var e=Je(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);if(null!==e){var n=Nn(e);return null!==n&&ye(n),t.blockedOn=e,!1}return!0}function xe(t,e,n){Re(t)&&n.delete(e)}function De(){for(me=!1;0<be.length;){var t=be[0];if(null!==t.blockedOn){null!==(t=Nn(t.blockedOn))&&ve(t);break}var e=Je(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);null!==e?t.blockedOn=e:be.shift()}null!==_e&&Re(_e)&&(_e=null),null!==we&&Re(we)&&(we=null),null!==Ee&&Re(Ee)&&(Ee=null),Te.forEach(xe),Ie.forEach(xe)}function Le(t,e){t.blockedOn===e&&(t.blockedOn=null,me||(me=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,De)))}function Me(t){function e(e){return Le(e,t)}if(0<be.length){Le(be[0],t);for(var n=1;n<be.length;n++){var r=be[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==_e&&Le(_e,t),null!==we&&Le(we,t),null!==Ee&&Le(Ee,t),Te.forEach(e),Ie.forEach(e),n=0;n<Se.length;n++)(r=Se[n]).blockedOn===t&&(r.blockedOn=null);for(;0<Se.length&&null===(n=Se[0]).blockedOn;)Pe(n),null===n.blockedOn&&Se.shift()}var Fe={},Ue=new Map,je=new Map,Ve=["abort","abort",Gt,"animationEnd",Kt,"animationIteration",Qt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Yt,"transitionEnd","waiting","waiting"];function qe(t,e){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1],o="on"+(i[0].toUpperCase()+i.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[r],eventPriority:e},je.set(r,e),Ue.set(r,o),Fe[i]=o}}qe("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),qe("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),qe(Ve,2);for(var Be="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),We=0;We<Be.length;We++)je.set(Be[We],0);var He=o.unstable_UserBlockingPriority,ze=o.unstable_runWithPriority,Ge=!0;function Ke(t,e){Qe(e,t,!1)}function Qe(t,e,n){var r=je.get(e);switch(void 0===r?2:r){case 0:r=Ye.bind(null,e,1,t);break;case 1:r=Xe.bind(null,e,1,t);break;default:r=$e.bind(null,e,1,t)}n?t.addEventListener(e,r,!0):t.addEventListener(e,r,!1)}function Ye(t,e,n,r){U||M();var i=$e,o=U;U=!0;try{L(i,t,e,n,r)}finally{(U=o)||V()}}function Xe(t,e,n,r){ze(He,$e.bind(null,t,e,n,r))}function $e(t,e,n,r){if(Ge)if(0<be.length&&-1<Ce.indexOf(t))t=Ne(null,t,e,n,r),be.push(t);else{var i=Je(t,e,n,r);if(null===i)Ae(t,r);else if(-1<Ce.indexOf(t))t=Ne(i,t,e,n,r),be.push(t);else if(!function(t,e,n,r,i){switch(e){case"focus":return _e=Oe(_e,t,e,n,r,i),!0;case"dragenter":return we=Oe(we,t,e,n,r,i),!0;case"mouseover":return Ee=Oe(Ee,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Te.set(o,Oe(Te.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ie.set(o,Oe(Ie.get(o)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r)){Ae(t,r),t=fe(t,r,null,e);try{q(pe,t)}finally{he(t)}}}}function Je(t,e,n,r){if(null!==(n=kn(n=ue(r)))){var i=Zt(n);if(null===i)n=null;else{var o=i.tag;if(13===o){if(null!==(n=te(i)))return n;n=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}t=fe(t,r,n,e);try{q(pe,t)}finally{he(t)}return null}var Ze={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tn=["Webkit","ms","Moz","O"];function en(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||Ze.hasOwnProperty(t)&&Ze[t]?(""+e).trim():e+"px"}function nn(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=en(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(Ze).forEach((function(t){tn.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ze[e]=Ze[t]}))}));var rn=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function on(t,e){if(e){if(rn[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(s(137,t,""));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(s(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(s(62,""))}}function sn(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var an=Dt;function un(t,e){var n=Jt(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=S[e];for(var r=0;r<e.length;r++)de(e[r],t,n)}function cn(){}function ln(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function hn(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fn(t,e){var n,r=hn(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=hn(r)}}function pn(){for(var t=window,e=ln();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=ln((t=e.contentWindow).document)}return e}function dn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var vn=null,yn=null;function gn(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function mn(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var bn="function"===typeof setTimeout?setTimeout:void 0,_n="function"===typeof clearTimeout?clearTimeout:void 0;function wn(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function En(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var Tn=Math.random().toString(36).slice(2),In="__reactInternalInstance$"+Tn,Sn="__reactEventHandlers$"+Tn,Cn="__reactContainere$"+Tn;function kn(t){var e=t[In];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Cn]||n[In]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=En(t);null!==t;){if(n=t[In])return n;t=En(t)}return e}n=(t=n).parentNode}return null}function Nn(t){return!(t=t[In]||t[Cn])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function An(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(s(33))}function On(t){return t[Sn]||null}function Pn(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function Rn(t,e){var n=t.stateNode;if(!n)return null;var r=d(n);if(!r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(s(231,e,typeof n));return n}function xn(t,e,n){(e=Rn(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=re(n._dispatchListeners,e),n._dispatchInstances=re(n._dispatchInstances,t))}function Dn(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,n=[];e;)n.push(e),e=Pn(e);for(e=n.length;0<e--;)xn(n[e],"captured",t);for(e=0;e<n.length;e++)xn(n[e],"bubbled",t)}}function Ln(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=Rn(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=re(n._dispatchListeners,e),n._dispatchInstances=re(n._dispatchInstances,t))}function Mn(t){t&&t.dispatchConfig.registrationName&&Ln(t._targetInst,null,t)}function Fn(t){ie(t,Dn)}var Un=null,jn=null,Vn=null;function qn(){if(Vn)return Vn;var t,e,n=jn,r=n.length,i="value"in Un?Un.value:Un.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var s=r-t;for(e=1;e<=s&&n[r-e]===i[o-e];e++);return Vn=i.slice(t,1<e?1-e:void 0)}function Bn(){return!0}function Wn(){return!1}function Hn(t,e,n,r){for(var i in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface)t.hasOwnProperty(i)&&((e=t[i])?this[i]=e(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Bn:Wn,this.isPropagationStopped=Wn,this}function zn(t,e,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,t,e,n,r),i}return new this(t,e,n,r)}function Gn(t){if(!(t instanceof this))throw Error(s(279));t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function Kn(t){t.eventPool=[],t.getPooled=zn,t.release=Gn}i(Hn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=Bn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=Bn)},persist:function(){this.isPersistent=Bn},isPersistent:Wn,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Wn,this._dispatchInstances=this._dispatchListeners=null}}),Hn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Hn.extend=function(t){function e(){}function n(){return r.apply(this,arguments)}var r=this;e.prototype=r.prototype;var o=new e;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,t),n.extend=r.extend,Kn(n),n},Kn(Hn);var Qn=Hn.extend({data:null}),Yn=Hn.extend({data:null}),Xn=[9,13,27,32],$n=k&&"CompositionEvent"in window,Jn=null;k&&"documentMode"in document&&(Jn=document.documentMode);var Zn=k&&"TextEvent"in window&&!Jn,tr=k&&(!$n||Jn&&8<Jn&&11>=Jn),er=String.fromCharCode(32),nr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},rr=!1;function ir(t,e){switch(t){case"keyup":return-1!==Xn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function or(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var sr=!1;var ar={eventTypes:nr,extractEvents:function(t,e,n,r){var i;if($n)t:{switch(t){case"compositionstart":var o=nr.compositionStart;break t;case"compositionend":o=nr.compositionEnd;break t;case"compositionupdate":o=nr.compositionUpdate;break t}o=void 0}else sr?ir(t,n)&&(o=nr.compositionEnd):"keydown"===t&&229===n.keyCode&&(o=nr.compositionStart);return o?(tr&&"ko"!==n.locale&&(sr||o!==nr.compositionStart?o===nr.compositionEnd&&sr&&(i=qn()):(jn="value"in(Un=r)?Un.value:Un.textContent,sr=!0)),o=Qn.getPooled(o,e,n,r),i?o.data=i:null!==(i=or(n))&&(o.data=i),Fn(o),i=o):i=null,(t=Zn?function(t,e){switch(t){case"compositionend":return or(e);case"keypress":return 32!==e.which?null:(rr=!0,er);case"textInput":return(t=e.data)===er&&rr?null:t;default:return null}}(t,n):function(t,e){if(sr)return"compositionend"===t||!$n&&ir(t,e)?(t=qn(),Vn=jn=Un=null,sr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tr&&"ko"!==e.locale?null:e.data;default:return null}}(t,n))?((e=Yn.getPooled(nr.beforeInput,e,n,r)).data=t,Fn(e)):e=null,null===i?e:null===e?i:[i,e]}},ur={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!ur[t.type]:"textarea"===e}var lr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function hr(t,e,n){return(t=Hn.getPooled(lr.change,t,e,n)).type="change",R(n),Fn(t),t}var fr=null,pr=null;function dr(t){ae(t)}function vr(t){if(wt(An(t)))return t}function yr(t,e){if("change"===t)return e}var gr=!1;function mr(){fr&&(fr.detachEvent("onpropertychange",br),pr=fr=null)}function br(t){if("value"===t.propertyName&&vr(pr))if(t=hr(pr,t,ue(t)),U)ae(t);else{U=!0;try{D(dr,t)}finally{U=!1,V()}}}function _r(t,e,n){"focus"===t?(mr(),pr=n,(fr=e).attachEvent("onpropertychange",br)):"blur"===t&&mr()}function wr(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return vr(pr)}function Er(t,e){if("click"===t)return vr(e)}function Tr(t,e){if("input"===t||"change"===t)return vr(e)}k&&(gr=ce("input")&&(!document.documentMode||9<document.documentMode));var Ir={eventTypes:lr,_isInputEventSupported:gr,extractEvents:function(t,e,n,r){var i=e?An(e):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var s=yr;else if(cr(i))if(gr)s=Tr;else{s=wr;var a=_r}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(s=Er);if(s&&(s=s(t,e)))return hr(s,n,r);a&&a(t,i,e),"blur"===t&&(t=i._wrapperState)&&t.controlled&&"number"===i.type&&kt(i,"number",i.value)}},Sr=Hn.extend({view:null,detail:null}),Cr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kr(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Cr[t])&&!!e[t]}function Nr(){return kr}var Ar=0,Or=0,Pr=!1,Rr=!1,xr=Sr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Nr,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=Ar;return Ar=t.screenX,Pr?"mousemove"===t.type?t.screenX-e:0:(Pr=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=Or;return Or=t.screenY,Rr?"mousemove"===t.type?t.screenY-e:0:(Rr=!0,0)}}),Dr=xr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Lr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Mr={eventTypes:Lr,extractEvents:function(t,e,n,r,i){var o="mouseover"===t||"pointerover"===t,s="mouseout"===t||"pointerout"===t;if(o&&0===(32&i)&&(n.relatedTarget||n.fromElement)||!s&&!o)return null;(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,s)?(s=e,null!==(e=(e=n.relatedTarget||n.toElement)?kn(e):null)&&(e!==Zt(e)||5!==e.tag&&6!==e.tag)&&(e=null)):s=null;if(s===e)return null;if("mouseout"===t||"mouseover"===t)var a=xr,u=Lr.mouseLeave,c=Lr.mouseEnter,l="mouse";else"pointerout"!==t&&"pointerover"!==t||(a=Dr,u=Lr.pointerLeave,c=Lr.pointerEnter,l="pointer");if(t=null==s?o:An(s),o=null==e?o:An(e),(u=a.getPooled(u,s,n,r)).type=l+"leave",u.target=t,u.relatedTarget=o,(n=a.getPooled(c,e,n,r)).type=l+"enter",n.target=o,n.relatedTarget=t,l=e,(r=s)&&l)t:{for(c=l,s=0,t=a=r;t;t=Pn(t))s++;for(t=0,e=c;e;e=Pn(e))t++;for(;0<s-t;)a=Pn(a),s--;for(;0<t-s;)c=Pn(c),t--;for(;s--;){if(a===c||a===c.alternate)break t;a=Pn(a),c=Pn(c)}a=null}else a=null;for(c=a,a=[];r&&r!==c&&(null===(s=r.alternate)||s!==c);)a.push(r),r=Pn(r);for(r=[];l&&l!==c&&(null===(s=l.alternate)||s!==c);)r.push(l),l=Pn(l);for(l=0;l<a.length;l++)Ln(a[l],"bubbled",u);for(l=r.length;0<l--;)Ln(r[l],"captured",n);return 0===(64&i)?[u]:[u,n]}};var Fr="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},Ur=Object.prototype.hasOwnProperty;function jr(t,e){if(Fr(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Ur.call(e,n[r])||!Fr(t[n[r]],e[n[r]]))return!1;return!0}var Vr=k&&"documentMode"in document&&11>=document.documentMode,qr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Br=null,Wr=null,Hr=null,zr=!1;function Gr(t,e){var n=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return zr||null==Br||Br!==ln(n)?null:("selectionStart"in(n=Br)&&dn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Hr&&jr(Hr,n)?null:(Hr=n,(t=Hn.getPooled(qr.select,Wr,t,e)).type="select",t.target=Br,Fn(t),t))}var Kr={eventTypes:qr,extractEvents:function(t,e,n,r,i,o){if(!(o=!(i=o||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){t:{i=Jt(i),o=S.onSelect;for(var s=0;s<o.length;s++)if(!i.has(o[s])){i=!1;break t}i=!0}o=!i}if(o)return null;switch(i=e?An(e):window,t){case"focus":(cr(i)||"true"===i.contentEditable)&&(Br=i,Wr=e,Hr=null);break;case"blur":Hr=Wr=Br=null;break;case"mousedown":zr=!0;break;case"contextmenu":case"mouseup":case"dragend":return zr=!1,Gr(n,r);case"selectionchange":if(Vr)break;case"keydown":case"keyup":return Gr(n,r)}return null}},Qr=Hn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Yr=Hn.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Xr=Sr.extend({relatedTarget:null});function $r(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}var Jr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ti=Sr.extend({key:function(t){if(t.key){var e=Jr[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=$r(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?Zr[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Nr,charCode:function(t){return"keypress"===t.type?$r(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?$r(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),ei=xr.extend({dataTransfer:null}),ni=Sr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Nr}),ri=Hn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ii=xr.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),oi={eventTypes:Fe,extractEvents:function(t,e,n,r){var i=Ue.get(t);if(!i)return null;switch(t){case"keypress":if(0===$r(n))return null;case"keydown":case"keyup":t=ti;break;case"blur":case"focus":t=Xr;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=xr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=ei;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=ni;break;case Gt:case Kt:case Qt:t=Qr;break;case Yt:t=ri;break;case"scroll":t=Sr;break;case"wheel":t=ii;break;case"copy":case"cut":case"paste":t=Yr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=Dr;break;default:t=Hn}return Fn(e=t.getPooled(i,e,n,r)),e}};if(m)throw Error(s(101));m=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),_(),d=On,v=Nn,y=An,C({SimpleEventPlugin:oi,EnterLeaveEventPlugin:Mr,ChangeEventPlugin:Ir,SelectEventPlugin:Kr,BeforeInputEventPlugin:ar});var si=[],ai=-1;function ui(t){0>ai||(t.current=si[ai],si[ai]=null,ai--)}function ci(t,e){ai++,si[ai]=t.current,t.current=e}var li={},hi={current:li},fi={current:!1},pi=li;function di(t,e){var n=t.type.contextTypes;if(!n)return li;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function vi(t){return null!==(t=t.childContextTypes)&&void 0!==t}function yi(){ui(fi),ui(hi)}function gi(t,e,n){if(hi.current!==li)throw Error(s(168));ci(hi,e),ci(fi,n)}function mi(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(s(108,yt(e)||"Unknown",o));return i({},n,{},r)}function bi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||li,pi=hi.current,ci(hi,t),ci(fi,fi.current),!0}function _i(t,e,n){var r=t.stateNode;if(!r)throw Error(s(169));n?(t=mi(t,e,pi),r.__reactInternalMemoizedMergedChildContext=t,ui(fi),ui(hi),ci(hi,t)):ui(fi),ci(fi,n)}var wi=o.unstable_runWithPriority,Ei=o.unstable_scheduleCallback,Ti=o.unstable_cancelCallback,Ii=o.unstable_requestPaint,Si=o.unstable_now,Ci=o.unstable_getCurrentPriorityLevel,ki=o.unstable_ImmediatePriority,Ni=o.unstable_UserBlockingPriority,Ai=o.unstable_NormalPriority,Oi=o.unstable_LowPriority,Pi=o.unstable_IdlePriority,Ri={},xi=o.unstable_shouldYield,Di=void 0!==Ii?Ii:function(){},Li=null,Mi=null,Fi=!1,Ui=Si(),ji=1e4>Ui?Si:function(){return Si()-Ui};function Vi(){switch(Ci()){case ki:return 99;case Ni:return 98;case Ai:return 97;case Oi:return 96;case Pi:return 95;default:throw Error(s(332))}}function qi(t){switch(t){case 99:return ki;case 98:return Ni;case 97:return Ai;case 96:return Oi;case 95:return Pi;default:throw Error(s(332))}}function Bi(t,e){return t=qi(t),wi(t,e)}function Wi(t,e,n){return t=qi(t),Ei(t,e,n)}function Hi(t){return null===Li?(Li=[t],Mi=Ei(ki,Gi)):Li.push(t),Ri}function zi(){if(null!==Mi){var t=Mi;Mi=null,Ti(t)}Gi()}function Gi(){if(!Fi&&null!==Li){Fi=!0;var t=0;try{var e=Li;Bi(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),Li=null}catch(n){throw null!==Li&&(Li=Li.slice(t+1)),Ei(ki,zi),n}finally{Fi=!1}}}function Ki(t,e,n){return 1073741821-(1+((1073741821-t+e/10)/(n/=10)|0))*n}function Qi(t,e){if(t&&t.defaultProps)for(var n in e=i({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}var Yi={current:null},Xi=null,$i=null,Ji=null;function Zi(){Ji=$i=Xi=null}function to(t){var e=Yi.current;ui(Yi),t.type._context._currentValue=e}function eo(t,e){for(;null!==t;){var n=t.alternate;if(t.childExpirationTime<e)t.childExpirationTime=e,null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e);else{if(!(null!==n&&n.childExpirationTime<e))break;n.childExpirationTime=e}t=t.return}}function no(t,e){Xi=t,Ji=$i=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(t.expirationTime>=e&&(Os=!0),t.firstContext=null)}function ro(t,e){if(Ji!==t&&!1!==e&&0!==e)if("number"===typeof e&&1073741823!==e||(Ji=t,e=1073741823),e={context:t,observedBits:e,next:null},null===$i){if(null===Xi)throw Error(s(308));$i=e,Xi.dependencies={expirationTime:0,firstContext:e,responders:null}}else $i=$i.next=e;return t._currentValue}var io=!1;function oo(t){t.updateQueue={baseState:t.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function so(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,baseQueue:t.baseQueue,shared:t.shared,effects:t.effects})}function ao(t,e){return(t={expirationTime:t,suspenseConfig:e,tag:0,payload:null,callback:null,next:null}).next=t}function uo(t,e){if(null!==(t=t.updateQueue)){var n=(t=t.shared).pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function co(t,e){var n=t.alternate;null!==n&&so(n,t),null===(n=(t=t.updateQueue).baseQueue)?(t.baseQueue=e.next=e,e.next=e):(e.next=n.next,n.next=e)}function lo(t,e,n,r){var o=t.updateQueue;io=!1;var s=o.baseQueue,a=o.shared.pending;if(null!==a){if(null!==s){var u=s.next;s.next=a.next,a.next=u}s=a,o.shared.pending=null,null!==(u=t.alternate)&&(null!==(u=u.updateQueue)&&(u.baseQueue=a))}if(null!==s){u=s.next;var c=o.baseState,l=0,h=null,f=null,p=null;if(null!==u)for(var d=u;;){if((a=d.expirationTime)<r){var v={expirationTime:d.expirationTime,suspenseConfig:d.suspenseConfig,tag:d.tag,payload:d.payload,callback:d.callback,next:null};null===p?(f=p=v,h=c):p=p.next=v,a>l&&(l=a)}else{null!==p&&(p=p.next={expirationTime:1073741823,suspenseConfig:d.suspenseConfig,tag:d.tag,payload:d.payload,callback:d.callback,next:null}),ou(a,d.suspenseConfig);t:{var y=t,g=d;switch(a=e,v=n,g.tag){case 1:if("function"===typeof(y=g.payload)){c=y.call(v,c,a);break t}c=y;break t;case 3:y.effectTag=-4097&y.effectTag|64;case 0:if(null===(a="function"===typeof(y=g.payload)?y.call(v,c,a):y)||void 0===a)break t;c=i({},c,a);break t;case 2:io=!0}}null!==d.callback&&(t.effectTag|=32,null===(a=o.effects)?o.effects=[d]:a.push(d))}if(null===(d=d.next)||d===u){if(null===(a=o.shared.pending))break;d=s.next=a.next,a.next=u,o.baseQueue=s=a,o.shared.pending=null}}null===p?h=c:p.next=f,o.baseState=h,o.baseQueue=p,su(l),t.expirationTime=l,t.memoizedState=c}}function ho(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var fo=X.ReactCurrentBatchConfig,po=(new r.Component).refs;function vo(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:i({},e,n),t.memoizedState=n,0===t.expirationTime&&(t.updateQueue.baseState=n)}var yo={isMounted:function(t){return!!(t=t._reactInternalFiber)&&Zt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternalFiber;var r=Ga(),i=fo.suspense;(i=ao(r=Ka(r,t,i),i)).payload=e,void 0!==n&&null!==n&&(i.callback=n),uo(t,i),Qa(t,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternalFiber;var r=Ga(),i=fo.suspense;(i=ao(r=Ka(r,t,i),i)).tag=1,i.payload=e,void 0!==n&&null!==n&&(i.callback=n),uo(t,i),Qa(t,r)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var n=Ga(),r=fo.suspense;(r=ao(n=Ka(n,t,r),r)).tag=2,void 0!==e&&null!==e&&(r.callback=e),uo(t,r),Qa(t,n)}};function go(t,e,n,r,i,o,s){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,s):!e.prototype||!e.prototype.isPureReactComponent||(!jr(n,r)||!jr(i,o))}function mo(t,e,n){var r=!1,i=li,o=e.contextType;return"object"===typeof o&&null!==o?o=ro(o):(i=vi(e)?pi:hi.current,o=(r=null!==(r=e.contextTypes)&&void 0!==r)?di(t,i):li),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=yo,t.stateNode=e,e._reactInternalFiber=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function bo(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&yo.enqueueReplaceState(e,e.state,null)}function _o(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=po,oo(t);var o=e.contextType;"object"===typeof o&&null!==o?i.context=ro(o):(o=vi(e)?pi:hi.current,i.context=di(t,o)),lo(t,n,i,r),i.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(vo(t,e,o,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&yo.enqueueReplaceState(i,i.state,null),lo(t,n,i,r),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.effectTag|=4)}var wo=Array.isArray;function Eo(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,t));var i=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===i?e.ref:((e=function(t){var e=r.refs;e===po&&(e=r.refs={}),null===t?delete e[i]:e[i]=t})._stringRef=i,e)}if("string"!==typeof t)throw Error(s(284));if(!n._owner)throw Error(s(290,t))}return t}function To(t,e){if("textarea"!==t.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,""))}function Io(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Cu(t,e)).index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.effectTag=2,n):r:(e.effectTag=2,n):n}function a(e){return t&&null===e.alternate&&(e.effectTag=2),e}function u(t,e,n,r){return null===e||6!==e.tag?((e=Au(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function c(t,e,n,r){return null!==e&&e.elementType===n.type?((r=i(e,n.props)).ref=Eo(t,e,n),r.return=t,r):((r=ku(n.type,n.key,n.props,null,t.mode,r)).ref=Eo(t,e,n),r.return=t,r)}function l(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Ou(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,o){return null===e||7!==e.tag?((e=Nu(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function f(t,e,n){if("string"===typeof e||"number"===typeof e)return(e=Au(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case tt:return(n=ku(e.type,e.key,e.props,null,t.mode,n)).ref=Eo(t,null,e),n.return=t,n;case et:return(e=Ou(e,t.mode,n)).return=t,e}if(wo(e)||vt(e))return(e=Nu(e,t.mode,n,null)).return=t,e;To(t,e)}return null}function p(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case tt:return n.key===i?n.type===nt?h(t,e,n.props.children,r,i):c(t,e,n,r):null;case et:return n.key===i?l(t,e,n,r):null}if(wo(n)||vt(n))return null!==i?null:h(t,e,n,r,null);To(t,n)}return null}function d(t,e,n,r,i){if("string"===typeof r||"number"===typeof r)return u(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case tt:return t=t.get(null===r.key?n:r.key)||null,r.type===nt?h(e,t,r.props.children,i,r.key):c(e,t,r,i);case et:return l(e,t=t.get(null===r.key?n:r.key)||null,r,i)}if(wo(r)||vt(r))return h(e,t=t.get(n)||null,r,i,null);To(e,r)}return null}function v(i,s,a,u){for(var c=null,l=null,h=s,v=s=0,y=null;null!==h&&v<a.length;v++){h.index>v?(y=h,h=null):y=h.sibling;var g=p(i,h,a[v],u);if(null===g){null===h&&(h=y);break}t&&h&&null===g.alternate&&e(i,h),s=o(g,s,v),null===l?c=g:l.sibling=g,l=g,h=y}if(v===a.length)return n(i,h),c;if(null===h){for(;v<a.length;v++)null!==(h=f(i,a[v],u))&&(s=o(h,s,v),null===l?c=h:l.sibling=h,l=h);return c}for(h=r(i,h);v<a.length;v++)null!==(y=d(h,i,v,a[v],u))&&(t&&null!==y.alternate&&h.delete(null===y.key?v:y.key),s=o(y,s,v),null===l?c=y:l.sibling=y,l=y);return t&&h.forEach((function(t){return e(i,t)})),c}function y(i,a,u,c){var l=vt(u);if("function"!==typeof l)throw Error(s(150));if(null==(u=l.call(u)))throw Error(s(151));for(var h=l=null,v=a,y=a=0,g=null,m=u.next();null!==v&&!m.done;y++,m=u.next()){v.index>y?(g=v,v=null):g=v.sibling;var b=p(i,v,m.value,c);if(null===b){null===v&&(v=g);break}t&&v&&null===b.alternate&&e(i,v),a=o(b,a,y),null===h?l=b:h.sibling=b,h=b,v=g}if(m.done)return n(i,v),l;if(null===v){for(;!m.done;y++,m=u.next())null!==(m=f(i,m.value,c))&&(a=o(m,a,y),null===h?l=m:h.sibling=m,h=m);return l}for(v=r(i,v);!m.done;y++,m=u.next())null!==(m=d(v,i,y,m.value,c))&&(t&&null!==m.alternate&&v.delete(null===m.key?y:m.key),a=o(m,a,y),null===h?l=m:h.sibling=m,h=m);return t&&v.forEach((function(t){return e(i,t)})),l}return function(t,r,o,u){var c="object"===typeof o&&null!==o&&o.type===nt&&null===o.key;c&&(o=o.props.children);var l="object"===typeof o&&null!==o;if(l)switch(o.$$typeof){case tt:t:{for(l=o.key,c=r;null!==c;){if(c.key===l){switch(c.tag){case 7:if(o.type===nt){n(t,c.sibling),(r=i(c,o.props.children)).return=t,t=r;break t}break;default:if(c.elementType===o.type){n(t,c.sibling),(r=i(c,o.props)).ref=Eo(t,c,o),r.return=t,t=r;break t}}n(t,c);break}e(t,c),c=c.sibling}o.type===nt?((r=Nu(o.props.children,t.mode,u,o.key)).return=t,t=r):((u=ku(o.type,o.key,o.props,null,t.mode,u)).ref=Eo(t,r,o),u.return=t,t=u)}return a(t);case et:t:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(t,r.sibling),(r=i(r,o.children||[])).return=t,t=r;break t}n(t,r);break}e(t,r),r=r.sibling}(r=Ou(o,t.mode,u)).return=t,t=r}return a(t)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(t,r.sibling),(r=i(r,o)).return=t,t=r):(n(t,r),(r=Au(o,t.mode,u)).return=t,t=r),a(t);if(wo(o))return v(t,r,o,u);if(vt(o))return y(t,r,o,u);if(l&&To(t,o),"undefined"===typeof o&&!c)switch(t.tag){case 1:case 0:throw t=t.type,Error(s(152,t.displayName||t.name||"Component"))}return n(t,r)}}var So=Io(!0),Co=Io(!1),ko={},No={current:ko},Ao={current:ko},Oo={current:ko};function Po(t){if(t===ko)throw Error(s(174));return t}function Ro(t,e){switch(ci(Oo,e),ci(Ao,t),ci(No,ko),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ft(null,"");break;default:e=Ft(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}ui(No),ci(No,e)}function xo(){ui(No),ui(Ao),ui(Oo)}function Do(t){Po(Oo.current);var e=Po(No.current),n=Ft(e,t.type);e!==n&&(ci(Ao,t),ci(No,n))}function Lo(t){Ao.current===t&&(ui(No),ui(Ao))}var Mo={current:0};function Fo(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(64&e.effectTag))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function Uo(t,e){return{responder:t,props:e}}var jo=X.ReactCurrentDispatcher,Vo=X.ReactCurrentBatchConfig,qo=0,Bo=null,Wo=null,Ho=null,zo=!1;function Go(){throw Error(s(321))}function Ko(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Fr(t[n],e[n]))return!1;return!0}function Qo(t,e,n,r,i,o){if(qo=o,Bo=e,e.memoizedState=null,e.updateQueue=null,e.expirationTime=0,jo.current=null===t||null===t.memoizedState?gs:ms,t=n(r,i),e.expirationTime===qo){o=0;do{if(e.expirationTime=0,!(25>o))throw Error(s(301));o+=1,Ho=Wo=null,e.updateQueue=null,jo.current=bs,t=n(r,i)}while(e.expirationTime===qo)}if(jo.current=ys,e=null!==Wo&&null!==Wo.next,qo=0,Ho=Wo=Bo=null,zo=!1,e)throw Error(s(300));return t}function Yo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ho?Bo.memoizedState=Ho=t:Ho=Ho.next=t,Ho}function Xo(){if(null===Wo){var t=Bo.alternate;t=null!==t?t.memoizedState:null}else t=Wo.next;var e=null===Ho?Bo.memoizedState:Ho.next;if(null!==e)Ho=e,Wo=t;else{if(null===t)throw Error(s(310));t={memoizedState:(Wo=t).memoizedState,baseState:Wo.baseState,baseQueue:Wo.baseQueue,queue:Wo.queue,next:null},null===Ho?Bo.memoizedState=Ho=t:Ho=Ho.next=t}return Ho}function $o(t,e){return"function"===typeof e?e(t):e}function Jo(t){var e=Xo(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var r=Wo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=a=o=null,c=i;do{var l=c.expirationTime;if(l<qo){var h={expirationTime:c.expirationTime,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(a=u=h,o=r):u=u.next=h,l>Bo.expirationTime&&(Bo.expirationTime=l,su(l))}else null!==u&&(u=u.next={expirationTime:1073741823,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),ou(l,c.suspenseConfig),r=c.eagerReducer===t?c.eagerState:t(r,c.action);c=c.next}while(null!==c&&c!==i);null===u?o=r:u.next=a,Fr(r,e.memoizedState)||(Os=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function Zo(t){var e=Xo(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=t(o,a.action),a=a.next}while(a!==i);Fr(o,e.memoizedState)||(Os=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function ts(t){var e=Yo();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:$o,lastRenderedState:t}).dispatch=vs.bind(null,Bo,t),[e.memoizedState,t]}function es(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=Bo.updateQueue)?(e={lastEffect:null},Bo.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function ns(){return Xo().memoizedState}function rs(t,e,n,r){var i=Yo();Bo.effectTag|=t,i.memoizedState=es(1|e,n,void 0,void 0===r?null:r)}function is(t,e,n,r){var i=Xo();r=void 0===r?null:r;var o=void 0;if(null!==Wo){var s=Wo.memoizedState;if(o=s.destroy,null!==r&&Ko(r,s.deps))return void es(e,n,o,r)}Bo.effectTag|=t,i.memoizedState=es(1|e,n,o,r)}function os(t,e){return rs(516,4,t,e)}function ss(t,e){return is(516,4,t,e)}function as(t,e){return is(4,2,t,e)}function us(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function cs(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,is(4,2,us.bind(null,e,t),n)}function ls(){}function hs(t,e){return Yo().memoizedState=[t,void 0===e?null:e],t}function fs(t,e){var n=Xo();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Ko(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ps(t,e){var n=Xo();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Ko(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ds(t,e,n){var r=Vi();Bi(98>r?98:r,(function(){t(!0)})),Bi(97<r?97:r,(function(){var r=Vo.suspense;Vo.suspense=void 0===e?null:e;try{t(!1),n()}finally{Vo.suspense=r}}))}function vs(t,e,n){var r=Ga(),i=fo.suspense;i={expirationTime:r=Ka(r,t,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var o=e.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),e.pending=i,o=t.alternate,t===Bo||null!==o&&o===Bo)zo=!0,i.expirationTime=qo,Bo.expirationTime=qo;else{if(0===t.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=e.lastRenderedReducer))try{var s=e.lastRenderedState,a=o(s,n);if(i.eagerReducer=o,i.eagerState=a,Fr(a,s))return}catch(u){}Qa(t,r)}}var ys={readContext:ro,useCallback:Go,useContext:Go,useEffect:Go,useImperativeHandle:Go,useLayoutEffect:Go,useMemo:Go,useReducer:Go,useRef:Go,useState:Go,useDebugValue:Go,useResponder:Go,useDeferredValue:Go,useTransition:Go},gs={readContext:ro,useCallback:hs,useContext:ro,useEffect:os,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,rs(4,2,us.bind(null,e,t),n)},useLayoutEffect:function(t,e){return rs(4,2,t,e)},useMemo:function(t,e){var n=Yo();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Yo();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t=(t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=vs.bind(null,Bo,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},Yo().memoizedState=t},useState:ts,useDebugValue:ls,useResponder:Uo,useDeferredValue:function(t,e){var n=ts(t),r=n[0],i=n[1];return os((function(){var n=Vo.suspense;Vo.suspense=void 0===e?null:e;try{i(t)}finally{Vo.suspense=n}}),[t,e]),r},useTransition:function(t){var e=ts(!1),n=e[0];return e=e[1],[hs(ds.bind(null,e,t),[e,t]),n]}},ms={readContext:ro,useCallback:fs,useContext:ro,useEffect:ss,useImperativeHandle:cs,useLayoutEffect:as,useMemo:ps,useReducer:Jo,useRef:ns,useState:function(){return Jo($o)},useDebugValue:ls,useResponder:Uo,useDeferredValue:function(t,e){var n=Jo($o),r=n[0],i=n[1];return ss((function(){var n=Vo.suspense;Vo.suspense=void 0===e?null:e;try{i(t)}finally{Vo.suspense=n}}),[t,e]),r},useTransition:function(t){var e=Jo($o),n=e[0];return e=e[1],[fs(ds.bind(null,e,t),[e,t]),n]}},bs={readContext:ro,useCallback:fs,useContext:ro,useEffect:ss,useImperativeHandle:cs,useLayoutEffect:as,useMemo:ps,useReducer:Zo,useRef:ns,useState:function(){return Zo($o)},useDebugValue:ls,useResponder:Uo,useDeferredValue:function(t,e){var n=Zo($o),r=n[0],i=n[1];return ss((function(){var n=Vo.suspense;Vo.suspense=void 0===e?null:e;try{i(t)}finally{Vo.suspense=n}}),[t,e]),r},useTransition:function(t){var e=Zo($o),n=e[0];return e=e[1],[fs(ds.bind(null,e,t),[e,t]),n]}},_s=null,ws=null,Es=!1;function Ts(t,e){var n=Iu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function Is(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function Ss(t){if(Es){var e=ws;if(e){var n=e;if(!Is(t,e)){if(!(e=wn(n.nextSibling))||!Is(t,e))return t.effectTag=-1025&t.effectTag|2,Es=!1,void(_s=t);Ts(_s,n)}_s=t,ws=wn(e.firstChild)}else t.effectTag=-1025&t.effectTag|2,Es=!1,_s=t}}function Cs(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;_s=t}function ks(t){if(t!==_s)return!1;if(!Es)return Cs(t),Es=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!mn(e,t.memoizedProps))for(e=ws;e;)Ts(t,e),e=wn(e.nextSibling);if(Cs(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(s(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){ws=wn(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}ws=null}}else ws=_s?wn(t.stateNode.nextSibling):null;return!0}function Ns(){ws=_s=null,Es=!1}var As=X.ReactCurrentOwner,Os=!1;function Ps(t,e,n,r){e.child=null===t?Co(e,null,n,r):So(e,t.child,n,r)}function Rs(t,e,n,r,i){n=n.render;var o=e.ref;return no(e,i),r=Qo(t,e,n,r,o,i),null===t||Os?(e.effectTag|=1,Ps(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),Qs(t,e,i))}function xs(t,e,n,r,i,o){if(null===t){var s=n.type;return"function"!==typeof s||Su(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=ku(n.type,null,r,null,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=s,Ds(t,e,s,r,i,o))}return s=t.child,i<o&&(i=s.memoizedProps,(n=null!==(n=n.compare)?n:jr)(i,r)&&t.ref===e.ref)?Qs(t,e,o):(e.effectTag|=1,(t=Cu(s,r)).ref=e.ref,t.return=e,e.child=t)}function Ds(t,e,n,r,i,o){return null!==t&&jr(t.memoizedProps,r)&&t.ref===e.ref&&(Os=!1,i<o)?(e.expirationTime=t.expirationTime,Qs(t,e,o)):Ms(t,e,n,r,o)}function Ls(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function Ms(t,e,n,r,i){var o=vi(n)?pi:hi.current;return o=di(e,o),no(e,i),n=Qo(t,e,n,r,o,i),null===t||Os?(e.effectTag|=1,Ps(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),Qs(t,e,i))}function Fs(t,e,n,r,i){if(vi(n)){var o=!0;bi(e)}else o=!1;if(no(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),mo(e,n,r),_o(e,n,r,i),r=!0;else if(null===t){var s=e.stateNode,a=e.memoizedProps;s.props=a;var u=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=ro(c):c=di(e,c=vi(n)?pi:hi.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||u!==c)&&bo(e,s,r,c),io=!1;var f=e.memoizedState;s.state=f,lo(e,r,s,i),u=e.memoizedState,a!==r||f!==u||fi.current||io?("function"===typeof l&&(vo(e,n,l,r),u=e.memoizedState),(a=io||go(e,n,a,r,f,u,c))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(e.effectTag|=4)):("function"===typeof s.componentDidMount&&(e.effectTag|=4),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=c,r=a):("function"===typeof s.componentDidMount&&(e.effectTag|=4),r=!1)}else s=e.stateNode,so(t,e),a=e.memoizedProps,s.props=e.type===e.elementType?a:Qi(e.type,a),u=s.context,"object"===typeof(c=n.contextType)&&null!==c?c=ro(c):c=di(e,c=vi(n)?pi:hi.current),(h="function"===typeof(l=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||u!==c)&&bo(e,s,r,c),io=!1,u=e.memoizedState,s.state=u,lo(e,r,s,i),f=e.memoizedState,a!==r||u!==f||fi.current||io?("function"===typeof l&&(vo(e,n,l,r),f=e.memoizedState),(l=io||go(e,n,a,r,u,f,c))?(h||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,c),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,c)),"function"===typeof s.componentDidUpdate&&(e.effectTag|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),e.memoizedProps=r,e.memoizedState=f),s.props=r,s.state=f,s.context=c,r=l):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),r=!1);return Us(t,e,n,r,o,i)}function Us(t,e,n,r,i,o){Ls(t,e);var s=0!==(64&e.effectTag);if(!r&&!s)return i&&_i(e,n,!1),Qs(t,e,o);r=e.stateNode,As.current=e;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.effectTag|=1,null!==t&&s?(e.child=So(e,t.child,null,o),e.child=So(e,null,a,o)):Ps(t,e,a,o),e.memoizedState=r.state,i&&_i(e,n,!0),e.child}function js(t){var e=t.stateNode;e.pendingContext?gi(0,e.pendingContext,e.pendingContext!==e.context):e.context&&gi(0,e.context,!1),Ro(t,e.containerInfo)}var Vs,qs,Bs,Ws={dehydrated:null,retryTime:0};function Hs(t,e,n){var r,i=e.mode,o=e.pendingProps,s=Mo.current,a=!1;if((r=0!==(64&e.effectTag))||(r=0!==(2&s)&&(null===t||null!==t.memoizedState)),r?(a=!0,e.effectTag&=-65):null!==t&&null===t.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(s|=1),ci(Mo,1&s),null===t){if(void 0!==o.fallback&&Ss(e),a){if(a=o.fallback,(o=Nu(null,i,0,null)).return=e,0===(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(n=Nu(a,i,n,null)).return=e,o.sibling=n,e.memoizedState=Ws,e.child=o,n}return i=o.children,e.memoizedState=null,e.child=Co(e,null,i,n)}if(null!==t.memoizedState){if(i=(t=t.child).sibling,a){if(o=o.fallback,(n=Cu(t,t.pendingProps)).return=e,0===(2&e.mode)&&(a=null!==e.memoizedState?e.child.child:e.child)!==t.child)for(n.child=a;null!==a;)a.return=n,a=a.sibling;return(i=Cu(i,o)).return=e,n.sibling=i,n.childExpirationTime=0,e.memoizedState=Ws,e.child=n,i}return n=So(e,t.child,o.children,n),e.memoizedState=null,e.child=n}if(t=t.child,a){if(a=o.fallback,(o=Nu(null,i,0,null)).return=e,o.child=t,null!==t&&(t.return=o),0===(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(n=Nu(a,i,n,null)).return=e,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,e.memoizedState=Ws,e.child=o,n}return e.memoizedState=null,e.child=So(e,t,o.children,n)}function zs(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e),eo(t.return,e)}function Gs(t,e,n,r,i,o){var s=t.memoizedState;null===s?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailExpiration=0,s.tailMode=i,s.lastEffect=o)}function Ks(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Ps(t,e,r.children,n),0!==(2&(r=Mo.current)))r=1&r|2,e.effectTag|=64;else{if(null!==t&&0!==(64&t.effectTag))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&zs(t,n);else if(19===t.tag)zs(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ci(Mo,r),0===(2&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===Fo(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Gs(e,!1,i,n,o,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===Fo(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Gs(e,!0,n,null,o,e.lastEffect);break;case"together":Gs(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function Qs(t,e,n){null!==t&&(e.dependencies=t.dependencies);var r=e.expirationTime;if(0!==r&&su(r),e.childExpirationTime<n)return null;if(null!==t&&e.child!==t.child)throw Error(s(153));if(null!==e.child){for(n=Cu(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Cu(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Ys(t,e){switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Xs(t,e,n){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return vi(e.type)&&yi(),null;case 3:return xo(),ui(fi),ui(hi),(n=e.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==t&&null!==t.child||!ks(e)||(e.effectTag|=4),null;case 5:Lo(e),n=Po(Oo.current);var o=e.type;if(null!==t&&null!=e.stateNode)qs(t,e,o,r,n),t.ref!==e.ref&&(e.effectTag|=128);else{if(!r){if(null===e.stateNode)throw Error(s(166));return null}if(t=Po(No.current),ks(e)){r=e.stateNode,o=e.type;var a=e.memoizedProps;switch(r[In]=e,r[Sn]=a,o){case"iframe":case"object":case"embed":Ke("load",r);break;case"video":case"audio":for(t=0;t<Xt.length;t++)Ke(Xt[t],r);break;case"source":Ke("error",r);break;case"img":case"image":case"link":Ke("error",r),Ke("load",r);break;case"form":Ke("reset",r),Ke("submit",r);break;case"details":Ke("toggle",r);break;case"input":Tt(r,a),Ke("invalid",r),un(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ke("invalid",r),un(n,"onChange");break;case"textarea":Pt(r,a),Ke("invalid",r),un(n,"onChange")}for(var u in on(o,a),t=null,a)if(a.hasOwnProperty(u)){var c=a[u];"children"===u?"string"===typeof c?r.textContent!==c&&(t=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(t=["children",""+c]):I.hasOwnProperty(u)&&null!=c&&un(n,u)}switch(o){case"input":_t(r),Ct(r,a,!0);break;case"textarea":_t(r),xt(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=cn)}n=t,e.updateQueue=n,null!==n&&(e.effectTag|=4)}else{switch(u=9===n.nodeType?n:n.ownerDocument,t===an&&(t=Mt(o)),t===an?"script"===o?((t=u.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=u.createElement(o,{is:r.is}):(t=u.createElement(o),"select"===o&&(u=t,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):t=u.createElementNS(t,o),t[In]=e,t[Sn]=r,Vs(t,e),e.stateNode=t,u=sn(o,r),o){case"iframe":case"object":case"embed":Ke("load",t),c=r;break;case"video":case"audio":for(c=0;c<Xt.length;c++)Ke(Xt[c],t);c=r;break;case"source":Ke("error",t),c=r;break;case"img":case"image":case"link":Ke("error",t),Ke("load",t),c=r;break;case"form":Ke("reset",t),Ke("submit",t),c=r;break;case"details":Ke("toggle",t),c=r;break;case"input":Tt(t,r),c=Et(t,r),Ke("invalid",t),un(n,"onChange");break;case"option":c=Nt(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},c=i({},r,{value:void 0}),Ke("invalid",t),un(n,"onChange");break;case"textarea":Pt(t,r),c=Ot(t,r),Ke("invalid",t),un(n,"onChange");break;default:c=r}on(o,c);var l=c;for(a in l)if(l.hasOwnProperty(a)){var h=l[a];"style"===a?nn(t,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&jt(t,h):"children"===a?"string"===typeof h?("textarea"!==o||""!==h)&&Vt(t,h):"number"===typeof h&&Vt(t,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(I.hasOwnProperty(a)?null!=h&&un(n,a):null!=h&&$(t,a,h,u))}switch(o){case"input":_t(t),Ct(t,r,!1);break;case"textarea":_t(t),xt(t);break;case"option":null!=r.value&&t.setAttribute("value",""+mt(r.value));break;case"select":t.multiple=!!r.multiple,null!=(n=r.value)?At(t,!!r.multiple,n,!1):null!=r.defaultValue&&At(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof c.onClick&&(t.onclick=cn)}gn(o,r)&&(e.effectTag|=4)}null!==e.ref&&(e.effectTag|=128)}return null;case 6:if(t&&null!=e.stateNode)Bs(0,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(s(166));n=Po(Oo.current),Po(No.current),ks(e)?(n=e.stateNode,r=e.memoizedProps,n[In]=e,n.nodeValue!==r&&(e.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[In]=e,e.stateNode=n)}return null;case 13:return ui(Mo),r=e.memoizedState,0!==(64&e.effectTag)?(e.expirationTime=n,e):(n=null!==r,r=!1,null===t?void 0!==e.memoizedProps.fallback&&ks(e):(r=null!==(o=t.memoizedState),n||null===o||null!==(o=t.child.sibling)&&(null!==(a=e.firstEffect)?(e.firstEffect=o,o.nextEffect=a):(e.firstEffect=e.lastEffect=o,o.nextEffect=null),o.effectTag=8)),n&&!r&&0!==(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!==(1&Mo.current)?ka===_a&&(ka=wa):(ka!==_a&&ka!==wa||(ka=Ea),0!==Ra&&null!==Ia&&(xu(Ia,Ca),Du(Ia,Ra)))),(n||r)&&(e.effectTag|=4),null);case 4:return xo(),null;case 10:return to(e),null;case 17:return vi(e.type)&&yi(),null;case 19:if(ui(Mo),null===(r=e.memoizedState))return null;if(o=0!==(64&e.effectTag),null===(a=r.rendering)){if(o)Ys(r,!1);else if(ka!==_a||null!==t&&0!==(64&t.effectTag))for(a=e.child;null!==a;){if(null!==(t=Fo(a))){for(e.effectTag|=64,Ys(r,!1),null!==(o=t.updateQueue)&&(e.updateQueue=o,e.effectTag|=4),null===r.lastEffect&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=e.child;null!==r;)a=n,(o=r).effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(t=o.alternate)?(o.childExpirationTime=0,o.expirationTime=a,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=t.childExpirationTime,o.expirationTime=t.expirationTime,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,a=t.dependencies,o.dependencies=null===a?null:{expirationTime:a.expirationTime,firstContext:a.firstContext,responders:a.responders}),r=r.sibling;return ci(Mo,1&Mo.current|2),e.child}a=a.sibling}}else{if(!o)if(null!==(t=Fo(a))){if(e.effectTag|=64,o=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.effectTag|=4),Ys(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate)return null!==(e=e.lastEffect=r.lastEffect)&&(e.nextEffect=null),null}else 2*ji()-r.renderingStartTime>r.tailExpiration&&1<n&&(e.effectTag|=64,o=!0,Ys(r,!1),e.expirationTime=e.childExpirationTime=n-1);r.isBackwards?(a.sibling=e.child,e.child=a):(null!==(n=r.last)?n.sibling=a:e.child=a,r.last=a)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=ji()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=ji(),n.sibling=null,e=Mo.current,ci(Mo,o?1&e|2:1&e),n):null}throw Error(s(156,e.tag))}function $s(t){switch(t.tag){case 1:vi(t.type)&&yi();var e=t.effectTag;return 4096&e?(t.effectTag=-4097&e|64,t):null;case 3:if(xo(),ui(fi),ui(hi),0!==(64&(e=t.effectTag)))throw Error(s(285));return t.effectTag=-4097&e|64,t;case 5:return Lo(t),null;case 13:return ui(Mo),4096&(e=t.effectTag)?(t.effectTag=-4097&e|64,t):null;case 19:return ui(Mo),null;case 4:return xo(),null;case 10:return to(t),null;default:return null}}function Js(t,e){return{value:t,source:e,stack:gt(e)}}Vs=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},qs=function(t,e,n,r,o){var s=t.memoizedProps;if(s!==r){var a,u,c=e.stateNode;switch(Po(No.current),t=null,n){case"input":s=Et(c,s),r=Et(c,r),t=[];break;case"option":s=Nt(c,s),r=Nt(c,r),t=[];break;case"select":s=i({},s,{value:void 0}),r=i({},r,{value:void 0}),t=[];break;case"textarea":s=Ot(c,s),r=Ot(c,r),t=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(c.onclick=cn)}for(a in on(n,r),n=null,s)if(!r.hasOwnProperty(a)&&s.hasOwnProperty(a)&&null!=s[a])if("style"===a)for(u in c=s[a])c.hasOwnProperty(u)&&(n||(n={}),n[u]="");else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(I.hasOwnProperty(a)?t||(t=[]):(t=t||[]).push(a,null));for(a in r){var l=r[a];if(c=null!=s?s[a]:void 0,r.hasOwnProperty(a)&&l!==c&&(null!=l||null!=c))if("style"===a)if(c){for(u in c)!c.hasOwnProperty(u)||l&&l.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in l)l.hasOwnProperty(u)&&c[u]!==l[u]&&(n||(n={}),n[u]=l[u])}else n||(t||(t=[]),t.push(a,n)),n=l;else"dangerouslySetInnerHTML"===a?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(t=t||[]).push(a,l)):"children"===a?c===l||"string"!==typeof l&&"number"!==typeof l||(t=t||[]).push(a,""+l):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&(I.hasOwnProperty(a)?(null!=l&&un(o,a),t||c===l||(t=[])):(t=t||[]).push(a,l))}n&&(t=t||[]).push("style",n),o=t,(e.updateQueue=o)&&(e.effectTag|=4)}},Bs=function(t,e,n,r){n!==r&&(e.effectTag|=4)};var Zs="function"===typeof WeakSet?WeakSet:Set;function ta(t,e){var n=e.source,r=e.stack;null===r&&null!==n&&(r=gt(n)),null!==n&&yt(n.type),e=e.value,null!==t&&1===t.tag&&yt(t.type);try{console.error(e)}catch(i){setTimeout((function(){throw i}))}}function ea(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(n){mu(t,n)}else e.current=null}function na(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&e.effectTag&&null!==t){var n=t.memoizedProps,r=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:Qi(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(s(163))}function ra(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==e)}}function ia(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function oa(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:return void ia(3,n);case 1:if(t=n.stateNode,4&n.effectTag)if(null===e)t.componentDidMount();else{var r=n.elementType===n.type?e.memoizedProps:Qi(n.type,e.memoizedProps);t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate)}return void(null!==(e=n.updateQueue)&&ho(n,e,t));case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}ho(n,e,t)}return;case 5:return t=n.stateNode,void(null===e&&4&n.effectTag&&gn(n.type,n.memoizedProps)&&t.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Me(n)))));case 19:case 17:case 20:case 21:return}throw Error(s(163))}function sa(t,e,n){switch("function"===typeof Eu&&Eu(e),e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var r=t.next;Bi(97<n?97:n,(function(){var t=r;do{var n=t.destroy;if(void 0!==n){var i=e;try{n()}catch(o){mu(i,o)}}t=t.next}while(t!==r)}))}break;case 1:ea(e),"function"===typeof(n=e.stateNode).componentWillUnmount&&function(t,e){try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(n){mu(t,n)}}(e,n);break;case 5:ea(e);break;case 4:la(t,e,n)}}function aa(t){var e=t.alternate;t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.alternate=null,t.firstEffect=null,t.lastEffect=null,t.pendingProps=null,t.memoizedProps=null,t.stateNode=null,null!==e&&aa(e)}function ua(t){return 5===t.tag||3===t.tag||4===t.tag}function ca(t){t:{for(var e=t.return;null!==e;){if(ua(e)){var n=e;break t}e=e.return}throw Error(s(160))}switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:e=e.containerInfo,r=!0;break;default:throw Error(s(161))}16&n.effectTag&&(Vt(e,""),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||ua(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break t}}r?function t(e,n,r){var i=e.tag,o=5===i||6===i;if(o)e=o?e.stateNode:e.stateNode.instance,n?8===r.nodeType?r.parentNode.insertBefore(e,n):r.insertBefore(e,n):(8===r.nodeType?(n=r.parentNode).insertBefore(e,r):(n=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==n.onclick||(n.onclick=cn));else if(4!==i&&null!==(e=e.child))for(t(e,n,r),e=e.sibling;null!==e;)t(e,n,r),e=e.sibling}(t,n,e):function t(e,n,r){var i=e.tag,o=5===i||6===i;if(o)e=o?e.stateNode:e.stateNode.instance,n?r.insertBefore(e,n):r.appendChild(e);else if(4!==i&&null!==(e=e.child))for(t(e,n,r),e=e.sibling;null!==e;)t(e,n,r),e=e.sibling}(t,n,e)}function la(t,e,n){for(var r,i,o=e,a=!1;;){if(!a){a=o.return;t:for(;;){if(null===a)throw Error(s(160));switch(r=a.stateNode,a.tag){case 5:i=!1;break t;case 3:case 4:r=r.containerInfo,i=!0;break t}a=a.return}a=!0}if(5===o.tag||6===o.tag){t:for(var u=t,c=o,l=n,h=c;;)if(sa(u,h,l),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===c)break t;for(;null===h.sibling;){if(null===h.return||h.return===c)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i?(u=r,c=o.stateNode,8===u.nodeType?u.parentNode.removeChild(c):u.removeChild(c)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(sa(t,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;4===(o=o.return).tag&&(a=!1)}o.sibling.return=o.return,o=o.sibling}}function ha(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:return void ra(3,e);case 1:return;case 5:var n=e.stateNode;if(null!=n){var r=e.memoizedProps,i=null!==t?t.memoizedProps:r;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(n[Sn]=r,"input"===t&&"radio"===r.type&&null!=r.name&&It(n,r),sn(t,i),e=sn(t,r),i=0;i<o.length;i+=2){var a=o[i],u=o[i+1];"style"===a?nn(n,u):"dangerouslySetInnerHTML"===a?jt(n,u):"children"===a?Vt(n,u):$(n,a,u,e)}switch(t){case"input":St(n,r);break;case"textarea":Rt(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(t=r.value)?At(n,!!r.multiple,t,!1):e!==!!r.multiple&&(null!=r.defaultValue?At(n,!!r.multiple,r.defaultValue,!0):At(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(s(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((e=e.stateNode).hydrate&&(e.hydrate=!1,Me(e.containerInfo)));case 12:return;case 13:if(n=e,null===e.memoizedState?r=!1:(r=!0,n=e.child,Da=ji()),null!==n)t:for(t=n;;){if(5===t.tag)o=t.stateNode,r?"function"===typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=t.stateNode,i=void 0!==(i=t.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,o.style.display=en("display",i));else if(6===t.tag)t.stateNode.nodeValue=r?"":t.memoizedProps;else{if(13===t.tag&&null!==t.memoizedState&&null===t.memoizedState.dehydrated){(o=t.child.sibling).return=t,t=o;continue}if(null!==t.child){t.child.return=t,t=t.child;continue}}if(t===n)break;for(;null===t.sibling;){if(null===t.return||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}return void fa(e);case 19:return void fa(e);case 17:return}throw Error(s(163))}function fa(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Zs),e.forEach((function(e){var r=_u.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}var pa="function"===typeof WeakMap?WeakMap:Map;function da(t,e,n){(n=ao(n,null)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ma||(Ma=!0,Fa=r),ta(t,e)},n}function va(t,e,n){(n=ao(n,null)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return ta(t,e),r(i)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Ua?Ua=new Set([this]):Ua.add(this),ta(t,e));var n=e.stack;this.componentDidCatch(e.value,{componentStack:null!==n?n:""})}),n}var ya,ga=Math.ceil,ma=X.ReactCurrentDispatcher,ba=X.ReactCurrentOwner,_a=0,wa=3,Ea=4,Ta=0,Ia=null,Sa=null,Ca=0,ka=_a,Na=null,Aa=1073741823,Oa=1073741823,Pa=null,Ra=0,xa=!1,Da=0,La=null,Ma=!1,Fa=null,Ua=null,ja=!1,Va=null,qa=90,Ba=null,Wa=0,Ha=null,za=0;function Ga(){return 0!==(48&Ta)?1073741821-(ji()/10|0):0!==za?za:za=1073741821-(ji()/10|0)}function Ka(t,e,n){if(0===(2&(e=e.mode)))return 1073741823;var r=Vi();if(0===(4&e))return 99===r?1073741823:1073741822;if(0!==(16&Ta))return Ca;if(null!==n)t=Ki(t,0|n.timeoutMs||5e3,250);else switch(r){case 99:t=1073741823;break;case 98:t=Ki(t,150,100);break;case 97:case 96:t=Ki(t,5e3,250);break;case 95:t=2;break;default:throw Error(s(326))}return null!==Ia&&t===Ca&&--t,t}function Qa(t,e){if(50<Wa)throw Wa=0,Ha=null,Error(s(185));if(null!==(t=Ya(t,e))){var n=Vi();1073741823===e?0!==(8&Ta)&&0===(48&Ta)?Za(t):($a(t),0===Ta&&zi()):$a(t),0===(4&Ta)||98!==n&&99!==n||(null===Ba?Ba=new Map([[t,e]]):(void 0===(n=Ba.get(t))||n>e)&&Ba.set(t,e))}}function Ya(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e);var r=t.return,i=null;if(null===r&&3===t.tag)i=t.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<e&&(r.childExpirationTime=e),null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Ia===i&&(su(e),ka===Ea&&xu(i,Ca)),Du(i,e)),i}function Xa(t){var e=t.lastExpiredTime;if(0!==e)return e;if(!Ru(t,e=t.firstPendingTime))return e;var n=t.lastPingedTime;return 2>=(t=n>(t=t.nextKnownPendingLevel)?n:t)&&e!==t?0:t}function $a(t){if(0!==t.lastExpiredTime)t.callbackExpirationTime=1073741823,t.callbackPriority=99,t.callbackNode=Hi(Za.bind(null,t));else{var e=Xa(t),n=t.callbackNode;if(0===e)null!==n&&(t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90);else{var r=Ga();if(1073741823===e?r=99:1===e||2===e?r=95:r=0>=(r=10*(1073741821-e)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=t.callbackPriority;if(t.callbackExpirationTime===e&&i>=r)return;n!==Ri&&Ti(n)}t.callbackExpirationTime=e,t.callbackPriority=r,e=1073741823===e?Hi(Za.bind(null,t)):Wi(r,Ja.bind(null,t),{timeout:10*(1073741821-e)-ji()}),t.callbackNode=e}}}function Ja(t,e){if(za=0,e)return Lu(t,e=Ga()),$a(t),null;var n=Xa(t);if(0!==n){if(e=t.callbackNode,0!==(48&Ta))throw Error(s(327));if(vu(),t===Ia&&n===Ca||nu(t,n),null!==Sa){var r=Ta;Ta|=16;for(var i=iu();;)try{uu();break}catch(u){ru(t,u)}if(Zi(),Ta=r,ma.current=i,1===ka)throw e=Na,nu(t,n),xu(t,n),$a(t),e;if(null===Sa)switch(i=t.finishedWork=t.current.alternate,t.finishedExpirationTime=n,r=ka,Ia=null,r){case _a:case 1:throw Error(s(345));case 2:Lu(t,2<n?2:n);break;case wa:if(xu(t,n),n===(r=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=hu(i)),1073741823===Aa&&10<(i=Da+500-ji())){if(xa){var o=t.lastPingedTime;if(0===o||o>=n){t.lastPingedTime=n,nu(t,n);break}}if(0!==(o=Xa(t))&&o!==n)break;if(0!==r&&r!==n){t.lastPingedTime=r;break}t.timeoutHandle=bn(fu.bind(null,t),i);break}fu(t);break;case Ea:if(xu(t,n),n===(r=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=hu(i)),xa&&(0===(i=t.lastPingedTime)||i>=n)){t.lastPingedTime=n,nu(t,n);break}if(0!==(i=Xa(t))&&i!==n)break;if(0!==r&&r!==n){t.lastPingedTime=r;break}if(1073741823!==Oa?r=10*(1073741821-Oa)-ji():1073741823===Aa?r=0:(r=10*(1073741821-Aa)-5e3,0>(r=(i=ji())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ga(r/1960))-r)&&(r=n)),10<r){t.timeoutHandle=bn(fu.bind(null,t),r);break}fu(t);break;case 5:if(1073741823!==Aa&&null!==Pa){o=Aa;var a=Pa;if(0>=(r=0|a.busyMinDurationMs)?r=0:(i=0|a.busyDelayMs,r=(o=ji()-(10*(1073741821-o)-(0|a.timeoutMs||5e3)))<=i?0:i+r-o),10<r){xu(t,n),t.timeoutHandle=bn(fu.bind(null,t),r);break}}fu(t);break;default:throw Error(s(329))}if($a(t),t.callbackNode===e)return Ja.bind(null,t)}}return null}function Za(t){var e=t.lastExpiredTime;if(e=0!==e?e:1073741823,0!==(48&Ta))throw Error(s(327));if(vu(),t===Ia&&e===Ca||nu(t,e),null!==Sa){var n=Ta;Ta|=16;for(var r=iu();;)try{au();break}catch(i){ru(t,i)}if(Zi(),Ta=n,ma.current=r,1===ka)throw n=Na,nu(t,e),xu(t,e),$a(t),n;if(null!==Sa)throw Error(s(261));t.finishedWork=t.current.alternate,t.finishedExpirationTime=e,Ia=null,fu(t),$a(t)}return null}function tu(t,e){var n=Ta;Ta|=1;try{return t(e)}finally{0===(Ta=n)&&zi()}}function eu(t,e){var n=Ta;Ta&=-2,Ta|=8;try{return t(e)}finally{0===(Ta=n)&&zi()}}function nu(t,e){t.finishedWork=null,t.finishedExpirationTime=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,_n(n)),null!==Sa)for(n=Sa.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&yi();break;case 3:xo(),ui(fi),ui(hi);break;case 5:Lo(r);break;case 4:xo();break;case 13:case 19:ui(Mo);break;case 10:to(r)}n=n.return}Ia=t,Sa=Cu(t.current,null),Ca=e,ka=_a,Na=null,Oa=Aa=1073741823,Pa=null,Ra=0,xa=!1}function ru(t,e){for(;;){try{if(Zi(),jo.current=ys,zo)for(var n=Bo.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(qo=0,Ho=Wo=Bo=null,zo=!1,null===Sa||null===Sa.return)return ka=1,Na=e,Sa=null;t:{var i=t,o=Sa.return,s=Sa,a=e;if(e=Ca,s.effectTag|=2048,s.firstEffect=s.lastEffect=null,null!==a&&"object"===typeof a&&"function"===typeof a.then){var u=a;if(0===(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.expirationTime=c.expirationTime):(s.updateQueue=null,s.memoizedState=null)}var l=0!==(1&Mo.current),h=o;do{var f;if(f=13===h.tag){var p=h.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var d=h.memoizedProps;f=void 0!==d.fallback&&(!0!==d.unstable_avoidThisFallback||!l)}}if(f){var v=h.updateQueue;if(null===v){var y=new Set;y.add(u),h.updateQueue=y}else v.add(u);if(0===(2&h.mode)){if(h.effectTag|=64,s.effectTag&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var g=ao(1073741823,null);g.tag=2,uo(s,g)}s.expirationTime=1073741823;break t}a=void 0,s=e;var m=i.pingCache;if(null===m?(m=i.pingCache=new pa,a=new Set,m.set(u,a)):void 0===(a=m.get(u))&&(a=new Set,m.set(u,a)),!a.has(s)){a.add(s);var b=bu.bind(null,i,u,s);u.then(b,b)}h.effectTag|=4096,h.expirationTime=e;break t}h=h.return}while(null!==h);a=Error((yt(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+gt(s))}5!==ka&&(ka=2),a=Js(a,s),h=o;do{switch(h.tag){case 3:u=a,h.effectTag|=4096,h.expirationTime=e,co(h,da(h,u,e));break t;case 1:u=a;var _=h.type,w=h.stateNode;if(0===(64&h.effectTag)&&("function"===typeof _.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Ua||!Ua.has(w)))){h.effectTag|=4096,h.expirationTime=e,co(h,va(h,u,e));break t}}h=h.return}while(null!==h)}Sa=lu(Sa)}catch(E){e=E;continue}break}}function iu(){var t=ma.current;return ma.current=ys,null===t?ys:t}function ou(t,e){t<Aa&&2<t&&(Aa=t),null!==e&&t<Oa&&2<t&&(Oa=t,Pa=e)}function su(t){t>Ra&&(Ra=t)}function au(){for(;null!==Sa;)Sa=cu(Sa)}function uu(){for(;null!==Sa&&!xi();)Sa=cu(Sa)}function cu(t){var e=ya(t.alternate,t,Ca);return t.memoizedProps=t.pendingProps,null===e&&(e=lu(t)),ba.current=null,e}function lu(t){Sa=t;do{var e=Sa.alternate;if(t=Sa.return,0===(2048&Sa.effectTag)){if(e=Xs(e,Sa,Ca),1===Ca||1!==Sa.childExpirationTime){for(var n=0,r=Sa.child;null!==r;){var i=r.expirationTime,o=r.childExpirationTime;i>n&&(n=i),o>n&&(n=o),r=r.sibling}Sa.childExpirationTime=n}if(null!==e)return e;null!==t&&0===(2048&t.effectTag)&&(null===t.firstEffect&&(t.firstEffect=Sa.firstEffect),null!==Sa.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=Sa.firstEffect),t.lastEffect=Sa.lastEffect),1<Sa.effectTag&&(null!==t.lastEffect?t.lastEffect.nextEffect=Sa:t.firstEffect=Sa,t.lastEffect=Sa))}else{if(null!==(e=$s(Sa)))return e.effectTag&=2047,e;null!==t&&(t.firstEffect=t.lastEffect=null,t.effectTag|=2048)}if(null!==(e=Sa.sibling))return e;Sa=t}while(null!==Sa);return ka===_a&&(ka=5),null}function hu(t){var e=t.expirationTime;return e>(t=t.childExpirationTime)?e:t}function fu(t){var e=Vi();return Bi(99,pu.bind(null,t,e)),null}function pu(t,e){do{vu()}while(null!==Va);if(0!==(48&Ta))throw Error(s(327));var n=t.finishedWork,r=t.finishedExpirationTime;if(null===n)return null;if(t.finishedWork=null,t.finishedExpirationTime=0,n===t.current)throw Error(s(177));t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90,t.nextKnownPendingLevel=0;var i=hu(n);if(t.firstPendingTime=i,r<=t.lastSuspendedTime?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:r<=t.firstSuspendedTime&&(t.firstSuspendedTime=r-1),r<=t.lastPingedTime&&(t.lastPingedTime=0),r<=t.lastExpiredTime&&(t.lastExpiredTime=0),t===Ia&&(Sa=Ia=null,Ca=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=Ta;Ta|=32,ba.current=null,vn=Ge;var a=pn();if(dn(a)){if("selectionStart"in a)var u={start:a.selectionStart,end:a.selectionEnd};else t:{var c=(u=(u=a.ownerDocument)&&u.defaultView||window).getSelection&&u.getSelection();if(c&&0!==c.rangeCount){u=c.anchorNode;var l=c.anchorOffset,h=c.focusNode;c=c.focusOffset;try{u.nodeType,h.nodeType}catch(C){u=null;break t}var f=0,p=-1,d=-1,v=0,y=0,g=a,m=null;e:for(;;){for(var b;g!==u||0!==l&&3!==g.nodeType||(p=f+l),g!==h||0!==c&&3!==g.nodeType||(d=f+c),3===g.nodeType&&(f+=g.nodeValue.length),null!==(b=g.firstChild);)m=g,g=b;for(;;){if(g===a)break e;if(m===u&&++v===l&&(p=f),m===h&&++y===c&&(d=f),null!==(b=g.nextSibling))break;m=(g=m).parentNode}g=b}u=-1===p||-1===d?null:{start:p,end:d}}else u=null}u=u||{start:0,end:0}}else u=null;yn={activeElementDetached:null,focusedElem:a,selectionRange:u},Ge=!1,La=i;do{try{du()}catch(C){if(null===La)throw Error(s(330));mu(La,C),La=La.nextEffect}}while(null!==La);La=i;do{try{for(a=t,u=e;null!==La;){var _=La.effectTag;if(16&_&&Vt(La.stateNode,""),128&_){var w=La.alternate;if(null!==w){var E=w.ref;null!==E&&("function"===typeof E?E(null):E.current=null)}}switch(1038&_){case 2:ca(La),La.effectTag&=-3;break;case 6:ca(La),La.effectTag&=-3,ha(La.alternate,La);break;case 1024:La.effectTag&=-1025;break;case 1028:La.effectTag&=-1025,ha(La.alternate,La);break;case 4:ha(La.alternate,La);break;case 8:la(a,l=La,u),aa(l)}La=La.nextEffect}}catch(C){if(null===La)throw Error(s(330));mu(La,C),La=La.nextEffect}}while(null!==La);if(E=yn,w=pn(),_=E.focusedElem,u=E.selectionRange,w!==_&&_&&_.ownerDocument&&function t(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?t(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}(_.ownerDocument.documentElement,_)){null!==u&&dn(_)&&(w=u.start,void 0===(E=u.end)&&(E=w),"selectionStart"in _?(_.selectionStart=w,_.selectionEnd=Math.min(E,_.value.length)):(E=(w=_.ownerDocument||document)&&w.defaultView||window).getSelection&&(E=E.getSelection(),l=_.textContent.length,a=Math.min(u.start,l),u=void 0===u.end?a:Math.min(u.end,l),!E.extend&&a>u&&(l=u,u=a,a=l),l=fn(_,a),h=fn(_,u),l&&h&&(1!==E.rangeCount||E.anchorNode!==l.node||E.anchorOffset!==l.offset||E.focusNode!==h.node||E.focusOffset!==h.offset)&&((w=w.createRange()).setStart(l.node,l.offset),E.removeAllRanges(),a>u?(E.addRange(w),E.extend(h.node,h.offset)):(w.setEnd(h.node,h.offset),E.addRange(w))))),w=[];for(E=_;E=E.parentNode;)1===E.nodeType&&w.push({element:E,left:E.scrollLeft,top:E.scrollTop});for("function"===typeof _.focus&&_.focus(),_=0;_<w.length;_++)(E=w[_]).element.scrollLeft=E.left,E.element.scrollTop=E.top}Ge=!!vn,yn=vn=null,t.current=n,La=i;do{try{for(_=t;null!==La;){var T=La.effectTag;if(36&T&&oa(_,La.alternate,La),128&T){w=void 0;var I=La.ref;if(null!==I){var S=La.stateNode;switch(La.tag){case 5:w=S;break;default:w=S}"function"===typeof I?I(w):I.current=w}}La=La.nextEffect}}catch(C){if(null===La)throw Error(s(330));mu(La,C),La=La.nextEffect}}while(null!==La);La=null,Di(),Ta=o}else t.current=n;if(ja)ja=!1,Va=t,qa=e;else for(La=i;null!==La;)e=La.nextEffect,La.nextEffect=null,La=e;if(0===(e=t.firstPendingTime)&&(Ua=null),1073741823===e?t===Ha?Wa++:(Wa=0,Ha=t):Wa=0,"function"===typeof wu&&wu(n.stateNode,r),$a(t),Ma)throw Ma=!1,t=Fa,Fa=null,t;return 0!==(8&Ta)||zi(),null}function du(){for(;null!==La;){var t=La.effectTag;0!==(256&t)&&na(La.alternate,La),0===(512&t)||ja||(ja=!0,Wi(97,(function(){return vu(),null}))),La=La.nextEffect}}function vu(){if(90!==qa){var t=97<qa?97:qa;return qa=90,Bi(t,yu)}}function yu(){if(null===Va)return!1;var t=Va;if(Va=null,0!==(48&Ta))throw Error(s(331));var e=Ta;for(Ta|=32,t=t.current.firstEffect;null!==t;){try{var n=t;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:ra(5,n),ia(5,n)}}catch(r){if(null===t)throw Error(s(330));mu(t,r)}n=t.nextEffect,t.nextEffect=null,t=n}return Ta=e,zi(),!0}function gu(t,e,n){uo(t,e=da(t,e=Js(n,e),1073741823)),null!==(t=Ya(t,1073741823))&&$a(t)}function mu(t,e){if(3===t.tag)gu(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){gu(n,t,e);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ua||!Ua.has(r))){uo(n,t=va(n,t=Js(e,t),1073741823)),null!==(n=Ya(n,1073741823))&&$a(n);break}}n=n.return}}function bu(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),Ia===t&&Ca===n?ka===Ea||ka===wa&&1073741823===Aa&&ji()-Da<500?nu(t,Ca):xa=!0:Ru(t,n)&&(0!==(e=t.lastPingedTime)&&e<n||(t.lastPingedTime=n,$a(t)))}function _u(t,e){var n=t.stateNode;null!==n&&n.delete(e),0===(e=0)&&(e=Ka(e=Ga(),t,null)),null!==(t=Ya(t,e))&&$a(t)}ya=function(t,e,n){var r=e.expirationTime;if(null!==t){var i=e.pendingProps;if(t.memoizedProps!==i||fi.current)Os=!0;else{if(r<n){switch(Os=!1,e.tag){case 3:js(e),Ns();break;case 5:if(Do(e),4&e.mode&&1!==n&&i.hidden)return e.expirationTime=e.childExpirationTime=1,null;break;case 1:vi(e.type)&&bi(e);break;case 4:Ro(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value,i=e.type._context,ci(Yi,i._currentValue),i._currentValue=r;break;case 13:if(null!==e.memoizedState)return 0!==(r=e.child.childExpirationTime)&&r>=n?Hs(t,e,n):(ci(Mo,1&Mo.current),null!==(e=Qs(t,e,n))?e.sibling:null);ci(Mo,1&Mo.current);break;case 19:if(r=e.childExpirationTime>=n,0!==(64&t.effectTag)){if(r)return Ks(t,e,n);e.effectTag|=64}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null),ci(Mo,Mo.current),!r)return null}return Qs(t,e,n)}Os=!1}}else Os=!1;switch(e.expirationTime=0,e.tag){case 2:if(r=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,i=di(e,hi.current),no(e,n),i=Qo(null,e,r,t,i,n),e.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,vi(r)){var o=!0;bi(e)}else o=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,oo(e);var a=r.getDerivedStateFromProps;"function"===typeof a&&vo(e,r,a,t),i.updater=yo,e.stateNode=i,i._reactInternalFiber=e,_o(e,r,t,n),e=Us(null,e,r,!0,o,n)}else e.tag=0,Ps(null,e,i,n),e=e.child;return e;case 16:t:{if(i=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,function(t){if(-1===t._status){t._status=0;var e=t._ctor;e=e(),t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,e.type=i,o=e.tag=function(t){if("function"===typeof t)return Su(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===ut)return 11;if(t===ht)return 14}return 2}(i),t=Qi(i,t),o){case 0:e=Ms(null,e,i,t,n);break t;case 1:e=Fs(null,e,i,t,n);break t;case 11:e=Rs(null,e,i,t,n);break t;case 14:e=xs(null,e,i,Qi(i.type,t),r,n);break t}throw Error(s(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,Ms(t,e,r,i=e.elementType===r?i:Qi(r,i),n);case 1:return r=e.type,i=e.pendingProps,Fs(t,e,r,i=e.elementType===r?i:Qi(r,i),n);case 3:if(js(e),r=e.updateQueue,null===t||null===r)throw Error(s(282));if(r=e.pendingProps,i=null!==(i=e.memoizedState)?i.element:null,so(t,e),lo(e,r,null,n),(r=e.memoizedState.element)===i)Ns(),e=Qs(t,e,n);else{if((i=e.stateNode.hydrate)&&(ws=wn(e.stateNode.containerInfo.firstChild),_s=e,i=Es=!0),i)for(n=Co(e,null,r,n),e.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Ps(t,e,r,n),Ns();e=e.child}return e;case 5:return Do(e),null===t&&Ss(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,a=i.children,mn(r,i)?a=null:null!==o&&mn(r,o)&&(e.effectTag|=16),Ls(t,e),4&e.mode&&1!==n&&i.hidden?(e.expirationTime=e.childExpirationTime=1,e=null):(Ps(t,e,a,n),e=e.child),e;case 6:return null===t&&Ss(e),null;case 13:return Hs(t,e,n);case 4:return Ro(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=So(e,null,r,n):Ps(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,Rs(t,e,r,i=e.elementType===r?i:Qi(r,i),n);case 7:return Ps(t,e,e.pendingProps,n),e.child;case 8:case 12:return Ps(t,e,e.pendingProps.children,n),e.child;case 10:t:{r=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value;var u=e.type._context;if(ci(Yi,u._currentValue),u._currentValue=o,null!==a)if(u=a.value,0===(o=Fr(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(a.children===i.children&&!fi.current){e=Qs(t,e,n);break t}}else for(null!==(u=e.child)&&(u.return=e);null!==u;){var c=u.dependencies;if(null!==c){a=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&o)){1===u.tag&&((l=ao(n,null)).tag=2,uo(u,l)),u.expirationTime<n&&(u.expirationTime=n),null!==(l=u.alternate)&&l.expirationTime<n&&(l.expirationTime=n),eo(u.return,n),c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else a=10===u.tag&&u.type===e.type?null:u.child;if(null!==a)a.return=u;else for(a=u;null!==a;){if(a===e){a=null;break}if(null!==(u=a.sibling)){u.return=a.return,a=u;break}a=a.return}u=a}Ps(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=(o=e.pendingProps).children,no(e,n),r=r(i=ro(i,o.unstable_observedBits)),e.effectTag|=1,Ps(t,e,r,n),e.child;case 14:return o=Qi(i=e.type,e.pendingProps),xs(t,e,i,o=Qi(i.type,o),r,n);case 15:return Ds(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Qi(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,vi(r)?(t=!0,bi(e)):t=!1,no(e,n),mo(e,r,i),_o(e,r,i,n),Us(null,e,r,!0,t,n);case 19:return Ks(t,e,n)}throw Error(s(156,e.tag))};var wu=null,Eu=null;function Tu(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Iu(t,e,n,r){return new Tu(t,e,n,r)}function Su(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Cu(t,e){var n=t.alternate;return null===n?((n=Iu(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=t.childExpirationTime,n.expirationTime=t.expirationTime,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{expirationTime:e.expirationTime,firstContext:e.firstContext,responders:e.responders},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ku(t,e,n,r,i,o){var a=2;if(r=t,"function"===typeof t)Su(t)&&(a=1);else if("string"===typeof t)a=5;else t:switch(t){case nt:return Nu(n.children,i,o,e);case at:a=8,i|=7;break;case rt:a=8,i|=1;break;case it:return(t=Iu(12,n,e,8|i)).elementType=it,t.type=it,t.expirationTime=o,t;case ct:return(t=Iu(13,n,e,i)).type=ct,t.elementType=ct,t.expirationTime=o,t;case lt:return(t=Iu(19,n,e,i)).elementType=lt,t.expirationTime=o,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case ot:a=10;break t;case st:a=9;break t;case ut:a=11;break t;case ht:a=14;break t;case ft:a=16,r=null;break t;case pt:a=22;break t}throw Error(s(130,null==t?t:typeof t,""))}return(e=Iu(a,n,e,i)).elementType=t,e.type=r,e.expirationTime=o,e}function Nu(t,e,n,r){return(t=Iu(7,t,r,e)).expirationTime=n,t}function Au(t,e,n){return(t=Iu(6,t,null,e)).expirationTime=n,t}function Ou(t,e,n){return(e=Iu(4,null!==t.children?t.children:[],t.key,e)).expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Pu(t,e,n){this.tag=e,this.current=null,this.containerInfo=t,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Ru(t,e){var n=t.firstSuspendedTime;return t=t.lastSuspendedTime,0!==n&&n>=e&&t<=e}function xu(t,e){var n=t.firstSuspendedTime,r=t.lastSuspendedTime;n<e&&(t.firstSuspendedTime=e),(r>e||0===n)&&(t.lastSuspendedTime=e),e<=t.lastPingedTime&&(t.lastPingedTime=0),e<=t.lastExpiredTime&&(t.lastExpiredTime=0)}function Du(t,e){e>t.firstPendingTime&&(t.firstPendingTime=e);var n=t.firstSuspendedTime;0!==n&&(e>=n?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:e>=t.lastSuspendedTime&&(t.lastSuspendedTime=e+1),e>t.nextKnownPendingLevel&&(t.nextKnownPendingLevel=e))}function Lu(t,e){var n=t.lastExpiredTime;(0===n||n>e)&&(t.lastExpiredTime=e)}function Mu(t,e,n,r){var i=e.current,o=Ga(),a=fo.suspense;o=Ka(o,i,a);t:if(n){e:{if(Zt(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(s(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(vi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(null!==u);throw Error(s(171))}if(1===n.tag){var c=n.type;if(vi(c)){n=mi(n,c,u);break t}}n=u}else n=li;return null===e.context?e.context=n:e.pendingContext=n,(e=ao(o,a)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),uo(i,e),Qa(i,o),o}function Fu(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function Uu(t,e){null!==(t=t.memoizedState)&&null!==t.dehydrated&&t.retryTime<e&&(t.retryTime=e)}function ju(t,e){Uu(t,e),(t=t.alternate)&&Uu(t,e)}function Vu(t,e,n){var r=new Pu(t,e,n=null!=n&&!0===n.hydrate),i=Iu(3,null,null,2===e?7:1===e?3:0);r.current=i,i.stateNode=r,oo(i),t[Cn]=r.current,n&&0!==e&&function(t,e){var n=Jt(e);Ce.forEach((function(t){de(t,e,n)})),ke.forEach((function(t){de(t,e,n)}))}(0,9===t.nodeType?t:t.ownerDocument),this._internalRoot=r}function qu(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Bu(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o._internalRoot;if("function"===typeof i){var a=i;i=function(){var t=Fu(s);a.call(t)}}Mu(e,s,t,i)}else{if(o=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new Vu(t,0,e?{hydrate:!0}:void 0)}(n,r),s=o._internalRoot,"function"===typeof i){var u=i;i=function(){var t=Fu(s);u.call(t)}}eu((function(){Mu(e,s,t,i)}))}return Fu(s)}function Wu(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:et,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}function Hu(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!qu(e))throw Error(s(200));return Wu(t,e,null,n)}Vu.prototype.render=function(t){Mu(t,this._internalRoot,null,null)},Vu.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;Mu(null,t,null,(function(){e[Cn]=null}))},ve=function(t){if(13===t.tag){var e=Ki(Ga(),150,100);Qa(t,e),ju(t,e)}},ye=function(t){13===t.tag&&(Qa(t,3),ju(t,3))},ge=function(t){if(13===t.tag){var e=Ga();Qa(t,e=Ka(e,t,null)),ju(t,e)}},N=function(t,e,n){switch(e){case"input":if(St(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=On(r);if(!i)throw Error(s(90));wt(r),St(r,i)}}}break;case"textarea":Rt(t,n);break;case"select":null!=(e=n.value)&&At(t,!!n.multiple,e,!1)}},D=tu,L=function(t,e,n,r,i){var o=Ta;Ta|=4;try{return Bi(98,t.bind(null,e,n,r,i))}finally{0===(Ta=o)&&zi()}},M=function(){0===(49&Ta)&&(function(){if(null!==Ba){var t=Ba;Ba=null,t.forEach((function(t,e){Lu(e,t),$a(e)})),zi()}}(),vu())},F=function(t,e){var n=Ta;Ta|=2;try{return t(e)}finally{0===(Ta=n)&&zi()}};var zu={Events:[Nn,An,On,C,T,Fn,function(t){ie(t,Mn)},R,x,$e,ae,vu,{current:!1}]};!function(t){var e=t.findFiberByHostInstance;(function(t){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);wu=function(t){try{e.onCommitFiberRoot(n,t,void 0,64===(64&t.current.effectTag))}catch(r){}},Eu=function(t){try{e.onCommitFiberUnmount(n,t)}catch(r){}}}catch(r){}})(i({},t,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:X.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=ne(t))?null:t.stateNode},findFiberByHostInstance:function(t){return e?e(t):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:kn,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"}),e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zu,e.createPortal=Hu,e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternalFiber;if(void 0===e){if("function"===typeof t.render)throw Error(s(188));throw Error(s(268,Object.keys(t)))}return t=null===(t=ne(e))?null:t.stateNode},e.flushSync=function(t,e){if(0!==(48&Ta))throw Error(s(187));var n=Ta;Ta|=1;try{return Bi(99,t.bind(null,e))}finally{Ta=n,zi()}},e.hydrate=function(t,e,n){if(!qu(e))throw Error(s(200));return Bu(null,t,e,!0,n)},e.render=function(t,e,n){if(!qu(e))throw Error(s(200));return Bu(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!qu(t))throw Error(s(40));return!!t._reactRootContainer&&(eu((function(){Bu(null,null,t,!1,(function(){t._reactRootContainer=null,t[Cn]=null}))})),!0)},e.unstable_batchedUpdates=tu,e.unstable_createPortal=function(t,e){return Hu(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!qu(n))throw Error(s(200));if(null==t||void 0===t._reactInternalFiber)throw Error(s(38));return Bu(t,e,n,!1,r)},e.version="16.13.1"},function(t,e,n){"use strict";t.exports=n(27)},function(t,e,n){"use strict";var r,i,o,s,a;if("undefined"===typeof window||"function"!==typeof MessageChannel){var u=null,c=null,l=function t(){if(null!==u)try{var n=e.unstable_now();u(!0,n),u=null}catch(r){throw setTimeout(t,0),r}},h=Date.now();e.unstable_now=function(){return Date.now()-h},r=function(t){null!==u?setTimeout(r,0,t):(u=t,setTimeout(l,0))},i=function(t,e){c=setTimeout(t,e)},o=function(){clearTimeout(c)},s=function(){return!1},a=e.unstable_forceFrameRate=function(){}}else{var f=window.performance,p=window.Date,d=window.setTimeout,v=window.clearTimeout;if("undefined"!==typeof console){var y=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof y&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof f&&"function"===typeof f.now)e.unstable_now=function(){return f.now()};else{var g=p.now();e.unstable_now=function(){return p.now()-g}}var m=!1,b=null,_=-1,w=5,E=0;s=function(){return e.unstable_now()>=E},a=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):w=0<t?Math.floor(1e3/t):5};var T=new MessageChannel,I=T.port2;T.port1.onmessage=function(){if(null!==b){var t=e.unstable_now();E=t+w;try{b(!0,t)?I.postMessage(null):(m=!1,b=null)}catch(n){throw I.postMessage(null),n}}else m=!1},r=function(t){b=t,m||(m=!0,I.postMessage(null))},i=function(t,n){_=d((function(){t(e.unstable_now())}),n)},o=function(){v(_),_=-1}}function S(t,e){var n=t.length;t.push(e);t:for(;;){var r=n-1>>>1,i=t[r];if(!(void 0!==i&&0<N(i,e)))break t;t[r]=e,t[n]=i,n=r}}function C(t){return void 0===(t=t[0])?null:t}function k(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length;r<i;){var o=2*(r+1)-1,s=t[o],a=o+1,u=t[a];if(void 0!==s&&0>N(s,n))void 0!==u&&0>N(u,s)?(t[r]=u,t[a]=n,r=a):(t[r]=s,t[o]=n,r=o);else{if(!(void 0!==u&&0>N(u,n)))break t;t[r]=u,t[a]=n,r=a}}}return e}return null}function N(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}var A=[],O=[],P=1,R=null,x=3,D=!1,L=!1,M=!1;function F(t){for(var e=C(O);null!==e;){if(null===e.callback)k(O);else{if(!(e.startTime<=t))break;k(O),e.sortIndex=e.expirationTime,S(A,e)}e=C(O)}}function U(t){if(M=!1,F(t),!L)if(null!==C(A))L=!0,r(j);else{var e=C(O);null!==e&&i(U,e.startTime-t)}}function j(t,n){L=!1,M&&(M=!1,o()),D=!0;var r=x;try{for(F(n),R=C(A);null!==R&&(!(R.expirationTime>n)||t&&!s());){var a=R.callback;if(null!==a){R.callback=null,x=R.priorityLevel;var u=a(R.expirationTime<=n);n=e.unstable_now(),"function"===typeof u?R.callback=u:R===C(A)&&k(A),F(n)}else k(A);R=C(A)}if(null!==R)var c=!0;else{var l=C(O);null!==l&&i(U,l.startTime-n),c=!1}return c}finally{R=null,x=r,D=!1}}function V(t){switch(t){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var q=a;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){L||D||(L=!0,r(j))},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return C(A)},e.unstable_next=function(t){switch(x){case 1:case 2:case 3:var e=3;break;default:e=x}var n=x;x=e;try{return t()}finally{x=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=q,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=x;x=t;try{return e()}finally{x=n}},e.unstable_scheduleCallback=function(t,n,s){var a=e.unstable_now();if("object"===typeof s&&null!==s){var u=s.delay;u="number"===typeof u&&0<u?a+u:a,s="number"===typeof s.timeout?s.timeout:V(t)}else s=V(t),u=a;return t={id:P++,callback:n,priorityLevel:t,startTime:u,expirationTime:s=u+s,sortIndex:-1},u>a?(t.sortIndex=u,S(O,t),null===C(A)&&t===C(O)&&(M?o():M=!0,i(U,u-a))):(t.sortIndex=s,S(A,t),L||D||(L=!0,r(j))),t},e.unstable_shouldYield=function(){var t=e.unstable_now();F(t);var n=C(A);return n!==R&&null!==R&&null!==n&&null!==n.callback&&n.startTime<=t&&n.expirationTime<R.expirationTime||s()},e.unstable_wrapCallback=function(t){var e=x;return function(){var n=x;x=e;try{return t.apply(this,arguments)}finally{x=n}}}},,,function(t,e,n){var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function a(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(C){a=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof h?e:h,o=Object.create(i.prototype),s=new T(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return S()}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=_(s,n);if(a){if(a===l)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(t,n,s),o}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(C){return{type:"throw",arg:C}}}t.wrap=u;var l={};function h(){}function f(){}function p(){}var d={};d[i]=function(){return this};var v=Object.getPrototypeOf,y=v&&v(v(I([])));y&&y!==e&&n.call(y,i)&&(d=y);var g=p.prototype=h.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(i,o){function s(){return new e((function(r,s){!function r(i,o,s,a){var u=c(t[i],t,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"===typeof h&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(h).then((function(t){l.value=t,s(l)}),(function(t){return r("throw",t,s,a)}))}a(u.arg)}(i,o,r,s)}))}return r=r?r.then(s,s):s()}}function _(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function I(t){if(t){var e=t[i];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=g.constructor=p,p.constructor=f,f.displayName=a(p,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,a(t,s,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},m(b.prototype),b.prototype[o]=function(){return this},t.AsyncIterator=b,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var s=new b(u(e,n,r,i),o);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},m(g),a(g,s,"Generator"),g[i]=function(){return this},g.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=I,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return s.type="throw",s.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var a=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:I(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}(t.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){(function(t){(function(){var e,r=n(3).default,i="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var o=function(e){e=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof t&&t,e];for(var n=0;n<e.length;++n){var r=e[n];if(r&&r.Math==Math)return r}return globalThis}(this);function s(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function a(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:s(t)}}!function(t,e){if(e){var n=o;t=t.split(".");for(var r=0;r<t.length-1;r++){var s=t[r];s in n||(n[s]={}),n=n[s]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&i(n,t,{configurable:!0,writable:!0,value:e})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function n(){this.a=null}function r(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var i=o.setTimeout;n.prototype.c=function(t){i(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.u(t):this.h(t)}},e.prototype.u=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.w(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new n;return e.prototype.s=function(t){var e=this.f();t.Oa(e.resolve,e.reject)},e.prototype.w=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.Oa(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Oa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=r,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=a(t),o=i.next();!o.done;o=i.next())r(o.value).Oa(e,n)}))},e.all=function(t){var n=a(t),i=n.next();return i.done?r([]):new e((function(t,e){function o(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,r(i.value).Oa(o(s.length-1),e),i=n.next()}while(!i.done)}))},e}));var u=u||{},c=this||self,l=/^[\w+/_-]+[=]{0,2}$/,h=null;function f(){}function p(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&"undefined"!=typeof t.splice&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof t.call&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&"undefined"==typeof t.call)return"object";return e}function d(t){var e=p(t);return"array"==e||"object"==e&&"number"==typeof t.length}function v(t){return"function"==p(t)}function y(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function g(t){return Object.prototype.hasOwnProperty.call(t,m)&&t[m]||(t[m]=++b)}var m="closure_uid_"+(1e9*Math.random()>>>0),b=0;function _(t,e,n){return t.call.apply(t.bind,arguments)}function w(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function E(t,e,n){return(E=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_:w).apply(null,arguments)}function T(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var I=Date.now||function(){return+new Date};function S(t,e){function n(){}n.prototype=e.prototype,t.Za=e.prototype,t.prototype=new n,t.prototype.constructor=t}function C(t,e,n){this.code=A+t,this.message=e||O[t]||"",this.a=n||null}function k(t){var e=t&&t.code;return e?new C(e.substring(A.length),t.message,t.serverResponse):null}S(C,Error),C.prototype.v=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},C.prototype.toJSON=function(){return this.v()};var N,A="auth/",O={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},P={hd:{Ra:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},pd:{Ra:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://securetoken.googleapis.com/v1/token",Ua:"https://identitytoolkit.googleapis.com/v2/",id:"p"},rd:{Ra:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},sd:{Ra:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Xa:"https://test-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function R(t){for(var e in P)if(P[e].id===t)return{firebaseEndpoint:(t=P[e]).Ra,secureTokenEndpoint:t.Xa,identityPlatformEndpoint:t.Ua};return null}function x(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function D(t){if(Error.captureStackTrace)Error.captureStackTrace(this,D);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function L(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");D.call(this,n+t[r])}function M(t,e){throw new L("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function F(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function U(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function j(){this.b=this.a=null}N=R("__EID__")?"__EID__":void 0,S(D,Error),D.prototype.name="CustomError",S(L,D),L.prototype.name="AssertionError",F.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var V=new F((function(){return new B}),(function(t){t.reset()}));function q(){var t=me,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function B(){this.next=this.b=this.a=null}j.prototype.add=function(t,e){var n=V.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},B.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},B.prototype.reset=function(){this.next=this.b=this.a=null};var W=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},H=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var z=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"===typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},G=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"===typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},K=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function Q(t,e){return 0<=W(t,e)}function Y(t,e){var n;return(n=0<=(e=W(t,e)))&&Array.prototype.splice.call(t,e,1),n}function X(t,e){!function(t,e){for(var n="string"===typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function $(t){return Array.prototype.concat.apply([],arguments)}function J(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Z,tt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},et=/&/g,nt=/</g,rt=/>/g,it=/"/g,ot=/'/g,st=/\x00/g,at=/[\x00&<>"']/;function ut(t,e){return-1!=t.indexOf(e)}function ct(t,e){return t<e?-1:t>e?1:0}t:{var lt=c.navigator;if(lt){var ht=lt.userAgent;if(ht){Z=ht;break t}}Z=""}function ft(t){return ut(Z,t)}function pt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function dt(t){for(var e in t)return!1;return!0}function vt(t){var e,n={};for(e in t)n[e]=t[e];return n}var yt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<yt.length;o++)n=yt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function mt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||c).Element&&r.Location){var i=r;break t}}catch(s){}i=null}if(i&&"undefined"!=typeof i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(y(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(s){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;M("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function bt(t,e){this.a=t===Et&&e||"",this.b=wt}function _t(t){return t instanceof bt&&t.constructor===bt&&t.b===wt?t.a:(M("expected object of type Const, got '"+t+"'"),"type_error:Const")}bt.prototype.ra=!0,bt.prototype.qa=function(){return this.a},bt.prototype.toString=function(){return"Const{"+this.a+"}"};var wt={},Et={},Tt=new bt(Et,"");function It(t,e){this.a=t===Ot&&e||"",this.b=At}function St(t){return t instanceof It&&t.constructor===It&&t.b===At?t.a:(M("expected object of type TrustedResourceUrl, got '"+t+"' of type "+p(t)),"type_error:TrustedResourceUrl")}function Ct(t,e){var n=_t(t);if(!Nt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return t=n.replace(kt,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof bt?_t(t):encodeURIComponent(String(t))})),new It(Ot,t)}It.prototype.ra=!0,It.prototype.qa=function(){return this.a.toString()},It.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var kt=/%{(\w+)}/g,Nt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,At={},Ot={};function Pt(t,e){this.a=t===Mt&&e||"",this.b=Lt}function Rt(t){return t instanceof Pt&&t.constructor===Pt&&t.b===Lt?t.a:(M("expected object of type SafeUrl, got '"+t+"' of type "+p(t)),"type_error:SafeUrl")}Pt.prototype.ra=!0,Pt.prototype.qa=function(){return this.a.toString()},Pt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var xt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Dt(t){return t instanceof Pt?t:(t="object"==typeof t&&t.ra?t.qa():String(t),xt.test(t)||(t="about:invalid#zClosurez"),new Pt(Mt,t))}var Lt={},Mt={};function Ft(){this.a="",this.b=jt}function Ut(t){return t instanceof Ft&&t.constructor===Ft&&t.b===jt?t.a:(M("expected object of type SafeHtml, got '"+t+"' of type "+p(t)),"type_error:SafeHtml")}Ft.prototype.ra=!0,Ft.prototype.qa=function(){return this.a.toString()},Ft.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var jt={};function Vt(t){var e=new Ft;return e.a=t,e}Vt("<!DOCTYPE html>");var qt=Vt("");function Bt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Wt(t){return at.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(et,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(nt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(rt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(it,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(ot,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(st,"&#0;"))),t}function Ht(t){return Ht[" "](t),t}Vt("<br>"),Ht[" "]=f;var zt,Gt=ft("Opera"),Kt=ft("Trident")||ft("MSIE"),Qt=ft("Edge"),Yt=Qt||Kt,Xt=ft("Gecko")&&!(ut(Z.toLowerCase(),"webkit")&&!ft("Edge"))&&!(ft("Trident")||ft("MSIE"))&&!ft("Edge"),$t=ut(Z.toLowerCase(),"webkit")&&!ft("Edge");function Jt(){var t=c.document;return t?t.documentMode:void 0}t:{var Zt="",te=function(){var t=Z;return Xt?/rv:([^\);]+)(\)|;)/.exec(t):Qt?/Edge\/([\d\.]+)/.exec(t):Kt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):$t?/WebKit\/(\S+)/.exec(t):Gt?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(te&&(Zt=te?te[1]:""),Kt){var ee=Jt();if(null!=ee&&ee>parseFloat(Zt)){zt=String(ee);break t}}zt=Zt}var ne,re={};function ie(t){return function(t,e){var n=re;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=tt(String(zt)).split("."),r=tt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ct(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ct(0==s[2].length,0==a[2].length)||ct(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}ne=c.document&&Kt?Jt():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(ss){}var oe=!Kt||9<=Number(ne);function se(t){var e=document;return"string"===typeof t?e.getElementById(t):t}function ae(t,e){pt(e,(function(e,n){e&&"object"==typeof e&&e.ra&&(e=e.qa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:le.hasOwnProperty(n)?t.setAttribute(le[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var ue,ce,le={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function he(t,e,n){function r(n){n&&e.appendChild("string"===typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];!d(o)||y(o)&&0<o.nodeType?r(o):H(pe(o)?J(o):o,r)}}function fe(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function pe(t){if(t&&"number"==typeof t.length){if(y(t))return"function"==typeof t.item||"string"==typeof t.item;if(v(t))return"function"==typeof t.item}return!1}function de(t){c.setTimeout((function(){throw t}),0)}function ve(){var t=c.MessageChannel;if("undefined"===typeof t&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!ft("Presto")&&(t=function(){var t=fe(document,"IFRAME");t.style.display="none",function(t){var e=new It(Ot,_t(Tt));mt(t,"HTMLIFrameElement"),t.src=St(e).toString()}(t),document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(Ut(qt)),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=E((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),"undefined"!==typeof t&&!ft("Trident")&&!ft("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Db;n.Db=null,t()}},function(t){r.next={Db:t},r=r.next,e.port2.postMessage(0)}}return function(t){c.setTimeout(t,0)}}function ye(t,e){ce||function(){if(c.Promise&&c.Promise.resolve){var t=c.Promise.resolve(void 0);ce=function(){t.then(be)}}else ce=function(){var t=be;!v(c.setImmediate)||c.Window&&c.Window.prototype&&!ft("Edge")&&c.Window.prototype.setImmediate==c.setImmediate?(ue||(ue=ve()),ue(t)):c.setImmediate(t)}}(),ge||(ce(),ge=!0),me.add(t,e)}var ge=!1,me=new j;function be(){for(var t;t=q();){try{t.a.call(t.b)}catch(e){de(e)}U(V,t)}ge=!1}function _e(t,e){if(this.a=we,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=f)try{var n=this;t.call(e,(function(t){xe(n,Ee,t)}),(function(t){if(!(t instanceof Ve))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(e){}xe(n,Te,t)}))}catch(r){xe(this,Te,r)}}var we=0,Ee=2,Te=3;function Ie(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ie.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Se=new F((function(){return new Ie}),(function(t){t.reset()}));function Ce(t,e,n){var r=Se.get();return r.g=t,r.b=e,r.f=n,r}function ke(t){if(t instanceof _e)return t;var e=new _e(f);return xe(e,Ee,t),e}function Ne(t){return new _e((function(e,n){n(t)}))}function Ae(t,e,n){De(t,e,n,null)||ye(T(e,t))}function Oe(t){return new _e((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Mb:!0,value:o}:{Mb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Ae(t[o],T(i,o,!0),T(i,o,!1));else e(r)}))}function Pe(t,e){t.b||t.a!=Ee&&t.a!=Te||Le(t),t.f?t.f.next=e:t.b=e,t.f=e}function Re(t,e,n,r){var i=Ce(null,null,null);return i.a=new _e((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(s){o(s)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Ve?o(e):t(i)}catch(s){o(s)}}:o})),i.a.c=t,Pe(t,i),i.a}function xe(t,e,n){t.a==we&&(t===n&&(e=Te,n=new TypeError("Promise cannot resolve to itself")),t.a=1,De(n,t.Yc,t.Zc,t)||(t.i=n,t.a=e,t.c=null,Le(t),e!=Te||n instanceof Ve||function(t,e){t.g=!0,ye((function(){t.g&&je.call(null,e)}))}(t,n)))}function De(t,e,n,r){if(t instanceof _e)return Pe(t,Ce(e||f,n||null,r)),!0;if(x(t))return t.then(e,n,r),!0;if(y(t))try{var i=t.then;if(v(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,(function(t){s||(s=!0,n.call(i,t))}),o)}catch(a){o(a)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Le(t){t.h||(t.h=!0,ye(t.ec,t))}function Me(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Fe(t,e,n,r){if(n==Te&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ue(e,n,r);else try{e.c?e.g.call(e.f):Ue(e,n,r)}catch(i){je.call(null,i)}U(Se,e)}function Ue(t,e,n){e==Ee?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}_e.prototype.then=function(t,e,n){return Re(this,v(t)?t:null,v(e)?e:null,n)},_e.prototype.$goog_Thenable=!0,(e=_e.prototype).ma=function(t,e){return(t=Ce(t,t,e)).c=!0,Pe(this,t),this},e.o=function(t,e){return Re(this,null,t,e)},e.cancel=function(t){if(this.a==we){var e=new Ve(t);ye((function(){!function t(e,n){if(e.a==we)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==e&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==we&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):Me(r),Fe(r,o,Te,n)))}e.c=null}else xe(e,Te,n)}(this,e)}),this)}},e.Yc=function(t){this.a=we,xe(this,Ee,t)},e.Zc=function(t){this.a=we,xe(this,Te,t)},e.ec=function(){for(var t;t=Me(this);)Fe(this,t,this.a,this.i);this.h=!1};var je=de;function Ve(t){D.call(this,t)}function qe(){0!=Be&&(We[g(this)]=this),this.wa=this.wa,this.na=this.na}S(Ve,D),Ve.prototype.name="cancel";var Be=0,We={};function He(t){if(!t.wa&&(t.wa=!0,t.Ba(),0!=Be)){var e=g(t);if(0!=Be&&t.na&&0<t.na.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete We[e]}}qe.prototype.wa=!1,qe.prototype.Ba=function(){if(this.na)for(;this.na.length;)this.na.shift()()};var ze=Object.freeze||function(t){return t},Ge=!Kt||9<=Number(ne),Ke=Kt&&!ie("9"),Qe=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{c.addEventListener("test",f,e),c.removeEventListener("test",f,e)}catch(n){}return t}();function Ye(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Xe(t,e){if(Ye.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Xt){t:{try{Ht(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:$e[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Ye.prototype.preventDefault=function(){this.defaultPrevented=!0},S(Xe,Ye);var $e=ze({2:"touch",3:"pen",4:"mouse"});Xe.prototype.preventDefault=function(){Xe.Za.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ke)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},Xe.prototype.f=function(){return this.a};var Je="closure_listenable_"+(1e6*Math.random()|0),Ze=0;function tn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ta=i,this.key=++Ze,this.ua=this.Na=!1}function en(t){t.ua=!0,t.listener=null,t.proxy=null,t.src=null,t.Ta=null}function nn(t){this.src=t,this.a={},this.b=0}function rn(t,e){var n=e.type;n in t.a&&Y(t.a[n],e)&&(en(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function on(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ua&&o.listener==e&&o.capture==!!n&&o.Ta==r)return i}return-1}nn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=on(t,e,r,i);return-1<s?(e=t[s],n||(e.Na=!1)):((e=new tn(e,this.src,o,!!r,i)).Na=n,t.push(e)),e};var sn="closure_lm_"+(1e6*Math.random()|0),an={};function un(t,e,n,r,i){if(r&&r.once)ln(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)un(t,e[o],n,r,i);else n=bn(n),t&&t[Je]?wn(t,e,n,y(r)?!!r.capture:!!r,i):cn(t,e,n,!1,r,i)}function cn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=y(i)?!!i.capture:!!i,a=gn(t);if(a||(t[sn]=a=new nn(t)),!(n=a.add(e,n,r,s,o)).proxy){if(r=function(){var t=yn,e=Ge?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Qe||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(pn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}0}}function ln(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,r,i);else n=bn(n),t&&t[Je]?En(t,e,n,y(r)?!!r.capture:!!r,i):cn(t,e,n,!0,r,i)}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else r=y(r)?!!r.capture:!!r,n=bn(n),t&&t[Je]?(t=t.u,(e=String(e).toString())in t.a&&(-1<(n=on(o=t.a[e],n,r,i))&&(en(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=gn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=on(e,n,r,i)),(n=-1<t?e[t]:null)&&fn(n))}function fn(t){if("number"!==typeof t&&t&&!t.ua){var e=t.src;if(e&&e[Je])rn(e.u,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(pn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=gn(e))?(rn(n,t),0==n.b&&(n.src=null,e[sn]=null)):en(t)}}}function pn(t){return t in an?an[t]:an[t]="on"+t}function dn(t,e,n,r){var i=!0;if((t=gn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ua&&(o=vn(o,r),i=i&&!1!==o)}return i}function vn(t,e){var n=t.listener,r=t.Ta||t.src;return t.Na&&fn(t),n.call(r,e)}function yn(t,e){if(t.ua)return!0;if(!Ge){if(!e)t:{e=["window","event"];for(var n=c,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Xe(r=e,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(s){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=dn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=dn(r[i],t,!1,e),n=n&&o}return n}return vn(t,new Xe(e,this))}function gn(t){return(t=t[sn])instanceof nn?t:null}var mn="__closure_events_fn_"+(1e9*Math.random()>>>0);function bn(t){return v(t)?t:(t[mn]||(t[mn]=function(e){return t.handleEvent(e)}),t[mn])}function _n(){qe.call(this),this.u=new nn(this),this.Yb=this,this.eb=null}function wn(t,e,n,r,i){t.u.add(String(e),n,!1,r,i)}function En(t,e,n,r,i){t.u.add(String(e),n,!0,r,i)}function Tn(t,e,n,r){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ua&&s.capture==n){var a=s.listener,u=s.Ta||s.src;s.Na&&rn(t.u,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function In(t,e,n){if(v(t))n&&(t=E(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=E(t.handleEvent,t)}return 2147483647<Number(e)?-1:c.setTimeout(t,e||0)}function Sn(t){var e=null;return new _e((function(n,r){-1==(e=In((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw c.clearTimeout(e),t}))}function Cn(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"===typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function kn(t){if(t.X&&"function"==typeof t.X)return t.X();if(!t.V||"function"!=typeof t.V){if(d(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Nn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Nn)for(n=t.X(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function An(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];On(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)On(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function On(t,e){return Object.prototype.hasOwnProperty.call(t,e)}S(_n,qe),_n.prototype[Je]=!0,_n.prototype.addEventListener=function(t,e,n,r){un(this,t,e,n,r)},_n.prototype.removeEventListener=function(t,e,n,r){hn(this,t,e,n,r)},_n.prototype.dispatchEvent=function(t){var e,n=this.eb;if(n)for(e=[];n;n=n.eb)e.push(n);n=this.Yb;var r=t.type||t;if("string"===typeof t)t=new Ye(t,n);else if(t instanceof Ye)t.target=t.target||n;else{var i=t;gt(t=new Ye(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=Tn(s,r,!0,t)&&i}if(i=Tn(s=t.b=n,r,!0,t)&&i,i=Tn(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Tn(s=t.b=e[o],r,!1,t)&&i;return i},_n.prototype.Ba=function(){if(_n.Za.Ba.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)en(n[r]);delete e.a[t],e.b--}}this.eb=null},(e=Nn.prototype).V=function(){An(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},e.X=function(){return An(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(t,e){return On(this.b,t)?this.b[t]:e},e.set=function(t,e){On(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},e.forEach=function(t,e){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Pn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Rn(t,e){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,t instanceof Rn?(this.h=void 0!==e?e:t.h,xn(this,t.f),this.i=t.i,this.b=t.b,Dn(this,t.l),this.c=t.c,Ln(this,tr(t.a)),this.g=t.g):t&&(n=String(t).match(Pn))?(this.h=!!e,xn(this,n[1]||"",!0),this.i=Vn(n[2]||""),this.b=Vn(n[3]||"",!0),Dn(this,n[4]),this.c=Vn(n[5]||"",!0),Ln(this,n[6]||"",!0),this.g=Vn(n[7]||"")):(this.h=!!e,this.a=new Qn(null,this.h))}function xn(t,e,n){t.f=n?Vn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Dn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.l=e}else t.l=null}function Ln(t,e,n){e instanceof Qn?(t.a=e,function(t,e){e&&!t.f&&(Yn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&($n(this,e),Zn(this,n,t))}),t)),t.f=e}(t.a,t.h)):(n||(e=qn(e,Gn)),t.a=new Qn(e,t.h))}function Mn(t,e,n){t.a.set(e,n)}function Fn(t,e){return t.a.get(e)}function Un(t){return t instanceof Rn?new Rn(t):new Rn(t,void 0)}function jn(t,e){var n=new Rn(null,void 0);return xn(n,"https"),t&&(n.b=t),e&&(n.c=e),n}function Vn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qn(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,Bn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Bn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Rn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(qn(e,Wn,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.i)&&t.push(qn(e,Wn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&t.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(qn(n,"/"==n.charAt(0)?zn:Hn,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.g)&&t.push("#",qn(n,Kn)),t.join("")},Rn.prototype.resolve=function(t){var e=new Rn(this),n=!!t.f;n?xn(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.l;var r=t.c;if(n)Dn(e,t.l);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ut(i,"./")||ut(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.a.toString(),n?Ln(e,tr(t.a)):n=!!t.g,n&&(e.g=t.g),e};var Wn=/[#\/\?@]/g,Hn=/[#\?:]/g,zn=/[#\?]/g,Gn=/[#\?@]/g,Kn=/#/g;function Qn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Yn(t){t.a||(t.a=new Nn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Xn(t){var e=kn(t);if("undefined"==typeof e)throw Error("Keys are undefined");var n=new Qn(null,void 0);t=Cn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Zn(n,i,o):n.add(i,o)}return n}function $n(t,e){Yn(t),e=er(t,e),On(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,On((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&An(t)))}function Jn(t,e){return Yn(t),e=er(t,e),On(t.a.b,e)}function Zn(t,e,n){$n(t,e),0<n.length&&(t.c=null,t.a.set(er(t,e),J(n)),t.b+=n.length)}function tr(t){var e=new Qn;return e.c=t.c,t.a&&(e.a=new Nn(t.a),e.b=t.b),e}function er(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nr(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&("function"!=typeof(s=n[i])&&(r.push(o),sr(i,r),r.push(":"),t(e,s,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":sr(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new rr,t,e),e.join("")}function rr(){}(e=Qn.prototype).add=function(t,e){Yn(this),this.c=null,t=er(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(t,e){Yn(this),this.a.forEach((function(n,r){H(n,(function(n){t.call(e,n,r,this)}),this)}),this)},e.X=function(){Yn(this);for(var t=this.a.V(),e=this.a.X(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},e.V=function(t){Yn(this);var e=[];if("string"===typeof t)Jn(this,t)&&(e=$(e,this.a.get(er(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=$(e,t[n])}return e},e.set=function(t,e){return Yn(this),this.c=null,Jn(this,t=er(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},e.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.X(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.V(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var ir={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},or=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function sr(t,e){e.push('"',t.replace(or,(function(t){var e=ir[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),ir[t]=e),e})),'"')}function ar(){var t=Cr();return Kt&&!!ne&&11==ne||/Edge\/\d+/.test(t)}function ur(){return c.window&&c.window.location.href||self&&self.location&&self.location.href||""}function cr(t,e){e=e||c.window;var n="about:blank";t&&(n=Rt(Dt(t))),e.location.href=n}function lr(t){return!!((t=(t||Cr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function hr(t){t=t||c.window;try{t.close()}catch(e){}}function fr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Cr().toLowerCase(),r&&(e.target=r,ut(n,"crios/")&&(e.target="_blank")),Tr(Cr())==wr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Pt?n:Dt("undefined"!=typeof n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((ft("iPhone")&&!ft("iPod")&&!ft("iPad")||ft("iPad")||ft("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(mt(s=fe(document,"A"),"HTMLAnchorElement"),e instanceof Pt||e instanceof Pt||(e="object"==typeof e&&e.ra?e.qa():String(e),xt.test(e)||(e="about:invalid#zClosurez"),e=new Pt(Mt,e)),s.href=Rt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=r.open("",n,s),t=Rt(e),s&&(Yt&&ut(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t=Vt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Wt(t)+'">'),r=s.document)&&(r.write(Ut(t)),r.close())):(s=r.open(Rt(e),n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(a){}return s}var pr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dr=/^[^@]+@[^@]+$/;function vr(){var t=null;return new _e((function(e){"complete"==c.document.readyState?e():(t=function(){e()},ln(window,"load",t))})).o((function(e){throw hn(window,"load",t),e}))}function yr(t){return t=t||Cr(),!("file:"!==Pr()&&"ionic:"!==Pr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function gr(){var t=c.window;try{return!(!t||t==t.top)}catch(e){return!1}}function mr(){return"undefined"!==typeof c.WorkerGlobalScope&&"function"===typeof c.importScripts}function br(){return r.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.INTERNAL.hasOwnProperty("node")?"Node":mr()?"Worker":"Browser"}function _r(){var t=br();return"ReactNative"===t||"Node"===t}var wr="Firefox",Er="Chrome";function Tr(t){var e=t.toLowerCase();return ut(e,"opera/")||ut(e,"opr/")||ut(e,"opios/")?"Opera":ut(e,"iemobile")?"IEMobile":ut(e,"msie")||ut(e,"trident/")?"IE":ut(e,"edge/")?"Edge":ut(e,"firefox/")?wr:ut(e,"silk/")?"Silk":ut(e,"blackberry")?"Blackberry":ut(e,"webos")?"Webos":!ut(e,"safari/")||ut(e,"chrome/")||ut(e,"crios/")||ut(e,"android")?!ut(e,"chrome/")&&!ut(e,"crios/")||ut(e,"edge/")?ut(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Er:"Safari"}var Ir={jd:"FirebaseCore-web",ld:"FirebaseUI-web"};function Sr(t,e){e=e||[];var n,r=[],i={};for(n in Ir)i[Ir[n]]=!0;for(n=0;n<e.length;n++)"undefined"!==typeof i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=br())?r=Tr(i=Cr()):"Worker"===r&&(r=Tr(i=Cr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Cr(){return c.navigator&&c.navigator.userAgent||""}function kr(t,e){t=t.split("."),e=e||c;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Nr(){try{var t=c.localStorage,e=Mr();if(t)return t.setItem(e,"1"),t.removeItem(e),!ar()||!!c.indexedDB}catch(n){return mr()&&!!c.indexedDB}return!1}function Ar(){return(Or()||"chrome-extension:"===Pr()||yr())&&!_r()&&Nr()&&!mr()}function Or(){return"http:"===Pr()||"https:"===Pr()}function Pr(){return c.location&&c.location.protocol||null}function Rr(t){return!lr(t=t||Cr())&&Tr(t)!=wr}function xr(t){return"undefined"===typeof t?null:nr(t)}function Dr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Lr(t){if(null!==t)return JSON.parse(t)}function Mr(t){return t||Math.floor(1e9*Math.random()).toString()}function Fr(t){return"Safari"!=Tr(t=t||Cr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Ur(){var t=c.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function jr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Cr(),e=br(),this.b=lr(t)||"ReactNative"===e}function Vr(){var t=c.document;return!t||"undefined"===typeof t.visibilityState||"visible"==t.visibilityState}function qr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Br(){return!(!kr("fireauth.oauthhelper",c)&&!kr("fireauth.iframe",c))}jr.prototype.get=function(){var t=c.navigator;return!t||"boolean"!==typeof t.onLine||!Or()&&"chrome-extension:"!==Pr()&&"undefined"===typeof t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Wr,Hr={};function zr(t){Hr[t]||(Hr[t]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(t))}try{var Gr={};Object.defineProperty(Gr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Gr,"abcd",{configurable:!0,enumerable:!0,value:2}),Wr=2==Gr.abcd}catch(ss){Wr=!1}function Kr(t,e,n){Wr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Qr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Kr(t,n,e[n])}function Yr(t){var e={};return Qr(e,t),e}function Xr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Kr(e,n,Xr(t[n]));return e}function $r(t){var e=t&&(t[ni]?"phone":null);if(!(e&&t&&t[ei]))throw new C("internal-error","Internal assert: invalid MultiFactorInfo object");Kr(this,"uid",t[ei]),Kr(this,"displayName",t[Zr]||null);var n=null;t[ti]&&(n=new Date(t[ti]).toUTCString()),Kr(this,"enrollmentTime",n),Kr(this,"factorId",e)}function Jr(t){try{var e=new ri(t)}catch(n){e=null}return e}$r.prototype.v=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Zr="displayName",ti="enrolledAt",ei="mfaEnrollmentId",ni="phoneInfo";function ri(t){$r.call(this,t),Kr(this,"phoneNumber",t[ni])}function ii(t){var e={},n=t[ui],r=t[li],i=t[hi];if(t=Jr(t[ci]),!i||i!=si&&i!=ai&&!n||i==ai&&!r||i==oi&&!t)throw Error("Invalid checkActionCode response!");i==ai?(e[pi]=n||null,e[vi]=n||null,e[fi]=r):(e[pi]=r||null,e[vi]=r||null,e[fi]=n||null),e[di]=t||null,Kr(this,gi,i),Kr(this,yi,Xr(e))}S(ri,$r),ri.prototype.v=function(){var t=ri.Za.v.call(this);return t.phoneNumber=this.phoneNumber,t};var oi="REVERT_SECOND_FACTOR_ADDITION",si="EMAIL_SIGNIN",ai="VERIFY_AND_CHANGE_EMAIL",ui="email",ci="mfaInfo",li="newEmail",hi="requestType",fi="email",pi="fromEmail",di="multiFactorInfo",vi="previousEmail",yi="data",gi="operation";function mi(t){var e=Fn(t=Un(t),bi)||null,n=Fn(t,_i)||null,r=Fn(t,Ti)||null;if(r=r&&Si[r]||null,!e||!n||!r)throw new C("argument-error",bi+", "+_i+"and "+Ti+" are required in a valid action code URL.");Qr(this,{apiKey:e,operation:r,code:n,continueUrl:Fn(t,wi)||null,languageCode:Fn(t,Ei)||null,tenantId:Fn(t,Ii)||null})}var bi="apiKey",_i="oobCode",wi="continueUrl",Ei="languageCode",Ti="mode",Ii="tenantId",Si={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:oi,signIn:si,verifyAndChangeEmail:ai,verifyEmail:"VERIFY_EMAIL"};function Ci(t){try{return new mi(t)}catch(e){return null}}function ki(t){var e=t[Ri];if("undefined"===typeof e)throw new C("missing-continue-uri");if("string"!==typeof e||"string"===typeof e&&!e.length)throw new C("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Ni];if(n&&"object"===typeof n){e=n[Li];var r=n[xi];if(n=n[Di],"string"===typeof e&&e.length){if(this.a=e,"undefined"!==typeof r&&"boolean"!==typeof r)throw new C("argument-error",xi+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!==typeof n&&("string"!==typeof n||"string"===typeof n&&!n.length))throw new C("argument-error",Di+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!==typeof e)throw new C("argument-error",Li+" property must be a non empty string when specified.");if("undefined"!==typeof r||"undefined"!==typeof n)throw new C("missing-android-pkg-name")}}else if("undefined"!==typeof n)throw new C("argument-error",Ni+" property must be a non null object when specified.");if(this.f=null,(e=t[Pi])&&"object"===typeof e){if("string"===typeof(e=e[Mi])&&e.length)this.f=e;else if("undefined"!==typeof e)throw new C("argument-error",Mi+" property must be a non empty string when specified.")}else if("undefined"!==typeof e)throw new C("argument-error",Pi+" property must be a non null object when specified.");if("undefined"!==typeof(e=t[Oi])&&"boolean"!==typeof e)throw new C("argument-error",Oi+" property must be a boolean when specified.");if(this.c=!!e,"undefined"!==typeof(t=t[Ai])&&("string"!==typeof t||"string"===typeof t&&!t.length))throw new C("argument-error",Ai+" property must be a non empty string when specified.");this.i=t||null}var Ni="android",Ai="dynamicLinkDomain",Oi="handleCodeInApp",Pi="iOS",Ri="url",xi="installApp",Di="minimumVersion",Li="packageName",Mi="bundleId";function Fi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Ui=null;function ji(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Ui[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Ui){Ui={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Ui[o]&&(Ui[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){e+=String.fromCharCode(t)})),e}function Vi(t){var e=Bi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,I(),this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function qi(t){try{return new Vi(t)}catch(e){return null}}function Bi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(ji(t))}catch(r){}return null}Vi.prototype.S=function(){return this.f},Vi.prototype.i=function(){return this.b},Vi.prototype.toString=function(){return this.g};var Wi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Hi=["client_id","response_type","scope","redirect_uri","state"],zi={kd:{Ha:"locale",ta:700,sa:600,ea:"facebook.com",Va:Hi},md:{Ha:null,ta:500,sa:750,ea:"github.com",Va:Hi},nd:{Ha:"hl",ta:515,sa:680,ea:"google.com",Va:Hi},td:{Ha:"lang",ta:485,sa:705,ea:"twitter.com",Va:Wi},gd:{Ha:"locale",ta:640,sa:600,ea:"apple.com",Va:[]}};function Gi(t){for(var e in zi)if(zi[e].ea==t)return zi[e];return null}function Ki(t){var e={};e["facebook.com"]=Ji,e["google.com"]=to,e["github.com"]=Zi,e["twitter.com"]=eo;var n=t&&t[Yi];try{if(n)return e[n]?new e[n](t):new $i(t);if("undefined"!==typeof t[Qi])return new Xi(t)}catch(r){}return null}var Qi="idToken",Yi="providerId";function Xi(t){var e=t[Yi];if(!e&&t[Qi]){var n=qi(t[Qi]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,"undefined"!==typeof t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Kr(this,"providerId",e),Kr(this,"isNewUser",n)}function $i(t){Xi.call(this,t),Kr(this,"profile",Xr((t=Lr(t.rawUserInfo||"{}"))||{}))}function Ji(t){if($i.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Zi(t){if($i.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Kr(this,"username",this.profile&&this.profile.login||null)}function to(t){if($i.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function eo(t){if($i.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Kr(this,"username",t.screenName||null)}function no(t){var e=Un(t),n=Fn(e,"link"),r=Fn(Un(n),"link");return e=Fn(e,"deep_link_id"),Fn(Un(e),"link")||e||r||n||t}function ro(t,e){if(!t&&!e)throw new C("internal-error","Internal assert: no raw session string available");if(t&&e)throw new C("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?io:oo}S($i,Xi),S(Ji,$i),S(Zi,$i),S(to,$i),S(eo,$i);var io="enroll",oo="signin";function so(){}function ao(t,e){return t.then((function(t){if(t[Xs]){var n=qi(t[Xs]);if(!n||e!=n.h)throw new C("user-mismatch");return t}throw new C("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==A+"user-not-found"?new C("user-mismatch"):t}))}function uo(t,e){if(!e)throw new C("internal-error","failed to construct a credential");this.a=e,Kr(this,"providerId",t),Kr(this,"signInMethod",t)}function co(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function lo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new uo(t.providerId,t.pendingToken)}catch(e){}return null}function ho(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Kr(this,"idToken",e.idToken),e.accessToken&&Kr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Kr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new C("internal-error","failed to construct a credential");Kr(this,"accessToken",e.oauthToken),Kr(this,"secret",e.oauthTokenSecret)}Kr(this,"providerId",t),Kr(this,"signInMethod",n)}function fo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Xn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function po(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new ho(t.providerId,e,t.signInMethod)}catch(n){}}return null}function vo(t,e){this.Oc=e||[],Qr(this,{providerId:t,isOAuthProvider:!0}),this.Fb={},this.lb=(Gi(t)||{}).Ha||null,this.kb=null}function yo(t){if("string"!==typeof t||0!=t.indexOf("saml."))throw new C("argument-error",'SAML provider IDs must be prefixed with "saml."');vo.call(this,t,[])}function go(t){vo.call(this,t,Hi),this.a=[]}function mo(){go.call(this,"facebook.com")}function bo(t){if(!t)throw new C("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new mo).credential({accessToken:e})}function _o(){go.call(this,"github.com")}function wo(t){if(!t)throw new C("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new _o).credential({accessToken:e})}function Eo(){go.call(this,"google.com"),this.Aa("profile")}function To(t,e){var n=t;return y(t)&&(n=t.idToken,e=t.accessToken),(new Eo).credential({idToken:n,accessToken:e})}function Io(){vo.call(this,"twitter.com",Wi)}function So(t,e){var n=t;if(y(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new C("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new ho("twitter.com",n,"twitter.com")}function Co(t,e,n){this.a=t,this.f=e,Kr(this,"providerId","password"),Kr(this,"signInMethod",n===No.EMAIL_LINK_SIGN_IN_METHOD?No.EMAIL_LINK_SIGN_IN_METHOD:No.EMAIL_PASSWORD_SIGN_IN_METHOD)}function ko(t){return t&&t.email&&t.password?new Co(t.email,t.password,t.signInMethod):null}function No(){Qr(this,{providerId:"password",isOAuthProvider:!1})}function Ao(t,e){if(!(e=Oo(e)))throw new C("argument-error","Invalid email link!");return new Co(t,e.code,No.EMAIL_LINK_SIGN_IN_METHOD)}function Oo(t){return(t=Ci(t=no(t)))&&t.operation===si?t:null}function Po(t){if(!(t.bb&&t.ab||t.Ja&&t.da))throw new C("internal-error");this.a=t,Kr(this,"providerId","phone"),this.ea="phone",Kr(this,"signInMethod","phone")}function Ro(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return H(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Po(e)}return null}function xo(t){return t.a.Ja&&t.a.da?{temporaryProof:t.a.Ja,phoneNumber:t.a.da}:{sessionInfo:t.a.bb,code:t.a.ab}}function Do(t){try{this.a=t||r.auth()}catch(e){throw new C("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Qr(this,{providerId:"phone",isOAuthProvider:!1})}function Lo(t,e){if(!t)throw new C("missing-verification-id");if(!e)throw new C("missing-verification-code");return new Po({bb:t,ab:e})}function Mo(t){if(t.temporaryProof&&t.phoneNumber)return new Po({Ja:t.temporaryProof,da:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return To(o,n);case"facebook.com":return bo(n);case"github.com":return wo(n);case"twitter.com":return So(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new uo(e,s):new ho(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new go(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(a){return null}}function Fo(t){if(!t.isOAuthProvider)throw new C("invalid-oauth-provider")}function Uo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new C("invalid-auth-event");if(this.g&&this.a)throw new C("invalid-auth-event");if(this.g&&!this.f)throw new C("invalid-auth-event")}function jo(t){return(t=t||{}).type?new Uo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&k(t.error),t.postBody,t.tenantId):null}function Vo(){this.b=null,this.a=[]}ro.prototype.Fa=function(){return this.a?ke(this.a):ke(this.b)},ro.prototype.v=function(){return this.type==io?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},so.prototype.ia=function(){},so.prototype.b=function(){},so.prototype.c=function(){},so.prototype.v=function(){},uo.prototype.ia=function(t){return ya(t,co(this))},uo.prototype.b=function(t,e){var n=co(this);return n.idToken=e,ga(t,n)},uo.prototype.c=function(t,e){return ao(ma(t,co(this)),e)},uo.prototype.v=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},ho.prototype.ia=function(t){return ya(t,fo(this))},ho.prototype.b=function(t,e){var n=fo(this);return n.idToken=e,ga(t,n)},ho.prototype.c=function(t,e){return ao(ma(t,fo(this)),e)},ho.prototype.v=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},vo.prototype.Ia=function(t){return this.Fb=vt(t),this},S(yo,vo),S(go,vo),go.prototype.Aa=function(t){return Q(this.a,t)||this.a.push(t),this},go.prototype.Nb=function(){return J(this.a)},go.prototype.credential=function(t,e){var n;if(!(n=y(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new C("argument-error","credential failed: must provide the ID token and/or the access token.");return new ho(this.providerId,n,this.providerId)},S(mo,go),Kr(mo,"PROVIDER_ID","facebook.com"),Kr(mo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),S(_o,go),Kr(_o,"PROVIDER_ID","github.com"),Kr(_o,"GITHUB_SIGN_IN_METHOD","github.com"),S(Eo,go),Kr(Eo,"PROVIDER_ID","google.com"),Kr(Eo,"GOOGLE_SIGN_IN_METHOD","google.com"),S(Io,vo),Kr(Io,"PROVIDER_ID","twitter.com"),Kr(Io,"TWITTER_SIGN_IN_METHOD","twitter.com"),Co.prototype.ia=function(t){return this.signInMethod==No.EMAIL_LINK_SIGN_IN_METHOD?Za(t,Ca,{email:this.a,oobCode:this.f}):Za(t,Qa,{email:this.a,password:this.f})},Co.prototype.b=function(t,e){return this.signInMethod==No.EMAIL_LINK_SIGN_IN_METHOD?Za(t,ka,{idToken:e,email:this.a,oobCode:this.f}):Za(t,Va,{idToken:e,email:this.a,password:this.f})},Co.prototype.c=function(t,e){return ao(this.ia(t),e)},Co.prototype.v=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Qr(No,{PROVIDER_ID:"password"}),Qr(No,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Qr(No,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Po.prototype.ia=function(t){return t.cb(xo(this))},Po.prototype.b=function(t,e){var n=xo(this);return n.idToken=e,Za(t,Xa,n)},Po.prototype.c=function(t,e){var n=xo(this);return n.operation="REAUTH",ao(t=Za(t,$a,n),e)},Po.prototype.v=function(){var t={providerId:"phone"};return this.a.bb&&(t.verificationId=this.a.bb),this.a.ab&&(t.verificationCode=this.a.ab),this.a.Ja&&(t.temporaryProof=this.a.Ja),this.a.da&&(t.phoneNumber=this.a.da),t},Do.prototype.cb=function(t,e){var n=this.a.b;return ke(e.verify()).then((function(r){if("string"!==typeof r)throw new C("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=y(t)?t.session:null,o=y(t)?t.phoneNumber:t;return(i&&i.type==io?i.Fa().then((function(t){return function(t,e){return Za(t,Ba,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==oo?i.Fa().then((function(e){return function(t,e){return Za(t,Wa,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return Za(t,Ua,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"===typeof e.reset&&e.reset(),t}),(function(t){throw"function"===typeof e.reset&&e.reset(),t}));default:throw new C("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Qr(Do,{PROVIDER_ID:"phone"}),Qr(Do,{PHONE_SIGN_IN_METHOD:"phone"}),Uo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Uo.prototype.S=function(){return this.h},Uo.prototype.v=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.v()}};var qo,Bo=null;function Wo(t){var e="unauthorized-domain",n=void 0,r=Un(t);t=r.b,"chrome-extension"==(r=r.f)?n=Bt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Bt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",C.call(this,e,n)}function Ho(t,e,n){C.call(this,t,n),(t=e||{}).Gb&&Kr(this,"email",t.Gb),t.da&&Kr(this,"phoneNumber",t.da),t.credential&&Kr(this,"credential",t.credential),t.Wb&&Kr(this,"tenantId",t.Wb)}function zo(t){if(t.code){var e=t.code||"";0==e.indexOf(A)&&(e=e.substring(A.length));var n={credential:Mo(t),Wb:t.tenantId};if(t.email)n.Gb=t.email;else if(t.phoneNumber)n.da=t.phoneNumber;else if(!n.credential)return new C(e,t.message||void 0);return new Ho(e,n,t.message)}return null}function Go(){}function Ko(t){return t.c||(t.c=t.b())}function Qo(){}function Yo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Xo(){}function $o(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=E(this.oc,this),this.a.onerror=E(this.Pb,this),this.a.onprogress=E(this.pc,this),this.a.ontimeout=E(this.tc,this)}function Jo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Zo(t,e,n){this.reset(t,e,n,void 0,void 0)}S(Wo,C),S(Ho,C),Ho.prototype.v=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.v();return e&&gt(t,e),t},Ho.prototype.toJSON=function(){return this.v()},Go.prototype.c=null,S(Qo,Go),Qo.prototype.a=function(){var t=Yo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Qo.prototype.b=function(){var t={};return Yo(this)&&(t[0]=!0,t[1]=!0),t},qo=new Qo,S(Xo,Go),Xo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new $o;throw Error("Unsupported browser")},Xo.prototype.b=function(){return{}},(e=$o.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},e.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},e.oc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Jo(this,4)},e.Pb=function(){this.status=500,this.response=this.responseText="",Jo(this,4)},e.tc=function(){this.Pb()},e.pc=function(){this.status=200,Jo(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Zo.prototype.a=null;function ts(t){this.f=t,this.b=this.c=this.a=null}function es(t,e){this.name=t,this.value=e}Zo.prototype.reset=function(t,e,n,r,i){"number"==typeof i||0,r||I(),delete this.a},es.prototype.toString=function(){return this.name};var ns=new es("SEVERE",1e3),rs=new es("WARNING",900),is=new es("CONFIG",700),os=new es("FINE",500);ts.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(M("Root logger has no level set."),null)}(this).value)for(v(e)&&(e=e()),t=new Zo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var ss,as={},us=null;function cs(t){var e;if(us||(us=new ts(""),as[""]=us,us.c=is),!(e=as[t])){e=new ts(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=cs(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,as[t]=e}return e}function ls(t,e){t&&t.log(os,e,void 0)}function hs(t){this.f=t}function fs(t){_n.call(this),this.s=t,this.readyState=ps,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=cs("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}S(hs,Go),hs.prototype.a=function(){return new fs(this.f)},hs.prototype.b=(ss={},function(){return ss}),S(fs,_n);var ps=0;function ds(t){t.c.read().then(t.nc.bind(t)).catch(t.Sa.bind(t))}function vs(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,ys(t)}function ys(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function gs(t){_n.call(this),this.headers=new Nn,this.D=t||null,this.c=!1,this.B=this.a=null,this.h=this.P=this.l="",this.f=this.O=this.i=this.N=!1,this.g=0,this.s=null,this.m=ms,this.w=this.R=!1}(e=fs.prototype).open=function(t,e){if(this.readyState!=ps)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,ys(this)},e.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.s.fetch(new Request(this.g,e)).then(this.sc.bind(this),this.Sa.bind(this))},e.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,vs(this,!1)),this.readyState=ps},e.sc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,ys(this)),this.a&&(this.readyState=3,ys(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.qc.bind(this),this.Sa.bind(this)):"undefined"!==typeof c.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,ds(this)):t.text().then(this.rc.bind(this),this.Sa.bind(this)))))},e.nc=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?vs(this,!0):ys(this),3==this.readyState&&ds(this)}},e.rc=function(t){this.a&&(this.response=this.responseText=t,vs(this,!0))},e.qc=function(t){this.a&&(this.response=t,vs(this,!0))},e.Sa=function(t){var e=this.h;e&&e.log(rs,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&vs(this,!0)},e.setRequestHeader=function(t,e){this.i.append(t,e)},e.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(rs,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(rs,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},S(gs,_n);var ms="";gs.prototype.b=cs("goog.net.XhrIo");var bs=/^https?$/i,_s=["POST","PUT"];function ws(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.N=!1,t.c=!0,t.a=t.D?t.D.a():qo.a(),t.B=t.D?Ko(t.D):Ko(qo),t.a.onreadystatechange=E(t.Sb,t);try{ls(t.b,Os(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(s){return ls(t.b,Os(t,"Error opening Xhr: "+s.message)),void Ts(t,s)}e=r||"";var o=new Nn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"===typeof t)H(t,e,void 0);else for(var n=kn(t),r=Cn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Es,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}(o.X()),r=c.FormData&&e instanceof c.FormData,!Q(_s,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.R&&(t.a.withCredentials=t.R);try{ks(t),0<t.g&&(t.w=function(t){return Kt&&ie(9)&&"number"===typeof t.timeout&&void 0!==t.ontimeout}(t.a),ls(t.b,Os(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.w)),t.w?(t.a.timeout=t.g,t.a.ontimeout=E(t.Ka,t)):t.s=In(t.Ka,t.g,t)),ls(t.b,Os(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(s){ls(t.b,Os(t,"Send error: "+s.message)),Ts(t,s)}}function Es(t){return"content-type"==t.toLowerCase()}function Ts(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Is(t),Cs(t)}function Is(t){t.N||(t.N=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Ss(t){if(t.c&&"undefined"!=typeof u)if(t.B[1]&&4==Ns(t)&&2==As(t))ls(t.b,Os(t,"Local request error detected and ignored"));else if(t.i&&4==Ns(t))In(t.Sb,0,t);else if(t.dispatchEvent("readystatechange"),4==Ns(t)){ls(t.b,Os(t,"Request complete")),t.c=!1;try{var e,n=As(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(Pn)[1]||null;if(!o&&c.self&&c.self.location){var s=c.self.location.protocol;o=s.substr(0,s.length-1)}i=!bs.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var a=2<Ns(t)?t.a.statusText:""}catch(l){ls(t.b,"Can not get status: "+l.message),a=""}t.h=a+" ["+As(t)+"]",Is(t)}}finally{Cs(t)}}}function Cs(t,e){if(t.a){ks(t);var n=t.a,r=t.B[0]?f:null;t.a=null,t.B=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(t=t.b)&&t.log(ns,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function ks(t){t.a&&t.w&&(t.a.ontimeout=null),t.s&&(c.clearTimeout(t.s),t.s=null)}function Ns(t){return t.a?t.a.readyState:0}function As(t){try{return 2<Ns(t)?t.a.status:-1}catch(e){return-1}}function Os(t,e){return e+" ["+t.P+" "+t.l+" "+As(t)+"]"}function Ps(t){var e=Bs;this.g=[],this.w=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.u=this.B=this.i=!1,this.h=0,this.b=null,this.l=0}function Rs(t,e,n){t.a=!0,t.c=n,t.f=!e,Ms(t)}function xs(t){if(t.a){if(!t.u)throw new Fs(t);t.u=!1}}function Ds(t,e,n,r){t.g.push([e,n,r]),t.a&&Ms(t)}function Ls(t){return K(t.g,(function(t){return v(t[1])}))}function Ms(t){if(t.h&&t.a&&Ls(t)){var e=t.h,n=Vs[e];n&&(c.clearTimeout(n.a),delete Vs[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var a=o.call(i||t.s,e);void 0!==a&&(t.f=t.f&&(a==e||a instanceof Error),t.c=e=a),(x(e)||"function"===typeof c.Promise&&e instanceof c.Promise)&&(r=!0,t.i=!0)}catch(u){e=u,t.f=!0,Ls(t)||(n=!0)}}t.c=e,r&&(a=E(t.m,t,!0),r=E(t.m,t,!1),e instanceof Ps?(Ds(e,a,r),e.B=!0):e.then(a,r)),n&&(e=new js(e),Vs[e.a]=e,t.h=e.a)}function Fs(){D.call(this)}function Us(){D.call(this)}function js(t){this.a=c.setTimeout(E(this.c,this),0),this.b=t}(e=gs.prototype).Ka=function(){"undefined"!=typeof u&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ls(this.b,Os(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&(ls(this.b,Os(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Cs(this))},e.Ba=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Cs(this,!0)),gs.Za.Ba.call(this)},e.Sb=function(){this.wa||(this.O||this.i||this.f?Ss(this):this.Hc())},e.Hc=function(){Ss(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ms:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(ns,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return ls(this.b,"Can not get response: "+e.message),null}},Ps.prototype.cancel=function(t){if(this.a)this.c instanceof Ps&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.w?this.w.call(this.s,this):this.u=!0,this.a||(t=new Us(this),xs(this),Rs(this,!1,t))}},Ps.prototype.m=function(t,e){this.i=!1,Rs(this,t,e)},Ps.prototype.then=function(t,e,n){var r,i,o=new _e((function(t,e){r=t,i=e}));return Ds(this,r,(function(t){t instanceof Us?o.cancel():i(t)})),o.then(t,e,n)},Ps.prototype.$goog_Thenable=!0,S(Fs,D),Fs.prototype.message="Deferred has already fired",Fs.prototype.name="AlreadyCalledError",S(Us,D),Us.prototype.message="Deferred was canceled",Us.prototype.name="CanceledError",js.prototype.c=function(){throw delete Vs[this.a],this.b};var Vs={};function qs(t){var e={},n=e.document||document,r=St(t).toString(),i=fe(document,"SCRIPT"),o={Tb:i,Ka:void 0},s=new Ps(o),a=null,u=null!=e.timeout?e.timeout:5e3;return 0<u&&(a=window.setTimeout((function(){Ws(i,!0);var t=new Gs(zs,"Timeout reached for loading script "+r);xs(s),Rs(s,!1,t)}),u),o.Ka=a),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ws(i,e.ud||!1,a),xs(s),Rs(s,!0,null))},i.onerror=function(){Ws(i,!0,a);var t=new Gs(Hs,"Error while loading script "+r);xs(s),Rs(s,!1,t)},gt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),ae(i,o),function(t,e){mt(t,"HTMLScriptElement"),t.src=St(e),null===h&&(h=(e=(e=c.document).querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&l.test(e)?e:""),(e=h)&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function Bs(){if(this&&this.Tb){var t=this.Tb;t&&"SCRIPT"==t.tagName&&Ws(t,!0,this.Ka)}}function Ws(t,e,n){null!=n&&c.clearTimeout(n),t.onload=f,t.onerror=f,t.onreadystatechange=f,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Hs=0,zs=1;function Gs(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),D.call(this,n),this.code=t}function Ks(t){this.f=t}function Qs(t,e,n){if(this.c=t,t=e||{},this.u=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||$s,this.g=vt(t.secureTokenHeaders||Js),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.l=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.i=t.firebaseTimeout||Zs,this.a=vt(t.firebaseHeaders||ta),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==br(),!(n=c.XMLHttpRequest||n&&r.INTERNAL.node&&r.INTERNAL.node.XMLHttpRequest)&&!mr())throw new C("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,mr()?this.f=new hs(self):_r()?this.f=new Ks(n):this.f=new Xo,this.b=null}S(Gs,D),S(Ks,Go),Ks.prototype.a=function(){return new this.f},Ks.prototype.b=function(){return{}};var Ys,Xs="idToken",$s=new jr(3e4,6e4),Js={"Content-Type":"application/x-www-form-urlencoded"},Zs=new jr(3e4,6e4),ta={"Content-Type":"application/json"};function ea(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function na(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function ra(t,e,n,r,i,o,s){(function(){var t=Cr();return!((t=Tr(t)!=Er?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t)&&(!Kt||!ne||9<ne)})()||mr()?t=E(t.w,t):(Ys||(Ys=new _e((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{c[oa]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ds(t,null,e,void 0)}(qs(Ct(ia,{onload:oa})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=E(t.s,t)),t(e,n,r,i,o,s)}Qs.prototype.S=function(){return this.b},Qs.prototype.w=function(t,e,n,r,i,o){if(mr()&&("undefined"===typeof c.fetch||"undefined"===typeof c.Headers||"undefined"===typeof c.Request))throw new C("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new gs(this.f);if(o){s.g=Math.max(0,o);var a=setTimeout((function(){s.dispatchEvent("timeout")}),o)}wn(s,"complete",(function(){a&&clearTimeout(a);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return ls(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)})),En(s,"ready",(function(){a&&clearTimeout(a),He(this)})),En(s,"timeout",(function(){a&&clearTimeout(a),He(this),e&&e(null)})),ws(s,t,n,r,i)};var ia=new bt(Et,"https://apis.google.com/js/client.js?onload=%{onload}"),oa="__fcb"+Math.floor(1e6*Math.random()).toString();function sa(t,e,n,r,i,o,s){var a=Un(e+n);Mn(a,"key",t.c),s&&Mn(a,"cb",I().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Mn(a,c,i[c]);return new _e((function(e,n){ra(t,a.toString(),(function(t){t?t.error?n(eu(t,o||{})):e(t):n(new C("network-request-failed"))}),r,u?void 0:nr(Dr(i)),t.a,t.i.get())}))}function aa(t){if("string"!==typeof(t=t.email)||!dr.test(t))throw new C("invalid-email")}function ua(t){"email"in t&&aa(t)}function ca(t){if(!t[Xs]){if(t.mfaPendingCredential)throw new C("multi-factor-auth-required",null,vt(t));throw new C("internal-error")}}function la(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new C("internal-error")}else{if(!t.sessionInfo)throw new C("missing-verification-id");if(!t.code)throw new C("missing-verification-code")}}Qs.prototype.s=function(t,e,n,r,i){var o=this;Ys.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Qs.prototype.vb=function(){return Za(this,qa,{})},Qs.prototype.xb=function(t,e){return Za(this,ja,{idToken:t,email:e})},Qs.prototype.yb=function(t,e){return Za(this,Va,{idToken:t,password:e})};var ha={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function fa(t){if(!t.phoneVerificationInfo)throw new C("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new C("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new C("missing-verification-code")}function pa(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new C("internal-error")}function da(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Jn(t=new Qn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function va(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=zo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=zo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=zo(t)):t.errorMessage&&(e=tu(t.errorMessage)),e)throw e;ca(t)}function ya(t,e){return e.returnIdpCredential=!0,Za(t,Ha,e)}function ga(t,e){return e.returnIdpCredential=!0,Za(t,Ga,e)}function ma(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Za(t,za,e)}function ba(t){if(!t.oobCode)throw new C("invalid-action-code")}(e=Qs.prototype).zb=function(t,e){var n={idToken:t},r=[];return pt(ha,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),Za(this,ja,n)},e.rb=function(t,e){return gt(t={requestType:"PASSWORD_RESET",email:t},e),Za(this,Da,t)},e.sb=function(t,e){return gt(t={requestType:"EMAIL_SIGNIN",email:t},e),Za(this,Pa,t)},e.qb=function(t,e){return gt(t={requestType:"VERIFY_EMAIL",idToken:t},e),Za(this,Ra,t)},e.Ab=function(t,e,n){return gt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Za(this,xa,t)},e.cb=function(t){return Za(this,Ya,t)},e.jb=function(t,e){return Za(this,Fa,{oobCode:t,newPassword:e})},e.Pa=function(t){return Za(this,wa,{oobCode:t})},e.fb=function(t){return Za(this,_a,{oobCode:t})};var _a={endpoint:"setAccountInfo",A:ba,Y:"email",C:!0},wa={endpoint:"resetPassword",A:ba,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new C("internal-error")},C:!0},Ea={endpoint:"signupNewUser",A:function(t){if(aa(t),!t.password)throw new C("weak-password")},G:ca,U:!0,C:!0},Ta={endpoint:"createAuthUri",C:!0},Ia={endpoint:"deleteAccount",M:["idToken"]},Sa={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],A:function(t){if("array"!=p(t.deleteProvider))throw new C("internal-error")}},Ca={endpoint:"emailLinkSignin",M:["email","oobCode"],A:aa,G:ca,U:!0,C:!0},ka={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],A:aa,G:ca,U:!0},Na={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],A:fa,G:ca,C:!0,La:!0},Aa={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],A:fa,G:ca,C:!0,La:!0},Oa={endpoint:"getAccountInfo"},Pa={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new C("internal-error");aa(t)},Y:"email",C:!0},Ra={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new C("internal-error")},Y:"email",C:!0},xa={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new C("internal-error")},Y:"email",C:!0},Da={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new C("internal-error");aa(t)},Y:"email",C:!0},La={hb:!0,endpoint:"getProjectConfig",Rb:"GET"},Ma={hb:!0,endpoint:"getRecaptchaParam",Rb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new C("internal-error")}},Fa={endpoint:"resetPassword",A:ba,Y:"email",C:!0},Ua={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Y:"sessionInfo",C:!0},ja={endpoint:"setAccountInfo",M:["idToken"],A:ua,U:!0},Va={endpoint:"setAccountInfo",M:["idToken"],A:function(t){if(ua(t),!t.password)throw new C("weak-password")},G:ca,U:!0},qa={endpoint:"signupNewUser",G:ca,U:!0,C:!0},Ba={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new C("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new C("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new C("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new C("internal-error")},C:!0,La:!0},Wa={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new C("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new C("internal-error")},C:!0,La:!0},Ha={endpoint:"verifyAssertion",A:pa,Wa:da,G:va,U:!0,C:!0},za={endpoint:"verifyAssertion",A:pa,Wa:da,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new C("user-not-found");if(t.errorMessage)throw tu(t.errorMessage);ca(t)},U:!0,C:!0},Ga={endpoint:"verifyAssertion",A:function(t){if(pa(t),!t.idToken)throw new C("internal-error")},Wa:da,G:va,U:!0},Ka={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new C("invalid-custom-token")},G:ca,U:!0,C:!0},Qa={endpoint:"verifyPassword",A:function(t){if(aa(t),!t.password)throw new C("wrong-password")},G:ca,U:!0,C:!0},Ya={endpoint:"verifyPhoneNumber",A:la,G:ca,C:!0},Xa={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new C("internal-error");la(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",zo(t);ca(t)}},$a={Eb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:la,G:ca,C:!0},Ja={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Xs]^!!t.refreshToken)throw new C("internal-error")},C:!0,La:!0};function Za(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(void 0===r||null===r||""===r)return!1}return!0}(n,e.M))return Ne(new C("internal-error"));var r,i=!!e.La,o=e.Rb||"POST";return ke(n).then(e.A).then((function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&"undefined"===typeof n.tenantId&&(n.tenantId=t.b),sa(t,i?t.l:t.h,e.endpoint,o,n,e.Eb,e.hb||!1)})).then((function(t){return r=t,e.Wa?e.Wa(n,r):r})).then(e.G).then((function(){if(!e.Y)return r;if(!(e.Y in r))throw new C("internal-error");return r[e.Y]}))}function tu(t){return eu({error:{errors:[{message:t}],code:400,message:t}})}function eu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new C(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",gt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new C(r[i],e);return!e&&t&&(e=xr(t)),new C("internal-error",e)}function nu(t){this.b=t,this.a=null,this.nb=function(t){return(su||(su=new _e((function(t,e){function n(){Ur(),kr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Ur(),e(Error("Network Error"))},timeout:iu.get()})}if(kr("gapi.iframes.Iframe"))t();else if(kr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();c[r]=function(){kr("gapi.load")?n():e(Error("Network Error"))},ke(qs(r=Ct(ru,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw su=null,t})))).then((function(){return new _e((function(e,n){kr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:kr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),ou.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var ru=new bt(Et,"https://apis.google.com/js/api.js?onload=%{onload}"),iu=new jr(3e4,6e4),ou=new jr(5e3,15e3),su=null;function au(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=jn(this.i,"/__/auth/iframe"),Mn(this.a,"apiKey",this.g),Mn(this.a,"appName",this.h),this.b=null,this.c=[]}function uu(t,e,n,r,i){this.s=t,this.m=e,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function cu(t){try{return r.app(t).auth().Ea()}catch(e){return[]}}function lu(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.m=this.s=this.w=null,this.g=[],this.l=this.a=null}function hu(t){var e=ur();return function(t){return Za(t,La,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Un(e),r=n.f;n=n.b;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Un(o).b==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:pr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Wo(ur())}))}function fu(t){return t.l||(t.l=vr().then((function(){if(!t.s){var e=t.c,n=t.h,r=cu(t.b),i=new au(t.u,t.f,t.b);i.f=e,i.b=n,i.c=J(r||[]),t.s=i.toString()}t.i=new nu(t.s),function(t){if(!t.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.nb.then((function(){t.a.register("authEvent",e,kr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.i,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=jo(e.authEvent),n=0;n<t.g.length;n++)r=t.g[n](e)||r;return(n={}).status=r?"ACK":"ERROR",ke(n)}return n.status="ERROR",ke(n)}))}(t)}))),t.l}function pu(t){return t.m||(t.w=t.c?Sr(t.c,cu(t.b)):null,t.m=new Qs(t.f,R(t.h),t.w)),t.m}function du(t,e,n,r,i,o,s,a,u,c,l){return(t=new uu(t,e,n,r,i)).l=o,t.g=s,t.i=a,t.b=vt(u||null),t.f=c,t.ub(l).toString()}function vu(t){if(this.a=t||r.INTERNAL.reactNative&&r.INTERNAL.reactNative.AsyncStorage,!this.a)throw new C("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function yu(t){this.b=t,this.a={},this.f=E(this.c,this)}au.prototype.toString=function(){return this.f?Mn(this.a,"v",this.f):$n(this.a.a,"v"),this.b?Mn(this.a,"eid",this.b):$n(this.a.a,"eid"),this.c.length?Mn(this.a,"fw",this.c.join(",")):$n(this.a.a,"fw"),this.a.toString()},uu.prototype.ub=function(t){return this.h=t,this},uu.prototype.toString=function(){var t=jn(this.s,"/__/auth/handler");if(Mn(t,"apiKey",this.m),Mn(t,"appName",this.c),Mn(t,"authType",this.u),this.a.isOAuthProvider){var e=this.a;try{var n=r.app(this.c).auth().ja()}catch(u){n=null}for(var i in e.kb=n,Mn(t,"providerId",this.a.providerId),n=Dr((e=this.a).Fb))n[i]=n[i].toString();i=e.Oc,n=vt(n);for(var o=0;o<i.length;o++){var s=i[o];s in n&&delete n[s]}e.lb&&e.kb&&!n[e.lb]&&(n[e.lb]=e.kb),dt(n)||Mn(t,"customParameters",xr(n))}if("function"===typeof this.a.Nb&&((e=this.a.Nb()).length&&Mn(t,"scopes",e.join(","))),this.l?Mn(t,"redirectUrl",this.l):$n(t.a,"redirectUrl"),this.g?Mn(t,"eventId",this.g):$n(t.a,"eventId"),this.i?Mn(t,"v",this.i):$n(t.a,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Fn(t,a)&&Mn(t,a,this.b[a]);return this.h?Mn(t,"tid",this.h):$n(t.a,"tid"),this.f?Mn(t,"eid",this.f):$n(t.a,"eid"),(a=cu(this.c)).length&&Mn(t,"fw",a.join(",")),t.toString()},(e=lu.prototype).Lb=function(t,e,n){var r=new C("popup-closed-by-user"),i=new C("web-storage-unsupported"),o=this,s=!1;return this.ka().then((function(){(function(t){var e={type:"webStorageSupport"};return fu(t).then((function(){return function(t,e){return t.nb.then((function(){return new _e((function(n){t.a.send(e.type,e,n,kr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.i,e)})).then((function(t){if(t&&t.length&&"undefined"!==typeof t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&hr(t),e(i),s=!0)}))})).o((function(){})).then((function(){if(!s)return function(t){return new _e((function(e){return function n(){Sn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!s)return Sn(n).then((function(){e(r)}))}))},e.Ub=function(){var t=Cr();return!Rr(t)&&!Fr(t)},e.Qb=function(){return!1},e.Jb=function(t,e,n,r,i,o,s,a){if(!t)return Ne(new C("popup-blocked"));if(s&&!Rr())return this.ka().o((function(e){hr(t),i(e)})),r(),ke();this.a||(this.a=hu(pu(this)));var u=this;return this.a.then((function(){var e=u.ka().o((function(e){throw hr(t),i(e),e}));return r(),e})).then((function(){(Fo(n),s)||cr(du(u.u,u.f,u.b,e,n,null,o,u.c,void 0,u.h,a),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},e.Kb=function(t,e,n,r){this.a||(this.a=hu(pu(this)));var i=this;return this.a.then((function(){Fo(e),cr(du(i.u,i.f,i.b,t,e,ur(),n,i.c,void 0,i.h,r))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},e.ka=function(){var t=this;return fu(this).then((function(){return t.i.nb})).o((function(){throw t.a=null,new C("network-request-failed")}))},e.Xb=function(){return!0},e.Ca=function(t){this.g.push(t)},e.Qa=function(t){X(this.g,(function(e){return e==t}))},(e=vu.prototype).get=function(t){return ke(this.a.getItem(t)).then((function(t){return t&&Lr(t)}))},e.set=function(t,e){return ke(this.a.setItem(t,xr(e)))},e.T=function(t){return ke(this.a.removeItem(t))},e.ba=function(){},e.ha=function(){};var gu,mu=[];function bu(t,e,n){dt(t.a)&&t.b.addEventListener("message",t.f),"undefined"===typeof t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function _u(t){this.a=t}function wu(t){this.c=t,this.b=!1,this.a=[]}function Eu(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return Ne(Error("connection_unavailable"));var l=r?800:50,h="undefined"!==typeof MessageChannel?new MessageChannel:null;return new _e((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),l),c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),"undefined"!==typeof t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}},t.a.push(c),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(e){return Tu(t,c),e})).o((function(e){throw Tu(t,c),e}))}function Tu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),X(t.a,(function(t){return t==e}))}}function Iu(){if(!ku())throw new C("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=c.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.s=!1,this.h=null;var t=this;mr()&&self?(this.l=function(){var t=mr()?self:null;if(H(mu,(function(n){n.b==t&&(e=n)})),!e){var e=new yu(t);mu.push(e)}return e}(),bu(this.l,"keyChanged",(function(e,n){return Ru(t).then((function(e){return 0<e.length&&H(t.a,(function(t){t(e)})),{keyProcessed:Q(e,n.key)}}))})),bu(this.l,"ping",(function(){return ke(["keyChanged"])}))):function(){var t=c.navigator;return t&&t.serviceWorker?ke().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):ke(null)}().then((function(e){(t.h=e)&&(t.g=new wu(new _u(e)),Eu(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&Q(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Su(t){return new _e((function(e,n){var r=t.u.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new _e((function(e,n){var r=t.u.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Su(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Cu(t){return t.m||(t.m=Su(t)),t.m}function ku(){try{return!!c.indexedDB}catch(ss){return!1}}function Nu(t){return t.objectStore("firebaseLocalStorage")}function Au(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Ou(t){return new _e((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Pu(t,e){return t.g&&t.h&&function(){var t=c.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Eu(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):ke()}function Ru(t){return Cu(t).then((function(t){var e=Nu(Au(t,!1));return e.getAll?Ou(e.getAll()):new _e((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)r in n?typeof e[r]!=typeof n[r]?i.push(r):"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(t.c,n),t.c=n}return r}))}function xu(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Du(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=ke().then((function(){if(ku()){var t=Mr(),r="__sak"+t;return gu||(gu=new Iu),(n=gu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.T(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ba((function(t){H(e.a,(function(e){e(t)}))})),t}))}function Lu(){this.a={},this.type="inMemory"}function Mu(){if(!function(){var t="Node"==br();if(!(t=Fu()||t&&r.INTERNAL.node&&r.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==br())throw new C("internal-error","The LocalStorage compatibility library was not found.");throw new C("web-storage-unsupported")}this.a=Fu()||r.INTERNAL.node.localStorage,this.type="localStorage"}function Fu(){try{var t=c.localStorage,e=Mr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Uu(){this.type="nullStorage"}function ju(){if(!function(){var t="Node"==br();if(!(t=Vu()||t&&r.INTERNAL.node&&r.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==br())throw new C("internal-error","The SessionStorage compatibility library was not found.");throw new C("web-storage-unsupported")}this.a=Vu()||r.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Vu(){try{var t=c.sessionStorage,e=Mr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function qu(){var t={};t.Browser=Hu,t.Node=zu,t.ReactNative=Gu,t.Worker=Ku,this.a=t[br()]}yu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];H(r,(function(e){i.push(ke().then((function(){return e(t.origin,t.data.data)})))})),Oe(i).then((function(r){var i=[];H(r,(function(t){i.push({fulfilled:t.Mb,value:t.value,reason:t.reason?t.reason.message:void 0})})),H(i,(function(t){for(var e in t)"undefined"===typeof t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},_u.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},wu.prototype.close=function(){for(;0<this.a.length;)Tu(this,this.a[0]);this.b=!0},(e=Iu.prototype).set=function(t,e){var n,r=!1,i=this;return Cu(this).then((function(e){return Ou((e=Nu(Au(n=e,!0))).get(t))})).then((function(o){var s=Nu(Au(n,!0));return o?(o.value=e,Ou(s.put(o))):(i.b++,r=!0,(o={}).fbase_key=t,o.value=e,Ou(s.add(o)))})).then((function(){return i.c[t]=e,Pu(i,t)})).ma((function(){r&&i.b--}))},e.get=function(t){return Cu(this).then((function(e){return Ou(Nu(Au(e,!1)).get(t))})).then((function(t){return t&&t.value}))},e.T=function(t){var e=!1,n=this;return Cu(this).then((function(r){return e=!0,n.b++,Ou(Nu(Au(r,!0)).delete(t))})).then((function(){return delete n.c[t],Pu(n,t)})).ma((function(){e&&n.b--}))},e.ba=function(t){0==this.a.length&&function(t){xu(t),function e(){t.f=setTimeout((function(){t.i=Ru(t).then((function(e){0<e.length&&H(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},e.ha=function(t){X(this.a,(function(e){return e==t})),0==this.a.length&&xu(this)},(e=Du.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},e.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},e.T=function(t){return this.b.then((function(e){return e.T(t)}))},e.ba=function(t){this.a.push(t)},e.ha=function(t){X(this.a,(function(e){return e==t}))},(e=Lu.prototype).get=function(t){return ke(this.a[t])},e.set=function(t,e){return this.a[t]=e,ke()},e.T=function(t){return delete this.a[t],ke()},e.ba=function(){},e.ha=function(){},(e=Mu.prototype).get=function(t){var e=this;return ke().then((function(){return Lr(e.a.getItem(t))}))},e.set=function(t,e){var n=this;return ke().then((function(){var r=xr(e);null===r?n.T(t):n.a.setItem(t,r)}))},e.T=function(t){var e=this;return ke().then((function(){e.a.removeItem(t)}))},e.ba=function(t){c.window&&un(c.window,"storage",t)},e.ha=function(t){c.window&&hn(c.window,"storage",t)},(e=Uu.prototype).get=function(){return ke(null)},e.set=function(){return ke()},e.T=function(){return ke()},e.ba=function(){},e.ha=function(){},(e=ju.prototype).get=function(t){var e=this;return ke().then((function(){return Lr(e.a.getItem(t))}))},e.set=function(t,e){var n=this;return ke().then((function(){var r=xr(e);null===r?n.T(t):n.a.setItem(t,r)}))},e.T=function(t){var e=this;return ke().then((function(){e.a.removeItem(t)}))},e.ba=function(){},e.ha=function(){};var Bu,Wu,Hu={F:Mu,$a:ju},zu={F:Mu,$a:ju},Gu={F:vu,$a:Uu},Ku={F:Mu,$a:Uu},Qu={od:"local",NONE:"none",qd:"session"};function Yu(){var t=!(Fr(Cr())||!gr()),e=Rr(),n=Nr();this.m=t,this.h=e,this.l=n,this.a={},Bu||(Bu=new qu),t=Bu;try{this.g=!ar()&&Br()||!c.indexedDB?new t.a.F:new Du(mr()?new Lu:new t.a.F)}catch(r){this.g=new Lu,this.h=!0}try{this.i=new t.a.$a}catch(r){this.i=new Lu}this.u=new Lu,this.f=E(this.Vb,this),this.b={}}function Xu(){return Wu||(Wu=new Yu),Wu}function $u(t,e){switch(e){case"session":return t.i;case"none":return t.u;default:return t.g}}function Ju(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Zu(t,e,n){return n=Ju(e,n),"local"==e.F&&(t.b[n]=null),$u(t,e.F).T(n)}function tc(t){t.c&&(clearInterval(t.c),t.c=null)}function ec(t){this.a=t,this.b=Xu()}(e=Yu.prototype).get=function(t,e){return $u(this,t.F).get(Ju(t,e))},e.set=function(t,e,n){var r=Ju(t,n),i=this,o=$u(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},e.addListener=function(t,e,n){t=Ju(t,e),this.l&&(this.b[t]=c.localStorage.getItem(t)),dt(this.a)&&($u(this,"local").ba(this.f),this.h||(ar()||!Br())&&c.indexedDB||!this.l||function(t){tc(t),t.c=setInterval((function(){for(var e in t.a){var n=c.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Xe({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Vb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},e.removeListener=function(t,e,n){t=Ju(t,e),this.a[t]&&(X(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),dt(this.a)&&($u(this,"local").ha(this.f),tc(this))},e.Vb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];"undefined"===typeof r&&(r=null);var i=c.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.ib(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if("undefined"!==typeof t.a.a?$u(this,"local").ha(this.f):tc(this),this.m)if(n=c.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?c.localStorage.setItem(e,r):c.localStorage.removeItem(e);else if(this.b[e]===r&&"undefined"===typeof t.a.a)return;var o=this;n=function(){"undefined"===typeof t.a.a&&o.b[e]===c.localStorage.getItem(e)||(o.b[e]=c.localStorage.getItem(e),o.ib(e))},Kt&&ne&&10==ne&&c.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else H(t,E(this.ib,this))},e.ib=function(t){this.a[t]&&H(this.a[t],(function(t){t()}))};var nc,rc={name:"authEvent",F:"local"};function ic(){this.a=Xu()}function oc(t,e){this.b=sc,this.f=c.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=c.Int32Array?new Int32Array(64):Array(64),void 0===nc&&(nc=c.Int32Array?new Int32Array(pc):pc),this.reset()}S(oc,(function(){this.b=-1}));for(var sc=64,ac=sc-1,uc=[],cc=0;cc<ac;cc++)uc[cc]=0;var lc=$(128,uc);function hc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&l^~c&h)+(0|nc[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function fc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"===typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(hc(t),i=0);else{if(!d(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(hc(t),i=0)}}t.c=i,t.g+=n}oc.prototype.reset=function(){this.g=this.c=0,this.a=c.Int32Array?new Int32Array(this.h):J(this.h)};var pc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function dc(){oc.call(this,8,vc)}S(dc,oc);var vc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function yc(t,e,n,r,i){this.u=t,this.i=e,this.l=n,this.m=r||null,this.s=i||null,this.h=e+":"+n,this.w=new ic,this.g=new ec(this.h),this.f=null,this.b=[],this.a=this.c=null}function gc(t){return new C("invalid-cordova-configuration",t)}function mc(t){var e=new dc;fc(e,t),t=[];var n=8*e.g;56>e.c?fc(e,lc,56-e.c):fc(e,lc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(hc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return G(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function bc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function _c(t){return t.f||(t.f=t.ka().then((function(){return new _e((function(e){t.Ca((function n(r){return e(r),t.Qa(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),wc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=no(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"===typeof(o=Lr(Fn(o=Un(i),"firebaseError")||null))?k(o):null)?new Uo(r.c,r.b,null,null,o,null,r.S()):new Uo(r.c,r.b,i,r.f,null,null,r.S())),i=o||n}bc(t,i)}))}var n=new Uo("unknown",null,null,null,new C("no-auth-event")),r=!1,i=Sn(500).then((function(){return wc(t).then((function(){r||bc(t,n)}))})),o=c.handleOpenURL;c.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(kr("BuildInfo.packageName",c).toLowerCase()+"://")&&e({url:t}),"function"===typeof o)try{o(t)}catch(n){console.error(n)}},Bo||(Bo=new Vo),function(t){var e=Bo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"===typeof(t=kr("universalLinks.subscribe",c))&&t(null,e.b))}(e)}(t)}))}))),t.f}function wc(t){var e=null;return function(t){return t.b.get(rc,t.a).then((function(t){return jo(t)}))}(t.g).then((function(n){return e=n,Zu((n=t.g).b,rc,n.a)})).then((function(){return e}))}function Ec(t){this.a=t,this.b=Xu()}(e=yc.prototype).ka=function(){return this.Ga?this.Ga:this.Ga=(yr(void 0)?vr().then((function(){return new _e((function(t,e){var n=c.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Ne(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!==typeof kr("universalLinks.subscribe",c))throw gc("cordova-universal-links-plugin-fix is not installed");if("undefined"===typeof kr("BuildInfo.packageName",c))throw gc("cordova-plugin-buildinfo is not installed");if("function"!==typeof kr("cordova.plugins.browsertab.openUrl",c))throw gc("cordova-plugin-browsertab is not installed");if("function"!==typeof kr("cordova.InAppBrowser.open",c))throw gc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new C("cordova-not-ready")}))},e.Lb=function(t,e){return e(new C("operation-not-supported-in-this-environment")),ke()},e.Jb=function(){return Ne(new C("operation-not-supported-in-this-environment"))},e.Xb=function(){return!1},e.Ub=function(){return!0},e.Qb=function(){return!0},e.Kb=function(t,e,n,r){if(this.c)return Ne(new C("redirect-operation-pending"));var i=this,o=c.document,s=null,a=null,u=null,l=null;return this.c=ke().then((function(){return Fo(e),_c(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Uo(e,r,null,o,new C("no-auth-event"),null,i),a=kr("BuildInfo.packageName",c);if("string"!==typeof a)throw new C("invalid-cordova-configuration");var u=kr("BuildInfo.displayName",c),l={};if(Cr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=a;else{if(!Cr().toLowerCase().match(/android/))return Ne(new C("operation-not-supported-in-this-environment"));l.apn=a}u&&(l.appDisplayName=u),o=mc(o),l.sessionId=o;var h=du(t.u,t.i,t.l,e,n,null,r,t.m,l,t.s,i);return t.ka().then((function(){var e=t.h;return t.w.a.set(rc,s.v(),e)})).then((function(){var e=kr("cordova.plugins.browsertab.isAvailable",c);if("function"!==typeof e)throw new C("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!==typeof(n=kr("cordova.plugins.browsertab.openUrl",c)))throw new C("invalid-cordova-configuration");n(h)}else{if("function"!==typeof(n=kr("cordova.InAppBrowser.open",c)))throw new C("invalid-cordova-configuration");e=Cr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new _e((function(t,e){a=function(){var e=kr("cordova.plugins.browsertab.close",c);return t(),"function"===typeof e&&e(),i.a&&"function"===typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ca(a),u=function(){s||(s=Sn(2e3).then((function(){e(new C("redirect-cancelled-by-user"))})))},l=function(){Vr()&&u()},o.addEventListener("resume",u,!1),Cr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).o((function(t){return wc(i).then((function(){throw t}))}))})).ma((function(){u&&o.removeEventListener("resume",u,!1),l&&o.removeEventListener("visibilitychange",l,!1),s&&s.cancel(),a&&i.Qa(a),i.c=null}))},e.Ca=function(t){this.b.push(t),_c(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Uo("unknown",null,null,null,new C("no-auth-event")),t(e))}))},e.Qa=function(t){X(this.b,(function(e){return e==t}))};var Tc={name:"pendingRedirect",F:"session"};function Ic(t){return Zu(t.b,Tc,t.a)}function Sc(t,e,n){this.i={},this.w=0,this.D=t,this.u=e,this.m=n,this.h=[],this.f=!1,this.l=E(this.s,this),this.b=new jc,this.B=new Hc,this.g=new Ec(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.B,this.c.linkViaPopup=this.B,this.c.reauthViaPopup=this.B,this.a=Cc(this.D,this.u,this.m,N)}function Cc(t,e,n,i){var o=r.SDK_VERSION||null;return yr()?new yc(t,e,n,o,i):new lu(t,e,n,o,i)}function kc(t){t.f||(t.f=!0,t.a.Ca(t.l));var e=t.a;return t.a.ka().o((function(n){throw t.a==e&&t.reset(),n}))}function Nc(t){t.a.Ub()&&kc(t).o((function(e){var n=new Uo("unknown",null,null,null,new C("operation-not-supported-in-this-environment"));Dc(e)&&t.s(n)})),t.a.Qb()||Vc(t.b)}function Ac(t,e){Q(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Tc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Ic(t.g).then((function(){kc(t).o((function(e){var n=new Uo("unknown",null,null,null,new C("operation-not-supported-in-this-environment"));Dc(e)&&t.s(n)}))})):Nc(t)})).o((function(){Nc(t)}))}function Oc(t,e){X(t.h,(function(t){return t==e}))}Sc.prototype.reset=function(){this.f=!1,this.a.Qa(this.l),this.a=Cc(this.D,this.u,this.m),this.i={}},Sc.prototype.s=function(t){if(!t)throw new C("invalid-auth-event");if(6e5<=I()-this.w&&(this.i={},this.w=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Cb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.w=I())),e=!0;break}}return Vc(this.b),e};var Pc=new jr(2e3,1e4),Rc=new jr(3e4,6e4);function xc(t,e,n,r,i,o,s){return t.a.Jb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ca(t.l))}),(function(){t.reset()}),i,o,s)}function Dc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Lc(t,e,n,r,i){var o;return function(t){return t.b.set(Tc,"pending",t.a)}(t.g).then((function(){return t.a.Kb(e,n,r,i).o((function(e){if(Dc(e))throw new C("operation-not-supported-in-this-environment");return o=e,Ic(t.g).then((function(){throw o}))})).then((function(){return t.a.Xb()?new _e((function(){})):Ic(t.g).then((function(){return t.pa()})).then((function(){})).o((function(){}))}))}))}function Mc(t,e,n,r,i){return t.a.Lb(r,(function(t){e.la(n,null,t,i)}),Pc.get())}Sc.prototype.pa=function(){return this.b.pa()};var Fc={};function Uc(t,e,n){var r=e+":"+n;return Fc[r]||(Fc[r]=new Sc(t,e,n)),Fc[r]}function jc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Vc(t){t.g||(t.g=!0,Wc(t,!1,null,null))}function qc(t){t.g&&!t.i&&Wc(t,!1,null,null)}function Bc(t,e){if(t.b=function(){return ke(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Wc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Ne(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Bc(t,n):Bc(t,{user:null}),t.f=[],t.c=[]}function Hc(){}function zc(){this.Bb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.Bb},set:function(t){this.Bb=t},enumerable:!1})}function Gc(t,e){this.a=e,Kr(this,"verificationId",t)}function Kc(t,e,n,r){return new Do(t).cb(e,n).then((function(t){return new Gc(t,r)}))}function Qc(t){var e=Bi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new C("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Qr(this,{token:t,expirationTime:qr(1e3*e.exp),authTime:qr(1e3*e.auth_time),issuedAtTime:qr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Yc(t,e,n){var r=e&&e[$c];if(!r)throw new C("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=vt(e),this.g=n,this.c=new ro(null,r),this.b=[];var i=this;H(e[Xc]||[],(function(t){(t=Jr(t))&&i.b.push(t)})),Kr(this,"auth",this.a),Kr(this,"session",this.c),Kr(this,"hints",this.b)}jc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},jc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Wc(this,!0,null,t.a),ke()):e.Da(n,r)?function(t,e,n){n=n.Da(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.S(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){Wc(t,a,e,null)})).o((function(e){Wc(t,a,null,e)}))}(this,t,e):Ne(new C("invalid-auth-event")):(Wc(this,!1,null,null),ke())}else Ne(new C("invalid-auth-event"))},jc.prototype.pa=function(){var t=this;return new _e((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new C("timeout");t.a&&t.a.cancel(),t.a=Sn(Rc.get()).then((function(){t.b||(t.g=!0,Wc(t,!0,null,e))}))}(t))}))},Hc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.la(t.c,null,t.a,t.b),ke()):e.Da(n,r)?function(t,e){var n=t.b,r=t.c;e.Da(r,n)(t.g,t.f,t.S(),t.i).then((function(t){e.la(r,t,null,n)})).o((function(t){e.la(r,null,t,n)}))}(t,e):Ne(new C("invalid-auth-event"))}else Ne(new C("invalid-auth-event"))},Gc.prototype.confirm=function(t){return t=Lo(this.verificationId,t),this.a(t)};var Xc="mfaInfo",$c="mfaPendingCredential";function Jc(t,e,n,r){C.call(this,"multi-factor-auth-required",r,e),this.b=new Yc(t,e,n),Kr(this,"resolver",this.b)}function Zc(t,e,n){if(t&&y(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Jc(e,t.serverResponse,n,t.message)}catch(r){}return null}function tl(){}function el(t){Kr(this,"factorId",t.ea),this.a=t}function nl(t){if(el.call(this,t),this.a.ea!=Do.PROVIDER_ID)throw new C("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function rl(t,e){for(var n in Ye.call(this,t),e)this[n]=e[n]}function il(t,e){this.a=t,this.b=[],this.c=E(this.wc,this),un(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&H(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ei]=t.uid),t.displayName&&(r[Zr]=t.displayName),t.enrollmentTime&&(r[ti]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ni]=t.phoneNumber);try{e=new ri(r)}catch(i){}t=e}else t=null;t&&n.push(t)})),ol(this,n)}function ol(t,e){t.b=e,Kr(t,"enrolledFactors",e)}function sl(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function al(t){this.c=t,this.b=this.a=null}function ul(t){return t.b&&1e3*t.b.c||0}function cl(t,e){var n=e.refreshToken;t.b=qi(e[Xs]||""),t.a=n}function ll(t,e){return function(t,e){return new _e((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ra(t,t.u+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(eu(t)):t.access_token&&t.refresh_token?n(t):r(new C("internal-error")):r(new C("network-request-failed"))}),"POST",Xn(e).toString(),t.g,t.m.get()):r(new C("internal-error"))}))}(t.c,e).then((function(e){return t.b=qi(e.access_token),t.a=e.refresh_token,{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function hl(t,e){this.a=t||null,this.b=e||null,Qr(this,{lastSignInTime:qr(e||null),creationTime:qr(t||null)})}function fl(t,e,n,r,i,o){Qr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function pl(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null,t=r.SDK_VERSION?Sr(r.SDK_VERSION):null,this.a=new Qs(this.l,R(N),t),this.b=new al(this.a),_l(this,e[Xs]),cl(this.b,e),Kr(this,"refreshToken",this.b.a),Tl(this,n||{}),_n.call(this),this.P=!1,this.s&&Ar()&&(this.i=Uc(this.s,this.l,this.m)),this.R=[],this.h=null,this.B=function(t){return new sl((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=ul(t.b)-I()-3e5;return 0<e?e:0}))}(this),this.Z=E(this.Ma,this);var i=this;this.oa=null,this.za=function(t){i.va(t.g)},this.aa=null,this.W=[],this.ya=function(t){vl(i,t.c)},this.$=null,this.O=new il(this,n),Kr(this,"multiFactor",this.O)}function dl(t,e){t.aa&&hn(t.aa,"languageCodeChanged",t.za),(t.aa=e)&&un(e,"languageCodeChanged",t.za)}function vl(t,e){t.W=e,na(t.a,r.SDK_VERSION?Sr(r.SDK_VERSION,t.W):null)}function yl(t,e){t.$&&hn(t.$,"frameworkChanged",t.ya),(t.$=e)&&un(e,"frameworkChanged",t.ya)}function gl(t){try{return r.app(t.m).auth()}catch(e){throw new C("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function ml(t){t.D||t.B.b||(t.B.start(),hn(t,"tokenChanged",t.Z),un(t,"tokenChanged",t.Z))}function bl(t){hn(t,"tokenChanged",t.Z),t.B.stop()}function _l(t,e){t.xa=e,Kr(t,"_lat",e)}function wl(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return Oe(e).then((function(){return t}))}function El(t){t.i&&!t.P&&(t.P=!0,Ac(t.i,t))}function Tl(t,e){Qr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new hl(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Il(){}function Sl(t){return ke().then((function(){if(t.D)throw new C("app-deleted")}))}function Cl(t){return G(t.providerData,(function(t){return t.providerId}))}function kl(t,e){e&&(Nl(t,e.providerId),t.providerData.push(e))}function Nl(t,e){X(t.providerData,(function(t){return t.providerId==e}))}function Al(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Kr(t,e,n)}function Ol(t,e){t!=e&&(Qr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Kr(t,"metadata",function(t){return new hl(t.a,t.b)}(e.metadata)):Kr(t,"metadata",new hl),H(e.providerData,(function(e){kl(t,e)})),function(t,e){t.b=e.b,t.a=e.a}(t.b,e.b),Kr(t,"refreshToken",t.b.a),ol(t.O,e.O.b))}function Pl(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return Za(t.a,Oa,{idToken:e}).then(E(t.Ic,t))}(t,e).then((function(){return n||Al(t,"isAnonymous",!1),e}))}))}function Rl(t,e){e[Xs]&&t.xa!=e[Xs]&&(cl(t.b,e),t.dispatchEvent(new rl("tokenChanged")),_l(t,e[Xs]),Al(t,"refreshToken",t.b.a))}function xl(t,e){return Pl(t).then((function(){if(Q(Cl(t),e))return wl(t).then((function(){throw new C("provider-already-linked")}))}))}function Dl(t,e,n){return Yr({user:t,credential:Mo(e),additionalUserInfo:e=Ki(e),operationType:n})}function Ll(t,e){return Rl(t,e),t.reload().then((function(){return t}))}function Ml(t,e,n,i,o){if(!Ar())return Ne(new C("operation-not-supported-in-this-environment"));if(t.h&&!o)return Ne(t.h);var s=Gi(n.providerId),a=Mr(t.uid+":::"),u=null;(!Rr()||gr())&&t.s&&n.isOAuthProvider&&(u=du(t.s,t.l,t.m,e,n,null,a,r.SDK_VERSION||null,null,null,t.tenantId));var c=fr(u,s&&s.ta,s&&s.sa);return i=i().then((function(){if(Ul(t),!o)return t.I().then((function(){}))})).then((function(){return xc(t.i,c,e,n,a,!!u,t.tenantId)})).then((function(){return new _e((function(n,r){t.la(e,null,new C("cancelled-popup-request"),t.g||null),t.f=n,t.w=r,t.g=a,t.c=Mc(t.i,t,e,c,a)}))})).then((function(t){return c&&hr(c),t?Yr(t):null})).o((function(t){throw c&&hr(c),t})),jl(t,i,o)}function Fl(t,e,n,r,i){if(!Ar())return Ne(new C("operation-not-supported-in-this-environment"));if(t.h&&!i)return Ne(t.h);var o=null,s=Mr(t.uid+":::");return r=r().then((function(){if(Ul(t),!i)return t.I().then((function(){}))})).then((function(){return t.fa=s,wl(t)})).then((function(e){return t.ga&&(e=(e=t.ga).b.set(Bl,t.v(),e.a)),e})).then((function(){return Lc(t.i,e,n,s,t.tenantId)})).o((function(e){if(o=e,t.ga)return Wl(t.ga);throw o})).then((function(){if(o)throw o})),jl(t,r,i)}function Ul(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new C("internal-error");throw new C("auth-domain-config-required")}}function jl(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),Ne(t.h)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new rl("userInvalidated")),t.h=e),e}))}(t,e,n);return t.N.push(r),r.ma((function(){Y(t.N,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=Zc(e.v(),gl(t),E(t.hc,t))),n||e}))}function Vl(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Xs]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=new pl(e,n,t);return t.providerData&&H(t.providerData,(function(t){t&&kl(r,Yr(t))})),t.redirectEventId&&(r.fa=t.redirectEventId),r}function ql(t){this.a=t,this.b=Xu()}Yc.prototype.Pc=function(t){var e=this;return t.ob(this.a.b,this.c).then((function(t){var n=vt(e.f);return delete n[Xc],delete n[$c],gt(n,t),e.g(n)}))},S(Jc,C),tl.prototype.ob=function(t,e,n){return e.type==io?function(t,e,n,r){return n.Fa().then((function(n){return n={idToken:n},"undefined"!==typeof r&&(n.displayName=r),gt(n,{phoneVerificationInfo:xo(t.a)}),Za(e,Na,n)}))}(this,t,e,n):function(t,e,n){return n.Fa().then((function(n){return gt(n={mfaPendingCredential:n},{phoneVerificationInfo:xo(t.a)}),Za(e,Aa,n)}))}(this,t,e)},S(el,tl),S(nl,el),S(rl,Ye),(e=il.prototype).wc=function(t){ol(this,function(t){var e=[];return H(t.mfaInfo||[],(function(t){(t=Jr(t))&&e.push(t)})),e}(t.ed))},e.Ob=function(){return this.a.I().then((function(t){return new ro(t,null)}))},e.dc=function(t,e){var n=this,r=this.a.a;return this.Ob().then((function(n){return t.ob(r,n,e)})).then((function(t){return Rl(n.a,t),n.a.reload()}))},e.$c=function(t){var e=this,n="string"===typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return Za(r,Ja,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=z(e.b,(function(t){return t.uid!=n}));return ol(e,r),Rl(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},e.v=function(){return{multiFactor:{enrolledFactors:G(this.b,(function(t){return t.v()}))}}},sl.prototype.start=function(){this.a=this.c,function t(e,n){e.stop(),e.b=Sn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then((function(){return function(){var t=c.document,e=null;return Vr()||!t?ke():new _e((function(n){e=function(){Vr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return e.h()})).then((function(){t(e,!0)})).o((function(n){e.i(n)&&t(e,!1)}))}(this,!0)},sl.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},al.prototype.v=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:ul(this)}},al.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ne(new C("user-token-expired")):t||!this.b||I()>ul(this)-3e4?this.a?ll(this,{grant_type:"refresh_token",refresh_token:this.a}):ke(null):ke({accessToken:this.b.toString(),refreshToken:this.a})},hl.prototype.v=function(){return{lastLoginAt:this.b,createdAt:this.a}},S(pl,_n),pl.prototype.va=function(t){this.oa=t,ea(this.a,t)},pl.prototype.ja=function(){return this.oa},pl.prototype.Ea=function(){return J(this.W)},pl.prototype.Ma=function(){this.B.b&&(this.B.stop(),this.B.start())},Kr(pl.prototype,"providerId","firebase"),(e=pl.prototype).reload=function(){var t=this;return jl(this,Sl(this).then((function(){return Pl(t).then((function(){return wl(t)})).then(Il)})))},e.mc=function(t){return this.I(t).then((function(t){return new Qc(t)}))},e.I=function(t){var e=this;return jl(this,Sl(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new C("internal-error");return t.accessToken!=e.xa&&(_l(e,t.accessToken),e.dispatchEvent(new rl("tokenChanged"))),Al(e,"refreshToken",t.refreshToken),t.accessToken})))},e.Ic=function(t){if(!(t=t.users)||!t.length)throw new C("internal-error");Tl(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?G(t,(function(t){return new fl(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)kl(this,e[n]);Al(this,"isAnonymous",!(this.email&&t.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new rl("userReloaded",{ed:t}))},e.Jc=function(t){return zr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.pb(t)},e.pb=function(t){var e=this,n=null;return jl(this,t.c(this.a,this.uid).then((function(t){return Rl(e,t),n=Dl(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},e.Ac=function(t){return zr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.mb(t)},e.mb=function(t){var e=this,n=null;return jl(this,xl(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Dl(e,t,"link"),Ll(e,t)})).then((function(){return n})))},e.Bc=function(t,e){var n=this;return jl(this,xl(this,"phone").then((function(){return Kc(gl(n),t,e,E(n.mb,n))})))},e.Kc=function(t,e){var n=this;return jl(this,ke().then((function(){return Kc(gl(n),t,e,E(n.pb,n))})),!0)},e.xb=function(t){var e=this;return jl(this,this.I().then((function(n){return e.a.xb(n,t)})).then((function(t){return Rl(e,t),e.reload()})))},e.cd=function(t){var e=this;return jl(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Rl(e,t),e.reload()})))},e.yb=function(t){var e=this;return jl(this,this.I().then((function(n){return e.a.yb(n,t)})).then((function(t){return Rl(e,t),e.reload()})))},e.zb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Sl(this);var e=this;return jl(this,this.I().then((function(n){return e.a.zb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Rl(e,t),Al(e,"displayName",t.displayName||null),Al(e,"photoURL",t.photoUrl||null),H(e.providerData,(function(t){"password"===t.providerId&&(Kr(t,"displayName",e.displayName),Kr(t,"photoURL",e.photoURL))})),wl(e)})).then(Il))},e.ad=function(t){var e=this;return jl(this,Pl(this).then((function(n){return Q(Cl(e),t)?function(t,e,n){return Za(t,Sa,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return H(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),H(Cl(e),(function(t){n[t]||Nl(e,t)})),n[Do.PROVIDER_ID]||Kr(e,"phoneNumber",null),wl(e)})):wl(e).then((function(){throw new C("no-such-provider")}))})))},e.delete=function(){var t=this;return jl(this,this.I().then((function(e){return Za(t.a,Ia,{idToken:e})})).then((function(){t.dispatchEvent(new rl("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");dl(t,null),yl(t,null),t.N=[],t.D=!0,bl(t),Kr(t,"refreshToken",null),t.i&&Oc(t.i,t)}))},e.Cb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.fa||null)==e||"reauthViaRedirect"==t&&(this.fa||null)==e)},e.la=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},e.Da=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?E(this.Hb,this):"reauthViaPopup"==t&&e==(this.g||null)?E(this.Ib,this):"linkViaRedirect"==t&&(this.fa||null)==e?E(this.Hb,this):"reauthViaRedirect"==t&&(this.fa||null)==e?E(this.Ib,this):null},e.Cc=function(t){var e=this;return Ml(this,"linkViaPopup",t,(function(){return xl(e,t.providerId).then((function(){return wl(e)}))}),!1)},e.Lc=function(t){return Ml(this,"reauthViaPopup",t,(function(){return ke()}),!0)},e.Dc=function(t){var e=this;return Fl(this,"linkViaRedirect",t,(function(){return xl(e,t.providerId)}),!1)},e.Mc=function(t){return Fl(this,"reauthViaRedirect",t,(function(){return ke()}),!0)},e.Hb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return jl(this,this.I().then((function(n){return ga(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Dl(i,t,"link"),Ll(i,t)})).then((function(){return o})))},e.Ib=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return jl(this,ke().then((function(){return ao(ma(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Dl(i,t,"reauthenticate"),Rl(i,t),i.h=null,i.reload()})).then((function(){return o})),!0)},e.qb=function(t){var e=this,n=null;return jl(this,this.I().then((function(e){return n=e,"undefined"===typeof t||dt(t)?{}:Fi(new ki(t))})).then((function(t){return e.a.qb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},e.Ab=function(t,e){var n=this,r=null;return jl(this,this.I().then((function(t){return r=t,"undefined"===typeof e||dt(e)?{}:Fi(new ki(e))})).then((function(e){return n.a.Ab(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},e.hc=function(t){var e=null,n=this;return jl(this,t=ao(ke(t),n.uid).then((function(t){return e=Dl(n,t,"reauthenticate"),Rl(n,t),n.h=null,n.reload()})).then((function(){return e})),!0)},e.toJSON=function(){return this.v()},e.v=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.v(),redirectEventId:this.fa||null};return this.metadata&&gt(t,this.metadata.v()),H(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),gt(t,this.O.v()),t};var Bl={name:"redirectUser",F:"session"};function Wl(t){return Zu(t.b,Bl,t.a)}function Hl(t){this.a=t,this.b=Xu(),this.c=null,this.f=function(t){var e=Kl("local"),n=Kl("session"),r=Kl("none");return function(t,e,n){var r=Ju(e,n),i=$u(t,e.F);return t.get(e,n).then((function(o){var s=null;try{s=Lr(c.localStorage.getItem(r))}catch(a){}if(s&&!o)return c.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&c.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(Gl,t.a).then((function(t){return t?Kl(t):e}))}))}))})).then((function(e){return t.c=e,zl(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(Kl("local"),this.a,E(this.g,this))}function zl(t,e){var n,r=[];for(n in Qu)Qu[n]!==e&&r.push(Zu(t.b,Kl(Qu[n]),t.a));return r.push(Zu(t.b,Gl,t.a)),function(t){return new _e((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)Ae(t[a],T(o,a),s);else e(i)}))}(r)}Hl.prototype.g=function(){var t=this,e=Kl("local");$l(this,(function(){return ke().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return zl(t,"local").then((function(){t.c=e}))}))}))};var Gl={name:"persistence",F:"session"};function Kl(t){return{name:"authUser",F:t}}function Ql(t,e){return $l(t,(function(){return t.b.set(t.c,e.v(),t.a)}))}function Yl(t){return $l(t,(function(){return Zu(t.b,t.c,t.a)}))}function Xl(t,e){return $l(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),Vl(t||{})}))}))}function $l(t,e){return t.f=t.f.then(e,e),t.f}function Jl(t){if(this.l=!1,Kr(this,"settings",new zc),Kr(this,"app",t),!sh(this).options||!sh(this).options.apiKey)throw new C("invalid-api-key");t=r.SDK_VERSION?Sr(r.SDK_VERSION):null,this.b=new Qs(sh(this).options&&sh(this).options.apiKey,R(N),t),this.P=[],this.m=[],this.O=[],this.$b=r.INTERNAL.createSubscribe(E(this.xc,this)),this.W=void 0,this.ac=r.INTERNAL.createSubscribe(E(this.yc,this)),ih(this,null),this.i=new Hl(sh(this).options.apiKey+":"+sh(this).name),this.B=new ql(sh(this).options.apiKey+":"+sh(this).name),this.Z=lh(this,function(t){var e=sh(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Bl,t.a).then((function(t){return t&&e&&(t.authDomain=e),Vl(t||{})}))}(t.B,sh(t).options.authDomain).then((function(e){return(t.D=e)&&(e.ga=t.B),Wl(t.B)}));return lh(t,e)}(t).then((function(){return Xl(t.i,e)})).then((function(e){return e?(e.ga=t.B,t.D&&(t.D.fa||null)==(e.fa||null)?e:e.reload().then((function(){return Ql(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:Yl(t.i)}))):null})).then((function(e){ih(t,e||null)}));return lh(t,n)}(this)),this.h=lh(this,function(t){return t.Z.then((function(){return nh(t)})).o((function(){})).then((function(){if(!t.l)return t.oa()})).o((function(){})).then((function(){if(!t.l){t.aa=!0;var e=t.i;e.b.addListener(Kl("local"),e.a,t.oa)}}))}(this)),this.aa=!1,this.oa=E(this.Xc,this),this.Ma=E(this.ca,this),this.xa=E(this.jc,this),this.ya=E(this.uc,this),this.za=E(this.vc,this),this.a=null,function(t){var e=sh(t).options.authDomain,n=sh(t).options.apiKey;e&&Ar()&&(t.Zb=t.Z.then((function(){if(!t.l){if(t.a=Uc(e,n,sh(t).name),Ac(t.a,t),ah(t)&&El(ah(t)),t.D){El(t.D);var r=t.D;r.va(t.ja()),dl(r,t),vl(r=t.D,t.N),yl(r,t),t.D=null}return t.a}})))}(this),this.INTERNAL={},this.INTERNAL.delete=E(this.delete,this),this.INTERNAL.logFramework=E(this.Ec,this),this.s=0,_n.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ja()},set:function(t){this.va(t)},enumerable:!1}),t.$=null,Object.defineProperty(t,"ti",{get:function(){return this.S()},set:function(t){this.ub(t)},enumerable:!1}),t.R=null}(this),this.N=[]}function Zl(t){Ye.call(this,"languageCodeChanged"),this.g=t}function th(t){Ye.call(this,"frameworkChanged"),this.c=t}function eh(t){return t.Zb||Ne(new C("auth-domain-config-required"))}function nh(t){if(!Ar())return Ne(new C("operation-not-supported-in-this-environment"));var e=eh(t).then((function(){return t.a.pa()})).then((function(t){return t?Yr(t):null}));return lh(t,e)}function rh(t,e){var n={};return n.apiKey=sh(t).options.apiKey,n.authDomain=sh(t).options.authDomain,n.appName=sh(t).name,t.Z.then((function(){return function(t,e,n,r){var i=new pl(t,e);return n&&(i.ga=n),r&&vl(i,r),i.reload().then((function(){return i}))}(n,e,t.B,t.Ea())})).then((function(e){return ah(t)&&e.uid==ah(t).uid?(Ol(ah(t),e),t.ca(e)):(ih(t,e),El(e),t.ca(e))})).then((function(){ch(t)}))}function ih(t,e){ah(t)&&(function(t,e){X(t.R,(function(t){return t==e}))}(ah(t),t.Ma),hn(ah(t),"tokenChanged",t.xa),hn(ah(t),"userDeleted",t.ya),hn(ah(t),"userInvalidated",t.za),bl(ah(t))),e&&(e.R.push(t.Ma),un(e,"tokenChanged",t.xa),un(e,"userDeleted",t.ya),un(e,"userInvalidated",t.za),0<t.s&&ml(e)),Kr(t,"currentUser",e),e&&(e.va(t.ja()),dl(e,t),vl(e,t.N),yl(e,t))}function oh(t,e){var n=null,r=null;return lh(t,e.then((function(e){return n=Mo(e),r=Ki(e),rh(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=Zc(e.v(),t,E(t.ic,t))),n||e})).then((function(){return Yr({user:ah(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function sh(t){return t.app}function ah(t){return t.currentUser}function uh(t){return ah(t)&&ah(t)._lat||null}function ch(t){if(t.aa){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](uh(t));if(t.W!==t.getUid()&&t.O.length)for(t.W=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](uh(t))}}function lh(t,e){return t.P.push(e),e.ma((function(){Y(t.P,e)})),e}function hh(){}function fh(){this.a={},this.b=1e12}Hl.prototype.tb=function(t){var e=null,n=this;return function(t){var e=new C("invalid-persistence-type"),n=new C("unsupported-persistence-type");t:{for(r in Qu)if(Qu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!==typeof t)throw e;switch(br()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!ku()&&"none"!==t)throw n;break;default:if(!Nr()&&"none"!==t)throw n}}(t),$l(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,zl(n,t)})).then((function(){if(n.c=Kl(t),e)return n.b.set(n.c,e,n.a)})):ke()}))},S(Jl,_n),S(Zl,Ye),S(th,Ye),(e=Jl.prototype).tb=function(t){return lh(this,t=this.i.tb(t))},e.va=function(t){this.$===t||this.l||(this.$=t,ea(this.b,this.$),this.dispatchEvent(new Zl(this.ja())))},e.ja=function(){return this.$},e.dd=function(){var t=c.navigator;this.va(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},e.Ec=function(t){this.N.push(t),na(this.b,r.SDK_VERSION?Sr(r.SDK_VERSION,this.N):null),this.dispatchEvent(new th(this.N))},e.Ea=function(){return J(this.N)},e.ub=function(t){this.R===t||this.l||(this.R=t,this.b.b=this.R)},e.S=function(){return this.R},e.toJSON=function(){return{apiKey:sh(this).options.apiKey,authDomain:sh(this).options.authDomain,appName:sh(this).name,currentUser:ah(this)&&ah(this).v()}},e.Cb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},e.la=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},e.Da=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?E(this.gc,this):null},e.gc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.Z.then((function(){return oh(i,ya(i.b,o))}))},e.Vc=function(t){if(!Ar())return Ne(new C("operation-not-supported-in-this-environment"));var e=this,n=Gi(t.providerId),i=Mr(),o=null;(!Rr()||gr())&&sh(this).options.authDomain&&t.isOAuthProvider&&(o=du(sh(this).options.authDomain,sh(this).options.apiKey,sh(this).name,"signInViaPopup",t,null,i,r.SDK_VERSION||null,null,null,this.S()));var s=fr(o,n&&n.ta,n&&n.sa);return lh(this,n=eh(this).then((function(n){return xc(n,s,"signInViaPopup",t,i,!!o,e.S())})).then((function(){return new _e((function(t,n){e.la("signInViaPopup",null,new C("cancelled-popup-request"),e.g),e.f=t,e.w=n,e.g=i,e.c=Mc(e.a,e,"signInViaPopup",s,i)}))})).then((function(t){return s&&hr(s),t?Yr(t):null})).o((function(t){throw s&&hr(s),t})))},e.Wc=function(t){if(!Ar())return Ne(new C("operation-not-supported-in-this-environment"));var e=this;return lh(this,eh(this).then((function(){return function(t){return $l(t,(function(){return t.b.set(Gl,t.c.F,t.a)}))}(e.i)})).then((function(){return Lc(e.a,"signInViaRedirect",t,void 0,e.S())})))},e.pa=function(){var t=this;return nh(this).then((function(e){return t.a&&qc(t.a.b),e})).o((function(e){throw t.a&&qc(t.a.b),e}))},e.bd=function(t){if(!t)return Ne(new C("null-user"));if(this.R!=t.tenantId)return Ne(new C("tenant-id-mismatch"));var e=this,n={};n.apiKey=sh(this).options.apiKey,n.authDomain=sh(this).options.authDomain,n.appName=sh(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Xs]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new pl(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ga=n),r&&vl(e,r),Ol(e,t),e}(t,n,e.B,e.Ea());return lh(this,this.h.then((function(){if(sh(e).options.apiKey!=t.l)return r.reload()})).then((function(){return ah(e)&&t.uid==ah(e).uid?(Ol(ah(e),t),e.ca(t)):(ih(e,r),El(r),e.ca(r))})).then((function(){ch(e)})))},e.wb=function(){var t=this;return lh(this,this.h.then((function(){return t.a&&qc(t.a.b),ah(t)?(ih(t,null),Yl(t.i).then((function(){ch(t)}))):ke()})))},e.Xc=function(){var t=this;return Xl(this.i,sh(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=ah(t)&&e){n=ah(t).uid;var r=e.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return Ol(ah(t),e),ah(t).I();(ah(t)||e)&&(ih(t,e),e&&(El(e),e.ga=t.B),t.a&&Ac(t.a,t),ch(t))}}))},e.ca=function(t){return Ql(this.i,t)},e.jc=function(){ch(this),this.ca(ah(this))},e.uc=function(){this.wb()},e.vc=function(){this.wb()},e.ic=function(t){var e=this;return this.h.then((function(){return oh(e,ke(t))}))},e.xc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(ah(e))}))},e.yc=function(t){var e=this;!function(t,e){t.O.push(e),lh(t,t.h.then((function(){!t.l&&Q(t.O,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(uh(t)))})))}(this,(function(){t.next(ah(e))}))},e.Gc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then((function(){"function"===typeof t?t(ah(r)):"function"===typeof t.next&&t.next(ah(r))})),this.$b(t,e,n)},e.Fc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then((function(){r.W=r.getUid(),"function"===typeof t?t(ah(r)):"function"===typeof t.next&&t.next(ah(r))})),this.ac(t,e,n)},e.kc=function(t){var e=this;return lh(this,this.h.then((function(){return ah(e)?ah(e).I(t).then((function(t){return{accessToken:t}})):null})))},e.Rc=function(t){var e=this;return this.h.then((function(){return oh(e,Za(e.b,Ka,{token:t}))})).then((function(t){var n=t.user;return Al(n,"isAnonymous",!1),e.ca(n),t}))},e.Sc=function(t,e){var n=this;return this.h.then((function(){return oh(n,Za(n.b,Qa,{email:t,password:e}))}))},e.cc=function(t,e){var n=this;return this.h.then((function(){return oh(n,Za(n.b,Ea,{email:t,password:e}))}))},e.Ya=function(t){var e=this;return this.h.then((function(){return oh(e,t.ia(e.b))}))},e.Qc=function(t){return zr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ya(t)},e.vb=function(){var t=this;return this.h.then((function(){var e=ah(t);if(e&&e.isAnonymous){var n=Yr({providerId:null,isNewUser:!1});return Yr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return oh(t,t.b.vb()).then((function(e){var n=e.user;return Al(n,"isAnonymous",!0),t.ca(n),e}))}))},e.getUid=function(){return ah(this)&&ah(this).uid||null},e.bc=function(t){this.addAuthTokenListener(t),this.s++,0<this.s&&ah(this)&&ml(ah(this))},e.Nc=function(t){var e=this;H(this.m,(function(n){n==t&&e.s--})),0>this.s&&(this.s=0),0==this.s&&ah(this)&&bl(ah(this)),this.removeAuthTokenListener(t)},e.addAuthTokenListener=function(t){var e=this;this.m.push(t),lh(this,this.h.then((function(){e.l||Q(e.m,t)&&t(uh(e))})))},e.removeAuthTokenListener=function(t){X(this.m,(function(e){return e==t}))},e.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(Kl("local"),t.a,this.oa),this.a&&(Oc(this.a,this),qc(this.a.b)),Promise.resolve()},e.fc=function(t){return lh(this,function(t,e){return Za(t,Ta,{identifier:e,continueUri:Or()?ur():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.b,t))},e.zc=function(t){return!!Oo(t)},e.sb=function(t,e){var n=this;return lh(this,ke().then((function(){var t=new ki(e);if(!t.c)throw new C("argument-error",Oi+" must be true when sending sign in link to email");return Fi(t)})).then((function(e){return n.b.sb(t,e)})).then((function(){})))},e.fd=function(t){return this.Pa(t).then((function(t){return t.data.email}))},e.jb=function(t,e){return lh(this,this.b.jb(t,e).then((function(){})))},e.Pa=function(t){return lh(this,this.b.Pa(t).then((function(t){return new ii(t)})))},e.fb=function(t){return lh(this,this.b.fb(t).then((function(){})))},e.rb=function(t,e){var n=this;return lh(this,ke().then((function(){return"undefined"===typeof e||dt(e)?{}:Fi(new ki(e))})).then((function(e){return n.b.rb(t,e)})).then((function(){})))},e.Uc=function(t,e){return lh(this,Kc(this,t,e,E(this.Ya,this)))},e.Tc=function(t,e){var n=this;return lh(this,ke().then((function(){var r=e||ur(),i=Ao(t,r);if(!(r=Oo(r)))throw new C("argument-error","Invalid email link!");if(r.tenantId!==n.S())throw new C("tenant-id-mismatch");return n.Ya(i)})))},hh.prototype.render=function(){},hh.prototype.reset=function(){},hh.prototype.getResponse=function(){},hh.prototype.execute=function(){};var ph=null;function dh(t,e){return(e=vh(e))&&t.a[e]||null}function vh(t){return(t="undefined"===typeof t?1e12:t)?t.toString():null}function yh(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=se(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():un(this.f,"click",this.i)}function gh(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function mh(){}function bh(){}fh.prototype.render=function(t,e){return this.a[this.b.toString()]=new yh(t,e),this.b++},fh.prototype.reset=function(t){var e=dh(this,t);t=vh(t),e&&t&&(e.delete(),delete this.a[t])},fh.prototype.getResponse=function(t){return(t=dh(this,t))?t.getResponse():null},fh.prototype.execute=function(t){(t=dh(this,t))&&t.execute()},yh.prototype.getResponse=function(){return gh(this),this.b},yh.prototype.execute=function(){gh(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()}),6e4)}),500))},yh.prototype.delete=function(){gh(this),this.g=!0,clearTimeout(this.a),this.a=null,hn(this.f,"click",this.i)},Kr(mh,"FACTOR_ID","phone"),bh.prototype.g=function(){return ph||(ph=new fh),ke(ph)},bh.prototype.c=function(){};var _h=null;function wh(){this.b=c.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Eh=new bt(Et,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Th=new jr(3e4,6e4);wh.prototype.g=function(t){var e=this;return new _e((function(n,r){var i=setTimeout((function(){r(new C("network-request-failed"))}),Th.get());!c.grecaptcha||t!==e.f&&!e.b?(c[e.a]=function(){if(c.grecaptcha){e.f=t;var o=c.grecaptcha.render;c.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(c.grecaptcha)}else clearTimeout(i),r(new C("internal-error"));delete c[e.a]},ke(qs(Ct(Eh,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new C("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(c.grecaptcha))}))},wh.prototype.c=function(){this.b--};var Ih=null;function Sh(t,e,n,r,i,o,s){if(Kr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.u=e,this.g=null,s?(_h||(_h=new bh),s=_h):(Ih||(Ih=new wh),s=Ih),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Nh])throw new C("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Ah],!c.document)throw new C("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!se(e)||!this.i&&se(e).hasChildNodes())throw new C("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Qs(t,o||null,i||null),this.w=r||function(){return null};var a=this;this.l=[];var u=this.a[Ch];this.a[Ch]=function(t){if(Oh(a,t),"function"===typeof u)u(t);else if("string"===typeof u){var e=kr(u,c);"function"===typeof e&&e(t)}};var l=this.a[kh];this.a[kh]=function(){if(Oh(a,null),"function"===typeof l)l();else if("string"===typeof l){var t=kr(l,c);"function"===typeof t&&t()}}}var Ch="callback",kh="expired-callback",Nh="sitekey",Ah="size";function Oh(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function Ph(t,e){return t.h.push(e),e.ma((function(){Y(t.h,e)})),e}function Rh(t){if(t.D)throw new C("internal-error","RecaptchaVerifier instance has been destroyed.")}function xh(t,e,n){var i=!1;try{this.b=n||r.app()}catch(a){throw new C("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new C("invalid-api-key");n=this.b.options.apiKey;var o=this,s=null;try{s=this.b.auth().Ea()}catch(a){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}s=r.SDK_VERSION?Sr(r.SDK_VERSION,s):null,Sh.call(this,n,t,e,(function(){try{var t=o.b.auth().ja()}catch(e){t=null}return t}),s,R(N),i)}function Dh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new C("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],0>i||i>=Lh.length)throw new C("internal-error","Argument validator received an unsupported number of arguments.");n=Lh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new C("argument-error",t+" failed: "+r)}(e=Sh.prototype).Ga=function(){var t=this;return this.f?this.f:this.f=Ph(this,ke().then((function(){if(Or()&&!mr())return vr();throw new C("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.w())})).then((function(e){return t.g=e,Za(t.s,Ma,{})})).then((function(e){t.a[Nh]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},e.render=function(){Rh(this);var t=this;return Ph(this,this.Ga().then((function(){if(null===t.c){var e=t.u;if(!t.i){var n=se(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!oe&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Wt(s.name),'"'),s.type){o.push(' type="',Wt(s.type),'"');var a={};gt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=fe(i,o),s&&("string"===typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ae(o,s)),2<r.length&&he(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},e.verify=function(){Rh(this);var t=this;return Ph(this,this.render().then((function(e){return new _e((function(n){var r=t.g.getResponse(e);if(r)n(r);else{t.l.push((function e(r){r&&(function(t,e){X(t.l,(function(t){return t==e}))}(t,e),n(r))})),t.i&&t.g.execute(t.c)}}))})))},e.reset=function(){Rh(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){Rh(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=se(this.u);for(var e;e=t.firstChild;)t.removeChild(e)}},S(xh,Sh);var Lh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Mh(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"===typeof t}}}function Fh(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"===typeof t}}}function Uh(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:y}}function jh(t,e){return{name:t||"",J:"a function",optional:!!e,K:function(t){return"function"===typeof t}}}function Vh(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function qh(t){return{name:t?t+"Credential":"credential",J:t?"a valid "+t+" credential":"a valid credential",optional:!1,K:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ia||!n)}}}function Bh(t,e){return y(t)&&"string"===typeof t.type&&t.type===e&&"function"===typeof t.Fa}function Wh(t){return y(t)&&"string"===typeof t.uid}function Hh(t,e,n,r){return{name:n||"",J:t.J+" or "+e.J,optional:!!r,K:function(n){return t.K(n)||e.K(n)}}}function zh(t,e){for(var n in e){var r=e[n].name;t[r]=Qh(r,t[n],e[n].j)}}function Gh(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:T((function(t){return this[t]}),n),set:T((function(t,e,n,r){Dh(t,[n],[r],!0),this[e]=r}),r,n,e[n].gb),enumerable:!0})}}function Kh(t,e,n,r){t[e]=Qh(e,n,r)}function Qh(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Dh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}zh(Jl.prototype,{fb:{name:"applyActionCode",j:[Mh("code")]},Pa:{name:"checkActionCode",j:[Mh("code")]},jb:{name:"confirmPasswordReset",j:[Mh("code"),Mh("newPassword")]},cc:{name:"createUserWithEmailAndPassword",j:[Mh("email"),Mh("password")]},fc:{name:"fetchSignInMethodsForEmail",j:[Mh("email")]},pa:{name:"getRedirectResult",j:[]},zc:{name:"isSignInWithEmailLink",j:[Mh("emailLink")]},Fc:{name:"onAuthStateChanged",j:[Hh(Uh(),jh(),"nextOrObserver"),jh("opt_error",!0),jh("opt_completed",!0)]},Gc:{name:"onIdTokenChanged",j:[Hh(Uh(),jh(),"nextOrObserver"),jh("opt_error",!0),jh("opt_completed",!0)]},rb:{name:"sendPasswordResetEmail",j:[Mh("email"),Hh(Uh("opt_actionCodeSettings",!0),Vh(null,!0),"opt_actionCodeSettings",!0)]},sb:{name:"sendSignInLinkToEmail",j:[Mh("email"),Uh("actionCodeSettings")]},tb:{name:"setPersistence",j:[Mh("persistence")]},Qc:{name:"signInAndRetrieveDataWithCredential",j:[qh()]},vb:{name:"signInAnonymously",j:[]},Ya:{name:"signInWithCredential",j:[qh()]},Rc:{name:"signInWithCustomToken",j:[Mh("token")]},Sc:{name:"signInWithEmailAndPassword",j:[Mh("email"),Mh("password")]},Tc:{name:"signInWithEmailLink",j:[Mh("email"),Mh("emailLink",!0)]},Uc:{name:"signInWithPhoneNumber",j:[Mh("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]},Vc:{name:"signInWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Wc:{name:"signInWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},bd:{name:"updateCurrentUser",j:[Hh({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof pl)}},Vh(),"user")]},wb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Mh(null,!0)]},dd:{name:"useDeviceLanguage",j:[]},fd:{name:"verifyPasswordResetCode",j:[Mh("code")]}}),Gh(Jl.prototype,{lc:{name:"languageCode",gb:Hh(Mh(),Vh(),"languageCode")},ti:{name:"tenantId",gb:Hh(Mh(),Vh(),"tenantId")}}),Jl.Persistence=Qu,Jl.Persistence.LOCAL="local",Jl.Persistence.SESSION="session",Jl.Persistence.NONE="none",zh(pl.prototype,{delete:{name:"delete",j:[]},mc:{name:"getIdTokenResult",j:[Fh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Fh("opt_forceRefresh",!0)]},Ac:{name:"linkAndRetrieveDataWithCredential",j:[qh()]},mb:{name:"linkWithCredential",j:[qh()]},Bc:{name:"linkWithPhoneNumber",j:[Mh("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]},Cc:{name:"linkWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"linkWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Jc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[qh()]},pb:{name:"reauthenticateWithCredential",j:[qh()]},Kc:{name:"reauthenticateWithPhoneNumber",j:[Mh("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]},Lc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},qb:{name:"sendEmailVerification",j:[Hh(Uh("opt_actionCodeSettings",!0),Vh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Mh(null,!0)]},ad:{name:"unlink",j:[Mh("provider")]},xb:{name:"updateEmail",j:[Mh("email")]},yb:{name:"updatePassword",j:[Mh("password")]},cd:{name:"updatePhoneNumber",j:[qh("phone")]},zb:{name:"updateProfile",j:[Uh("profile")]},Ab:{name:"verifyBeforeUpdateEmail",j:[Mh("email"),Hh(Uh("opt_actionCodeSettings",!0),Vh(null,!0),"opt_actionCodeSettings",!0)]}}),zh(fh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),zh(hh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),zh(_e.prototype,{ma:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Gh(zc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",gb:Fh("appVerificationDisabledForTesting")}}),zh(Gc.prototype,{confirm:{name:"confirm",j:[Mh("verificationCode")]}}),Kh(so,"fromJSON",(function(t){t="string"===typeof t?JSON.parse(t):t;for(var e,n=[po,ko,Ro,lo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Hh(Mh(),Uh(),"json")]),Kh(No,"credential",(function(t,e){return new Co(t,e)}),[Mh("email"),Mh("password")]),zh(Co.prototype,{v:{name:"toJSON",j:[Mh(null,!0)]}}),zh(mo.prototype,{Aa:{name:"addScope",j:[Mh("scope")]},Ia:{name:"setCustomParameters",j:[Uh("customOAuthParameters")]}}),Kh(mo,"credential",bo,[Hh(Mh(),Uh(),"token")]),Kh(No,"credentialWithLink",Ao,[Mh("email"),Mh("emailLink")]),zh(_o.prototype,{Aa:{name:"addScope",j:[Mh("scope")]},Ia:{name:"setCustomParameters",j:[Uh("customOAuthParameters")]}}),Kh(_o,"credential",wo,[Hh(Mh(),Uh(),"token")]),zh(Eo.prototype,{Aa:{name:"addScope",j:[Mh("scope")]},Ia:{name:"setCustomParameters",j:[Uh("customOAuthParameters")]}}),Kh(Eo,"credential",To,[Hh(Mh(),Hh(Uh(),Vh()),"idToken"),Hh(Mh(),Vh(),"accessToken",!0)]),zh(Io.prototype,{Ia:{name:"setCustomParameters",j:[Uh("customOAuthParameters")]}}),Kh(Io,"credential",So,[Hh(Mh(),Uh(),"token"),Mh("secret",!0)]),zh(go.prototype,{Aa:{name:"addScope",j:[Mh("scope")]},credential:{name:"credential",j:[Hh(Mh(),Hh(Uh(),Vh()),"optionsOrIdToken"),Hh(Mh(),Vh(),"accessToken",!0)]},Ia:{name:"setCustomParameters",j:[Uh("customOAuthParameters")]}}),zh(ho.prototype,{v:{name:"toJSON",j:[Mh(null,!0)]}}),zh(uo.prototype,{v:{name:"toJSON",j:[Mh(null,!0)]}}),Kh(Do,"credential",Lo,[Mh("verificationId"),Mh("verificationCode")]),zh(Do.prototype,{cb:{name:"verifyPhoneNumber",j:[Hh(Mh(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?Bh(t.session,io)&&"string"===typeof t.phoneNumber:t.session&&t.multiFactorHint?Bh(t.session,oo)&&Wh(t.multiFactorHint):t.session&&t.multiFactorUid?Bh(t.session,oo)&&"string"===typeof t.multiFactorUid:!!t.phoneNumber&&"string"===typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]}}),zh(Po.prototype,{v:{name:"toJSON",j:[Mh(null,!0)]}}),zh(C.prototype,{toJSON:{name:"toJSON",j:[Mh(null,!0)]}}),zh(Ho.prototype,{toJSON:{name:"toJSON",j:[Mh(null,!0)]}}),zh(Wo.prototype,{toJSON:{name:"toJSON",j:[Mh(null,!0)]}}),zh(Jc.prototype,{toJSON:{name:"toJSON",j:[Mh(null,!0)]}}),zh(Yc.prototype,{Pc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.ob}}]}}),zh(il.prototype,{Ob:{name:"getSession",j:[]},dc:{name:"enroll",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.ob}},Mh("displayName",!0)]},$c:{name:"unenroll",j:[Hh({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Wh},Mh(),"multiFactorInfoIdentifier")]}}),zh(xh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Kh(mi,"parseLink",Ci,[Mh("link")]),Kh(mh,"assertion",(function(t){return new nl(t)}),[qh("phone")]),function(){if("undefined"===typeof r||!r.INTERNAL||!r.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:si,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:oi,VERIFY_AND_CHANGE_EMAIL:ai,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Jl,AuthCredential:so,Error:C};Kh(t,"EmailAuthProvider",No,[]),Kh(t,"FacebookAuthProvider",mo,[]),Kh(t,"GithubAuthProvider",_o,[]),Kh(t,"GoogleAuthProvider",Eo,[]),Kh(t,"TwitterAuthProvider",Io,[]),Kh(t,"OAuthProvider",go,[Mh("providerId")]),Kh(t,"SAMLAuthProvider",yo,[Mh("providerId")]),Kh(t,"PhoneAuthProvider",Do,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof Jl)}}]),Kh(t,"RecaptchaVerifier",xh,[Hh(Mh(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Uh("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof r.app.App)}}]),Kh(t,"ActionCodeURL",mi,[]),Kh(t,"PhoneMultiFactorGenerator",mh,[]),r.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new Jl(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),r.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:E((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:E(t.kc,t),addAuthTokenListener:E(t.bc,t),removeAuthTokenListener:E(t.Nc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),r.registerVersion("@firebase/auth","0.14.9"),r.INTERNAL.extendNamespace({User:pl})}()}).apply("undefined"!==typeof t?t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})}).call(this,n(12))},function(t,e,n){"use strict";(function(r){Object.defineProperty(e,"__esModule",{value:!0});var i,o=(i=n(3))&&"object"===typeof i&&"default"in i?i.default:i,s=n(0),a=n(2),u=n(11),c=n(4),l=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),a.stringify(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:a.jsonEval(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),h=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return a.contains(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),f=function(t){try{if("undefined"!==typeof window&&"undefined"!==typeof window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new l(e)}}catch(n){}return new h},p=f("localStorage"),d=f("sessionStorage"),v=new u.Logger("@firebase/database"),y=function(){var t=1;return function(){return t++}}(),g=function(t){var e=a.stringToByteArray(t),n=new a.Sha1;n.update(e);var r=n.digest();return a.base64.encodeByteArray(r)},m=function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r="",i=0;i<e.length;i++){var o=e[i];Array.isArray(o)||o&&"object"===typeof o&&"number"===typeof o.length?r+=t.apply(null,o):r+="object"===typeof o?a.stringify(o):o,r+=" "}return r},b=null,_=!0,w=function(t,e){a.assert(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(v.logLevel=u.LogLevel.VERBOSE,b=v.log.bind(v),e&&d.set("logging_enabled",!0)):"function"===typeof t?b=t:(b=null,d.remove("logging_enabled"))},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===_&&(_=!1,null===b&&!0===d.get("logging_enabled")&&w(!0)),b){var n=m.apply(null,t);b(n)}},T=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];E.apply(void 0,s.__spread([t],e))}},I=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+m.apply(void 0,s.__spread(t));v.error(n)},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+m.apply(void 0,s.__spread(t));throw v.error(n),new Error(n)},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+m.apply(void 0,s.__spread(t));v.warn(n)},k=function(t){return"number"===typeof t&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},N="[MIN_NAME]",A="[MAX_NAME]",O=function(t,e){if(t===e)return 0;if(t===N||e===A)return-1;if(e===N||t===A)return 1;var n=U(t),r=U(e);return null!==n?null!==r?n-r===0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},P=function(t,e){return t===e?0:t<e?-1:1},R=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+a.stringify(e))},x=function t(e){if("object"!==typeof e||null===e)return a.stringify(e);var n=[];for(var r in e)n.push(r);n.sort();for(var i="{",o=0;o<n.length;o++)0!==o&&(i+=","),i+=a.stringify(n[o]),i+=":",i+=t(e[n[o]]);return i+="}"},D=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function L(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var M=function(t){a.assert(!k(t),"Invalid JSON number");var e,n,r,i,o;0===t?(n=0,r=0,e=1/t===-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var s=[];for(o=52;o;o-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(e?1:0),s.reverse();var u=s.join(""),c="";for(o=0;o<64;o+=8){var l=parseInt(u.substr(o,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},F=new RegExp("^-?(0*)\\d{1,10}$"),U=function(t){if(F.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},j=function(t){try{t()}catch(e){setTimeout((function(){var t=e.stack||"";throw C("Exception was thrown by user callback.",t),e}),Math.floor(0))}},V=function(t,e){var n=setTimeout(t,e);return"object"===typeof n&&n.unref&&n.unref(),n},q=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=O(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),B=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=a.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=a.stringLength(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=a.stringLength(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),W=function(){function t(t,e,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=p.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&p.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(a.assert("string"===typeof t,"typeof type must == string"),a.assert("object"===typeof e,"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if("long_polling"!==t)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return L(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}();var H,z,G=function(t){var e=K(t),n=e.namespace;"firebase.com"===e.domain&&S(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===e.domain||S("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&C("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var r="ws"===e.scheme||"wss"===e.scheme;return{repoInfo:new W(e.host,e.secure,n,r,"",n!==e.subdomain),path:new q(e.pathString)}},K=function(t){var e="",n="",r="",i="",o="",a=!0,u="https",c=443;if("string"===typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var p=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=s.__values(t.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):C("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var d=e.slice(0,l);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var v=e.indexOf(".");r=e.substring(0,v).toLowerCase(),n=e.substring(v+1),o=r}"ns"in p&&(o=p.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:o}},Q=/[\[\].#$\/\u0000-\u001F\u007F]/,Y=/[\[\].#$\u0000-\u001F\u007F]/,X=function(t){return"string"===typeof t&&0!==t.length&&!Q.test(t)},$=function(t){return"string"===typeof t&&0!==t.length&&!Y.test(t)},J=function(t){return null===t||"string"===typeof t||"number"===typeof t&&!k(t)||t&&"object"===typeof t&&a.contains(t,".sv")},Z=function(t,e,n,r,i){i&&void 0===n||tt(a.errorPrefix(t,e,i),n,r)},tt=function t(e,n,r){var i=r instanceof q?new B(r,e):r;if(void 0===n)throw new Error(e+"contains undefined "+i.toErrorString());if("function"===typeof n)throw new Error(e+"contains a function "+i.toErrorString()+" with contents = "+n.toString());if(k(n))throw new Error(e+"contains "+n.toString()+" "+i.toErrorString());if("string"===typeof n&&n.length>10485760/3&&a.stringLength(n)>10485760)throw new Error(e+"contains a string greater than 10485760 utf8 bytes "+i.toErrorString()+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var o=!1,s=!1;if(L(n,(function(n,r){if(".value"===n)o=!0;else if(".priority"!==n&&".sv"!==n&&(s=!0,!X(n)))throw new Error(e+" contains an invalid key ("+n+") "+i.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');i.push(n),t(e,r,i),i.pop()})),o&&s)throw new Error(e+' contains ".value" child '+i.toErrorString()+" in addition to actual children.")}},et=function(t,e,n,r,i){if(!i||void 0!==n){var o=a.errorPrefix(t,e,i);if(!n||"object"!==typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];L(n,(function(t,e){var n=new q(t);if(tt(o,e,r.child(n)),".priority"===n.getBack()&&!J(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!X(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(q.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}},nt=function(t,e,n,r){if(!r||void 0!==n){if(k(n))throw new Error(a.errorPrefix(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!J(n))throw new Error(a.errorPrefix(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},rt=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(a.errorPrefix(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},it=function(t,e,n,r){if((!r||void 0!==n)&&!X(n))throw new Error(a.errorPrefix(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ot=function(t,e,n,r){if((!r||void 0!==n)&&!$(n))throw new Error(a.errorPrefix(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},st=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ot(t,e,n,r)},at=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},ut=function(t,e,n){var r=n.path.toString();if("string"!==typeof n.repoInfo.host||0===n.repoInfo.host.length||!X(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),$(t)}(r))throw new Error(a.errorPrefix(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},ct=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(a.errorPrefix(t,e,r)+"must be a boolean.")},lt=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){a.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),a.validateCallback("OnDisconnect.cancel",1,t,!0);var e=new a.Deferred;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){a.validateArgCount("OnDisconnect.remove",0,1,arguments.length),at("OnDisconnect.remove",this.path_),a.validateCallback("OnDisconnect.remove",1,t,!0);var e=new a.Deferred;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){a.validateArgCount("OnDisconnect.set",1,2,arguments.length),at("OnDisconnect.set",this.path_),Z("OnDisconnect.set",1,t,this.path_,!1),a.validateCallback("OnDisconnect.set",2,e,!0);var n=new a.Deferred;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){a.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),at("OnDisconnect.setWithPriority",this.path_),Z("OnDisconnect.setWithPriority",1,t,this.path_,!1),nt("OnDisconnect.setWithPriority",2,e,!1),a.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var r=new a.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(a.validateArgCount("OnDisconnect.update",1,2,arguments.length),at("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,C("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}et("OnDisconnect.update",1,t,this.path_,!1),a.validateCallback("OnDisconnect.update",2,e,!0);var i=new a.Deferred;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),ht=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return a.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),ft=function(){var t="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",e=0,n=[];return function(r){var i,o=r===e;e=r;var s=new Array(8);for(i=7;i>=0;i--)s[i]=t.charAt(r%64),r=Math.floor(r/64);a.assert(0===r,"Cannot push at time == 0");var u=s.join("");if(o){for(i=11;i>=0&&63===n[i];i--)n[i]=0;n[i]++}else for(i=0;i<12;i++)n[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=t.charAt(n[i]);return a.assert(20===u.length,"nextPushId: Length should be 20."),u}}(),pt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),dt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new pt(N,t),r=new pt(N,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return pt.MIN},t}(),vt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return H},set:function(t){H=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return O(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw a.assertionError("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return pt.MIN},e.prototype.maxPost=function(){return new pt(A,H)},e.prototype.makePost=function(t,e){return a.assert("string"===typeof t,"KeyIndex indexValue must always be a string."),new pt(t,H)},e.prototype.toString=function(){return".key"},e}(dt),yt=new vt;var gt,mt,bt,_t=function(t){return"number"===typeof t?"number:"+M(t):"string:"+t},wt=function(t){if(t.isLeafNode()){var e=t.val();a.assert("string"===typeof e||"number"===typeof e||"object"===typeof e&&a.contains(e,".sv"),"Priority must be a string or number.")}else a.assert(t===z||t.isEmpty(),"priority of unexpected type.");a.assert(t===z||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Et=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,a.assert(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),wt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return gt},set:function(t){gt=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(a.assert(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+_t(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?M(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(a.assert(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return a.assert(i>=0,"Unknown leaf type: "+n),a.assert(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();var Tt,It,St=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?O(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return pt.MIN},e.prototype.maxPost=function(){return new pt(A,new Et("[PRIORITY-POST]",bt))},e.prototype.makePost=function(t,e){var n=mt(t);return new pt(e,new Et("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(dt)),Ct=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),kt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:At.EMPTY_NODE,this.right=null!=o?o:At.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return At.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return At.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Nt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new kt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),At=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,kt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,kt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Ct(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Ct(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Ct(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Ct(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Nt,t}(),Ot=Math.log(2),Pt=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Ot,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Rt=function(t,e,n,r){t.sort(e);var i=function(e){for(var r=null,i=null,o=t.length,s=function(e,r){var i=o-e,s=o;o-=e;var u=function e(r,i){var o,s,a=i-r;if(0===a)return null;if(1===a)return o=t[r],s=n?n(o):o,new kt(s,o.node,kt.BLACK,null,null);var u=parseInt(a/2,10)+r,c=e(r,u),l=e(u+1,i);return o=t[u],s=n?n(o):o,new kt(s,o.node,kt.BLACK,c,l)}(i+1,s),c=t[i],l=n?n(c):c;a(new kt(l,c.node,r,null,u))},a=function(t){r?(r.left=t,r=t):(i=t,r=t)},u=0;u<e.count;++u){var c=e.nextBitIsOne(),l=Math.pow(2,e.count-(u+1));c?s(l,kt.BLACK):(s(l,kt.BLACK),s(l,kt.RED))}return i}(new Pt(t.length));return new At(r||e,i)},xt={},Dt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return a.assert(xt&&St,"ChildrenNode.ts has not been loaded"),Tt=Tt||new t({".priority":xt},{".priority":St})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=a.safeGet(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof At?e:null},t.prototype.hasIndex=function(t){return a.contains(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){a.assert(e!==yt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,u=n.getIterator(pt.Wrap),c=u.getNext();c;)o=o||e.isDefinedOn(c.node),i.push(c),c=u.getNext();r=o?Rt(i,e.getCompare()):xt;var l=e.toString(),h=s.__assign({},this.indexSet_);h[l]=e;var f=s.__assign({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(a.map(this.indexes_,(function(t,i){var o=a.safeGet(r.indexSet_,i);if(a.assert(o,"Missing index implementation for "+i),t===xt){if(o.isDefinedOn(e.node)){for(var s=[],u=n.getIterator(pt.Wrap),c=u.getNext();c;)c.name!==e.name&&s.push(c),c=u.getNext();return s.push(e),Rt(s,o.getCompare())}return xt}var l=n.get(e.name),h=t;return l&&(h=h.remove(new pt(e.name,l))),h.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(a.map(this.indexes_,(function(t){if(t===xt)return t;var r=n.get(e.name);return r?t.remove(new pt(e.name,r)):t})),this.indexSet_)},t}();function Lt(t,e){return O(t.name,e.name)}function Mt(t,e){return O(t,e)}var Ft=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&wt(this.priorityNode_),this.children_.isEmpty()&&a.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return It||(It=new t(new At(Mt),null,Dt.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||It},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?It:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(a.assert(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new pt(e,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));var s=i.isEmpty()?It:this.priorityNode_;return new t(i,s,o)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;a.assert(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(St,(function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1})),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+_t(this.getPriority().val())+":"),this.forEachChild(St,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new pt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new pt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new pt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,pt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,pt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Ut?-1:0},t.prototype.withIndex=function(e){if(e===yt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===yt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(St),r=e.getIterator(St),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===yt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Ut=new(function(t){function e(){return t.call(this,new At(Mt),Ft.EMPTY_NODE,Dt.Default)||this}return s.__extends(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Ft.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Ft));Object.defineProperties(pt,{MIN:{value:new pt(N,Ft.EMPTY_NODE)},MAX:{value:new pt(A,Ut)}}),vt.__EMPTY_NODE=Ft.EMPTY_NODE,Et.__childrenNodeConstructor=Ft,z=Ut,function(t){bt=t}(Ut);function jt(t,e){if(void 0===e&&(e=null),null===t)return Ft.EMPTY_NODE;if("object"===typeof t&&".priority"in t&&(e=t[".priority"]),a.assert(null===e||"string"===typeof e||"number"===typeof e||"object"===typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"===typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!==typeof t||".sv"in t)return new Et(t,jt(e));if(t instanceof Array){var n=Ft.EMPTY_NODE;return L(t,(function(e,r){if(a.contains(t,e)&&"."!==e.substring(0,1)){var i=jt(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(jt(e))}var r=[],i=!1;if(L(t,(function(t,e){if("."!==t.substring(0,1)){var n=jt(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new pt(t,n)))}})),0===r.length)return Ft.EMPTY_NODE;var o=Rt(r,Lt,(function(t){return t.name}),Mt);if(i){var s=Rt(r,St.getCompare());return new Ft(o,jt(e),new Dt({".priority":s},{".priority":St}))}return new Ft(o,jt(e),Dt.Default)}!function(t){mt=t}(jt);var Vt,qt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?O(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return pt.MIN},e.prototype.maxPost=function(){return pt.MAX},e.prototype.makePost=function(t,e){var n=jt(t);return new pt(e,n)},e.prototype.toString=function(){return".value"},e}(dt)),Bt=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,a.assert(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return s.__extends(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?O(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=jt(t),r=Ft.EMPTY_NODE.updateChild(this.indexPath_,n);return new pt(e,r)},e.prototype.maxPost=function(){var t=Ft.EMPTY_NODE.updateChild(this.indexPath_,Ut);return new pt(A,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(dt),Wt=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return a.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return a.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return a.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return a.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){a.validateArgCount("DataSnapshot.child",0,1,arguments.length),e=String(e),ot("DataSnapshot.child",1,e,!1);var n=new q(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,St)},t.prototype.hasChild=function(t){a.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),ot("DataSnapshot.hasChild",1,t,!1);var e=new q(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return a.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(a.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),a.validateCallback("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),St))}))},t.prototype.hasChildren=function(){return a.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return a.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return a.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Ht=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+a.stringify(this.snapshot.exportVal())},t}(),zt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Gt=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Ht("value",this,new Wt(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){a.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new zt(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Kt=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,a.contains(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new zt(this,t,e):null},t.prototype.createEvent=function(t,e){a.assert(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Ht(t.type,this,new Wt(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){a.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return a===s&&(!e.callbacks_[s]||!this.callbacks_[a]||e.callbacks_[s]===this.callbacks_[a])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),Qt=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return a.assert(Vt,"Reference.ts has not been loaded"),Vt},set:function(t){Vt=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===yt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==N)throw new Error(r);if("string"!==typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==A)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(t.getIndex()===St){if(null!=e&&!J(e)||null!=n&&!J(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(a.assert(t.getIndex()instanceof Bt||t.getIndex()===qt,"unknown index type."),null!=e&&"object"===typeof e||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return a.validateArgCount("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){a.validateArgCount("Query.on",2,4,arguments.length),rt("Query.on",1,e,!1),a.validateCallback("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var s={};s[e]=n,this.onChildEvent(s,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Gt(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new Kt(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){a.validateArgCount("Query.off",0,3,arguments.length),rt("Query.off",1,t,!0),a.validateCallback("Query.off",2,e,!0),a.validateContextObject("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var o=e||null;r=new Gt(o,null,n||null)}else t&&(e&&((i={})[t]=e),r=new Kt(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.once=function(e,n,r,i){var o=this;a.validateArgCount("Query.once",1,4,arguments.length),rt("Query.once",1,e,!1),a.validateCallback("Query.once",2,n,!0);var s=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new a.Deferred;c.promise.catch((function(){}));var l=function t(r){u&&(u=!1,o.off(e,t),n&&n.bind(s.context)(r),c.resolve(r))};return this.on(e,l,(function(t){o.off(e,l),s.cancel&&s.cancel.bind(s.context)(t),c.reject(t)})),c.promise},t.prototype.limitToFirst=function(e){if(a.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(a.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(a.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');ot("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new q(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new Bt(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){a.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(yt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){a.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(St);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){a.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(qt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),a.validateArgCount("Query.startAt",0,2,arguments.length),Z("Query.startAt",1,e,this.path,!0),it("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),a.validateArgCount("Query.endAt",0,2,arguments.length),Z("Query.endAt",1,e,this.path,!0),it("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(a.validateArgCount("Query.equalTo",1,2,arguments.length),Z("Query.equalTo",1,t,this.path,!1),it("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return a.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return a.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=x(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(a.validateArgCount("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),o=this.queryIdentifier()===e.queryIdentifier();return r&&i&&o},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,a.validateCallback(t,3,r.cancel,!0),r.context=n,a.validateContextObject(t,4,r.context,!0);else if(e)if("object"===typeof e&&null!==e)r.context=e;else{if("function"!==typeof e)throw new Error(a.errorPrefix(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Yt=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),Xt=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),$t=function(t,e,n){return t&&"object"===typeof t?(a.assert(".sv"in t,"Unexpected leaf node or priority contents"),"string"===typeof t[".sv"]?Jt(t[".sv"],e,n):"object"===typeof t[".sv"]?Zt(t[".sv"],e):void a.assert(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Jt=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:a.assert(!1,"Unexpected server value: "+t)}},Zt=function(t,e,n){t.hasOwnProperty("increment")||a.assert(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!==typeof r&&a.assert(!1,"Unexpected increment value: "+r);var i=e.node();if(a.assert(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!==typeof o?r:o+r},te=function(t,e,n,r){return ne(e,new Xt(n,t),r)},ee=function(t,e,n){return ne(t,new Yt(e),n)};function ne(t,e,n){var r,i=t.getPriority().val(),o=$t(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=$t(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Et(a,jt(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Et(o))),u.forEachChild(St,(function(t,i){var o=ne(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}var re,ie=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(St,(function(t,e){n.remember(new q(t),e)})),this.forget(t)}if(this.children.size>0){var r=t.getFront();if(t=t.popFront(),this.children.has(r))this.children.get(r).forget(t)&&this.children.delete(r);return 0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new q(t.toString()+"/"+n);r.forEachTree(i,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}();!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(re||(re={}));var oe,se,ae=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,a.assert(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),ue=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=re.ACK_USER_WRITE,this.source=ae.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return a.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new q(e));return new t(q.Empty,n,this.revert)}return a.assert(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),ce=function(){function t(t,e){void 0===e&&(oe||(oe=new At(P)),e=oe),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return L(e,(function(t,e){n=n.set(new q(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:q.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new q(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r=e.getFront(),i=(this.children.get(r)||t.Empty).setTree(e.popFront(),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new t(this.value,o)},t.prototype.fold=function(t){return this.fold_(q.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(t.child(r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,q.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,q.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(q.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(t.child(n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t.Empty=new t(null),t}(),le=function(){function t(t,e){this.source=t,this.path=e,this.type=re.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,q.Empty):new t(this.source,this.path.popFront())},t}(),he=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=re.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,q.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),fe=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=re.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new q(e));return n.isEmpty()?null:n.value?new he(this.source,q.Empty,n.value):new t(this.source,q.Empty,n)}return a.assert(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),pe=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),de=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new pe(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new pe(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new pe(Ft.EMPTY_NODE,!1,!1),new pe(Ft.EMPTY_NODE,!1,!1)),t}(),ve=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),ye=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){a.assert(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(ve.childRemovedChange(e,s)):a.assert(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(ve.childAddedChange(e,n)):o.trackChildChange(ve.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(St,(function(t,r){e.hasChild(t)||n.trackChildChange(ve.childRemovedChange(t,r))})),e.isLeafNode()||e.forEachChild(St,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(ve.childChangedChange(e,r,i))}else n.trackChildChange(ve.childAddedChange(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Ft.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),ge=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;a.assert(e===ve.CHILD_ADDED||e===ve.CHILD_CHANGED||e===ve.CHILD_REMOVED,"Only child changes supported for tracking"),a.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===ve.CHILD_ADDED&&i===ve.CHILD_REMOVED)this.changeMap.set(n,ve.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===ve.CHILD_REMOVED&&i===ve.CHILD_ADDED)this.changeMap.delete(n);else if(e===ve.CHILD_REMOVED&&i===ve.CHILD_CHANGED)this.changeMap.set(n,ve.childRemovedChange(n,r.oldSnap));else if(e===ve.CHILD_CHANGED&&i===ve.CHILD_ADDED)this.changeMap.set(n,ve.childAddedChange(n,t.snapshotNode));else{if(e!==ve.CHILD_CHANGED||i!==ve.CHILD_CHANGED)throw a.assertionError("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,ve.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),me=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),be=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new pe(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),_e=function(t,e){this.viewCache=t,this.changes=e},we=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){a.assert(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),a.assert(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var o,s,u=new ge;if(n.type===re.OVERWRITE){var c=n;c.source.fromUser?o=this.applyUserOverwrite_(e,c.path,c.snap,r,i,u):(a.assert(c.source.fromServer,"Unknown source."),s=c.source.tagged||e.getServerCache().isFiltered()&&!c.path.isEmpty(),o=this.applyServerOverwrite_(e,c.path,c.snap,r,i,s,u))}else if(n.type===re.MERGE){var l=n;l.source.fromUser?o=this.applyUserMerge_(e,l.path,l.children,r,i,u):(a.assert(l.source.fromServer,"Unknown source."),s=l.source.tagged||e.getServerCache().isFiltered(),o=this.applyServerMerge_(e,l.path,l.children,r,i,s,u))}else if(n.type===re.ACK_USER_WRITE){var h=n;o=h.revert?this.revertUserWrite_(e,h.path,r,i,u):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==re.LISTEN_COMPLETE)throw a.assertionError("Unknown operation type: "+n.type);o=this.listenComplete_(e,n.path,r,u)}var f=u.getChanges();return t.maybeAddValueEvent_(e,o,f),new _e(o,f)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(ve.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s=void 0,u=void 0;if(e.isEmpty())if(a.assert(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),l=c instanceof Ft?c:Ft.EMPTY_NODE,h=n.calcCompleteEventChildren(l);s=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=n.calcCompleteEventCache(t.getCompleteServerSnap());s=this.filter_.updateFullNode(t.getEventCache().getNode(),f,i)}else{var p=e.getFront();if(".priority"===p){a.assert(1===e.getLength(),"Can't have a priority with additional path components");var d=o.getNode();u=t.getServerCache().getNode();var v=n.calcEventCacheAfterServerOverwrite(e,d,u);s=null!=v?this.filter_.updatePriority(d,v):o.getNode()}else{var y=e.popFront(),g=void 0;if(o.isCompleteForChild(p)){u=t.getServerCache().getNode();var m=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),u);g=null!=m?o.getNode().getImmediateChild(p).updateChild(y,m):o.getNode().getImmediateChild(p)}else g=n.calcCompleteChild(p,t.getServerCache());s=null!=g?this.filter_.updateChild(o.getNode(),p,g,y,r,i):o.getNode()}}return t.updateEventSnap(s,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),p=u.getNode().getImmediateChild(h).updateChild(f,n);a=".priority"===h?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),h,p,f,me,null)}var d=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),v=new be(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,v,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new be(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),f=u.getNode().getImmediateChild(l),p=void 0;if(h.isEmpty())p=n;else{var d=c.getCompleteChild(l);p=null!=d?".priority"===h.getBack()&&d.getChild(h.parent()).isEmpty()?d:d.updateChild(h,n):Ft.EMPTY_NODE}if(f.equals(p))s=t;else{var v=this.filter_.updateChild(u.getNode(),l,p,h,c,o);s=t.updateEventSnap(v,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(u=a.applyUserOverwrite_(u,l,c,i,o,s))})),r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(u=a.applyUserOverwrite_(u,l,c,i,o,s))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:ce.Empty.setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new q(e),h,r,i,o,s)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=a.applyMerge_(h,n);c=a.applyServerOverwrite_(c,new q(e),f,r,i,o,s)}})),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(e.isEmpty()){var u=ce.Empty;return a.getNode().forEachChild(yt,(function(t,e){u=u.set(new q(t),e)})),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=ce.Empty;return n.foreach((function(t,n){var r=e.child(t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))})),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,me,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s=new be(n,t,r),u=t.getEventCache().getNode(),c=void 0;if(e.isEmpty()||".priority"===e.getFront()){var l=void 0;if(t.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();a.assert(h instanceof Ft,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(h)}l=l,c=this.filter_.updateFullNode(u,l,i)}else{var f=e.getFront(),p=n.calcCompleteChild(f,t.getServerCache());null==p&&t.getServerCache().isCompleteForChild(f)&&(p=u.getImmediateChild(f)),(c=null!=p?this.filter_.updateChild(u,f,p,e.popFront(),s,i):t.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,Ft.EMPTY_NODE,e.popFront(),s,i):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(q.Empty),t.updateEventSnap(c,o,this.filter_.filtersNodes())},t}(),Ee=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach((function(t){t.type===ve.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(ve.childMovedChange(t.childName,t.snapshotNode))})),this.generateEventsForType_(i,ve.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,ve.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,ve.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,ve.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,ve.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,s=n.filter((function(t){return t.type===e}));s.sort(this.compareChanges_.bind(this)),s.forEach((function(e){var n=o.materializeSingleChange_(e,i);r.forEach((function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))}))}))},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw a.assertionError("Should only compare child_ events.");var n=new pt(t.childName,t.snapshotNode),r=new pt(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),Te=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new ye(n.getIndex()),i=n.getNodeFilter();this.processor_=new we(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(Ft.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Ft.EMPTY_NODE,s.getNode(),null),c=new pe(a,o.isFullyInitialized(),r.filtersNodes()),l=new pe(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new de(l,c),this.eventGenerator_=new Ee(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){a.assert(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){e=e;var i=t.createCancelEvent(e,r);i&&n.push(i)}))}if(t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(s)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===re.MERGE&&null!==t.source.queryId&&(a.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),a.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),a.assert(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];e.getNode().isLeafNode()||e.getNode().forEachChild(St,(function(t,e){n.push(ve.childAddedChange(t,e))}));return e.isFullyInitialized()&&n.push(ve.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},t}(),Ie=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return a.assert(se,"Reference.ts has not been loaded"),se},set:function(t){a.assert(!se,"__referenceConstructor has already been defined"),se=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var u=this.views.get(o);return a.assert(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(t,e,n)}var c=[];try{for(var l=s.__values(this.views.values()),h=l.next();!h.done;h=l.next()){u=h.value;c=c.concat(u.applyOperation(t,e,n))}}catch(f){r={error:f}}finally{try{h&&!h.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return c},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),s=this.views.get(o);if(!s){var a=n.calcCompleteEventCache(i?r:null),u=!1;a?u=!0:r instanceof Ft?(a=n.calcCompleteEventChildren(r),u=!1):(a=Ft.EMPTY_NODE,u=!1);var c=new de(new pe(a,u,!1),new pe(r,i,!1));s=new Te(t,c),this.views.set(o,s)}return s.addEventRegistration(e),s.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var i,o,a=e.queryIdentifier(),u=[],c=[],l=this.hasCompleteView();if("default"===a)try{for(var h=s.__values(this.views.entries()),f=h.next();!f.done;f=h.next()){var p=s.__read(f.value,2),d=p[0],v=p[1];c=c.concat(v.removeEventRegistration(n,r)),v.isEmpty()&&(this.views.delete(d),v.getQuery().getQueryParams().loadsAllData()||u.push(v.getQuery()))}}catch(y){i={error:y}}finally{try{f&&!f.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}else(v=this.views.get(a))&&(c=c.concat(v.removeEventRegistration(n,r)),v.isEmpty()&&(this.views.delete(a),v.getQuery().getQueryParams().loadsAllData()||u.push(v.getQuery())));return l&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:c}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=s.__values(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(a){t={error:a}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=s.__values(this.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r||a.getCompleteServerCache(t)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=s.__values(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(o){t={error:o}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),Se=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new ce(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=q.relativePath(i,e);return o=o.updateChild(s,n),new t(this.writeTree_.set(i,o))}var a=new ce(n);return new t(this.writeTree_.setTree(e,a))},t.prototype.addWrites=function(t,e){var n=this;return L(e,(function(e,r){n=n.addWrite(t.child(e),r)})),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,ce.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(q.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(St,(function(e,n){t.push(new pt(e,n))})):this.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new pt(e,n.value))})),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new ce(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal((function(n,o){".priority"===n?(a.assert(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=t(e.child(n),o,r)})),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(".priority"),i)),r}(q.Empty,this.writeTree_,t)},t.Empty=new t(new ce(null)),t}();var Ce=function(){function t(){this.visibleWrites_=Se.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new ke(t,this)},t.prototype.addOverwrite=function(t,e,n,r){a.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){a.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));a.assert(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&s>=0;){var u=this.allWrites_[s];u.visible&&(s>=n&&this.recordContainsPath_(u,r.path)?i=!1:r.path.contains(u.path)&&(o=!0)),s--}if(i){if(o)return this.resetTree_(),!0;r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):L(r.children,(function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))}));return!0}return!1},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);if(!i&&o.isEmpty())return n;if(i||null!=n||o.hasCompleteWrite(q.Empty)){var s=t.layerTree_(this.allWrites_,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))}),e);c=n||Ft.EMPTY_NODE;return s.apply(c)}return null}var a=this.visibleWrites_.getCompleteNode(e);if(null!=a)return a;var u=this.visibleWrites_.childCompoundWrite(e);if(u.isEmpty())return n;if(null!=n||u.hasCompleteWrite(q.Empty)){var c=n||Ft.EMPTY_NODE;return u.apply(c)}return null},t.prototype.calcCompleteEventChildren=function(t,e){var n=Ft.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(St,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(St,(function(t,e){var r=i.childCompoundWrite(new q(t)).apply(e);n=n.updateImmediateChild(t,r)})),i.getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){a.assert(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode(q.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,q.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=Se.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,u=void 0;if(o.snap)n.contains(s)?(u=q.relativePath(n,s),r=r.addWrite(u,o.snap)):s.contains(n)&&(u=q.relativePath(s,n),r=r.addWrite(q.Empty,o.snap.getChild(u)));else{if(!o.children)throw a.assertionError("WriteRecord should have .snap or .children");if(n.contains(s))u=q.relativePath(n,s),r=r.addWrites(u,o.children);else if(s.contains(n))if((u=q.relativePath(s,n)).isEmpty())r=r.addWrites(q.Empty,o.children);else{var c=a.safeGet(o.children,u.getFront());if(c){var l=c.getChild(u.popFront());r=r.addWrite(q.Empty,l)}}}}}return r},t}(),ke=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),Ne=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=ce.Empty,this.pendingWriteTree_=new Ce,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new he(ae.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=ce.fromObject(e);return this.applyOperationToSyncPoints_(new fe(ae.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=ce.Empty;return null!=n.snap?r=r.set(q.Empty,!0):L(n.children,(function(t,e){r=r.set(new q(t),e)})),this.applyOperationToSyncPoints_(new ue(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new he(ae.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=ce.fromObject(e);return this.applyOperationToSyncPoints_(new fe(ae.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new le(ae.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=q.relativePath(s,e),c=new he(ae.forServerTaggedQuery(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=q.relativePath(s,e),c=ce.fromObject(n),l=new fe(ae.forServerTaggedQuery(a),u,c);return this.applyTaggedOperation_(s,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=q.relativePath(o,e),u=new le(ae.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,(function(t,e){var n=q.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()}));var s,u=this.syncPointTree_.get(r);(u?(o=o||u.hasCompleteView(),i=i||u.getCompleteServerCache(q.Empty)):(u=new Ie,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i)?s=!0:(s=!1,i=Ft.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=e.getCompleteServerCache(q.Empty);n&&(i=i.updateImmediateChild(t,n))})));var c=u.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);a.assert(!this.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(l,h),this.tagToQueryMap.set(h,l)}var f=this.pendingWriteTree_.childWrites(r),p=u.addEventRegistration(e,n,f,i,s);if(!c&&!o){var d=u.viewForQuery(e);p=p.concat(this.setupListener_(e,d))}return p},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var l=-1!==c.findIndex((function(t){return t.getQueryParams().loadsAllData()})),h=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(f),d=0;d<p.length;++d){var v=p[d],y=v.getQuery(),g=this.createListenerForView_(v);this.listenProvider_.startListening(t.queryForListening_(y),this.tagForQuery_(y),g.hashFn,g.onComplete)}}if(!h&&c.length>0&&!r)if(l){this.listenProvider_.stopListening(t.queryForListening_(e),null)}else c.forEach((function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)}));this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,(function(e,n){var r=q.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),L(n,(function(t,e){r=r.concat(e)})),r}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),o=this.createListenerForView_(n),s=this.listenProvider_.startListening(t.queryForListening_(e),i,o.hashFn,o.onComplete),u=this.syncPointTree_.subtree(r);if(i)a.assert(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),L(n,(function(t,e){r=r.concat(e)})),r})),l=0;l<c.length;++l){var h=c[l];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return s},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||Ft.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return a.assert(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new q(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);a.assert(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(q.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(q.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(q.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(q.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(q.Empty));var s=[];return e.children.inorderTraversal((function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))})),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),Ae=function(){function t(){this.rootNode_=Ft.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Oe=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),a.contains(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return a.deepCopy(this.counters_)},t}(),Pe=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Oe),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Re=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=s.__assign({},t);return this.last_&&L(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),xe=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Re(t);var n=1e4+2e4*Math.random();V(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;L(e,(function(e,i){i>0&&a.contains(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),V(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),De=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Le(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.equals(t)}))},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.contains(t)||t.contains(e)}))},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];if(r)t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),Le=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();b&&E("event: "+e.toString()),j(n)}}},t.prototype.getPath=function(){return this.path_},t}(),Me=function(){function t(t){this.allowedEvents_=t,this.listeners_={},a.assert(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=s.__spread(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){a.assert(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),Fe=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(n="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(n="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return s.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return a.assert("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Me),Ue=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||a.isMobileCordova()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return s.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return a.assert("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Me),je=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&j((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}},t}(),Ve=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=T(t),this.stats_=Pe.getCollection(e),this.urlFn=function(t){return e.connectionURL("long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new je(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if(a.isNodeSdk()||"complete"===document.readyState)t();else{var e=!1,n=function n(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new qe((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=s.__read(t,5),i=r[0],o=r[1],a=r[2];r[3],r[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===i)n.id=o,n.password=a;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=s.__read(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!==typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!a.isNodeSdk()&&(!!t.forceAllow_||!t.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=a.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=a.base64Encode(e),r=D(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!a.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=a.stringify(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),qe=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,a.isNodeSdk())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=y(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))o='<script>document.domain="'+document.domain+'";<\/script>';var s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(u){E("frame writing exception"),u.stack&&E(u.stack),E(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||E("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;a.isNodeSdk()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){E("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},t}(),Be="";var We=null;"undefined"!==typeof MozWebSocket?We=MozWebSocket:"undefined"!==typeof WebSocket&&(We=WebSocket);var He=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=T(this.connId),this.stats_=Pe.getCollection(n),this.connURL=t.connectionURL_(n,i,o)}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!a.isNodeSdk()&&"undefined"!==typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL("websocket",r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,p.set("previous_websocket_failure",!0);try{if(a.isNodeSdk()){var i=a.CONSTANTS.NODE_ADMIN?"AdminNode":"Node",o={headers:{"User-Agent":"Firebase/5/"+Be+"/"+r.platform+"/"+i,"X-Firebase-GMPID":this.applicationId||""}},s=Object({NODE_ENV:"production",PUBLIC_URL:"/React-app-Todos",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}),u=0===this.connURL.indexOf("wss://")?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;u&&(o.proxy={origin:u}),this.mySock=new We(this.connURL,[],o)}else{o={headers:{"X-Firebase-GMPID":this.applicationId||""}};this.mySock=new We(this.connURL,[],o)}}catch(l){this.log_("Error instantiating WebSocket.");var c=l.message||l.data;return c&&this.log_(c),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==We&&!t.forceDisallow_},t.previouslyFailed=function(){return p.isInMemoryStorage||!0===p.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){p.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=a.jsonEval(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(a.assert(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=a.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=D(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),ze=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Ve,He]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=He&&He.isAvailable(),o=i&&!He.previouslyFailed();if(e.webSocketOnly&&(i||C("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[He];else{var a=this.transports_=[];try{for(var u=s.__values(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Ge=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=T("c:"+this.id+":"),this.transportManager_=new ze(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=V((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=R("t",t),n=R("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=R("t",t),n=R("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=R("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?I("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):I("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&C("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),V((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):V((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(p.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Ke=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),Qe=function(t){function e(n,r,i,o,s,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=o,l.onServerInfoUpdate_=s,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=T("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingPutCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=1e3,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!a.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),Fe.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&Ue.getInstance().on("online",l.onOnline_,l),l}return s.__extends(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(a.stringify(i)),a.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),a.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),a.assert(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,(function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"===typeof t&&a.contains(t,"w")){var n=a.safeGet(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();C("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||a.isAdmin(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=a.isValidFormat(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),a.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+a.stringify(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):I("Unrecognized action received from server: "+a.stringify(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;a.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,o=this,s=this.lastSessionId,u=!1,c=null,l=function(){c?c.close():(u=!0,r())};this.realtime_={close:l,sendRequest:function(t){a.assert(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}};var h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(h).then((function(e){u?E("getToken() completed but was canceled"):(E("getToken() completed. Creating connection."),o.authToken_=e&&e.accessToken,c=new Ge(i,o.repoInfo_,o.applicationId_,t,n,r,(function(t){C(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")}),s))})).then(null,(function(t){o.log_("Failed to get token: "+t),u||(a.CONSTANTS.NODE_ADMIN&&C(t),l())}))}},e.prototype.interrupt=function(t){E("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){E("Resuming connection for reason: "+t),delete this.interruptReasons_[t],a.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return x(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new q(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){E("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=s.__values(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var u=(n=void 0,s.__values(a.values())),c=u.next();!c.done;c=u.next()){var l=c.value;this.sendListen_(l)}}catch(p){n={error:p}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var f=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(f.action,f.pathString,f.data,f.onComplete)}},e.prototype.sendConnectStats_=function(){var t={},e="js";a.CONSTANTS.NODE_ADMIN?e="admin_node":a.CONSTANTS.NODE_CLIENT&&(e="node"),t["sdk."+e+"."+Be.replace(/\./g,"-")]=1,a.isMobileCordova()?t["framework.cordova"]=1:a.isReactNative()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Ue.getInstance().currentlyOnline();return a.isEmpty(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(Ke),Ye=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=T("p:rest:"),i.listens_={},i}return s.__extends(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(a.assert(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,s=t.path.toString();this.log_("Listen called for "+s+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(s+".json",l,(function(t,e){var n=e;(404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(s,n,!1,r),a.safeGet(o.listens_,u)===c)&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var o=i&&i.accessToken;o&&(e.auth=o);var s=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+a.querystring(e);r.log_("Sending REST request for "+s);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+s+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=a.jsonEval(u.responseText)}catch(e){C("Failed to parse JSON response for "+s+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&C("Got unsuccessful REST response for "+s+" Status: "+u.status),n(u.status);n=null}},u.open("GET",s,!0),u.send()}))},e}(Ke),Xe=function(){function t(t,e,n,r){var i=this;if(this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new De,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new ie,this.persistentConnection_=null,this.stats_=Pe.getCollection(t),e||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new Ye(this.repoInfo_,this.onDataUpdate_.bind(this),r),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var o=n.options.databaseAuthVariableOverride;if("undefined"!==typeof o&&null!==o){if("object"!==typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{a.stringify(o)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}this.persistentConnection_=new Qe(this.repoInfo_,n.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),r,o),this.server_=this.persistentConnection_}r.addTokenChangeListener((function(t){i.server_.refreshAuthToken(t)})),this.statsReporter_=Pe.getOrCreateReporter(t,(function(){return new xe(i.stats_,i.server_)})),this.transactionsInit_(),this.infoData_=new Ae,this.infoSyncTree_=new Ne({startListening:function(t,e,n,r){var o=[],s=i.infoData_.getNode(t.path);return s.isEmpty()||(o=i.infoSyncTree_.applyServerOverwrite(t.path,s),setTimeout((function(){r("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Ne({startListening:function(t,e,n,r){return i.server_.listen(t,n,e,(function(e,n){var o=r(e,n);i.eventQueue_.raiseEventsForChangedPath(t.path,o)})),[]},stopListening:function(t,e){i.server_.unlisten(t,e)}})}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new q(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new q(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var s=a.map(e,(function(t){return jt(t)}));o=this.serverSyncTree_.applyTaggedQueryMerge(i,s,r)}else{var u=jt(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var c=a.map(e,(function(t){return jt(t)}));o=this.serverSyncTree_.applyServerMerge(i,c)}else{var l=jt(e);o=this.serverSyncTree_.applyServerOverwrite(i,l)}var h=i;o.length>0&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;L(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new q("/.info/"+t),r=jt(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=jt(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=ee(s,a,o),c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);this.eventQueue_.queueEvents(l),this.server_.put(t.toString(),s.val(!0),(function(e,n){var o="ok"===e;o||C("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);i.eventQueue_.raiseEventsForChangedPath(t,s),i.callOnCompleteCallback(r,e,n)}));var h=this.abortTransactions_(t);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(L(e,(function(e,n){i=!1,s[e]=te(t.child(e),jt(n),r.serverSyncTree_,o)})),i)E("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,(function(e,i){var o="ok"===e;o||C("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,s),r.callOnCompleteCallback(n,e,i)})),L(e,(function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new ie;this.onDisconnect_.forEachTree(q.Empty,(function(r,i){var o=te(r,i,t.serverSyncTree_,e);n.remember(r,o)}));var r=[];n.forEachTree(q.Empty,(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new ie,this.eventQueue_.raiseEventsForChangedPath(q.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=jt(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=jt(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(a.isEmpty(e))return E("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&L(e,(function(e,n){var i=jt(n);r.onDisconnect_.remember(t.child(e),i)})),r.callOnCompleteCallback(n,i,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!==typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Re(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);L(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),E.apply(void 0,s.__spread([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&j((function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new cn(this))},enumerable:!1,configurable:!0}),t}(),$e=function(){function t(e){this.indexedFilter_=new ye(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new pt(e,n))||(n=Ft.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Ft.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Ft.EMPTY_NODE);var i=this;return e.forEachChild(St,(function(t,e){i.matches(new pt(t,e))||(r=r.updateImmediateChild(t,Ft.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),Je=function(){function t(t){this.rangedFilter_=new $e(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new pt(e,n))||(n=Ft.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Ft.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Ft.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Ft.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();){s=i.getNext();!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,Ft.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var s=this.index_.getCompare();o=function(t,e){return s(e,t)}}else o=this.index_.getCompare();var u=t;a.assert(u.numChildren()===this.limit_,"");var c=new pt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),p=r.getChildAfterChild(this.index_,l,this.reverse_);null!=p&&(p.name===e||u.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);var d=null==p?1:o(p,c);if(h&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(ve.childChangedChange(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(ve.childRemovedChange(e,f));var v=u.updateImmediateChild(e,Ft.EMPTY_NODE);return null!=p&&this.rangedFilter_.matches(p)?(null!=i&&i.trackChildChange(ve.childAddedChange(p.name,p.node)),v.updateImmediateChild(p.name,p.node)):v}return n.isEmpty()?t:h&&o(l,c)>=0?(null!=i&&(i.trackChildChange(ve.childRemovedChange(l.name,l.node)),i.trackChildChange(ve.childAddedChange(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,Ft.EMPTY_NODE)):t},t}(),Ze=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=St}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return a.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return a.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:N},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return a.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return a.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:A},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return a.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==St&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===St},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new ye(this.getIndex()):this.hasLimit()?new Je(this):new $e(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()||(this.index_===St?e=n.PRIORITY_INDEX:this.index_===qt?e=n.VALUE_INDEX:this.index_===yt?e=n.KEY_INDEX:(a.assert(this.index_ instanceof Bt,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=a.stringify(e),this.startSet_&&(r[n.START_AT]=a.stringify(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+a.stringify(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=a.stringify(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+a.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_)),r},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),tn=function(t){function e(e,n){if(!(e instanceof Xe))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,Ze.DEFAULT,!1)||this}return s.__extends(e,t),e.prototype.getKey=function(){return a.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return a.validateArgCount("Reference.child",1,1,arguments.length),"number"===typeof t?t=String(t):t instanceof q||(null===this.path.getFront()?st("Reference.child",1,t,!1):ot("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){a.validateArgCount("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){a.validateArgCount("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){a.validateArgCount("Reference.set",1,2,arguments.length),at("Reference.set",this.path),Z("Reference.set",1,t,this.path,!1),a.validateCallback("Reference.set",2,e,!0);var n=new a.Deferred;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(a.validateArgCount("Reference.update",1,2,arguments.length),at("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,C("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}et("Reference.update",1,t,this.path,!1),a.validateCallback("Reference.update",2,e,!0);var i=new a.Deferred;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(a.validateArgCount("Reference.setWithPriority",2,3,arguments.length),at("Reference.setWithPriority",this.path),Z("Reference.setWithPriority",1,t,this.path,!1),nt("Reference.setWithPriority",2,e,!1),a.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new a.Deferred;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return a.validateArgCount("Reference.remove",0,1,arguments.length),at("Reference.remove",this.path),a.validateCallback("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(a.validateArgCount("Reference.transaction",1,3,arguments.length),at("Reference.transaction",this.path),a.validateCallback("Reference.transaction",1,t,!1),a.validateCallback("Reference.transaction",2,e,!0),ct("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new a.Deferred;"function"===typeof e&&r.promise.catch((function(){}));var i=function(t,n,i){t?r.reject(t):r.resolve(new ht(n,i)),"function"===typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){a.validateArgCount("Reference.setPriority",1,2,arguments.length),at("Reference.setPriority",this.path),nt("Reference.setPriority",1,t,!1),a.validateCallback("Reference.setPriority",2,e,!0);var n=new a.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){a.validateArgCount("Reference.push",0,2,arguments.length),at("Reference.push",this.path),Z("Reference.push",1,t,this.path,!0),a.validateCallback("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=ft(r),o=this.child(i),s=this.child(i);return n=null!=t?o.set(t,e).then((function(){return s})):Promise.resolve(s),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"===typeof e&&n.catch((function(){})),o},e.prototype.onDisconnect=function(){return at("Reference.onDisconnect",this.path),new lt(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Qt);Qt.__referenceConstructor=tn,Ie.__referenceConstructor=tn;var en,nn=function(){this.children={},this.childCount=0,this.value=null},rn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new nn),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof q?e:new q(e),r=this,i=n.getFront();null!==i;){r=new t(i,r,a.safeGet(r.node_.children,i)||new nn),i=(n=n.popFront()).getFront()}return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){a.assert("undefined"!==typeof t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;L(this.node_.children,(function(r,i){e(new t(r,n,i))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new q(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=a.contains(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}();!function(t){t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT"}(en||(en={})),Xe.MAX_TRANSACTION_RETRIES_=25,Xe.prototype.transactionsInit_=function(){this.transactionQueueTree_=new rn},Xe.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},o=new tn(this,t);o.on("value",i);var s={path:t,update:e,onComplete:n,status:null,order:y(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);s.currentInputSnapshot=u;var c=s.update(u.val());if(void 0===c){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var l=new Wt(s.currentInputSnapshot,new tn(this,s.path),St);s.onComplete(null,!1,l)}}else{tt("transaction failed: Data returned ",c,s.path),s.status=en.RUN;var h=this.transactionQueueTree_.subTree(t),f=h.getValue()||[];f.push(s),h.setValue(f);var p=void 0;if("object"===typeof c&&null!==c&&a.contains(c,".priority"))p=a.safeGet(c,".priority"),a.assert(J(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else p=(this.serverSyncTree_.calcCompleteEventCache(t)||Ft.EMPTY_NODE).getPriority().val();p=p;var d=this.generateServerValues(),v=jt(c,p),g=ee(v,u,d);s.currentOutputSnapshotRaw=v,s.currentOutputSnapshotResolved=g,s.currentWriteId=this.getNextWriteId_();var m=this.serverSyncTree_.applyUserOverwrite(t,g,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,m),this.sendReadyTransactions_()}},Xe.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Ft.EMPTY_NODE},Xe.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);a.assert(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return t.status===en.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},Xe.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),o=i,s=i.hash(),u=0;u<e.length;u++){var c=e[u];a.assert(c.status===en.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=en.SENT,c.retryCount++;var l=q.relativePath(t,c.path);o=o.updateChild(l,c.currentOutputSnapshotRaw)}var h=o.val(!0),f=t;this.server_.put(f.toString(),h,(function(r){n.log_("transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=en.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new tn(n,e[s].path),c=new Wt(a,u,St);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i);for(s=0;s<o.length;s++)j(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status===en.SENT_NEEDS_ABORT?e[s].status=en.NEEDS_ABORT:e[s].status=en.RUN;else{C("transaction at "+f.toString()+" failed: "+r);for(s=0;s<e.length;s++)e[s].status=en.NEEDS_ABORT,e[s].abortReason=r}n.rerunTransactions_(t)}}),s)},Xe.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},Xe.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,r=[],i=[],o=t.filter((function(t){return t.status===en.RUN})).map((function(t){return t.currentWriteId})),s=0;s<t.length;s++){var u=t[s],c=q.relativePath(e,u.path),l=!1,h=void 0;if(a.assert(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===en.NEEDS_ABORT)l=!0,h=u.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(u.currentWriteId,!0));else if(u.status===en.RUN)if(u.retryCount>=Xe.MAX_TRANSACTION_RETRIES_)l=!0,h="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(u.currentWriteId,!0));else{var f=this.getLatestState_(u.path,o);u.currentInputSnapshot=f;var p=t[s].update(f.val());if(void 0!==p){tt("transaction failed: Data returned ",p,u.path);var d=jt(p);"object"===typeof p&&null!=p&&a.contains(p,".priority")||(d=d.updatePriority(f.getPriority()));var v=u.currentWriteId,y=this.generateServerValues(),g=ee(d,f,y);u.currentOutputSnapshotRaw=d,u.currentOutputSnapshotResolved=g,u.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(v),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(u.path,g,u.currentWriteId,u.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(v,!0))}else l=!0,h="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(u.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],l&&(t[s].status=en.COMPLETED,n=t[s].unwatcher,setTimeout(n,Math.floor(0)),t[s].onComplete))if("nodata"===h){var m=new tn(this,t[s].path),b=t[s].currentInputSnapshot,_=new Wt(b,m,St);r.push(t[s].onComplete.bind(null,null,!1,_))}else r.push(t[s].onComplete.bind(null,new Error(h),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(s=0;s<r.length;s++)j(r[s]);this.sendReadyTransactions_()}},Xe.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},Xe.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},Xe.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},Xe.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==en.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},Xe.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},Xe.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)if(e[o].status===en.SENT_NEEDS_ABORT);else if(e[o].status===en.SENT)a.assert(i===o-1,"All SENT items should be at beginning of queue."),i=o,e[o].status=en.SENT_NEEDS_ABORT,e[o].abortReason="set";else if(a.assert(e[o].status===en.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete){n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))}-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r);for(o=0;o<n.length;o++)j(n[o])}};var on,sn=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(E("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',C(t)},t}(),an=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),un=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return on||(on=new t),on},t.prototype.interrupt=function(){var t,e,n,r;try{for(var i=s.__values(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var u=(n=void 0,s.__values(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next()){var l=c.value;this.repos_[a][l].interrupt()}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var i=s.__values(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var u=(n=void 0,s.__values(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next()){var l=c.value;this.repos_[a][l].resume()}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.databaseFromApp=function(t,e,n){var i=n||t.options.databaseURL;void 0===i&&S("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.initializeApp().");var o,s=G(i),u=s.repoInfo,c=void 0;"undefined"!==typeof r&&(c=Object({NODE_ENV:"production",PUBLIC_URL:"/React-app-Todos",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,i="http://"+c+"?ns="+u.namespace,u=(s=G(i)).repoInfo):o=!s.repoInfo.secure;var l=a.CONSTANTS.NODE_ADMIN&&o?new an:new sn(t,e);return ut("Invalid Firebase Database URL",1,s),s.path.isEmpty()||S("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(u,t,l).database},t.prototype.deleteRepo=function(t){var e=a.safeGet(this.repos_,t.app.name);e&&a.safeGet(e,t.repoInfo_.toURLString())===t||S("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},t.prototype.createRepo=function(t,e,n){var r=a.safeGet(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=a.safeGet(r,t.toURLString());return i&&S("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Xe(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),cn=function(){function t(t){this.repo_=t,t instanceof Xe||S("Don't call new Database() directly - please use firebase.database()."),this.root_=new tn(t,q.Empty),this.INTERNAL=new ln(this)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){return this.checkDeleted_("ref"),a.validateArgCount("database.ref",0,1,arguments.length),t instanceof tn?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),a.validateArgCount(e,1,1,arguments.length);var n=G(t);ut(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&S(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repo_&&S("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){a.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){a.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),ln=function(){function t(t){this.database=t}return t.prototype.delete=function(){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(t){return this.database.checkDeleted_("delete"),un.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]}))}))},t}(),hn=Object.freeze({__proto__:null,forceLongPolling:function(){He.forceDisallow(),Ve.forceAllow()},forceWebSockets:function(){Ve.forceDisallow()},isWebSocketsAvailable:function(){return He.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),fn=Qe;Qe.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Qe.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var pn=Ge,dn=W,vn=Object.freeze({__proto__:null,DataConnection:fn,RealTimeConnection:pn,hijackHash:function(t){var e=Qe.prototype.put;return Qe.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Qe.prototype.put=e}},ConnectionTarget:dn,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){un.getInstance().forceRestClient(t)}}),yn=cn.ServerValue;function gn(e){!function(t){Be=t}(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new c.Component("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return un.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:tn,Query:Qt,Database:cn,DataSnapshot:Wt,enableLogging:w,INTERNAL:hn,ServerValue:yn,TEST_ACCESS:vn}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.6.11"),a.isNodeSdk()&&(t.exports=n)}gn(o),e.DataSnapshot=Wt,e.Database=cn,e.OnDisconnect=lt,e.Query=Qt,e.Reference=tn,e.ServerValue=yn,e.enableLogging=w,e.registerDatabase=gn}).call(this,n(15))},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(0),o=(r=n(3))&&"object"==typeof r&&"default"in r?r.default:r,s=n(11),a=n(2),u=n(34),c=n(4),l=new s.Logger("@firebase/firestore");function h(){return l.logLevel}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(l.logLevel<=s.LogLevel.DEBUG){var r=e.map(v);l.debug.apply(l,i.__spreadArrays(["Firestore (7.19.0): "+t],r))}}function p(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(l.logLevel<=s.LogLevel.ERROR){var r=e.map(v);l.error.apply(l,i.__spreadArrays(["Firestore (7.19.0): "+t],r))}}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(l.logLevel<=s.LogLevel.WARN){var r=e.map(v);l.warn.apply(l,i.__spreadArrays(["Firestore (7.19.0): "+t],r))}}function v(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function y(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (7.19.0) INTERNAL ASSERTION FAILED: "+t;throw p(e),new Error(e)}function g(t,e){t||y()}function m(t,e){return t}function b(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var _=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=b(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function w(t,e){return t<e?-1:t>e?1:0}function E(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function T(t){return t+"\0"}var I=function(t,e,n,r,i){this.s=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i},S=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"i",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.o=function(t){return w(this.projectId,t.projectId)||w(this.database,t.database)},t}();function C(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function k(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function N(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var A=function(){function t(t,e){this.h=t,this.u=e,this.l={}}return t.prototype.get=function(t){var e=this.h(t),n=this.l[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.u(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.h(t),r=this.l[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.u(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.l[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.h(t),n=this.l[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.u(n[r][0],t))return 1===n.length?delete this.l[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){k(this.l,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype._=function(){return N(this.l)},t}(),O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},P=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return i.__extends(e,t),e}(Error),R=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new P(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new P(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new P(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new P(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.T=function(t){return this.seconds===t.seconds?w(this.nanoseconds,t.nanoseconds):w(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),x=function(){function t(t){this.timestamp=t}return t.m=function(e){return new t(e)},t.min=function(){return new t(new R(0,0))},t.prototype.o=function(t){return this.timestamp.T(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.I=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.A=function(){return this.timestamp},t}(),D=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&y(),void 0===n?n=t.length-e:n>t.length-e&&y(),this.segments=t,this.offset=e,this.R=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.R},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.P(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.g(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.V=function(t){return t=void 0===t?1:t,this.g(this.segments,this.offset+t,this.length-t)},t.prototype.p=function(){return this.g(this.segments,this.offset,this.length-1)},t.prototype.v=function(){return this.segments[this.offset]},t.prototype.S=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype._=function(){return 0===this.length},t.prototype.D=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.C=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.N=function(){return this.segments.slice(this.offset,this.limit())},t.P=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),L=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.g=function(t,n,r){return new e(t,n,r)},e.prototype.F=function(){return this.N().join("/")},e.prototype.toString=function(){return this.F()},e.k=function(t){if(t.indexOf("//")>=0)throw new P(O.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter((function(t){return t.length>0})))},e.$=function(){return new e([])},e}(D),M=/^[_a-zA-Z][_a-zA-Z0-9]*$/,F=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.g=function(t,n,r){return new e(t,n,r)},e.O=function(t){return M.test(t)},e.prototype.F=function(){return this.N().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.O(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.F()},e.prototype.M=function(){return 1===this.length&&"__name__"===this.get(0)},e.L=function(){return new e(["__name__"])},e.q=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new P(O.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new P(O.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new P(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new P(O.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.$=function(){return new e([])},e}(D),U=function(){function t(t){this.path=t}return t.B=function(e){return new t(L.k(e))},t.U=function(e){return new t(L.k(e).V(5))},t.prototype.W=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===L.P(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.P=function(t,e){return L.P(t.path,e.path)},t.j=function(t){return t.length%2==0},t.K=function(e){return new t(new L(e.slice()))},t}();function j(t){return null==t}function V(t){return-0===t&&1/t==-1/0}function q(t){return"number"==typeof t&&Number.isInteger(t)&&!V(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var B=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.G=null};function W(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new B(t,e,n,r,i,o,s)}function H(t){var e=m(t);if(null===e.G){var n=e.path.F();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.F()+t.op.toString()+Lt(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.F()+e.dir;var e})).join(","),j(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Rn(e.startAt)),e.endAt&&(n+="|ub:",n+=Rn(e.endAt)),e.G=n}return e.G}function z(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Fn(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Pt(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Dn(t.startAt,e.startAt)&&Dn(t.endAt,e.endAt)}function G(t){return U.j(t.path)&&null===t.collectionGroup&&0===t.filters.length}var K=function(){function t(t){this.H=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.H,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.H)},t.prototype.Y=function(){return 2*this.H.length},t.prototype.o=function(t){return w(this.H,t.H)},t.prototype.isEqual=function(t){return this.H===t.H},t}();K.J=new K("");var Q,Y,X=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=x.min()),void 0===o&&(o=x.min()),void 0===s&&(s=K.J),this.target=t,this.targetId=e,this.X=n,this.sequenceNumber=r,this.Z=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.tt=function(e){return new t(this.target,this.targetId,this.X,e,this.Z,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.et=function(e,n){return new t(this.target,this.targetId,this.X,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.nt=function(e){return new t(this.target,this.targetId,this.X,this.sequenceNumber,this.Z,e,this.resumeToken)},t}(),$=function(t){this.count=t};function J(t){switch(t){case O.OK:return y();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return y()}}function Z(t){if(void 0===t)return p("GRPC error has no .code"),O.UNKNOWN;switch(t){case Q.OK:return O.OK;case Q.CANCELLED:return O.CANCELLED;case Q.UNKNOWN:return O.UNKNOWN;case Q.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Q.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Q.INTERNAL:return O.INTERNAL;case Q.UNAVAILABLE:return O.UNAVAILABLE;case Q.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Q.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Q.NOT_FOUND:return O.NOT_FOUND;case Q.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Q.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Q.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Q.ABORTED:return O.ABORTED;case Q.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Q.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Q.DATA_LOSS:return O.DATA_LOSS;default:return y()}}(Y=Q||(Q={}))[Y.OK=0]="OK",Y[Y.CANCELLED=1]="CANCELLED",Y[Y.UNKNOWN=2]="UNKNOWN",Y[Y.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Y[Y.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Y[Y.NOT_FOUND=5]="NOT_FOUND",Y[Y.ALREADY_EXISTS=6]="ALREADY_EXISTS",Y[Y.PERMISSION_DENIED=7]="PERMISSION_DENIED",Y[Y.UNAUTHENTICATED=16]="UNAUTHENTICATED",Y[Y.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Y[Y.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Y[Y.ABORTED=10]="ABORTED",Y[Y.OUT_OF_RANGE=11]="OUT_OF_RANGE",Y[Y.UNIMPLEMENTED=12]="UNIMPLEMENTED",Y[Y.INTERNAL=13]="INTERNAL",Y[Y.UNAVAILABLE=14]="UNAVAILABLE",Y[Y.DATA_LOSS=15]="DATA_LOSS";var tt=function(){function t(t,e){this.P=t,this.root=e||nt.EMPTY}return t.prototype.st=function(e,n){return new t(this.P,this.root.st(e,n,this.P).copy(null,null,nt.it,null,null))},t.prototype.remove=function(e){return new t(this.P,this.root.remove(e,this.P).copy(null,null,nt.it,null,null))},t.prototype.get=function(t){for(var e=this.root;!e._();){var n=this.P(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n._();){var r=this.P(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype._=function(){return this.root._()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.rt=function(){return this.root.rt()},t.prototype.ot=function(){return this.root.ot()},t.prototype.ht=function(t){return this.root.ht(t)},t.prototype.forEach=function(t){this.ht((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.ht((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.at=function(t){return this.root.at(t)},t.prototype.ct=function(){return new et(this.root,null,this.P,!1)},t.prototype.ut=function(t){return new et(this.root,t,this.P,!1)},t.prototype.lt=function(){return new et(this.root,null,this.P,!0)},t.prototype._t=function(t){return new et(this.root,t,this.P,!0)},t}(),et=function(){function t(t,e,n,r){this.ft=r,this.dt=[];for(var i=1;!t._();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ft?t.left:t.right;else{if(0===i){this.dt.push(t);break}this.dt.push(t),t=this.ft?t.right:t.left}}return t.prototype.wt=function(){var t=this.dt.pop(),e={key:t.key,value:t.value};if(this.ft)for(t=t.left;!t._();)this.dt.push(t),t=t.right;else for(t=t.right;!t._();)this.dt.push(t),t=t.left;return e},t.prototype.Tt=function(){return this.dt.length>0},t.prototype.Et=function(){if(0===this.dt.length)return null;var t=this.dt[this.dt.length-1];return{key:t.key,value:t.value}},t}(),nt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype._=function(){return!1},t.prototype.ht=function(t){return this.left.ht(t)||t(this.key,this.value)||this.right.ht(t)},t.prototype.at=function(t){return this.right.at(t)||t(this.key,this.value)||this.left.at(t)},t.prototype.min=function(){return this.left._()?this:this.left.min()},t.prototype.rt=function(){return this.min().key},t.prototype.ot=function(){return this.right._()?this.key:this.right.ot()},t.prototype.st=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.st(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.st(t,e,n))).It()},t.prototype.At=function(){if(this.left._())return t.EMPTY;var e=this;return e.left.Rt()||e.left.left.Rt()||(e=e.Pt()),(e=e.copy(null,null,null,e.left.At(),null)).It()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left._()||i.left.Rt()||i.left.left.Rt()||(i=i.Pt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.Rt()&&(i=i.gt()),i.right._()||i.right.Rt()||i.right.left.Rt()||(i=i.Vt()),0===n(e,i.key)){if(i.right._())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.At())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.It()},t.prototype.Rt=function(){return this.color},t.prototype.It=function(){var t=this;return t.right.Rt()&&!t.left.Rt()&&(t=t.yt()),t.left.Rt()&&t.left.left.Rt()&&(t=t.gt()),t.left.Rt()&&t.right.Rt()&&(t=t.pt()),t},t.prototype.Pt=function(){var t=this.pt();return t.right.left.Rt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.gt())).yt()).pt()),t},t.prototype.Vt=function(){var t=this.pt();return t.left.left.Rt()&&(t=(t=t.gt()).pt()),t},t.prototype.yt=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.gt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.pt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.bt=function(){var t=this.vt();return Math.pow(2,t)<=this.size+1},t.prototype.vt=function(){if(this.Rt()&&this.left.Rt())throw y();if(this.right.Rt())throw y();var t=this.left.vt();if(t!==this.right.vt())throw y();return t+(this.Rt()?0:1)},t}();nt.EMPTY=null,nt.RED=!0,nt.it=!1,nt.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw y()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw y()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw y()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw y()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw y()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.st=function(t,e,n){return new nt(t,e)},t.prototype.remove=function(t,e){return this},t.prototype._=function(){return!0},t.prototype.ht=function(t){return!1},t.prototype.at=function(t){return!1},t.prototype.rt=function(){return null},t.prototype.ot=function(){return null},t.prototype.Rt=function(){return!1},t.prototype.bt=function(){return!0},t.prototype.vt=function(){return 0},t}());var rt=function(){function t(t){this.P=t,this.data=new tt(this.P)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.rt()},t.prototype.last=function(){return this.data.ot()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ht((function(e,n){return t(e),!1}))},t.prototype.St=function(t,e){for(var n=this.data.ut(t[0]);n.Tt();){var r=n.wt();if(this.P(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Dt=function(t,e){var n;for(n=void 0!==e?this.data.ut(e):this.data.ct();n.Tt();)if(!t(n.wt().key))return},t.prototype.Ct=function(t){var e=this.data.ut(t);return e.Tt()?e.wt().key:null},t.prototype.ct=function(){return new it(this.data.ct())},t.prototype.ut=function(t){return new it(this.data.ut(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).st(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype._=function(){return this.data._()},t.prototype.Nt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.ct(),r=e.data.ct();n.Tt();){var i=n.wt().key,o=r.wt().key;if(0!==this.P(i,o))return!1}return!0},t.prototype.N=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.P);return n.data=e,n},t}(),it=function(){function t(t){this.Ft=t}return t.prototype.wt=function(){return this.Ft.wt().key},t.prototype.Tt=function(){return this.Ft.Tt()},t}(),ot=new tt(U.P);function st(){return ot}function at(){return st()}var ut=new tt(U.P);function ct(){return ut}var lt=new tt(U.P),ht=new rt(U.P);function ft(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ht,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var pt=new rt(w);function dt(){return pt}var vt=function(){function t(t){this.P=t?function(e,n){return t(e,n)||U.P(e.key,n.key)}:function(t,e){return U.P(t.key,e.key)},this.kt=ct(),this.$t=new tt(this.P)}return t.xt=function(e){return new t(e.P)},t.prototype.has=function(t){return null!=this.kt.get(t)},t.prototype.get=function(t){return this.kt.get(t)},t.prototype.first=function(){return this.$t.rt()},t.prototype.last=function(){return this.$t.ot()},t.prototype._=function(){return this.$t._()},t.prototype.indexOf=function(t){var e=this.kt.get(t);return e?this.$t.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.$t.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.$t.ht((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.kt.st(t.key,t),e.$t.st(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.kt.remove(t),this.$t.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.$t.ct(),r=e.$t.ct();n.Tt();){var i=n.wt().key,o=r.wt().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.P=this.P,r.kt=e,r.$t=n,r},t}(),yt=function(){function t(){this.Ot=new tt(U.P)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Ot.get(e);n?0!==t.type&&3===n.type?this.Ot=this.Ot.st(e,t):3===t.type&&1!==n.type?this.Ot=this.Ot.st(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Ot=this.Ot.st(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Ot=this.Ot.st(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Ot=this.Ot.remove(e):1===t.type&&2===n.type?this.Ot=this.Ot.st(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Ot=this.Ot.st(e,{type:2,doc:t.doc}):y():this.Ot=this.Ot.st(e,t)},t.prototype.Mt=function(){var t=[];return this.Ot.ht((function(e,n){t.push(n)})),t},t}(),gt=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Lt=n,this.docChanges=r,this.qt=i,this.fromCache=o,this.Bt=s,this.Ut=a}return t.Qt=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,vt.xt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.qt._()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Bt===t.Bt&&this.qt.isEqual(t.qt)&&gn(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Lt.isEqual(t.Lt)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),mt=function(){function t(t,e,n,r,i){this.Z=t,this.Wt=e,this.jt=n,this.Kt=r,this.Gt=i}return t.zt=function(e,n){var r=new Map;return r.set(e,bt.Ht(e,n)),new t(x.min(),r,dt(),st(),ft())},t}(),bt=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Yt=e,this.Jt=n,this.Xt=r,this.Zt=i}return t.Ht=function(e,n){return new t(K.J,n,ft(),ft(),ft())},t}(),_t=function(t,e,n,r){this.te=t,this.removedTargetIds=e,this.key=n,this.ee=r},wt=function(t,e){this.targetId=t,this.ne=e},Et=function(t,e,n,r){void 0===n&&(n=K.J),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Tt=function(){function t(){this.se=0,this.ie=Ct(),this.re=K.J,this.oe=!1,this.he=!0}return Object.defineProperty(t.prototype,"Yt",{get:function(){return this.oe},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.re},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ae",{get:function(){return 0!==this.se},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ce",{get:function(){return this.he},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){t.Y()>0&&(this.he=!0,this.re=t)},t.prototype.le=function(){var t=ft(),e=ft(),n=ft();return this.ie.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:y()}})),new bt(this.re,this.oe,t,e,n)},t.prototype._e=function(){this.he=!1,this.ie=Ct()},t.prototype.fe=function(t,e){this.he=!0,this.ie=this.ie.st(t,e)},t.prototype.de=function(t){this.he=!0,this.ie=this.ie.remove(t)},t.prototype.we=function(){this.se+=1},t.prototype.Te=function(){this.se-=1},t.prototype.Ee=function(){this.he=!0,this.oe=!0},t}(),It=function(){function t(t){this.me=t,this.Ie=new Map,this.Ae=st(),this.Re=St(),this.Pe=new rt(w)}return t.prototype.ge=function(t){for(var e=0,n=t.te;e<n.length;e++){var r=n[e];t.ee instanceof rn?this.Ve(r,t.ee):t.ee instanceof on&&this.ye(r,t.key,t.ee)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.ye(s,t.key,t.ee)}},t.prototype.pe=function(t){var e=this;this.be(t,(function(n){var r=e.ve(n);switch(t.state){case 0:e.Se(n)&&r.ue(t.resumeToken);break;case 1:r.Te(),r.ae||r._e(),r.ue(t.resumeToken);break;case 2:r.Te(),r.ae||e.removeTarget(n);break;case 3:e.Se(n)&&(r.Ee(),r.ue(t.resumeToken));break;case 4:e.Se(n)&&(e.De(n),r.ue(t.resumeToken));break;default:y()}}))},t.prototype.be=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Ie.forEach((function(t,r){n.Se(r)&&e(r)}))},t.prototype.Ce=function(t){var e=t.targetId,n=t.ne.count,r=this.Ne(e);if(r){var i=r.target;if(G(i))if(0===n){var o=new U(i.path);this.ye(e,o,new on(o,x.min()))}else g(1===n);else this.Fe(e)!==n&&(this.De(e),this.Pe=this.Pe.add(e))}},t.prototype.ke=function(t){var e=this,n=new Map;this.Ie.forEach((function(r,i){var o=e.Ne(i);if(o){if(r.Yt&&G(o.target)){var s=new U(o.target.path);null!==e.Ae.get(s)||e.$e(i,s)||e.ye(i,s,new on(s,t))}r.ce&&(n.set(i,r.le()),r._e())}}));var r=ft();this.Re.forEach((function(t,n){var i=!0;n.Dt((function(t){var n=e.Ne(t);return!n||2===n.X||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new mt(t,n,this.Pe,this.Ae,r);return this.Ae=st(),this.Re=St(),this.Pe=new rt(w),i},t.prototype.Ve=function(t,e){if(this.Se(t)){var n=this.$e(t,e.key)?2:0;this.ve(t).fe(e.key,n),this.Ae=this.Ae.st(e.key,e),this.Re=this.Re.st(e.key,this.xe(e.key).add(t))}},t.prototype.ye=function(t,e,n){if(this.Se(t)){var r=this.ve(t);this.$e(t,e)?r.fe(e,1):r.de(e),this.Re=this.Re.st(e,this.xe(e).delete(t)),n&&(this.Ae=this.Ae.st(e,n))}},t.prototype.removeTarget=function(t){this.Ie.delete(t)},t.prototype.Fe=function(t){var e=this.ve(t).le();return this.me.Oe(t).size+e.Jt.size-e.Zt.size},t.prototype.we=function(t){this.ve(t).we()},t.prototype.ve=function(t){var e=this.Ie.get(t);return e||(e=new Tt,this.Ie.set(t,e)),e},t.prototype.xe=function(t){var e=this.Re.get(t);return e||(e=new rt(w),this.Re=this.Re.st(t,e)),e},t.prototype.Se=function(t){var e=null!==this.Ne(t);return e||f("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Ne=function(t){var e=this.Ie.get(t);return e&&e.ae?null:this.me.Me(t)},t.prototype.De=function(t){var e=this;this.Ie.set(t,new Tt),this.me.Oe(t).forEach((function(n){e.ye(t,n,null)}))},t.prototype.$e=function(t,e){return this.me.Oe(t).has(e)},t}();function St(){return new tt(U.P)}function Ct(){return new tt(U.P)}function kt(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Nt(t){var e=Mt(t.mapValue.fields.__local_write_time__.timestampValue);return new R(e.seconds,e.nanos)}var At=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ot(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?kt(t)?4:10:y()}function Pt(t,e){var n=Ot(t);if(n!==Ot(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Nt(t).isEqual(Nt(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Mt(t.timestampValue),r=Mt(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Ut(t.bytesValue).isEqual(Ut(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Ft(t.geoPointValue.latitude)===Ft(e.geoPointValue.latitude)&&Ft(t.geoPointValue.longitude)===Ft(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Ft(t.integerValue)===Ft(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Ft(t.doubleValue),r=Ft(e.doubleValue);return n===r?V(n)===V(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return E(t.arrayValue.values||[],e.arrayValue.values||[],Pt);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(C(n)!==C(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Pt(n[i],r[i])))return!1;return!0}(t,e);default:return y()}}function Rt(t,e){return void 0!==(t.values||[]).find((function(t){return Pt(t,e)}))}function xt(t,e){var n=Ot(t),r=Ot(e);if(n!==r)return w(n,r);switch(n){case 0:return 0;case 1:return w(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Ft(t.integerValue||t.doubleValue),r=Ft(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Dt(t.timestampValue,e.timestampValue);case 4:return Dt(Nt(t),Nt(e));case 5:return w(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Ut(t),r=Ut(e);return n.o(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=w(n[i],r[i]);if(0!==o)return o}return w(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=w(Ft(t.latitude),Ft(e.latitude));return 0!==n?n:w(Ft(t.longitude),Ft(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=xt(n[i],r[i]);if(o)return o}return w(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=w(r[s],o[s]);if(0!==a)return a;var u=xt(n[r[s]],i[o[s]]);if(0!==u)return u}return w(r.length,o.length)}(t.mapValue,e.mapValue);default:throw y()}}function Dt(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return w(t,e);var n=Mt(t),r=Mt(e),i=w(n.seconds,r.seconds);return 0!==i?i:w(n.nanos,r.nanos)}function Lt(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=Mt(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Ut(e.bytesValue).toBase64():"referenceValue"in e?(r=e.referenceValue,U.U(r).toString()):"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=t(s)}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):y();var n,r}(t)}function Mt(t){if(g(!!t),"string"==typeof t){var e=0,n=At.exec(t);if(g(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ft(t.seconds),nanos:Ft(t.nanos)}}function Ft(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ut(t){return"string"==typeof t?K.fromBase64String(t):K.fromUint8Array(t)}function jt(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.F()}}function Vt(t){return!!t&&"integerValue"in t}function qt(t){return!!t&&"arrayValue"in t}function Bt(t){return!!t&&"nullValue"in t}function Wt(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ht(t){return!!t&&"mapValue"in t}var zt={asc:"ASCENDING",desc:"DESCENDING"},Gt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kt=function(t,e){this.s=t,this.Le=e};function Qt(t){return{integerValue:""+t}}function Yt(t,e){if(t.Le){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:V(e)?"-0":e}}function Xt(t,e){return q(e)?Qt(e):Yt(t,e)}function $t(t,e){return t.Le?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Jt(t,e){return t.Le?e.toBase64():e.toUint8Array()}function Zt(t,e){return $t(t,e.A())}function te(t){return g(!!t),x.m(function(t){var e=Mt(t);return new R(e.seconds,e.nanos)}(t))}function ee(t,e){return function(t){return new L(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).F()}function ne(t){var e=L.k(t);return g(we(e)),e}function re(t,e){return ee(t.s,e.path)}function ie(t,e){var n=ne(e);return g(n.get(1)===t.s.projectId),g(!n.get(3)&&!t.s.database||n.get(3)===t.s.database),new U(ue(n))}function oe(t,e){return ee(t.s,e)}function se(t){var e=ne(t);return 4===e.length?L.$():ue(e)}function ae(t){return new L(["projects",t.s.projectId,"databases",t.s.database]).F()}function ue(t){return g(t.length>4&&"documents"===t.get(4)),t.V(5)}function ce(t,e,n){return{name:re(t,e),fields:n.proto.mapValue.fields}}function le(t,e){var n;if(e instanceof ze)n={update:ce(t,e.key,e.value)};else if(e instanceof $e)n={delete:re(t,e.key)};else if(e instanceof Ge)n={update:ce(t,e.key,e.data),updateMask:_e(e.qe)};else if(e instanceof Qe)n={transform:{document:re(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Ce)return{fieldPath:e.field.F(),setToServerValue:"REQUEST_TIME"};if(n instanceof ke)return{fieldPath:e.field.F(),appendMissingElements:{values:n.elements}};if(n instanceof Ae)return{fieldPath:e.field.F(),removeAllFromArray:{values:n.elements}};if(n instanceof Pe)return{fieldPath:e.field.F(),increment:n.Be};throw y()}(0,t)}))}};else{if(!(e instanceof Je))return y();n={verify:re(t,e.key)}}return e.Qe.Ue||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Zt(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:y()}(t,e.Qe)),n}function he(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Fe.updateTime(te(t.updateTime)):void 0!==t.exists?Fe.exists(t.exists):Fe.We()}(e.currentDocument):Fe.We();if(e.update){e.update.name;var r=ie(t,e.update.name),i=new Ze({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){var e=t.fieldPaths||[];return new De(e.map((function(t){return F.q(t)})))}(e.updateMask);return new Ge(r,i,o,n)}return new ze(r,i,n)}if(e.delete){var s=ie(t,e.delete);return new $e(s,n)}if(e.transform){var a=ie(t,e.transform.document),u=e.transform.fieldTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)g("REQUEST_TIME"===e.setToServerValue),n=new Ce;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new ke(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Ae(i)}else"increment"in e?n=new Pe(t,e.increment):y();var o=F.q(e.fieldPath);return new Le(o,n)}(t,e)}));return g(!0===n.exists),new Qe(a,u)}if(e.verify){var c=ie(t,e.verify);return new Je(c,n)}return y()}function fe(t,e){return{documents:[oe(t,e.path)]}}function pe(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=oe(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=oe(t,r.p()),n.structuredQuery.from=[{collectionId:r.S()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Wt(t.value))return{unaryFilter:{field:ye(t.field),op:"IS_NAN"}};if(Bt(t.value))return{unaryFilter:{field:ye(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Wt(t.value))return{unaryFilter:{field:ye(t.field),op:"IS_NOT_NAN"}};if(Bt(t.value))return{unaryFilter:{field:ye(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ye(t.field),op:(e=t.op,Gt[e]),value:t.value}};var e}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return{field:ye((e=t).field),direction:(n=e.dir,zt[n])};var e,n}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Le||j(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=de(e.startAt)),e.endAt&&(n.structuredQuery.endAt=de(e.endAt)),n}function de(t){return{before:t.before,values:t.position}}function ve(t){var e=!!t.before,n=t.values||[];return new Pn(n,e)}function ye(t){return{fieldPath:t.F()}}function ge(t){return F.q(t.fieldPath)}function me(t){return En.create(ge(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return y()}}(t.fieldFilter.op),t.fieldFilter.value)}function be(t){switch(t.unaryFilter.op){case"IS_NAN":var e=ge(t.unaryFilter.field);return En.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=ge(t.unaryFilter.field);return En.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=ge(t.unaryFilter.field);return En.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=ge(t.unaryFilter.field);return En.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return y()}}function _e(t){var e=[];return t.fields.forEach((function(t){return e.push(t.F())})),{fieldPaths:e}}function we(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var Ee=function(){this.je=void 0};function Te(t,e,n){return t instanceof Ce?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof ke?Ne(t,e):t instanceof Ae?Oe(t,e):function(t,e){var n=Se(t,e),r=Re(n)+Re(t.Be);return Vt(n)&&Vt(t.Be)?Qt(r):Yt(t.serializer,r)}(t,e)}function Ie(t,e,n){return t instanceof ke?Ne(t,e):t instanceof Ae?Oe(t,e):n}function Se(t,e){return t instanceof Pe?Vt(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Ce=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e}(Ee),ke=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return i.__extends(e,t),e}(Ee);function Ne(t,e){for(var n=xe(e),r=function(t){n.some((function(e){return Pt(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ae=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return i.__extends(e,t),e}(Ee);function Oe(t,e){for(var n=xe(e),r=function(t){n=n.filter((function(e){return!Pt(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Pe=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.Be=n,r}return i.__extends(e,t),e}(Ee);function Re(t){return Ft(t.integerValue||t.doubleValue)}function xe(t){return qt(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var De=function(){function t(t){this.fields=t,t.sort(F.P)}return t.prototype.Ke=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].D(t))return!0;return!1},t.prototype.isEqual=function(t){return E(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Le=function(t,e){this.field=t,this.transform=e},Me=function(t,e){this.version=t,this.transformResults=e},Fe=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.We=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Ue",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Ue(t,e){return void 0!==t.updateTime?e instanceof rn&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof rn}var je=function(){};function Ve(t,e,n){return t instanceof ze?function(t,e,n){return new rn(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof Ge?function(t,e,n){if(!Ue(t.Qe,e))return new sn(t.key,n.version);var r=Ke(t,e);return new rn(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Qe?function(t,e,n){if(g(null!=n.transformResults),!Ue(t.Qe,e))return new sn(t.key,n.version);var r=Ye(t,e),i=function(t,e,n){var r=[];g(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof rn&&(a=e.field(o.field)),r.push(Ie(s,a,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,s=Xe(t,r.data(),i);return new rn(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new on(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function qe(t,e,n,r){return t instanceof ze?function(t,e){if(!Ue(t.Qe,e))return e;var n=He(e);return new rn(t.key,n,t.value,{Ge:!0})}(t,e):t instanceof Ge?function(t,e){if(!Ue(t.Qe,e))return e;var n=He(e),r=Ke(t,e);return new rn(t.key,n,r,{Ge:!0})}(t,e):t instanceof Qe?function(t,e,n,r){if(!Ue(t.Qe,e))return e;var i=Ye(t,e),o=function(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,c=null;n instanceof rn&&(c=n.field(a.field)),null===c&&r instanceof rn&&(c=r.field(a.field)),i.push(Te(u,c,e))}return i}(t.fieldTransforms,n,e,r),s=Xe(t,i.data(),o);return new rn(t.key,i.version,s,{Ge:!0})}(t,e,r,n):function(t,e){return Ue(t.Qe,e)?new on(t.key,x.min()):e}(t,e)}function Be(t,e){return t instanceof Qe?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e instanceof rn?e.field(o.field):void 0,a=Se(o.transform,s||null);null!=a&&(n=null==n?(new tn).set(o.field,a):n.set(o.field,a))}return n?n.ze():null}(t,e):null}function We(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Qe.isEqual(e.Qe)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.qe.isEqual(e.qe):2!==t.type||E(t.fieldTransforms,t.fieldTransforms,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof ke&&e instanceof ke||t instanceof Ae&&e instanceof Ae?E(t.elements,e.elements,Pt):t instanceof Pe&&e instanceof Pe?Pt(t.Be,e.Be):t instanceof Ce&&e instanceof Ce}(t.transform,e.transform)}(t,e)})))}function He(t){return t instanceof rn?t.version:x.min()}var ze=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.Qe=r,i.type=0,i}return i.__extends(e,t),e}(je),Ge=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.qe=r,o.Qe=i,o.type=1,o}return i.__extends(e,t),e}(je);function Ke(t,e){return function(t,e){var n=new tn(e);return t.qe.fields.forEach((function(e){if(!e._()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.ze()}(t,e instanceof rn?e.data():Ze.empty())}var Qe=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.Qe=Fe.exists(!0),r}return i.__extends(e,t),e}(je);function Ye(t,e){return e}function Xe(t,e,n){for(var r=new tn(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.ze()}var $e=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Qe=n,r.type=3,r}return i.__extends(e,t),e}(je),Je=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Qe=n,r.type=4,r}return i.__extends(e,t),e}(je),Ze=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t._())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Ht(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.S()])||null},t.prototype.isEqual=function(t){return Pt(this.proto,t.proto)},t}(),tn=function(){function t(t){void 0===t&&(t=Ze.empty()),this.He=t,this.Ye=new Map}return t.prototype.set=function(t,e){return this.Je(t,e),this},t.prototype.delete=function(t){return this.Je(t,null),this},t.prototype.Je=function(t,e){for(var n=this.Ye,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Ot(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.S(),e)},t.prototype.ze=function(){var t=this.Xe(F.$(),this.Ye);return null!=t?new Ze(t):this.He},t.prototype.Xe=function(t,e){var n=this,r=!1,i=this.He.field(t),o=Ht(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.Xe(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function en(t){var e=[];return k(t.fields||{},(function(t,n){var r=new F([t]);if(Ht(n)){var i=en(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new De(e)}var nn=function(t,e){this.key=t,this.version=e},rn=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).Ze=r,o.Ge=!!i.Ge,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return i.__extends(e,t),e.prototype.field=function(t){return this.Ze.field(t)},e.prototype.data=function(){return this.Ze},e.prototype.tn=function(){return this.Ze.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Ge===t.Ge&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Ze.isEqual(t.Ze)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Ze.toString()+", {hasLocalMutations: "+this.Ge+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Ge||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(nn),on=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return i.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(nn),sn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(nn);function an(t,e){if(!(t instanceof e))throw e.name===t.constructor.name?new P(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass '"+e.name+"' from a different Firestore SDK?"):new P(O.INVALID_ARGUMENT,"Expected type '"+e.name+"', but was '"+t.constructor.name+"'");return t}var un=function(){function t(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.en=n,this.filters=r,this.limit=i,this.nn=o,this.startAt=s,this.endAt=a,this.sn=null,this.rn=null,this.startAt,this.endAt}return t.prototype.on=function(e){return new t(e,null,this.en.slice(),this.filters.slice(),this.limit,this.nn,this.startAt,this.endAt)},t.prototype.hn=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.en.length||1===this.en.length&&this.en[0].field.M())},t.prototype.an=function(){return!j(this.limit)&&"F"===this.nn},t.prototype.cn=function(){return!j(this.limit)&&"L"===this.nn},t.prototype.un=function(){return this.en.length>0?this.en[0].field:null},t.prototype.ln=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n._n())return n.field}return null},t.prototype.fn=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(t.indexOf(r.op)>=0)return r.op}return null},t}();function cn(t,e,n,r,i,o,s,a){return new un(t,e,n,r,i,o,s,a)}function ln(t){return new un(t)}function hn(t){return null!==t.collectionGroup}function fn(t){var e=an(t,un);if(null===e.sn){e.sn=[];var n=e.ln(),r=e.un();if(null!==n&&null===r)n.M()||e.sn.push(new Ln(n)),e.sn.push(new Ln(F.L(),"asc"));else{for(var i=!1,o=0,s=e.en;o<s.length;o++){var a=s[o];e.sn.push(a),a.field.M()&&(i=!0)}if(!i){var u=e.en.length>0?e.en[e.en.length-1].dir:"asc";e.sn.push(new Ln(F.L(),u))}}}return e.sn}function pn(t){var e=an(t,un);if(!e.rn)if("F"===e.nn)e.rn=W(e.path,e.collectionGroup,fn(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=fn(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Ln(o.field,s))}var a=e.endAt?new Pn(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Pn(e.startAt.position,!e.startAt.before):null;e.rn=W(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.rn}function dn(t,e,n){return new un(t.path,t.collectionGroup,t.en.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vn(t,e){return new un(t.path,t.collectionGroup,t.en.slice(),t.filters.slice(),t.limit,t.nn,e,t.endAt)}function yn(t,e){return new un(t.path,t.collectionGroup,t.en.slice(),t.filters.slice(),t.limit,t.nn,t.startAt,e)}function gn(t,e){return z(pn(t),pn(e))&&t.nn===e.nn}function mn(t){return H(pn(t))+"|lt:"+t.nn}function bn(t){return"Query(target="+function(t){var e=t.path.F();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.F()+" "+e.op+" "+Lt(e.value);var e})).join(", ")+"]"),j(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return(e=t).field.F()+" ("+e.dir+")";var e})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Rn(t.startAt)),t.endAt&&(e+=", endAt: "+Rn(t.endAt)),"Target("+e+")"}(pn(t))+"; limitType="+t.nn+")"}function _n(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.W(t.collectionGroup)&&t.path.D(n):U.j(t.path)?t.path.isEqual(n):t.path.C(n)}(t,e)&&function(t,e){for(var n=0,r=t.en;n<r.length;n++){var i=r[n];if(!i.field.M()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!xn(t.startAt,fn(t),e))&&(!t.endAt||!xn(t.endAt,fn(t),e))}(t,e)}function wn(t){return function(e,n){for(var r=!1,i=0,o=fn(t);i<o.length;i++){var s=o[i],a=Mn(s,e,n);if(0!==a)return a;r=r||s.field.M()}return 0}}var En=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return i.__extends(e,t),e.create=function(t,n,r){if(t.M())return"in"===n||"not-in"===n?this.dn(t,n,r):new Tn(t,n,r);if(Bt(r)){if("=="!==n&&"!="!==n)throw new P(O.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new e(t,n,r)}if(Wt(r)){if("=="!==n&&"!="!==n)throw new P(O.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new e(t,n,r)}return"array-contains"===n?new kn(t,r):"in"===n?new Nn(t,r):"not-in"===n?new An(t,r):"array-contains-any"===n?new On(t,r):new e(t,n,r)},e.dn=function(t,e,n){return"in"===e?new In(t,n):new Sn(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.wn(xt(e,this.value)):null!==e&&Ot(this.value)===Ot(e)&&this.wn(xt(e,this.value))},e.prototype.wn=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return y()}},e.prototype._n=function(){return["<","<=",">",">=","!="].indexOf(this.op)>=0},e}((function(){})),Tn=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=U.U(r.referenceValue),i}return i.__extends(e,t),e.prototype.matches=function(t){var e=U.P(t.key,this.key);return this.wn(e)},e}(En),In=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Cn("in",n),r}return i.__extends(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(En),Sn=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Cn("not-in",n),r}return i.__extends(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(En);function Cn(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return U.U(t.referenceValue)}))}var kn=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return i.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return qt(e)&&Rt(e.arrayValue,this.value)},e}(En),Nn=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return i.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Rt(this.value.arrayValue,e)},e}(En),An=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return i.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&!Rt(this.value.arrayValue,e)},e}(En),On=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return i.__extends(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!qt(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Rt(e.value.arrayValue,t)}))},e}(En),Pn=function(t,e){this.position=t,this.before=e};function Rn(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Lt(t)})).join(",")}function xn(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.M()?U.P(U.U(s.referenceValue),n.key):xt(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Dn(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Pt(t.position[n],e.position[n]))return!1;return!0}var Ln=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Mn(t,e,n){var r=t.field.M()?U.P(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?xt(r,i):y()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return y()}}function Fn(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Un=function(){function t(t,e,n,r){this.batchId=t,this.Tn=e,this.baseMutations=n,this.mutations=r}return t.prototype.En=function(t,e,n){for(var r=n.mn,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Ve(o,e,r[i]))}return e},t.prototype.In=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=qe(i,e,e,this.Tn))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=qe(u,e,o,this.Tn))}return e},t.prototype.An=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.In(r.key,t.get(r.key));i&&(n=n.st(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),ft())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&E(this.mutations,t.mutations,(function(t,e){return We(t,e)}))&&E(this.baseMutations,t.baseMutations,(function(t,e){return We(t,e)}))},t}(),jn=function(){function t(t,e,n,r){this.batch=t,this.Rn=e,this.mn=n,this.Pn=r}return t.from=function(e,n,r){g(e.mutations.length===r.length);for(var i=lt,o=e.mutations,s=0;s<o.length;s++)i=i.st(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Vn=function(){function t(t){var e=this;this.gn=null,this.Vn=null,this.result=void 0,this.error=void 0,this.yn=!1,this.pn=!1,t((function(t){e.yn=!0,e.result=t,e.gn&&e.gn(t)}),(function(t){e.yn=!0,e.error=t,e.Vn&&e.Vn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.pn&&y(),this.pn=!0,this.yn?this.error?this.bn(n,this.error):this.vn(e,this.result):new t((function(t,i){r.gn=function(n){r.vn(e,n).next(t,i)},r.Vn=function(e){r.bn(n,e).next(t,i)}}))},t.prototype.Sn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Dn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.vn=function(e,n){return e?this.Dn((function(){return e(n)})):t.resolve(n)},t.prototype.bn=function(e,n){return e?this.Dn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.Cn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Nn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.Cn(r)},t}(),qn=function(){function t(){this.Fn=new A((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.kn=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.$n},set:function(t){this.$n=t},enumerable:!1,configurable:!0}),t.prototype.xn=function(t,e){this.On(),this.readTime=e,this.Fn.set(t.key,t)},t.prototype.Mn=function(t,e){this.On(),e&&(this.readTime=e),this.Fn.set(t,null)},t.prototype.Ln=function(t,e){this.On();var n=this.Fn.get(e);return void 0!==n?Vn.resolve(n):this.qn(t,e)},t.prototype.getEntries=function(t,e){return this.Bn(t,e)},t.prototype.apply=function(t){return this.On(),this.kn=!0,this.Un(t)},t.prototype.On=function(){},t}(),Bn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Wn=function(){function t(){this.Qn=[]}return t.prototype.Wn=function(t){this.Qn.push(t)},t.prototype.jn=function(){this.Qn.forEach((function(t){return t()}))},t}(),Hn=function(){function t(t,e,n){this.Kn=t,this.Gn=e,this.zn=n}return t.prototype.Hn=function(t,e){var n=this;return this.Gn.Yn(t,e).next((function(r){return n.Jn(t,e,r)}))},t.prototype.Jn=function(t,e,n){return this.Kn.Ln(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].In(e,t);return t}))},t.prototype.Xn=function(t,e,n){var r=at();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].In(t,e);r=r.st(t,e)})),r},t.prototype.Zn=function(t,e){var n=this;return this.Kn.getEntries(t,e).next((function(e){return n.ts(t,e)}))},t.prototype.ts=function(t,e){var n=this;return this.Gn.es(t,e).next((function(r){var i=n.Xn(t,e,r),o=st();return i.forEach((function(t,e){e||(e=new on(t,x.min())),o=o.st(t,e)})),o}))},t.prototype.ns=function(t,e,n){return function(t){return U.j(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.ss(t,e.path):hn(e)?this.rs(t,e,n):this.os(t,e,n)},t.prototype.ss=function(t,e){return this.Hn(t,new U(e)).next((function(t){var e=ct();return t instanceof rn&&(e=e.st(t.key,t)),e}))},t.prototype.rs=function(t,e,n){var r=this,i=e.collectionGroup,o=ct();return this.zn.hs(t,i).next((function(s){return Vn.forEach(s,(function(s){var a=e.on(s.child(i));return r.os(t,a,n).next((function(t){t.forEach((function(t,e){o=o.st(t,e)}))}))})).next((function(){return o}))}))},t.prototype.os=function(t,e,n){var r,i,o=this;return this.Kn.ns(t,e,n).next((function(n){return r=n,o.Gn.as(t,e)})).next((function(e){return i=e,o.cs(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c),h=qe(u,l,l,o.Tn);r=h instanceof rn?r.st(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){_n(e,n)||(r=r.remove(t))})),r}))},t.prototype.cs=function(t,e,n){for(var r=ft(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Ge&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Kn.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof rn&&(c=c.st(t,e))})),c}))},t}(),zn=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.us=n,this.ls=r}return t._s=function(e,n){for(var r=ft(),i=ft(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Gn=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.fs=function(t){return n.ds(t)},this.ws=function(t){return e.Ts(t)})}return t.prototype.ds=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.ws&&this.ws(t),t},t}();Gn.Es=-1;var Kn=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Qn=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.ms=t,this.Is=e,this.As=n,this.Rs=r,this.Ps=i,this.gs=0,this.Vs=null,this.ys=Date.now(),this.reset()}return t.prototype.reset=function(){this.gs=0},t.prototype.ps=function(){this.gs=this.Ps},t.prototype.bs=function(t){var e=this;this.cancel();var n=Math.floor(this.gs+this.vs()),r=Math.max(0,Date.now()-this.ys),i=Math.max(0,n-r);i>0&&f("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.gs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Vs=this.ms.Ss(this.Is,i,(function(){return e.ys=Date.now(),t()})),this.gs*=this.Rs,this.gs<this.As&&(this.gs=this.As),this.gs>this.Ps&&(this.gs=this.Ps)},t.prototype.Ds=function(){null!==this.Vs&&(this.Vs.Cs(),this.Vs=null)},t.prototype.cancel=function(){null!==this.Vs&&(this.Vs.cancel(),this.Vs=null)},t.prototype.vs=function(){return(Math.random()-.5)*this.gs},t}(),Yn=function(){function e(t,n,r){this.name=t,this.version=n,this.Ns=r,12.2===e.Fs(a.getUA())&&p("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(t){return f("SimpleDb","Removing database:",t),er(window.indexedDB.deleteDatabase(t)).Sn()},e.ks=function(){if("undefined"==typeof indexedDB)return!1;if(e.$s())return!0;var t=a.getUA(),n=e.Fs(t),r=0<n&&n<10,i=e.xs(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)},e.$s=function(){var e;return"undefined"!=typeof t&&"YES"===(null===(e=Object({NODE_ENV:"production",PUBLIC_URL:"/React-app-Todos",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}))||void 0===e?void 0:e.Os)},e.Ms=function(t,e){return t.store(e)},e.Fs=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.xs=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.Ls=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e=this;return i.__generator(this,(function(n){switch(n.label){case 0:return this.db?[3,2]:(f("SimpleDb","Opening database:",this.name),t=this,[4,new Promise((function(t,n){var r=indexedDB.open(e.name,e.version);r.onsuccess=function(e){var n=e.target.result;t(n)},r.onblocked=function(){n(new $n("Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=function(t){var e=t.target.error;"VersionError"===e.name?n(new P(O.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):n(new $n(e))},r.onupgradeneeded=function(t){f("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',t.oldVersion);var n=t.target.result;e.Ns.createOrUpgrade(n,r.transaction,t.oldVersion,e.version).next((function(){f("SimpleDb","Database upgrade to version "+e.version+" complete")}))}}))]);case 1:t.db=n.sent(),n.label=2;case 2:return[2,(this.qs&&(this.db.onversionchange=function(t){return e.qs(t)}),this.db)]}}))}))},e.prototype.Bs=function(t){this.qs=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},e.prototype.runTransaction=function(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var r,o,s,a,u;return i.__generator(this,(function(c){switch(c.label){case 0:r="readonly"===t,o=0,s=function(){var t,s,u,c,l;return i.__generator(this,(function(i){switch(i.label){case 0:++o,i.label=1;case 1:return i.trys.push([1,4,,5]),[4,a.Ls()];case 2:return a.db=i.sent(),t=Zn.open(a.db,r?"readonly":"readwrite",e),s=n(t).catch((function(e){return t.abort(e),Vn.reject(e)})).Sn(),u={},s.catch((function(){})),[4,t.Us];case 3:return[2,(u.value=(i.sent(),s),u)];case 4:return c=i.sent(),l="FirebaseError"!==c.name&&o<3,f("SimpleDb","Transaction failed with error: %s. Retrying: %s.",c.message,l),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),Xn=function(){function t(t){this.Qs=t,this.Ws=!1,this.js=null}return Object.defineProperty(t.prototype,"yn",{get:function(){return this.Ws},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ks",{get:function(){return this.js},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Qs=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Ws=!0},t.prototype.Gs=function(t){this.js=t},t.prototype.delete=function(){return er(this.Qs.delete())},t}(),$n=function(t){function e(e){var n=this;return(n=t.call(this,O.UNAVAILABLE,"IndexedDB transaction failed: "+e)||this).name="IndexedDbTransactionError",n}return i.__extends(e,t),e}(P);function Jn(t){return"IndexedDbTransactionError"===t.name}var Zn=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.zs=new Kn,this.transaction.oncomplete=function(){e.zs.resolve()},this.transaction.onabort=function(){t.error?e.zs.reject(new $n(t.error)):e.zs.resolve()},this.transaction.onerror=function(t){var n=rr(t.target.error);e.zs.reject(new $n(n))}}return t.open=function(e,n,r){try{return new t(e.transaction(r,n))}catch(e){throw new $n(e)}},Object.defineProperty(t.prototype,"Us",{get:function(){return this.zs.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.zs.reject(t),this.aborted||(f("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new tr(e)},t}(),tr=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(f("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(f("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),er(n)},t.prototype.add=function(t){return f("SimpleDb","ADD",this.store.name,t,t),er(this.store.add(t))},t.prototype.get=function(t){var e=this;return er(this.store.get(t)).next((function(n){return void 0===n&&(n=null),f("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return f("SimpleDb","DELETE",this.store.name,t),er(this.store.delete(t))},t.prototype.count=function(){return f("SimpleDb","COUNT",this.store.name),er(this.store.count())},t.prototype.Hs=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Ys(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Js=function(t,e){f("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Xs=!1;var r=this.cursor(n);return this.Ys(r,(function(t,e,n){return n.delete()}))},t.prototype.Zs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Ys(r,e)},t.prototype.ti=function(t){var e=this.cursor({});return new Vn((function(n,r){e.onerror=function(t){var e=rr(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.Ys=function(t,e){var n=[];return new Vn((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Xn(i),s=e(i.primaryKey,i.value,o);if(s instanceof Vn){var a=s.catch((function(t){return o.done(),Vn.reject(t)}));n.push(a)}o.yn?r():null===o.Ks?i.continue():i.continue(o.Ks)}else r()}})).next((function(){return Vn.Cn(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Xs?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function er(t){return new Vn((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=rr(t.target.error);n(e)}}))}var nr=!1;function rr(t){var e=Yn.Fs(a.getUA());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new P("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return nr||(nr=!0,setTimeout((function(){throw r}),0)),r}}return t}function ir(){return"undefined"!=typeof window?window:null}function or(){return"undefined"!=typeof document?document:null}var sr=function(){function t(t,e,n,r,i){this.ei=t,this.Is=e,this.ni=n,this.op=r,this.si=i,this.ii=new Kn,this.then=this.ii.promise.then.bind(this.ii.promise),this.ii.promise.catch((function(t){}))}return t.ri=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.oi=setTimeout((function(){return e.hi()}),t)},t.prototype.Cs=function(){return this.hi()},t.prototype.cancel=function(t){null!==this.oi&&(this.clearTimeout(),this.ii.reject(new P(O.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.hi=function(){var t=this;this.ei.ai((function(){return null!==t.oi?(t.clearTimeout(),t.op().then((function(e){return t.ii.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.oi&&(this.si(this),clearTimeout(this.oi),this.oi=null)},t}(),ar=function(){function t(){var t=this;this.ci=Promise.resolve(),this.ui=[],this.li=!1,this._i=[],this.fi=null,this.di=!1,this.wi=[],this.Ti=new Qn(this,"async_queue_retry"),this.Ei=function(){var e=or();e&&f("AsyncQueue","Visibility state changed to  ",e.visibilityState),t.Ti.Ds()};var e=or();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ei)}return Object.defineProperty(t.prototype,"mi",{get:function(){return this.li},enumerable:!1,configurable:!0}),t.prototype.ai=function(t){this.enqueue(t)},t.prototype.Ii=function(t){this.Ai(),this.Ri(t)},t.prototype.Pi=function(){if(!this.li){this.li=!0;var t=or();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ei)}},t.prototype.enqueue=function(t){return this.Ai(),this.li?new Promise((function(t){})):this.Ri(t)},t.prototype.gi=function(t){var e=this;this.ui.push(t),this.ai((function(){return e.Vi()}))},t.prototype.Vi=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e=this;return i.__generator(this,(function(n){switch(n.label){case 0:if(0===this.ui.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.ui[0]()];case 2:return n.sent(),this.ui.shift(),this.Ti.reset(),[3,4];case 3:if(!Jn(t=n.sent()))throw t;return f("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.ui.length>0&&this.Ti.bs((function(){return e.Vi()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Ri=function(t){var e=this,n=this.ci.then((function(){return e.di=!0,t().catch((function(t){throw e.fi=t,e.di=!1,p("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.di=!1,t}))}));return this.ci=n,n},t.prototype.Ss=function(t,e,n){var r=this;this.Ai(),this.wi.indexOf(t)>-1&&(e=0);var i=sr.ri(this,t,e,n,(function(t){return r.yi(t)}));return this._i.push(i),i},t.prototype.Ai=function(){this.fi&&y()},t.prototype.pi=function(){},t.prototype.bi=function(){return i.__awaiter(this,void 0,void 0,(function(){var t;return i.__generator(this,(function(e){switch(e.label){case 0:return[4,t=this.ci];case 1:e.sent(),e.label=2;case 2:if(t!==this.ci)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.vi=function(t){for(var e=0,n=this._i;e<n.length;e++)if(n[e].Is===t)return!0;return!1},t.prototype.Si=function(t){var e=this;return this.bi().then((function(){e._i.sort((function(t,e){return t.ni-e.ni}));for(var n=0,r=e._i;n<r.length;n++){var i=r[n];if(i.Cs(),"all"!==t&&i.Is===t)break}return e.bi()}))},t.prototype.Di=function(t){this.wi.push(t)},t.prototype.yi=function(t){var e=this._i.indexOf(t);this._i.splice(e,1)},t}();function ur(t,e){if(p("AsyncQueue",e+": "+t),Jn(t))return new P(O.UNAVAILABLE,e+": "+t);throw t}function cr(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=w(n,i);return 0===s?w(r,o):s}var lr=function(){function t(t){this.Ci=t,this.buffer=new rt(cr),this.Ni=0}return t.prototype.Fi=function(){return++this.Ni},t.prototype.ki=function(t){var e=[t,this.Fi()];if(this.buffer.size<this.Ci)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();cr(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),hr={$i:!1,xi:0,Oi:0,Mi:0},fr=function(){function t(t,e,n){this.Li=t,this.qi=e,this.Bi=n}return t.Ui=function(e){return new t(e,t.Qi,t.Wi)},t}();fr.ji=-1,fr.Ki=1048576,fr.Gi=41943040,fr.Qi=10,fr.Wi=1e3,fr.zi=new fr(fr.Gi,fr.Qi,fr.Wi),fr.Hi=new fr(fr.ji,0,0);var pr=function(){function t(t,e){this.Yi=t,this.ei=e,this.Ji=!1,this.Xi=null}return t.prototype.start=function(t){this.Yi.params.Li!==fr.ji&&this.Zi(t)},t.prototype.stop=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},Object.defineProperty(t.prototype,"tr",{get:function(){return null!==this.Xi},enumerable:!1,configurable:!0}),t.prototype.Zi=function(t){var e=this,n=this.Ji?3e5:6e4;f("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.Xi=this.ei.Ss("lru_garbage_collection",n,(function(){return i.__awaiter(e,void 0,void 0,(function(){var e;return i.__generator(this,(function(n){switch(n.label){case 0:this.Xi=null,this.Ji=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.er(this.Yi)];case 2:return n.sent(),[3,7];case 3:return Jn(e=n.sent())?(f("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Ai(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Zi(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),dr=function(){function t(t,e){this.nr=t,this.params=e}return t.prototype.sr=function(t,e){return this.nr.ir(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.rr=function(t,e){var n=this;if(0===e)return Vn.resolve(Gn.Es);var r=new lr(e);return this.nr.be(t,(function(t){return r.ki(t.sequenceNumber)})).next((function(){return n.nr.or(t,(function(t){return r.ki(t)}))})).next((function(){return r.maxValue}))},t.prototype.hr=function(t,e,n){return this.nr.hr(t,e,n)},t.prototype.ar=function(t,e){return this.nr.ar(t,e)},t.prototype.cr=function(t,e){var n=this;return this.params.Li===fr.ji?(f("LruGarbageCollector","Garbage collection skipped; disabled"),Vn.resolve(hr)):this.ur(t).next((function(r){return r<n.params.Li?(f("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Li),hr):n.lr(t,e)}))},t.prototype.ur=function(t){return this.nr.ur(t)},t.prototype.lr=function(t,e){var n,r,i,o,a,u,c,l=this,p=Date.now();return this.sr(t,this.params.qi).next((function(e){return e>l.params.Bi?(f("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.Bi+" from "+e),r=l.params.Bi):r=e,o=Date.now(),l.rr(t,r)})).next((function(r){return n=r,a=Date.now(),l.hr(t,n,e)})).next((function(e){return i=e,u=Date.now(),l.ar(t,n)})).next((function(t){return c=Date.now(),h()<=s.LogLevel.DEBUG&&f("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-p)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-p)+"ms"),Vn.resolve({$i:!0,xi:r,Oi:i,Mi:t})}))},t}();function vr(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=gr(e)),e=yr(t.get(n),e);return gr(e)}function yr(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function gr(t){return t+"\x01\x01"}function mr(t){var e=t.length;if(g(e>=2),2===e)return g("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),L.$();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&y(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:y()}o=s+2}return new L(r)}var br=function(t){this._r=t};function _r(t,e){if(e.document)return function(t,e,n){var r=ie(t,e.name),i=te(e.updateTime),o=new Ze({mapValue:{fields:e.fields}});return new rn(r,i,o,{hasCommittedMutations:!!n})}(t._r,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=U.K(e.noDocument.path),r=Sr(e.noDocument.readTime);return new on(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=U.K(e.unknownDocument.path),o=Sr(e.unknownDocument.version);return new sn(i,o)}return y()}function wr(t,e,n){var r=Er(n),i=e.key.path.p().N();if(e instanceof rn){var o=function(t,e){return{name:re(t,e.key),fields:e.tn().mapValue.fields,updateTime:$t(t,e.version.A())}}(t._r,e),s=e.hasCommittedMutations;return new Xr(null,null,o,s,r,i)}if(e instanceof on){var a=e.key.path.N(),u=Ir(e.version),c=e.hasCommittedMutations;return new Xr(null,new Qr(a,u),null,c,r,i)}if(e instanceof sn){var l=e.key.path.N(),h=Ir(e.version);return new Xr(new Yr(l,h),null,null,!0,r,i)}return y()}function Er(t){var e=t.A();return[e.seconds,e.nanoseconds]}function Tr(t){var e=new R(t[0],t[1]);return x.m(e)}function Ir(t){var e=t.A();return new Wr(e.seconds,e.nanoseconds)}function Sr(t){var e=new R(t.seconds,t.nanoseconds);return x.m(e)}function Cr(t,e){var n=(e.baseMutations||[]).map((function(e){return he(t._r,e)})),r=e.mutations.map((function(e){return he(t._r,e)})),i=R.fromMillis(e.localWriteTimeMs);return new Un(e.batchId,i,n,r)}function kr(t){var e,n,r=Sr(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Sr(t.lastLimboFreeSnapshotVersion):x.min();return void 0!==t.query.documents?(g(1===(n=t.query).documents.length),e=pn(ln(se(n.documents[0])))):e=function(t){var e=se(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){g(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[be(e)]:void 0!==e.fieldFilter?[me(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):y():[]}(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return new Ln(ge((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e})));var u=null;n.limit&&(u=function(t){var e;return j(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=ve(n.startAt));var l=null;return n.endAt&&(l=ve(n.endAt)),pn(cn(e,i,a,s,u,"F",c,l))}(t.query),new X(e,t.targetId,0,t.lastListenSequenceNumber,r,i,K.fromBase64String(t.resumeToken))}function Nr(t,e){var n,r=Ir(e.Z),i=Ir(e.lastLimboFreeSnapshotVersion);n=G(e.target)?fe(t._r,e.target):pe(t._r,e.target);var o=e.resumeToken.toBase64();return new Jr(e.targetId,H(e.target),r,o,e.sequenceNumber,i,n)}var Ar=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.zn=n,this.dr=r,this.wr={}}return t.Tr=function(e,n,r,i){return g(""!==e.uid),new t(e.Er()?e.uid:"",n,r,i)},t.prototype.mr=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Rr(t).Zs({index:Gr.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Ir=function(t,e,n,r){var i=this,o=xr(t),s=Rr(t);return s.add({}).next((function(a){g("number"==typeof a);for(var u=new Un(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return le(t._r,e)})),i=n.mutations.map((function(e){return le(t._r,e)}));return new Gr(e,n.batchId,n.Tn.toMillis(),r,i)}(i.serializer,i.userId,u),l=[],h=new rt((function(t,e){return w(t.F(),e.F())})),f=0,p=r;f<p.length;f++){var d=p[f],v=Kr.key(i.userId,d.key.path,a);h=h.add(d.key.path.p()),l.push(s.put(c)),l.push(o.put(v,Kr.PLACEHOLDER))}return h.forEach((function(e){l.push(i.zn.Ar(t,e))})),t.Wn((function(){i.wr[a]=u.keys()})),Vn.Cn(l).next((function(){return u}))}))},t.prototype.Rr=function(t,e){var n=this;return Rr(t).get(e).next((function(t){return t?(g(t.userId===n.userId),Cr(n.serializer,t)):null}))},t.prototype.Pr=function(t,e){var n=this;return this.wr[e]?Vn.resolve(this.wr[e]):this.Rr(t,e).next((function(t){if(t){var r=t.keys();return n.wr[e]=r,r}return null}))},t.prototype.gr=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Rr(t).Zs({index:Gr.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(g(e.batchId>=r),o=Cr(n.serializer,e)),i.done()})).next((function(){return o}))},t.prototype.Vr=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Rr(t).Zs({index:Gr.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.yr=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Rr(t).Hs(Gr.userMutationsIndex,n).next((function(t){return t.map((function(t){return Cr(e.serializer,t)}))}))},t.prototype.Yn=function(t,e){var n=this,r=Kr.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return xr(t).Zs({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],l=mr(u);if(a===n.userId&&e.path.isEqual(l))return Rr(t).get(c).next((function(t){if(!t)throw y();g(t.userId===n.userId),o.push(Cr(n.serializer,t))}));s.done()})).next((function(){return o}))},t.prototype.es=function(t,e){var n=this,r=new rt(w),i=[];return e.forEach((function(e){var o=Kr.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=xr(t).Zs({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=mr(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),Vn.Cn(i).next((function(){return n.pr(t,r)}))},t.prototype.as=function(t,e){var n=this,r=e.path,i=r.length+1,o=Kr.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new rt(w);return xr(t).Zs({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],l=mr(u);s===n.userId&&r.D(l)?l.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.pr(t,a)}))},t.prototype.pr=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Rr(t).get(e).next((function(t){if(null===t)throw y();g(t.userId===n.userId),r.push(Cr(n.serializer,t))})))})),Vn.Cn(i).next((function(){return r}))},t.prototype.br=function(t,e){var n=this;return Pr(t.vr,this.userId,e).next((function(r){return t.Wn((function(){n.Sr(e.batchId)})),Vn.forEach(r,(function(e){return n.dr.Dr(t,e)}))}))},t.prototype.Sr=function(t){delete this.wr[t]},t.prototype.Cr=function(t){var e=this;return this.mr(t).next((function(n){if(!n)return Vn.resolve();var r=IDBKeyRange.lowerBound(Kr.prefixForUser(e.userId)),i=[];return xr(t).Zs({range:r},(function(t,n,r){if(t[0]===e.userId){var o=mr(t[1]);i.push(o)}else r.done()})).next((function(){g(0===i.length)}))}))},t.prototype.Nr=function(t,e){return Or(t,this.userId,e)},t.prototype.Fr=function(t){var e=this;return Dr(t).get(this.userId).next((function(t){return t||new zr(e.userId,-1,"")}))},t}();function Or(t,e,n){var r=Kr.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return xr(t).Zs({range:o,Xs:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function Pr(t,e,n){var r=t.store(Gr.store),i=t.store(Kr.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Zs({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){g(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=Kr.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Vn.Cn(o).next((function(){return c}))}function Rr(t){return di.Ms(t,Gr.store)}function xr(t){return di.Ms(t,Kr.store)}function Dr(t){return di.Ms(t,zr.store)}var Lr=function(){function t(t,e){this.serializer=t,this.zn=e}return t.prototype.xn=function(t,e,n){return Fr(t).put(Ur(e),n)},t.prototype.Mn=function(t,e){var n=Fr(t),r=Ur(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.kr(t,r)}))},t.prototype.Ln=function(t,e){var n=this;return Fr(t).get(Ur(e)).next((function(t){return n.$r(t)}))},t.prototype.xr=function(t,e){var n=this;return Fr(t).get(Ur(e)).next((function(t){var e=n.$r(t);return e?{Or:e,size:jr(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=at();return this.Mr(t,e,(function(t,e){var i=n.$r(e);r=r.st(t,i)})).next((function(){return r}))},t.prototype.Lr=function(t,e){var n=this,r=at(),i=new tt(U.P);return this.Mr(t,e,(function(t,e){var o=n.$r(e);o?(r=r.st(t,o),i=i.st(t,jr(e))):(r=r.st(t,null),i=i.st(t,0))})).next((function(){return{qr:r,Br:i}}))},t.prototype.Mr=function(t,e,n){if(e._())return Vn.resolve();var r=IDBKeyRange.bound(e.first().path.N(),e.last().path.N()),i=e.ct(),o=i.wt();return Fr(t).Zs({range:r},(function(t,e,r){for(var s=U.K(t);o&&U.P(o,s)<0;)n(o,null),o=i.wt();o&&o.isEqual(s)&&(n(o,e),o=i.Tt()?i.wt():null),o?r.Gs(o.path.N()):r.done()})).next((function(){for(;o;)n(o,null),o=i.Tt()?i.wt():null}))},t.prototype.ns=function(t,e,n){var r=this,i=ct(),o=e.path.length+1,s={};if(n.isEqual(x.min())){var a=e.path.N();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.N(),c=Er(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Xr.collectionReadTimeIndex}return Fr(t).Zs(s,(function(t,n,s){if(t.length===o){var a=_r(r.serializer,n);e.path.D(a.key.path)?a instanceof rn&&_n(e,a)&&(i=i.st(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.Ur=function(t,e){var n=this,r=st(),i=Er(e),o=Fr(t),s=IDBKeyRange.lowerBound(i,!0);return o.Zs({index:Xr.readTimeIndex,range:s},(function(t,e){var o=_r(n.serializer,e);r=r.st(o.key,o),i=e.readTime})).next((function(){return{Qr:r,readTime:Tr(i)}}))},t.prototype.Wr=function(t){var e=Fr(t),n=x.min();return e.Zs({index:Xr.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Tr(e.readTime)),r.done()})).next((function(){return n}))},t.prototype.jr=function(e){return new t.Kr(this,!!e&&e.Gr)},t.prototype.zr=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Mr(t).get($r.key).next((function(t){return g(!!t),t}))},t.prototype.kr=function(t,e){return Mr(t).put($r.key,e)},t.prototype.$r=function(t){if(t){var e=_r(this.serializer,t);return e instanceof on&&e.version.isEqual(x.min())?null:e}return null},t}();function Mr(t){return di.Ms(t,$r.store)}function Fr(t){return di.Ms(t,Xr.store)}function Ur(t){return t.path.N()}function jr(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw y();e=t.noDocument}return JSON.stringify(e).length}Lr.Kr=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Hr=e,r.Gr=n,r.Yr=new A((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return i.__extends(e,t),e.prototype.Un=function(t){var e=this,n=[],r=0,i=new rt((function(t,e){return w(t.F(),e.F())}));return this.Fn.forEach((function(o,s){var a=e.Yr.get(o);if(s){var u=wr(e.Hr.serializer,s,e.readTime);i=i.add(o.path.p());var c=jr(u);r+=c-a,n.push(e.Hr.xn(t,o,u))}else if(r-=a,e.Gr){var l=wr(e.Hr.serializer,new on(o,x.min()),e.readTime);n.push(e.Hr.xn(t,o,l))}else n.push(e.Hr.Mn(t,o))})),i.forEach((function(r){n.push(e.Hr.zn.Ar(t,r))})),n.push(this.Hr.updateMetadata(t,r)),Vn.Cn(n)},e.prototype.qn=function(t,e){var n=this;return this.Hr.xr(t,e).next((function(t){return null===t?(n.Yr.set(e,0),null):(n.Yr.set(e,t.size),t.Or)}))},e.prototype.Bn=function(t,e){var n=this;return this.Hr.Lr(t,e).next((function(t){var e=t.qr;return t.Br.forEach((function(t,e){n.Yr.set(t,e)})),e}))},e}(qn);var Vr=function(){function t(){this.Jr=new qr}return t.prototype.Ar=function(t,e){return this.Jr.add(e),Vn.resolve()},t.prototype.hs=function(t,e){return Vn.resolve(this.Jr.getEntries(e))},t}(),qr=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.S(),n=t.p(),r=this.index[e]||new rt(L.P),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.S(),n=t.p(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new rt(L.P)).N()},t}(),Br=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;g(n<r&&n>=0&&r<=10);var o=new Zn(e);n<1&&r>=1&&(function(t){t.createObjectStore(Hr.store)}(t),function(t){t.createObjectStore(zr.store,{keyPath:zr.keyPath}),t.createObjectStore(Gr.store,{keyPath:Gr.keyPath,autoIncrement:!0}).createIndex(Gr.userMutationsIndex,Gr.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Kr.store)}(t),ni(t),function(t){t.createObjectStore(Xr.store)}(t));var s=Vn.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Zr.store),t.deleteObjectStore(Jr.store),t.deleteObjectStore(ti.store)}(t),ni(t)),s=s.next((function(){return function(t){var e=t.store(ti.store),n=new ti(0,0,x.min().A(),0);return e.put(ti.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Gr.store).Hs().next((function(n){t.deleteObjectStore(Gr.store),t.createObjectStore(Gr.store,{keyPath:Gr.keyPath,autoIncrement:!0}).createIndex(Gr.userMutationsIndex,Gr.userMutationsKeyPath,{unique:!0});var r=e.store(Gr.store),i=n.map((function(t){return r.put(t)}));return Vn.Cn(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(ri.store,{keyPath:ri.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore($r.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Xr.store);e.createIndex(Xr.readTimeIndex,Xr.readTimeIndexPath,{unique:!1}),e.createIndex(Xr.collectionReadTimeIndex,Xr.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.rewriteCanonicalIds(o)}))),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(Xr.store).Zs((function(t,n){e+=jr(n)})).next((function(){var n=new $r(e);return t.store($r.store).put($r.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(zr.store),r=t.store(Gr.store);return n.Hs().next((function(n){return Vn.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Hs(Gr.userMutationsIndex,i).next((function(r){return Vn.forEach(r,(function(r){g(r.userId===n.userId);var i=Cr(e.serializer,r);return Pr(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(Zr.store),n=t.store(Xr.store);return t.store(ti.store).get(ti.key).next((function(t){var r=[];return n.Zs((function(n,i){var o=new L(n),s=function(t){return[0,vr(t)]}(o);r.push(e.get(s).next((function(n){return n?Vn.resolve():function(n){return e.put(new Zr(0,vr(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Vn.Cn(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(ei.store,{keyPath:ei.keyPath});var n=e.store(ei.store),r=new qr,i=function(t){if(r.add(t)){var e=t.S(),i=t.p();return n.put({collectionId:e,parent:vr(i)})}};return e.store(Xr.store).Zs({Xs:!0},(function(t,e){var n=new L(t);return i(n.p())})).next((function(){return e.store(Kr.store).Zs({Xs:!0},(function(t,e){t[0];var n=t[1],r=(t[2],mr(n));return i(r.p())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(Jr.store);return n.Zs((function(t,r){var i=kr(r),o=Nr(e.serializer,i);return n.put(o)}))},t}(),Wr=function(t,e){this.seconds=t,this.nanoseconds=e},Hr=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Hr.store="owner",Hr.key="owner";var zr=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};zr.store="mutationQueues",zr.keyPath="userId";var Gr=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Gr.store="mutations",Gr.keyPath="batchId",Gr.userMutationsIndex="userMutationsIndex",Gr.userMutationsKeyPath=["userId","batchId"];var Kr=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,vr(e)]},t.key=function(t,e,n){return[t,vr(e),n]},t}();Kr.store="documentMutations",Kr.PLACEHOLDER=new Kr;var Qr=function(t,e){this.path=t,this.readTime=e},Yr=function(t,e){this.path=t,this.version=e},Xr=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Xr.store="remoteDocuments",Xr.readTimeIndex="readTimeIndex",Xr.readTimeIndexPath="readTime",Xr.collectionReadTimeIndex="collectionReadTimeIndex",Xr.collectionReadTimeIndexPath=["parentPath","readTime"];var $r=function(t){this.byteSize=t};$r.store="remoteDocumentGlobal",$r.key="remoteDocumentGlobalKey";var Jr=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Jr.store="targets",Jr.keyPath="targetId",Jr.queryTargetsIndexName="queryTargetsIndex",Jr.queryTargetsKeyPath=["canonicalId","targetId"];var Zr=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Zr.store="targetDocuments",Zr.keyPath=["targetId","path"],Zr.documentTargetsIndex="documentTargetsIndex",Zr.documentTargetsKeyPath=["path","targetId"];var ti=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};ti.key="targetGlobalKey",ti.store="targetGlobal";var ei=function(t,e){this.collectionId=t,this.parent=e};function ni(t){t.createObjectStore(Zr.store,{keyPath:Zr.keyPath}).createIndex(Zr.documentTargetsIndex,Zr.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Jr.store,{keyPath:Jr.keyPath}).createIndex(Jr.queryTargetsIndexName,Jr.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(ti.store)}ei.store="collectionParents",ei.keyPath=["collectionId","parent"];var ri=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};ri.store="clientMetadata",ri.keyPath="clientId";var ii=i.__spreadArrays(i.__spreadArrays(i.__spreadArrays([zr.store,Gr.store,Kr.store,Xr.store,Jr.store,Hr.store,ti.store,Zr.store],[ri.store]),[$r.store]),[ei.store]),oi=function(){function t(){this.Xr=new qr}return t.prototype.Ar=function(t,e){var n=this;if(!this.Xr.has(e)){var r=e.S(),i=e.p();t.Wn((function(){n.Xr.add(e)}));var o={collectionId:r,parent:vr(i)};return si(t).put(o)}return Vn.resolve()},t.prototype.hs=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[T(e),""],!1,!0);return si(t).Hs(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(mr(o.parent))}return n}))},t}();function si(t){return di.Ms(t,ei.store)}var ai=function(){function t(t){this.Zr=t}return t.prototype.next=function(){return this.Zr+=2,this.Zr},t.to=function(){return new t(0)},t.eo=function(){return new t(-1)},t}(),ui=function(){function t(t,e){this.dr=t,this.serializer=e}return t.prototype.no=function(t){var e=this;return this.so(t).next((function(n){var r=new ai(n.highestTargetId);return n.highestTargetId=r.next(),e.io(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.ro=function(t){return this.so(t).next((function(t){return x.m(new R(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.oo=function(t){return this.so(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.ho=function(t,e,n){var r=this;return this.so(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.A()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.io(t,i)}))},t.prototype.ao=function(t,e){var n=this;return this.co(t,e).next((function(){return n.so(t).next((function(r){return r.targetCount+=1,n.uo(e,r),n.io(t,r)}))}))},t.prototype.lo=function(t,e){return this.co(t,e)},t.prototype._o=function(t,e){var n=this;return this.fo(t,e.targetId).next((function(){return ci(t).delete(e.targetId)})).next((function(){return n.so(t)})).next((function(e){return g(e.targetCount>0),e.targetCount-=1,n.io(t,e)}))},t.prototype.hr=function(t,e,n){var r=this,i=0,o=[];return ci(t).Zs((function(s,a){var u=kr(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r._o(t,u)))})).next((function(){return Vn.Cn(o)})).next((function(){return i}))},t.prototype.be=function(t,e){return ci(t).Zs((function(t,n){var r=kr(n);e(r)}))},t.prototype.so=function(t){return li(t).get(ti.key).next((function(t){return g(null!==t),t}))},t.prototype.io=function(t,e){return li(t).put(ti.key,e)},t.prototype.co=function(t,e){return ci(t).put(Nr(this.serializer,e))},t.prototype.uo=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.do=function(t){return this.so(t).next((function(t){return t.targetCount}))},t.prototype.wo=function(t,e){var n=H(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return ci(t).Zs({range:r,index:Jr.queryTargetsIndexName},(function(t,n,r){var o=kr(n);z(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.To=function(t,e,n){var r=this,i=[],o=hi(t);return e.forEach((function(e){var s=vr(e.path);i.push(o.put(new Zr(n,s))),i.push(r.dr.Eo(t,n,e))})),Vn.Cn(i)},t.prototype.mo=function(t,e,n){var r=this,i=hi(t);return Vn.forEach(e,(function(e){var o=vr(e.path);return Vn.Cn([i.delete([n,o]),r.dr.Io(t,n,e)])}))},t.prototype.fo=function(t,e){var n=hi(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.Ao=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=hi(t),i=ft();return r.Zs({range:n,Xs:!0},(function(t,e,n){var r=mr(t[1]),o=new U(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Nr=function(t,e){var n=vr(e.path),r=IDBKeyRange.bound([n],[T(n)],!1,!0),i=0;return hi(t).Zs({index:Zr.documentTargetsIndex,Xs:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Me=function(t,e){return ci(t).get(e).next((function(t){return t?kr(t):null}))},t}();function ci(t){return di.Ms(t,Jr.store)}function li(t){return di.Ms(t,ti.store)}function hi(t){return di.Ms(t,Zr.store)}var fi="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",pi=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).vr=e,r.Ro=n,r}return i.__extends(e,t),e}(Wn),di=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ms=o,this.window=s,this.document=a,this.Po=c,this.Vo=l,this.yo=null,this.po=!1,this.isPrimary=!1,this.networkEnabled=!0,this.bo=null,this.inForeground=!1,this.vo=null,this.So=null,this.Do=Number.NEGATIVE_INFINITY,this.Co=function(t){return Promise.resolve()},!t.ks())throw new P(O.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.dr=new gi(this,i),this.No=n+"main",this.serializer=new br(u),this.Fo=new Yn(this.No,10,new Br(this.serializer)),this.ko=new ui(this.dr,this.serializer),this.zn=new oi,this.Kn=new Lr(this.serializer,this.zn),this.window&&this.window.localStorage?this.$o=this.window.localStorage:(this.$o=null,!1===l&&p("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.Ms=function(t,e){if(t instanceof pi)return Yn.Ms(t.vr,e);throw y()},t.prototype.start=function(){var t=this;return this.xo().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new P(O.FAILED_PRECONDITION,fi);return t.Oo(),t.Mo(),t.Lo(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.ko.oo(e)}))})).then((function(e){t.yo=new Gn(e,t.Po)})).then((function(){t.po=!0})).catch((function(e){return t.Fo&&t.Fo.close(),Promise.reject(e)}))},t.prototype.qo=function(t){var e=this;return this.Co=function(n){return i.__awaiter(e,void 0,void 0,(function(){return i.__generator(this,(function(e){return this.tr?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Bo=function(t){var e=this;this.Fo.Bs((function(n){return i.__awaiter(e,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.Uo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.ms.ai((function(){return i.__awaiter(e,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.tr?[4,this.xo()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.xo=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return yi(e).put(new ri(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Qo(e).next((function(e){e||(t.isPrimary=!1,t.ms.gi((function(){return t.Co(!1)})))}))})).next((function(){return t.Wo(e)})).next((function(n){return t.isPrimary&&!n?t.jo(e).next((function(){return!1})):!!n&&t.Ko(e).next((function(){return!0}))}))})).catch((function(e){if(Jn(e))return f("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return f("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.ms.gi((function(){return t.Co(e)})),t.isPrimary=e}))},t.prototype.Qo=function(t){var e=this;return vi(t).get(Hr.key).next((function(t){return Vn.resolve(e.Go(t))}))},t.prototype.zo=function(t){return yi(t).delete(this.clientId)},t.prototype.Ho=function(){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,o,s=this;return i.__generator(this,(function(i){switch(i.label){case 0:return!this.isPrimary||this.Yo(this.Do,18e5)?[3,2]:(this.Do=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=t.Ms(e,ri.store);return n.Hs().next((function(t){var e=s.Jo(t,18e5),r=t.filter((function(t){return-1===e.indexOf(t)}));return Vn.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=i.sent(),this.$o)for(n=0,r=e;n<r.length;n++)o=r[n],this.$o.removeItem(this.Xo(o.clientId));i.label=2;case 2:return[2]}}))}))},t.prototype.Lo=function(){var t=this;this.So=this.ms.Ss("client_metadata_refresh",4e3,(function(){return t.xo().then((function(){return t.Ho()})).then((function(){return t.Lo()}))}))},t.prototype.Go=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Wo=function(t){var e=this;return this.Vo?Vn.resolve(!0):vi(t).get(Hr.key).next((function(n){if(null!==n&&e.Yo(n.leaseTimestampMs,5e3)&&!e.Zo(n.ownerId)){if(e.Go(n)&&e.networkEnabled)return!0;if(!e.Go(n)){if(!n.allowTabSynchronization)throw new P(O.FAILED_PRECONDITION,fi);return!1}}return!(!e.networkEnabled||!e.inForeground)||yi(t).Hs().next((function(t){return void 0===e.Jo(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&f("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.th=function(){return i.__awaiter(this,void 0,void 0,(function(){var t=this;return i.__generator(this,(function(e){switch(e.label){case 0:return this.po=!1,this.eh(),this.So&&(this.So.cancel(),this.So=null),this.nh(),this.sh(),[4,this.Fo.runTransaction("readwrite",[Hr.store,ri.store],(function(e){var n=new pi(e,Gn.Es);return t.jo(n).next((function(){return t.zo(n)}))}))];case 1:return e.sent(),this.Fo.close(),this.ih(),[2]}}))}))},t.prototype.Jo=function(t,e){var n=this;return t.filter((function(t){return n.Yo(t.updateTimeMs,e)&&!n.Zo(t.clientId)}))},t.prototype.rh=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return yi(e).Hs().next((function(e){return t.Jo(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"tr",{get:function(){return this.po},enumerable:!1,configurable:!0}),t.prototype.oh=function(t){return Ar.Tr(t,this.serializer,this.zn,this.dr)},t.prototype.hh=function(){return this.ko},t.prototype.ah=function(){return this.Kn},t.prototype.uh=function(){return this.zn},t.prototype.runTransaction=function(t,e,n){var r=this;f("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Fo.runTransaction(o,ii,(function(o){return i=new pi(o,r.yo?r.yo.next():Gn.Es),"readwrite-primary"===e?r.Qo(i).next((function(t){return!!t||r.Wo(i)})).next((function(e){if(!e)throw p("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.ms.gi((function(){return r.Co(!1)})),new P(O.FAILED_PRECONDITION,Bn);return n(i)})).next((function(t){return r.Ko(i).next((function(){return t}))})):r.lh(i).next((function(){return n(i)}))})).then((function(t){return i.jn(),t}))},t.prototype.lh=function(t){var e=this;return vi(t).get(Hr.key).next((function(t){if(null!==t&&e.Yo(t.leaseTimestampMs,5e3)&&!e.Zo(t.ownerId)&&!e.Go(t)&&!(e.Vo||e.allowTabSynchronization&&t.allowTabSynchronization))throw new P(O.FAILED_PRECONDITION,fi)}))},t.prototype.Ko=function(t){var e=new Hr(this.clientId,this.allowTabSynchronization,Date.now());return vi(t).put(Hr.key,e)},t.ks=function(){return Yn.ks()},t.prototype.jo=function(t){var e=this,n=vi(t);return n.get(Hr.key).next((function(t){return e.Go(t)?(f("IndexedDbPersistence","Releasing primary lease."),n.delete(Hr.key)):Vn.resolve()}))},t.prototype.Yo=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(p("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Oo=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.vo=function(){t.ms.ai((function(){return t.inForeground="visible"===t.document.visibilityState,t.xo()}))},this.document.addEventListener("visibilitychange",this.vo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.nh=function(){this.vo&&(this.document.removeEventListener("visibilitychange",this.vo),this.vo=null)},t.prototype.Mo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.bo=function(){e.eh(),e.ms.ai((function(){return e.th()}))},this.window.addEventListener("unload",this.bo))},t.prototype.sh=function(){this.bo&&(this.window.removeEventListener("unload",this.bo),this.bo=null)},t.prototype.Zo=function(t){var e;try{var n=null!==(null===(e=this.$o)||void 0===e?void 0:e.getItem(this.Xo(t)));return f("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return p("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.eh=function(){if(this.$o)try{this.$o.setItem(this.Xo(this.clientId),String(Date.now()))}catch(t){p("Failed to set zombie client id.",t)}},t.prototype.ih=function(){if(this.$o)try{this.$o.removeItem(this.Xo(this.clientId))}catch(t){}},t.prototype.Xo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function vi(t){return di.Ms(t,Hr.store)}function yi(t){return di.Ms(t,ri.store)}var gi=function(){function t(t,e){this.db=t,this.Yi=new dr(this,e)}return t.prototype.ir=function(t){var e=this._h(t);return this.db.hh().do(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype._h=function(t){var e=0;return this.or(t,(function(t){e++})).next((function(){return e}))},t.prototype.be=function(t,e){return this.db.hh().be(t,e)},t.prototype.or=function(t,e){return this.fh(t,(function(t,n){return e(n)}))},t.prototype.Eo=function(t,e,n){return mi(t,n)},t.prototype.Io=function(t,e,n){return mi(t,n)},t.prototype.hr=function(t,e,n){return this.db.hh().hr(t,e,n)},t.prototype.Dr=function(t,e){return mi(t,e)},t.prototype.dh=function(t,e){return function(t,e){var n=!1;return Dr(t).ti((function(r){return Or(t,r,e).next((function(t){return t&&(n=!0),Vn.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.ar=function(t,e){var n=this,r=this.db.ah().jr(),i=[],o=0;return this.fh(t,(function(s,a){if(a<=e){var u=n.dh(t,s).next((function(e){if(!e)return o++,r.Ln(t,s).next((function(){return r.Mn(s),hi(t).delete([0,vr(s.path)])}))}));i.push(u)}})).next((function(){return Vn.Cn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.tt(t.Ro);return this.db.hh().lo(t,n)},t.prototype.wh=function(t,e){return mi(t,e)},t.prototype.fh=function(t,e){var n,r=hi(t),i=Gn.Es;return r.Zs({index:Zr.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),a=r.sequenceNumber;0===o?(i!==Gn.Es&&e(new U(mr(n)),i),i=a,n=s):i=Gn.Es})).next((function(){i!==Gn.Es&&e(new U(mr(n)),i)}))},t.prototype.ur=function(t){return this.db.ah().zr(t)},t}();function mi(t,e){return hi(t).put(function(t,e){return new Zr(0,vr(t.path),e)}(e,t.Ro))}function bi(t,e){var n=t.projectId;return t.i||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var _i=function(){function t(t,e,n){this.persistence=t,this.Th=e,this.Eh=new tt(w),this.mh=new A((function(t){return H(t)}),z),this.Ih=x.min(),this.Gn=t.oh(n),this.Ah=t.ah(),this.ko=t.hh(),this.Rh=new Hn(this.Ah,this.Gn,this.persistence.uh()),this.Th.Ph(this.Rh)}return t.prototype.er=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.cr(n,e.Eh)}))},t}();function wi(t,e){var n=m(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Ah.jr({Gr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Vn.resolve();return o.forEach((function(t){s=s.next((function(){return r.Ln(e,t)})).next((function(e){var o=e,s=n.Pn.get(t);g(null!==s),(!o||o.version.o(s)<0)&&(o=i.En(t,o,n))&&r.xn(o,n.Rn)}))})),s.next((function(){return t.Gn.br(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.Gn.Cr(t)})).next((function(){return n.Rh.Zn(t,r)}))}))}function Ei(t){var e=m(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.ko.ro(t)}))}function Ti(t,e){var n=m(t),r=e.Z,i=n.Eh;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Ah.jr({Gr:!0});i=n.Eh;var s=[];e.Wt.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.ko.mo(t,e.Zt,o).next((function(){return n.ko.To(t,e.Jt,o)})));var u=e.resumeToken;if(u.Y()>0){var c=a.et(u,r).tt(t.Ro);i=i.st(o,c),function(t,e,n){return g(e.resumeToken.Y()>0),0===t.resumeToken.Y()||e.Z.I()-t.Z.I()>=3e8||n.Jt.size+n.Xt.size+n.Zt.size>0}(a,c,e)&&s.push(n.ko.lo(t,c))}}}));var a=st(),u=ft();if(e.Kt.forEach((function(t,e){u=u.add(t)})),s.push(o.getEntries(t,u).next((function(i){e.Kt.forEach((function(u,c){var l=i.get(u);c instanceof on&&c.version.isEqual(x.min())?(o.Mn(u,r),a=a.st(u,c)):null==l||c.version.o(l.version)>0||0===c.version.o(l.version)&&l.hasPendingWrites?(o.xn(c,r),a=a.st(u,c)):f("LocalStore","Ignoring outdated watch update for ",u,". Current version:",l.version," Watch version:",c.version),e.Gt.has(u)&&s.push(n.persistence.dr.wh(t,u))}))}))),!r.isEqual(x.min())){var c=n.ko.ro(t).next((function(e){return n.ko.ho(t,t.Ro,r)}));s.push(c)}return Vn.Cn(s).next((function(){return o.apply(t)})).next((function(){return n.Rh.ts(t,a)}))})).then((function(t){return n.Eh=i,t}))}function Ii(t,e){var n=m(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Gn.gr(t,e)}))}function Si(t,e){var n=m(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.ko.wo(t,e).next((function(i){return i?(r=i,Vn.resolve(r)):n.ko.no(t).next((function(i){return r=new X(e,i,0,t.Ro),n.ko.ao(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Eh.get(t.targetId);return(null===r||t.Z.o(r.Z)>0)&&(n.Eh=n.Eh.st(t.targetId,t),n.mh.set(e,t.targetId)),t}))}function Ci(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var r,o,s,a;return i.__generator(this,(function(i){switch(i.label){case 0:r=m(t),o=r.Eh.get(e),s=n?"readwrite":"readwrite-primary",i.label=1;case 1:return i.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",s,(function(t){return r.persistence.dr.removeTarget(t,o)}))];case 2:i.sent(),i.label=3;case 3:return[3,5];case 4:if(!Jn(a=i.sent()))throw a;return f("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.Eh=r.Eh.remove(e),r.mh.delete(o.target),[2]}}))}))}function ki(t,e,n){var r=m(t),i=x.min(),o=ft();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=m(t),i=r.mh.get(n);return void 0!==i?Vn.resolve(r.Eh.get(i)):r.ko.wo(e,n)}(r,t,pn(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.ko.Ao(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.Th.ns(t,e,n?i:x.min(),n?o:ft())})).next((function(t){return{documents:t,gh:o}}))}))}function Ni(t,e){var n=m(t),r=m(n.ko),i=n.Eh.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Me(t,e).next((function(t){return t?t.target:null}))}))}function Ai(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){if(t.code!==O.FAILED_PRECONDITION||t.message!==Bn)throw t;return f("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}var Oi=function(){function t(){this.Vh=new rt(Pi.yh),this.ph=new rt(Pi.bh)}return t.prototype._=function(){return this.Vh._()},t.prototype.Eo=function(t,e){var n=new Pi(t,e);this.Vh=this.Vh.add(n),this.ph=this.ph.add(n)},t.prototype.vh=function(t,e){var n=this;t.forEach((function(t){return n.Eo(t,e)}))},t.prototype.Io=function(t,e){this.Sh(new Pi(t,e))},t.prototype.Dh=function(t,e){var n=this;t.forEach((function(t){return n.Io(t,e)}))},t.prototype.Ch=function(t){var e=this,n=new U(new L([])),r=new Pi(n,t),i=new Pi(n,t+1),o=[];return this.ph.St([r,i],(function(t){e.Sh(t),o.push(t.key)})),o},t.prototype.Nh=function(){var t=this;this.Vh.forEach((function(e){return t.Sh(e)}))},t.prototype.Sh=function(t){this.Vh=this.Vh.delete(t),this.ph=this.ph.delete(t)},t.prototype.Fh=function(t){var e=new U(new L([])),n=new Pi(e,t),r=new Pi(e,t+1),i=ft();return this.ph.St([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Nr=function(t){var e=new Pi(t,0),n=this.Vh.Ct(e);return null!==n&&t.isEqual(n.key)},t}(),Pi=function(){function t(t,e){this.key=t,this.kh=e}return t.yh=function(t,e){return U.P(t.key,e.key)||w(t.kh,e.kh)},t.bh=function(t,e){return w(t.kh,e.kh)||U.P(t.key,e.key)},t}(),Ri=function(){function t(t){this.uid=t}return t.prototype.Er=function(){return null!=this.uid},t.prototype.$h=function(){return this.Er()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Ri.UNAUTHENTICATED=new Ri(null),Ri.xh=new Ri("google-credentials-uid"),Ri.Oh=new Ri("first-party-uid");var xi=function(t,e){this.user=e,this.type="OAuth",this.Mh={},this.Mh.Authorization="Bearer "+t},Di=function(){function t(){this.Lh=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.qh=function(){},t.prototype.Bh=function(t){this.Lh=t,t(Ri.UNAUTHENTICATED)},t.prototype.Uh=function(){this.Lh=null},t}(),Li=function(){function t(t){var e=this;this.Qh=null,this.currentUser=Ri.UNAUTHENTICATED,this.Wh=!1,this.jh=0,this.Lh=null,this.forceRefresh=!1,this.Qh=function(){e.jh++,e.currentUser=e.Kh(),e.Wh=!0,e.Lh&&e.Lh(e.currentUser)},this.jh=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.Qh):(this.Qh(null),t.get().then((function(t){e.auth=t,e.Qh&&e.auth.addAuthTokenListener(e.Qh)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.jh,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.jh!==e?(f("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(g("string"==typeof n.accessToken),new xi(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.qh=function(){this.forceRefresh=!0},t.prototype.Bh=function(t){this.Lh=t,this.Wh&&t(this.currentUser)},t.prototype.Uh=function(){this.auth&&this.auth.removeAuthTokenListener(this.Qh),this.Qh=null,this.Lh=null},t.prototype.Kh=function(){var t=this.auth&&this.auth.getUid();return g(null===t||"string"==typeof t),new Ri(t)},t}(),Mi=function(){function t(t,e){this.Gh=t,this.zh=e,this.type="FirstParty",this.user=Ri.Oh}return Object.defineProperty(t.prototype,"Mh",{get:function(){var t={"X-Goog-AuthUser":this.zh},e=this.Gh.auth.Hh([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Fi=function(){function t(t,e){this.Gh=t,this.zh=e}return t.prototype.getToken=function(){return Promise.resolve(new Mi(this.Gh,this.zh))},t.prototype.Bh=function(t){t(Ri.Oh)},t.prototype.Uh=function(){},t.prototype.qh=function(){},t}(),Ui=function(){function t(t,e,n,r,i,o){this.ms=t,this.Yh=n,this.Jh=r,this.Xh=i,this.listener=o,this.state=0,this.Zh=0,this.ta=null,this.stream=null,this.Ti=new Qn(t,e)}return t.prototype.ea=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.na=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.sa()},t.prototype.stop=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.ea()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.ia=function(){this.state=0,this.Ti.reset()},t.prototype.ra=function(){var t=this;this.na()&&null===this.ta&&(this.ta=this.ms.Ss(this.Yh,6e4,(function(){return t.oa()})))},t.prototype.ha=function(t){this.aa(),this.stream.send(t)},t.prototype.oa=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){return this.na()?[2,this.close(0)]:[2]}))}))},t.prototype.aa=function(){this.ta&&(this.ta.cancel(),this.ta=null)},t.prototype.close=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(n){switch(n.label){case 0:return this.aa(),this.Ti.cancel(),this.Zh++,3!==t?this.Ti.reset():e&&e.code===O.RESOURCE_EXHAUSTED?(p(e.toString()),p("Using maximum backoff delay to prevent overloading the backend."),this.Ti.ps()):e&&e.code===O.UNAUTHENTICATED&&this.Xh.qh(),null!==this.stream&&(this.ca(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.ua(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ca=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.la(this.Zh),n=this.Zh;this.Xh.getToken().then((function(e){t.Zh===n&&t._a(e)}),(function(n){e((function(){var e=new P(O.UNKNOWN,"Fetching auth token failed: "+n.message);return t.fa(e)}))}))},t.prototype._a=function(t){var e=this,n=this.la(this.Zh);this.stream=this.da(t),this.stream.wa((function(){n((function(){return e.state=2,e.listener.wa()}))})),this.stream.ua((function(t){n((function(){return e.fa(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.sa=function(){var t=this;this.state=4,this.Ti.bs((function(){return i.__awaiter(t,void 0,void 0,(function(){return i.__generator(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.fa=function(t){return f("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.la=function(t){var e=this;return function(n){e.ms.ai((function(){return e.Zh===t?n():(f("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),ji=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,s}return i.__extends(e,t),e.prototype.da=function(t){return this.Jh.Ta("Listen",t)},e.prototype.onMessage=function(t){this.Ti.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:y()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Le?(g(void 0===e||"string"==typeof e),K.fromBase64String(e||"")):(g(void 0===e||e instanceof Uint8Array),K.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(t){var e=void 0===t.code?O.UNKNOWN:Z(t.code);return new P(e,t.message||"")}(s);n=new Et(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;var u=e.documentChange;u.document,u.document.name,u.document.updateTime;var c=ie(t,u.document.name),l=te(u.document.updateTime),h=new Ze({mapValue:{fields:u.document.fields}}),f=new rn(c,l,h,{}),p=u.targetIds||[],d=u.removedTargetIds||[];n=new _t(p,d,f.key,f)}else if("documentDelete"in e){e.documentDelete;var v=e.documentDelete;v.document;var m=ie(t,v.document),b=v.readTime?te(v.readTime):x.min(),_=new on(m,b),w=v.removedTargetIds||[];n=new _t([],w,_.key,_)}else if("documentRemove"in e){e.documentRemove;var E=e.documentRemove;E.document;var T=ie(t,E.document),I=E.removedTargetIds||[];n=new _t([],I,T,null)}else{if(!("filter"in e))return y();e.filter;var S=e.filter;S.targetId;var C=S.count||0,k=new $(C),N=S.targetId;n=new wt(N,k)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return x.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?x.min():e.readTime?te(e.readTime):x.min()}(t);return this.listener.Ea(e,n)},e.prototype.ma=function(t){var e={};e.database=ae(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=G(r)?{documents:fe(t,r)}:{query:pe(t,r)}).targetId=e.targetId,e.resumeToken.Y()>0&&(n.resumeToken=Jt(t,e.resumeToken)),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return y()}}(0,e.X);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.ha(e)},e.prototype.Ia=function(t){var e={};e.database=ae(this.serializer),e.removeTarget=t,this.ha(e)},e}(Ui),Vi=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,s.Aa=!1,s}return i.__extends(e,t),Object.defineProperty(e.prototype,"Ra",{get:function(){return this.Aa},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Aa=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ca=function(){this.Aa&&this.Pa([])},e.prototype.da=function(t){return this.Jh.Ta("Write",t)},e.prototype.onMessage=function(t){if(g(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Aa){this.Ti.reset();var e=function(t,e){return t&&t.length>0?(g(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?te(t.updateTime):te(e);n.isEqual(x.min())&&(n=te(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Me(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=te(t.commitTime);return this.listener.ga(n,e)}return g(!t.writeResults||0===t.writeResults.length),this.Aa=!0,this.listener.Va()},e.prototype.ya=function(){var t={};t.database=ae(this.serializer),this.ha(t)},e.prototype.Pa=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return le(e.serializer,t)}))};this.ha(n)},e}(Ui),qi=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Jh=n,i.serializer=r,i.pa=!1,i}return i.__extends(e,t),e.prototype.ba=function(){if(this.pa)throw new P(O.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.va=function(t,e,n){var r=this;return this.ba(),this.credentials.getToken().then((function(i){return r.Jh.va(t,e,n,i)})).catch((function(t){throw t.code===O.UNAUTHENTICATED&&r.credentials.qh(),t}))},e.prototype.Sa=function(t,e,n){var r=this;return this.ba(),this.credentials.getToken().then((function(i){return r.Jh.Sa(t,e,n,i)})).catch((function(t){throw t.code===O.UNAUTHENTICATED&&r.credentials.qh(),t}))},e.prototype.terminate=function(){this.pa=!1},e}((function(){})),Bi=function(){function t(t,e){this.ei=t,this.Da=e,this.state="Unknown",this.Ca=0,this.Na=null,this.Fa=!0}return t.prototype.ka=function(){var t=this;0===this.Ca&&(this.$a("Unknown"),this.Na=this.ei.Ss("online_state_timeout",1e4,(function(){return t.Na=null,t.xa("Backend didn't respond within 10 seconds."),t.$a("Offline"),Promise.resolve()})))},t.prototype.Oa=function(t){"Online"===this.state?this.$a("Unknown"):(this.Ca++,this.Ca>=1&&(this.Ma(),this.xa("Connection failed 1 times. Most recent error: "+t.toString()),this.$a("Offline")))},t.prototype.set=function(t){this.Ma(),this.Ca=0,"Online"===t&&(this.Fa=!1),this.$a(t)},t.prototype.$a=function(t){t!==this.state&&(this.state=t,this.Da(t))},t.prototype.xa=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Fa?(p(e),this.Fa=!1):f("OnlineStateTracker",e)},t.prototype.Ma=function(){null!==this.Na&&(this.Na.cancel(),this.Na=null)},t}(),Wi=function(){function t(t,e,n,r,o){var s=this;this.La=t,this.qa=e,this.ei=n,this.Ba=[],this.Ua=new Map,this.Qa=null,this.Wa=new Set,this.ja=o,this.ja.Ka((function(t){n.ai((function(){return i.__awaiter(s,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.Ga()?(f("RemoteStore","Restarting streams for network reachability change."),[4,this.za()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Ha=new Bi(n,r),this.Ya=function(t,e,n){var r=m(t);return r.ba(),new ji(e,r.Jh,r.credentials,r.serializer,n)}(this.qa,n,{wa:this.Ja.bind(this),ua:this.Xa.bind(this),Ea:this.Za.bind(this)}),this.tc=function(t,e,n){var r=m(t);return r.ba(),new Vi(e,r.Jh,r.credentials,r.serializer,n)}(this.qa,n,{wa:this.ec.bind(this),ua:this.nc.bind(this),Va:this.sc.bind(this),ga:this.ga.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return this.Wa.delete(0),this.ic()},t.prototype.ic=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.Ga()?(this.rc()?this.oc():this.Ha.set("Unknown"),[4,this.hc()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.disableNetwork=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.Wa.add(0),[4,this.ac()];case 1:return t.sent(),this.Ha.set("Offline"),[2]}}))}))},t.prototype.ac=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return[4,this.tc.stop()];case 1:return t.sent(),[4,this.Ya.stop()];case 2:return t.sent(),this.Ba.length>0&&(f("RemoteStore","Stopping write stream with "+this.Ba.length+" pending writes"),this.Ba=[]),this.cc(),[2]}}))}))},t.prototype.th=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return f("RemoteStore","RemoteStore shutting down."),this.Wa.add(5),[4,this.ac()];case 1:return t.sent(),this.ja.th(),this.Ha.set("Unknown"),[2]}}))}))},t.prototype.listen=function(t){this.Ua.has(t.targetId)||(this.Ua.set(t.targetId,t),this.rc()?this.oc():this.Ya.na()&&this.uc(t))},t.prototype.lc=function(t){this.Ua.delete(t),this.Ya.na()&&this._c(t),0===this.Ua.size&&(this.Ya.na()?this.Ya.ra():this.Ga()&&this.Ha.set("Unknown"))},t.prototype.Me=function(t){return this.Ua.get(t)||null},t.prototype.Oe=function(t){return this.fc.Oe(t)},t.prototype.uc=function(t){this.Qa.we(t.targetId),this.Ya.ma(t)},t.prototype._c=function(t){this.Qa.we(t),this.Ya.Ia(t)},t.prototype.oc=function(){this.Qa=new It(this),this.Ya.start(),this.Ha.ka()},t.prototype.rc=function(){return this.Ga()&&!this.Ya.ea()&&this.Ua.size>0},t.prototype.Ga=function(){return 0===this.Wa.size},t.prototype.cc=function(){this.Qa=null},t.prototype.Ja=function(){return i.__awaiter(this,void 0,void 0,(function(){var t=this;return i.__generator(this,(function(e){return this.Ua.forEach((function(e,n){t.uc(e)})),[2]}))}))},t.prototype.Xa=function(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){return this.cc(),this.rc()?(this.Ha.Oa(t),this.oc()):this.Ha.set("Unknown"),[2]}))}))},t.prototype.Za=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o;return i.__generator(this,(function(i){switch(i.label){case 0:if(this.Ha.set("Online"),!(t instanceof Et&&2===t.state&&t.cause))return[3,6];i.label=1;case 1:return i.trys.push([1,3,,5]),[4,this.dc(t)];case 2:return i.sent(),[3,5];case 3:return n=i.sent(),f("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),[4,this.wc(n)];case 4:return i.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof _t?this.Qa.ge(t):t instanceof wt?this.Qa.Ce(t):this.Qa.pe(t),e.isEqual(x.min()))return[3,13];i.label=7;case 7:return i.trys.push([7,11,,13]),[4,Ei(this.La)];case 8:return r=i.sent(),e.o(r)>=0?[4,this.Tc(e)]:[3,10];case 9:i.sent(),i.label=10;case 10:return[3,13];case 11:return f("RemoteStore","Failed to raise snapshot:",o=i.sent()),[4,this.wc(o)];case 12:return i.sent(),[3,13];case 13:return[2]}}))}))},t.prototype.wc=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n=this;return i.__generator(this,(function(r){switch(r.label){case 0:if(!Jn(t))throw t;return this.Wa.add(1),[4,this.ac()];case 1:return r.sent(),this.Ha.set("Offline"),e||(e=function(){return Ei(n.La)}),this.ei.gi((function(){return i.__awaiter(n,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return f("RemoteStore","Retrying IndexedDB access"),[4,e()];case 1:return t.sent(),this.Wa.delete(1),[4,this.ic()];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))},t.prototype.Ec=function(t){var e=this;return t().catch((function(n){return e.wc(n,t)}))},t.prototype.Tc=function(t){var e=this,n=this.Qa.ke(t);return n.Wt.forEach((function(n,r){if(n.resumeToken.Y()>0){var i=e.Ua.get(r);i&&e.Ua.set(r,i.et(n.resumeToken,t))}})),n.jt.forEach((function(t){var n=e.Ua.get(t);if(n){e.Ua.set(t,n.et(K.J,n.Z)),e._c(t);var r=new X(n.target,t,1,n.sequenceNumber);e.uc(r)}})),this.fc.mc(n)},t.prototype.dc=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,o;return i.__generator(this,(function(i){switch(i.label){case 0:e=t.cause,n=0,r=t.targetIds,i.label=1;case 1:return n<r.length?(o=r[n],this.Ua.has(o)?[4,this.fc.Ic(o,e)]:[3,3]):[3,5];case 2:i.sent(),this.Ua.delete(o),this.Qa.removeTarget(o),i.label=3;case 3:i.label=4;case 4:return n++,[3,1];case 5:return[2]}}))}))},t.prototype.hc=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e,n;return i.__generator(this,(function(r){switch(r.label){case 0:t=this.Ba.length>0?this.Ba[this.Ba.length-1].batchId:-1,r.label=1;case 1:if(!this.Ac())return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,Ii(this.La,t)];case 3:return null===(e=r.sent())?(0===this.Ba.length&&this.tc.ra(),[3,7]):(t=e.batchId,this.Rc(e),[3,6]);case 4:return n=r.sent(),[4,this.wc(n)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return this.Pc()&&this.gc(),[2]}}))}))},t.prototype.Ac=function(){return this.Ga()&&this.Ba.length<10},t.prototype.Vc=function(){return this.Ba.length},t.prototype.Rc=function(t){this.Ba.push(t),this.tc.na()&&this.tc.Ra&&this.tc.Pa(t.mutations)},t.prototype.Pc=function(){return this.Ga()&&!this.tc.ea()&&this.Ba.length>0},t.prototype.gc=function(){this.tc.start()},t.prototype.ec=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){return this.tc.ya(),[2]}))}))},t.prototype.sc=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e,n;return i.__generator(this,(function(r){for(t=0,e=this.Ba;t<e.length;t++)n=e[t],this.tc.Pa(n.mutations);return[2]}))}))},t.prototype.ga=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o=this;return i.__generator(this,(function(i){switch(i.label){case 0:return n=this.Ba.shift(),r=jn.from(n,t,e),[4,this.Ec((function(){return o.fc.yc(r)}))];case 1:return i.sent(),[4,this.hc()];case 2:return i.sent(),[2]}}))}))},t.prototype.nc=function(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return t&&this.tc.Ra?[4,this.pc(t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.Pc()&&this.gc(),[2]}}))}))},t.prototype.pc=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r=this;return i.__generator(this,(function(i){switch(i.label){case 0:return J(n=t.code)&&n!==O.ABORTED?(e=this.Ba.shift(),this.tc.ia(),[4,this.Ec((function(){return r.fc.bc(e.batchId,t)}))]):[3,3];case 1:return i.sent(),[4,this.hc()];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},t.prototype.za=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.Wa.add(4),[4,this.ac()];case 1:return t.sent(),this.Ha.set("Unknown"),this.tc.ia(),this.Ya.ia(),this.Wa.delete(4),[4,this.ic()];case 2:return t.sent(),[2]}}))}))},t.prototype.vc=function(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return this.ei.pi(),f("RemoteStore","RemoteStore received new credentials"),this.Wa.add(3),[4,this.ac()];case 1:return e.sent(),this.Ha.set("Unknown"),[4,this.fc.vc(t)];case 2:return e.sent(),this.Wa.delete(3),[4,this.ic()];case 3:return e.sent(),[2]}}))}))},t.prototype.Sc=function(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return t?(this.Wa.delete(2),[4,this.ic()]):[3,2];case 1:return e.sent(),[3,5];case 2:return t?[3,4]:(this.Wa.add(2),[4,this.ac()]);case 3:e.sent(),this.Ha.set("Unknown"),e.label=4;case 4:e.label=5;case 5:return[2]}}))}))},t}();function Hi(t,e){return"firestore_clients_"+t+"_"+e}function zi(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.Er()&&(r+="_"+e.uid),r}function Gi(t,e){return"firestore_targets_"+t+"_"+e}var Ki=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Dc=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new P(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(p("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Cc=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Qi=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Dc=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new P(r.error.code,r.error.message)),i?new t(e,r.state,o):(p("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Cc=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Yi=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Dc=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=dt(),s=0;i&&s<r.activeTargetIds.length;++s)i=q(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(p("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Xi=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Dc=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(p("SharedClientState","Failed to parse online state: "+e),null)},t}(),$i=function(){function t(){this.activeTargetIds=dt()}return t.prototype.Nc=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Fc=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Cc=function(){var t={activeTargetIds:this.activeTargetIds.N(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Ji=function(){function t(t,e,n,r,i){this.window=t,this.ms=e,this.persistenceKey=n,this.kc=r,this.fc=null,this.Da=null,this.fs=null,this.$c=this.xc.bind(this),this.Oc=new tt(w),this.tr=!1,this.Mc=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Lc=Hi(this.persistenceKey,this.kc),this.qc=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Oc=this.Oc.st(this.kc,new $i),this.Bc=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Uc=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Qc=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Wc=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.$c)}return t.ks=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e,n,r,o,s,a,u,c,l,h,f=this;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,this.fc.rh()];case 1:for(t=i.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.kc&&(o=this.getItem(Hi(this.persistenceKey,r)))&&(s=Yi.Dc(r,o))&&(this.Oc=this.Oc.st(s.clientId,s));for(this.jc(),(a=this.storage.getItem(this.Wc))&&(u=this.Kc(a))&&this.Gc(u),c=0,l=this.Mc;c<l.length;c++)h=l[c],this.xc(h);return this.Mc=[],this.window.addEventListener("unload",(function(){return f.th()})),this.tr=!0,[2]}}))}))},t.prototype.Ts=function(t){this.setItem(this.qc,JSON.stringify(t))},t.prototype.zc=function(){return this.Hc(this.Oc)},t.prototype.Yc=function(t){var e=!1;return this.Oc.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.Jc=function(t){this.Xc(t,"pending")},t.prototype.Zc=function(t,e,n){this.Xc(t,e,n),this.tu(t)},t.prototype.eu=function(t){var e="not-current";if(this.Yc(t)){var n=this.storage.getItem(Gi(this.persistenceKey,t));if(n){var r=Qi.Dc(t,n);r&&(e=r.state)}}return this.nu.Nc(t),this.jc(),e},t.prototype.su=function(t){this.nu.Fc(t),this.jc()},t.prototype.iu=function(t){return this.nu.activeTargetIds.has(t)},t.prototype.ru=function(t){this.removeItem(Gi(this.persistenceKey,t))},t.prototype.ou=function(t,e,n){this.hu(t,e,n)},t.prototype.au=function(t,e,n){var r=this;e.forEach((function(t){r.tu(t)})),this.currentUser=t,n.forEach((function(t){r.Jc(t)}))},t.prototype.cu=function(t){this.uu(t)},t.prototype.th=function(){this.tr&&(this.window.removeEventListener("storage",this.$c),this.removeItem(this.Lc),this.tr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return f("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){f("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){f("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.xc=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(f("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Lc)return void p("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ms.gi((function(){return i.__awaiter(e,void 0,void 0,(function(){var t,e,r,o,s,a;return i.__generator(this,(function(i){if(this.tr){if(null!==n.key)if(this.Bc.test(n.key)){if(null==n.newValue)return t=this.lu(n.key),[2,this._u(t,null)];if(e=this.fu(n.key,n.newValue))return[2,this._u(e.clientId,e)]}else if(this.Uc.test(n.key)){if(null!==n.newValue&&(r=this.du(n.key,n.newValue)))return[2,this.wu(r)]}else if(this.Qc.test(n.key)){if(null!==n.newValue&&(o=this.Tu(n.key,n.newValue)))return[2,this.Eu(o)]}else if(n.key===this.Wc){if(null!==n.newValue&&(s=this.Kc(n.newValue)))return[2,this.Gc(s)]}else n.key===this.qc&&(a=function(t){var e=Gn.Es;if(null!=t)try{var n=JSON.parse(t);g("number"==typeof n),e=n}catch(t){p("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Gn.Es&&this.fs(a)}else this.Mc.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"nu",{get:function(){return this.Oc.get(this.kc)},enumerable:!1,configurable:!0}),t.prototype.jc=function(){this.setItem(this.Lc,this.nu.Cc())},t.prototype.Xc=function(t,e,n){var r=new Ki(this.currentUser,t,e,n),i=zi(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Cc())},t.prototype.tu=function(t){var e=zi(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.uu=function(t){var e={clientId:this.kc,onlineState:t};this.storage.setItem(this.Wc,JSON.stringify(e))},t.prototype.hu=function(t,e,n){var r=Gi(this.persistenceKey,t),i=new Qi(t,e,n);this.setItem(r,i.Cc())},t.prototype.lu=function(t){var e=this.Bc.exec(t);return e?e[1]:null},t.prototype.fu=function(t,e){var n=this.lu(t);return Yi.Dc(n,e)},t.prototype.du=function(t,e){var n=this.Uc.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Ki.Dc(new Ri(i),r,e)},t.prototype.Tu=function(t,e){var n=this.Qc.exec(t),r=Number(n[1]);return Qi.Dc(r,e)},t.prototype.Kc=function(t){return Xi.Dc(t)},t.prototype.wu=function(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.fc.mu(t.batchId,t.state,t.error)]:(f("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.Eu=function(t){return this.fc.Iu(t.targetId,t.state,t.error)},t.prototype._u=function(t,e){var n=this,r=e?this.Oc.st(t,e):this.Oc.remove(t),i=this.Hc(this.Oc),o=this.Hc(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.fc.Au(s,a).then((function(){n.Oc=r}))},t.prototype.Gc=function(t){this.Oc.get(t.clientId)&&this.Da(t.onlineState)},t.prototype.Hc=function(t){var e=dt();return t.forEach((function(t,n){e=e.Nt(n.activeTargetIds)})),e},t}(),Zi=function(){function t(){this.Ru=new $i,this.Pu={},this.Da=null,this.fs=null}return t.prototype.Jc=function(t){},t.prototype.Zc=function(t,e,n){},t.prototype.eu=function(t){return this.Ru.Nc(t),this.Pu[t]||"not-current"},t.prototype.ou=function(t,e,n){this.Pu[t]=e},t.prototype.su=function(t){this.Ru.Fc(t)},t.prototype.iu=function(t){return this.Ru.activeTargetIds.has(t)},t.prototype.ru=function(t){delete this.Pu[t]},t.prototype.zc=function(){return this.Ru.activeTargetIds},t.prototype.Yc=function(t){return this.Ru.activeTargetIds.has(t)},t.prototype.start=function(){return this.Ru=new $i,Promise.resolve()},t.prototype.au=function(t,e,n){},t.prototype.cu=function(t){},t.prototype.th=function(){},t.prototype.Ts=function(t){},t}(),to=function(t){this.key=t},eo=function(t){this.key=t},no=function(){function t(t,e){this.query=t,this.gu=e,this.Vu=null,this.Yt=!1,this.yu=ft(),this.qt=ft(),this.pu=wn(t),this.bu=new vt(this.pu)}return Object.defineProperty(t.prototype,"vu",{get:function(){return this.gu},enumerable:!1,configurable:!0}),t.prototype.Su=function(t,e){var n=this,r=e?e.Du:new yt,i=e?e.bu:this.bu,o=e?e.qt:this.qt,s=i,a=!1,u=this.query.an()&&i.size===this.query.limit?i.last():null,c=this.query.cn()&&i.size===this.query.limit?i.first():null;if(t.ht((function(t,e){var l=i.get(t),h=e instanceof rn?e:null;h&&(h=_n(n.query,h)?h:null);var f=!!l&&n.qt.has(l.key),p=!!h&&(h.Ge||n.qt.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data().isEqual(h.data())?f!==p&&(r.track({type:3,doc:h}),d=!0):n.Cu(l,h)||(r.track({type:2,doc:h}),d=!0,(u&&n.pu(h,u)>0||c&&n.pu(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),d=!0):l&&!h&&(r.track({type:1,doc:l}),d=!0,(u||c)&&(a=!0)),d&&(h?(s=s.add(h),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),this.query.an()||this.query.cn())for(;s.size>this.query.limit;){var l=this.query.an()?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{bu:s,Du:r,Nu:a,qt:o}},t.prototype.Cu=function(t,e){return t.Ge&&e.hasCommittedMutations&&!e.Ge},t.prototype.Un=function(t,e,n){var r=this,i=this.bu;this.bu=t.bu,this.qt=t.qt;var o=t.Du.Mt();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return y()}};return n(t)-n(e)}(t.type,e.type)||r.pu(t.doc,e.doc)})),this.Fu(n);var s=e?this.ku():[],a=0===this.yu.size&&this.Yt?1:0,u=a!==this.Vu;return this.Vu=a,0!==o.length||u?{snapshot:new gt(this.query,t.bu,i,o,t.qt,0===a,u,!1),$u:s}:{$u:s}},t.prototype.xu=function(t){return this.Yt&&"Offline"===t?(this.Yt=!1,this.Un({bu:this.bu,Du:new yt,qt:this.qt,Nu:!1},!1)):{$u:[]}},t.prototype.Ou=function(t){return!this.gu.has(t)&&!!this.bu.has(t)&&!this.bu.get(t).Ge},t.prototype.Fu=function(t){var e=this;t&&(t.Jt.forEach((function(t){return e.gu=e.gu.add(t)})),t.Xt.forEach((function(t){})),t.Zt.forEach((function(t){return e.gu=e.gu.delete(t)})),this.Yt=t.Yt)},t.prototype.ku=function(){var t=this;if(!this.Yt)return[];var e=this.yu;this.yu=ft(),this.bu.forEach((function(e){t.Ou(e.key)&&(t.yu=t.yu.add(e.key))}));var n=[];return e.forEach((function(e){t.yu.has(e)||n.push(new eo(e))})),this.yu.forEach((function(t){e.has(t)||n.push(new to(t))})),n},t.prototype.Mu=function(t){this.gu=t.gh,this.yu=ft();var e=this.Su(t.documents);return this.Un(e,!0)},t.prototype.Lu=function(){return gt.Qt(this.query,this.bu,this.qt,0===this.Vu)},t}(),ro=function(t,e,n){this.query=t,this.targetId=e,this.view=n},io=function(t){this.key=t,this.qu=!1},oo=function(){function t(t,e,n,r,i,o){this.La=t,this.Bu=e,this.qa=n,this.Uu=r,this.currentUser=i,this.Qu=o,this.Wu=null,this.ju=new A((function(t){return mn(t)}),gn),this.Ku=new Map,this.Gu=[],this.zu=new tt(U.P),this.Hu=new Map,this.Yu=new Oi,this.Ju={},this.Xu=new Map,this.Zu=ai.eo(),this.onlineState="Unknown",this.tl=void 0}return Object.defineProperty(t.prototype,"el",{get:function(){return!0===this.tl},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(t){this.Wu=t},t.prototype.listen=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,o,s;return i.__generator(this,(function(i){switch(i.label){case 0:return this.nl("listen()"),(r=this.ju.get(t))?(e=r.targetId,this.Uu.eu(e),n=r.view.Lu(),[3,4]):[3,1];case 1:return[4,Si(this.La,pn(t))];case 2:return o=i.sent(),s=this.Uu.eu(o.targetId),e=o.targetId,[4,this.sl(t,e,"current"===s)];case 3:n=i.sent(),this.el&&this.Bu.listen(o),i.label=4;case 4:return[2,n]}}))}))},t.prototype.sl=function(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var r,o,s,a,u,c;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,ki(this.La,t,!0)];case 1:return r=i.sent(),o=new no(t,r.gh),s=o.Su(r.documents),a=bt.Ht(e,n&&"Offline"!==this.onlineState),u=o.Un(s,this.el,a),this.il(e,u.$u),c=new ro(t,e,o),[2,(this.ju.set(t,c),this.Ku.has(e)?this.Ku.get(e).push(t):this.Ku.set(e,[t]),u.snapshot)]}}))}))},t.prototype.lc=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r=this;return i.__generator(this,(function(i){switch(i.label){case 0:return this.nl("unlisten()"),e=this.ju.get(t),(n=this.Ku.get(e.targetId)).length>1?[2,(this.Ku.set(e.targetId,n.filter((function(e){return!gn(e,t)}))),void this.ju.delete(t))]:this.el?(this.Uu.su(e.targetId),this.Uu.Yc(e.targetId)?[3,2]:[4,Ci(this.La,e.targetId,!1).then((function(){r.Uu.ru(e.targetId),r.Bu.lc(e.targetId),r.rl(e.targetId)})).catch(Ai)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.rl(e.targetId),[4,Ci(this.La,e.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},t.prototype.write=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o;return i.__generator(this,(function(i){switch(i.label){case 0:this.nl("write()"),i.label=1;case 1:return i.trys.push([1,5,,6]),[4,function(t,e){var n,r=m(t),i=R.now(),o=e.reduce((function(t,e){return t.add(e.key)}),ft());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Rh.Zn(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Be(c,n.get(c.key));null!=l&&s.push(new Ge(c.key,l,en(l.proto.mapValue),Fe.exists(!0)))}return r.Gn.Ir(t,i,s,e)}))})).then((function(t){var e=t.An(n);return{batchId:t.batchId,Fn:e}}))}(this.La,t)];case 2:return n=i.sent(),this.Uu.Jc(n.batchId),this.ol(n.batchId,e),[4,this.hl(n.Fn)];case 3:return i.sent(),[4,this.Bu.hc()];case 4:return i.sent(),[3,6];case 5:return r=i.sent(),o=ur(r,"Failed to persist write"),e.reject(o),[3,6];case 6:return[2]}}))}))},t.prototype.mc=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n=this;return i.__generator(this,(function(r){switch(r.label){case 0:this.nl("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,Ti(this.La,t)];case 2:return e=r.sent(),t.Wt.forEach((function(t,e){var r=n.Hu.get(e);r&&(g(t.Jt.size+t.Xt.size+t.Zt.size<=1),t.Jt.size>0?r.qu=!0:t.Xt.size>0?g(r.qu):t.Zt.size>0&&(g(r.qu),r.qu=!1))})),[4,this.hl(e,t)];case 3:return r.sent(),[3,6];case 4:return[4,Ai(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.xu=function(t,e){if(this.el&&0===e||!this.el&&1===e){this.nl("applyOnlineStateChange()");var n=[];this.ju.forEach((function(e,r){var i=r.view.xu(t);i.snapshot&&n.push(i.snapshot)})),this.Wu.al(t),this.Wu.Ea(n),this.onlineState=t,this.el&&this.Uu.cu(t)}},t.prototype.Ic=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,s,a,u=this;return i.__generator(this,(function(i){switch(i.label){case 0:return this.nl("rejectListens()"),this.Uu.ou(t,"rejected",e),n=this.Hu.get(t),(r=n&&n.key)?(o=(o=new tt(U.P)).st(r,new on(r,x.min())),s=ft().add(r),a=new mt(x.min(),new Map,new rt(w),o,s),[4,this.mc(a)]):[3,2];case 1:return i.sent(),this.zu=this.zu.remove(r),this.Hu.delete(t),this.cl(),[3,4];case 2:return[4,Ci(this.La,t,!1).then((function(){return u.rl(t,e)})).catch(Ai)];case 3:i.sent(),i.label=4;case 4:return[2]}}))}))},t.prototype.yc=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n;return i.__generator(this,(function(r){switch(r.label){case 0:this.nl("applySuccessfulWrite()"),e=t.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,wi(this.La,t)];case 2:return n=r.sent(),this.ul(e,null),this.ll(e),this.Uu.Zc(e,"acknowledged"),[4,this.hl(n)];case 3:return r.sent(),[3,6];case 4:return[4,Ai(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.bc=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n;return i.__generator(this,(function(r){switch(r.label){case 0:this.nl("rejectFailedWrite()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,function(t,e){var n=m(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.Gn.Rr(t,e).next((function(e){return g(null!==e),r=e.keys(),n.Gn.br(t,e)})).next((function(){return n.Gn.Cr(t)})).next((function(){return n.Rh.Zn(t,r)}))}))}(this.La,t)];case 2:return n=r.sent(),this.ul(t,e),this.ll(t),this.Uu.Zc(t,"rejected",e),[4,this.hl(n)];case 3:return r.sent(),[3,6];case 4:return[4,Ai(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype._l=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,o;return i.__generator(this,(function(i){switch(i.label){case 0:this.Bu.Ga()||f("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,function(t){var e=m(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Gn.Vr(t)}))}(this.La)];case 2:return-1===(e=i.sent())?[2,void t.resolve()]:((n=this.Xu.get(e)||[]).push(t),this.Xu.set(e,n),[3,4]);case 3:return r=i.sent(),o=ur(r,"Initialization of waitForPendingWrites() operation failed"),t.reject(o),[3,4];case 4:return[2]}}))}))},t.prototype.ll=function(t){(this.Xu.get(t)||[]).forEach((function(t){t.resolve()})),this.Xu.delete(t)},t.prototype.fl=function(t){this.Xu.forEach((function(e){e.forEach((function(e){e.reject(new P(O.CANCELLED,t))}))})),this.Xu.clear()},t.prototype.ol=function(t,e){var n=this.Ju[this.currentUser.$h()];n||(n=new tt(w)),n=n.st(t,e),this.Ju[this.currentUser.$h()]=n},t.prototype.ul=function(t,e){var n=this.Ju[this.currentUser.$h()];if(n){var r=n.get(t);r&&(e?r.reject(e):r.resolve(),n=n.remove(t)),this.Ju[this.currentUser.$h()]=n}},t.prototype.rl=function(t,e){var n=this;void 0===e&&(e=null),this.Uu.su(t);for(var r=0,i=this.Ku.get(t);r<i.length;r++){var o=i[r];this.ju.delete(o),e&&this.Wu.dl(o,e)}this.Ku.delete(t),this.el&&this.Yu.Ch(t).forEach((function(t){n.Yu.Nr(t)||n.wl(t)}))},t.prototype.wl=function(t){var e=this.zu.get(t);null!==e&&(this.Bu.lc(e),this.zu=this.zu.remove(t),this.Hu.delete(e),this.cl())},t.prototype.il=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof to?(this.Yu.Eo(i.key,t),this.Tl(i)):i instanceof eo?(f("SyncEngine","Document no longer in limbo: "+i.key),this.Yu.Io(i.key,t),this.Yu.Nr(i.key)||this.wl(i.key)):y()}},t.prototype.Tl=function(t){var e=t.key;this.zu.get(e)||(f("SyncEngine","New document in limbo: "+e),this.Gu.push(e),this.cl())},t.prototype.cl=function(){for(;this.Gu.length>0&&this.zu.size<this.Qu;){var t=this.Gu.shift(),e=this.Zu.next();this.Hu.set(e,new io(t)),this.zu=this.zu.st(t,e),this.Bu.listen(new X(pn(ln(t.path)),e,2,Gn.Es))}},t.prototype.El=function(){return this.zu},t.prototype.ml=function(){return this.Gu},t.prototype.hl=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,s=this;return i.__generator(this,(function(a){switch(a.label){case 0:return n=[],r=[],o=[],this.ju.forEach((function(i,a){o.push(Promise.resolve().then((function(){var e=a.view.Su(t);return e.Nu?ki(s.La,a.query,!1).then((function(t){var n=t.documents;return a.view.Su(n,e)})):e})).then((function(t){var i=e&&e.Wt.get(a.targetId),o=a.view.Un(t,s.el,i);if(s.il(a.targetId,o.$u),o.snapshot){s.el&&s.Uu.ou(a.targetId,o.snapshot.fromCache?"not-current":"current"),n.push(o.snapshot);var u=zn._s(a.targetId,o.snapshot);r.push(u)}})))})),[4,Promise.all(o)];case 1:return a.sent(),this.Wu.Ea(n),[4,function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,s,a,u,c,l,h;return i.__generator(this,(function(i){switch(i.label){case 0:n=m(t),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Vn.forEach(e,(function(e){return Vn.forEach(e.us,(function(r){return n.persistence.dr.Eo(t,e.targetId,r)})).next((function(){return Vn.forEach(e.ls,(function(r){return n.persistence.dr.Io(t,e.targetId,r)}))}))}))}))];case 2:return i.sent(),[3,4];case 3:if(!Jn(r=i.sent()))throw r;return f("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(o=0,s=e;o<s.length;o++)a=s[o],u=a.targetId,a.fromCache||(c=n.Eh.get(u),l=c.Z,h=c.nt(l),n.Eh=n.Eh.st(u,h));return[2]}}))}))}(this.La,r)];case 2:return a.sent(),[2]}}))}))},t.prototype.nl=function(t){},t.prototype.vc=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e;return i.__generator(this,(function(n){switch(n.label){case 0:return this.currentUser.isEqual(t)?[3,3]:(f("SyncEngine","User change. New user:",t.$h()),[4,function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,s;return i.__generator(this,(function(i){switch(i.label){case 0:return n=m(t),r=n.Gn,o=n.Rh,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var i;return n.Gn.yr(t).next((function(s){return i=s,r=n.persistence.oh(e),o=new Hn(n.Ah,r,n.persistence.uh()),r.yr(t)})).next((function(e){for(var n=[],r=[],s=ft(),a=0,u=i;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];s=s.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];s=s.add(m.key)}}return o.Zn(t,s).next((function(t){return{Il:t,Al:n,Rl:r}}))}))}))];case 1:return s=i.sent(),[2,(n.Gn=r,n.Rh=o,n.Th.Ph(n.Rh),s)]}}))}))}(this.La,t)]);case 1:return e=n.sent(),this.currentUser=t,this.fl("'waitForPendingWrites' promise is rejected due to a user change."),this.Uu.au(t,e.Al,e.Rl),[4,this.hl(e.Il)];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},t.prototype.Oe=function(t){var e=this.Hu.get(t);if(e&&e.qu)return ft().add(e.key);var n=ft(),r=this.Ku.get(t);if(!r)return n;for(var i=0,o=r;i<o.length;i++){var s=o[i],a=this.ju.get(s);n=n.Nt(a.view.vu)}return n},t}();function so(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o;return i.__generator(this,(function(i){switch(i.label){case 0:return[4,ki((n=m(t)).La,e.query,!0)];case 1:return r=i.sent(),o=e.view.Mu(r),[2,(n.el&&n.il(e.targetId,o.$u),o)]}}))}))}function ao(t,e,n,r){return i.__awaiter(this,void 0,void 0,(function(){var o,s;return i.__generator(this,(function(i){switch(i.label){case 0:return(o=m(t)).nl("applyBatchState()"),[4,function(t,e){var n=m(t),r=m(n.Gn);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.Pr(t,e).next((function(e){return e?n.Rh.Zn(t,e):Vn.resolve(null)}))}))}(o.La,e)];case 1:return null===(s=i.sent())?[3,6]:"pending"!==n?[3,3]:[4,o.Bu.hc()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(o.ul(e,r||null),function(t,e){m(m(t).Gn).Sr(e)}(o.La,e)):y(),i.label=4;case 4:return[4,o.hl(s)];case 5:return i.sent(),[3,7];case 6:f("SyncEngine","Cannot apply mutation batch with id: "+e),i.label=7;case 7:return[2]}}))}))}function uo(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,s,a,u,c,l;return i.__generator(this,(function(i){switch(i.label){case 0:return n=m(t),!0!==e||!0===n.tl?[3,3]:(r=n.Uu.zc(),[4,co(n,r.N())]);case 1:return o=i.sent(),n.tl=!0,[4,n.Bu.Sc(!0)];case 2:for(i.sent(),s=0,a=o;s<a.length;s++)u=a[s],n.Bu.listen(u);return[3,7];case 3:return!1!==e||!1===n.tl?[3,7]:(c=[],l=Promise.resolve(),n.Ku.forEach((function(t,e){n.Uu.iu(e)?c.push(e):l=l.then((function(){return n.rl(e),Ci(n.La,e,!0)})),n.Bu.lc(e)})),[4,l]);case 4:return i.sent(),[4,co(n,c)];case 5:return i.sent(),function(t){var e=m(t);e.Hu.forEach((function(t,n){e.Bu.lc(n)})),e.Yu.Nh(),e.Hu=new Map,e.zu=new tt(U.P)}(n),n.tl=!1,[4,n.Bu.Sc(!1)];case 6:i.sent(),i.label=7;case 7:return[2]}}))}))}function co(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,s,a,u,c,l,h,f,p,d,v,y;return i.__generator(this,(function(i){switch(i.label){case 0:n=m(t),r=[],o=[],s=0,a=e,i.label=1;case 1:return s<a.length?(u=a[s],c=void 0,(l=n.Ku.get(u))&&0!==l.length?[4,Si(n.La,pn(l[0]))]:[3,7]):[3,13];case 2:c=i.sent(),h=0,f=l,i.label=3;case 3:return h<f.length?(p=f[h],d=n.ju.get(p),[4,so(n,d)]):[3,6];case 4:(v=i.sent()).snapshot&&o.push(v.snapshot),i.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Ni(n.La,u)];case 8:return y=i.sent(),[4,Si(n.La,y)];case 9:return c=i.sent(),[4,n.sl(lo(y),u,!1)];case 10:i.sent(),i.label=11;case 11:r.push(c),i.label=12;case 12:return s++,[3,1];case 13:return[2,(n.Wu.Ea(o),r)]}}))}))}function lo(t){return cn(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function ho(t){var e=m(t);return m(m(e.La).persistence).rh()}function fo(t,e,n,r){return i.__awaiter(this,void 0,void 0,(function(){var o,s,a;return i.__generator(this,(function(i){switch(i.label){case 0:return(o=m(t)).tl?(f("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.Ku.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,function(t){var e=m(t),n=m(e.Ah);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return n.Ur(t,e.Ih)})).then((function(t){var n=t.Qr,r=t.readTime;return e.Ih=r,n}))}(o.La)];case 3:return s=i.sent(),a=mt.zt(e,"current"===n),[4,o.hl(s,a)];case 4:return i.sent(),[3,8];case 5:return[4,Ci(o.La,e,!0)];case 6:return i.sent(),o.rl(e,r),[3,8];case 7:y(),i.label=8;case 8:return[2]}}))}))}function po(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var r,o,s,a,u,c,l,h,p,d;return i.__generator(this,(function(v){switch(v.label){case 0:if(!(r=m(t)).tl)return[3,10];o=0,s=e,v.label=1;case 1:return o<s.length?(a=s[o],r.Ku.has(a)?(f("SyncEngine","Adding an already active target "+a),[3,5]):[4,Ni(r.La,a)]):[3,6];case 2:return u=v.sent(),[4,Si(r.La,u)];case 3:return c=v.sent(),[4,r.sl(lo(u),c.targetId,!1)];case 4:v.sent(),r.Bu.listen(c),v.label=5;case 5:return o++,[3,1];case 6:l=function(t){return i.__generator(this,(function(e){switch(e.label){case 0:return r.Ku.has(t)?[4,Ci(r.La,t,!1).then((function(){r.Bu.lc(t),r.rl(t)})).catch(Ai)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,p=n,v.label=7;case 7:return h<p.length?(d=p[h],[5,l(d)]):[3,10];case 8:v.sent(),v.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}var vo=function(){this.Pl=void 0,this.listeners=[]},yo=function(){function t(t){this.fc=t,this.gl=new A((function(t){return mn(t)}),gn),this.onlineState="Unknown",this.Vl=new Set,this.fc.subscribe(this)}return t.prototype.listen=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,o,s,a;return i.__generator(this,(function(i){switch(i.label){case 0:if(e=t.query,n=!1,(r=this.gl.get(e))||(n=!0,r=new vo),!n)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),o=r,[4,this.fc.listen(e)];case 2:return o.Pl=i.sent(),[3,4];case 3:return s=i.sent(),a=ur(s,"Initialization of query '"+bn(t.query)+"' failed"),[2,void t.onError(a)];case 4:return this.gl.set(e,r),r.listeners.push(t),t.xu(this.onlineState),r.Pl&&t.yl(r.Pl)&&this.pl(),[2]}}))}))},t.prototype.lc=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n,r,o;return i.__generator(this,(function(i){return e=t.query,n=!1,(r=this.gl.get(e))&&(o=r.listeners.indexOf(t))>=0&&(r.listeners.splice(o,1),n=0===r.listeners.length),n?[2,(this.gl.delete(e),this.fc.lc(e))]:[2]}))}))},t.prototype.Ea=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=i.query,s=this.gl.get(o);if(s){for(var a=0,u=s.listeners;a<u.length;a++)u[a].yl(i)&&(e=!0);s.Pl=i}}e&&this.pl()},t.prototype.dl=function(t,e){var n=this.gl.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.gl.delete(t)},t.prototype.al=function(t){this.onlineState=t;var e=!1;this.gl.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].xu(t)&&(e=!0)})),e&&this.pl()},t.prototype.bl=function(t){this.Vl.add(t),t.next()},t.prototype.vl=function(t){this.Vl.delete(t)},t.prototype.pl=function(){this.Vl.forEach((function(t){t.next()}))},t}(),go=function(){function t(t,e,n){this.query=t,this.Sl=e,this.Dl=!1,this.Cl=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.yl=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new gt(t.query,t.docs,t.Lt,e,t.qt,t.fromCache,t.Bt,!0)}var o=!1;return this.Dl?this.Nl(t)&&(this.Sl.next(t),o=!0):this.Fl(t,this.onlineState)&&(this.kl(t),o=!0),this.Cl=t,o},t.prototype.onError=function(t){this.Sl.error(t)},t.prototype.xu=function(t){this.onlineState=t;var e=!1;return this.Cl&&!this.Dl&&this.Fl(this.Cl,t)&&(this.kl(this.Cl),e=!0),e},t.prototype.Fl=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.$l&&n||t.docs._()&&"Offline"!==e)},t.prototype.Nl=function(t){if(t.docChanges.length>0)return!0;var e=this.Cl&&this.Cl.hasPendingWrites!==t.hasPendingWrites;return!(!t.Bt&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.kl=function(t){t=gt.Qt(t.query,t.docs,t.qt,t.fromCache),this.Dl=!0,this.Sl.next(t)},t}(),mo=function(){function t(){}return t.prototype.Ph=function(t){this.xl=t},t.prototype.ns=function(t,e,n,r){var i=this;return e.hn()||n.isEqual(x.min())?this.Ol(t,e):this.xl.Zn(t,r).next((function(o){var a=i.Ml(e,o);return(e.an()||e.cn())&&i.Nu(e.nn,a,r,n)?i.Ol(t,e):(h()<=s.LogLevel.DEBUG&&f("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),bn(e)),i.xl.ns(t,e,n).next((function(t){return a.forEach((function(e){t=t.st(e.key,e)})),t})))}))},t.prototype.Ml=function(t,e){var n=new rt(wn(t));return e.forEach((function(e,r){r instanceof rn&&_n(t,r)&&(n=n.add(r))})),n},t.prototype.Nu=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.o(r)>0)},t.prototype.Ol=function(t,e){return h()<=s.LogLevel.DEBUG&&f("IndexFreeQueryEngine","Using full collection scan to execute query:",bn(e)),this.xl.ns(t,e,x.min())},t}(),bo=function(){function t(t,e){this.zn=t,this.dr=e,this.Gn=[],this.Ll=1,this.ql=new rt(Pi.yh)}return t.prototype.mr=function(t){return Vn.resolve(0===this.Gn.length)},t.prototype.Ir=function(t,e,n,r){var i=this.Ll;this.Ll++,this.Gn.length>0&&this.Gn[this.Gn.length-1];var o=new Un(i,e,n,r);this.Gn.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.ql=this.ql.add(new Pi(u.key,i)),this.zn.Ar(t,u.key.path.p())}return Vn.resolve(o)},t.prototype.Rr=function(t,e){return Vn.resolve(this.Bl(e))},t.prototype.gr=function(t,e){var n=e+1,r=this.Ul(n),i=r<0?0:r;return Vn.resolve(this.Gn.length>i?this.Gn[i]:null)},t.prototype.Vr=function(){return Vn.resolve(0===this.Gn.length?-1:this.Ll-1)},t.prototype.yr=function(t){return Vn.resolve(this.Gn.slice())},t.prototype.Yn=function(t,e){var n=this,r=new Pi(e,0),i=new Pi(e,Number.POSITIVE_INFINITY),o=[];return this.ql.St([r,i],(function(t){var e=n.Bl(t.kh);o.push(e)})),Vn.resolve(o)},t.prototype.es=function(t,e){var n=this,r=new rt(w);return e.forEach((function(t){var e=new Pi(t,0),i=new Pi(t,Number.POSITIVE_INFINITY);n.ql.St([e,i],(function(t){r=r.add(t.kh)}))})),Vn.resolve(this.Ql(r))},t.prototype.as=function(t,e){var n=e.path,r=n.length+1,i=n;U.j(i)||(i=i.child(""));var o=new Pi(new U(i),0),s=new rt(w);return this.ql.Dt((function(t){var e=t.key.path;return!!n.D(e)&&(e.length===r&&(s=s.add(t.kh)),!0)}),o),Vn.resolve(this.Ql(s))},t.prototype.Ql=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Bl(t);null!==r&&n.push(r)})),n},t.prototype.br=function(t,e){var n=this;g(0===this.Wl(e.batchId,"removed")),this.Gn.shift();var r=this.ql;return Vn.forEach(e.mutations,(function(i){var o=new Pi(i.key,e.batchId);return r=r.delete(o),n.dr.Dr(t,i.key)})).next((function(){n.ql=r}))},t.prototype.Sr=function(t){},t.prototype.Nr=function(t,e){var n=new Pi(e,0),r=this.ql.Ct(n);return Vn.resolve(e.isEqual(r&&r.key))},t.prototype.Cr=function(t){return this.Gn.length,Vn.resolve()},t.prototype.Wl=function(t,e){return this.Ul(t)},t.prototype.Ul=function(t){return 0===this.Gn.length?0:t-this.Gn[0].batchId},t.prototype.Bl=function(t){var e=this.Ul(t);return e<0||e>=this.Gn.length?null:this.Gn[e]},t}(),_o=function(){function t(t,e){this.zn=t,this.jl=e,this.docs=new tt(U.P),this.size=0}return t.prototype.xn=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.jl(e);return this.docs=this.docs.st(r,{Or:e,size:s,readTime:n}),this.size+=s-o,this.zn.Ar(t,r.path.p())},t.prototype.Mn=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.Ln=function(t,e){var n=this.docs.get(e);return Vn.resolve(n?n.Or:null)},t.prototype.getEntries=function(t,e){var n=this,r=at();return e.forEach((function(t){var e=n.docs.get(t);r=r.st(t,e?e.Or:null)})),Vn.resolve(r)},t.prototype.ns=function(t,e,n){for(var r=ct(),i=new U(e.path.child("")),o=this.docs.ut(i);o.Tt();){var s=o.wt(),a=s.key,u=s.value,c=u.Or,l=u.readTime;if(!e.path.D(a.path))break;l.o(n)<=0||c instanceof rn&&_n(e,c)&&(r=r.st(c.key,c))}return Vn.resolve(r)},t.prototype.Kl=function(t,e){return Vn.forEach(this.docs,(function(t){return e(t)}))},t.prototype.jr=function(e){return new t.Kr(this)},t.prototype.zr=function(t){return Vn.resolve(this.size)},t}();_o.Kr=function(t){function e(e){var n=this;return(n=t.call(this)||this).Hr=e,n}return i.__extends(e,t),e.prototype.Un=function(t){var e=this,n=[];return this.Fn.forEach((function(r,i){i?n.push(e.Hr.xn(t,i,e.readTime)):e.Hr.Mn(r)})),Vn.Cn(n)},e.prototype.qn=function(t,e){return this.Hr.Ln(t,e)},e.prototype.Bn=function(t,e){return this.Hr.getEntries(t,e)},e}(qn);var wo=function(){function t(t){this.persistence=t,this.Gl=new A((function(t){return H(t)}),z),this.lastRemoteSnapshotVersion=x.min(),this.highestTargetId=0,this.zl=0,this.Hl=new Oi,this.targetCount=0,this.Yl=ai.to()}return t.prototype.be=function(t,e){return this.Gl.forEach((function(t,n){return e(n)})),Vn.resolve()},t.prototype.ro=function(t){return Vn.resolve(this.lastRemoteSnapshotVersion)},t.prototype.oo=function(t){return Vn.resolve(this.zl)},t.prototype.no=function(t){return this.highestTargetId=this.Yl.next(),Vn.resolve(this.highestTargetId)},t.prototype.ho=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.zl&&(this.zl=e),Vn.resolve()},t.prototype.co=function(t){this.Gl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Yl=new ai(e),this.highestTargetId=e),t.sequenceNumber>this.zl&&(this.zl=t.sequenceNumber)},t.prototype.ao=function(t,e){return this.co(e),this.targetCount+=1,Vn.resolve()},t.prototype.lo=function(t,e){return this.co(e),Vn.resolve()},t.prototype._o=function(t,e){return this.Gl.delete(e.target),this.Hl.Ch(e.targetId),this.targetCount-=1,Vn.resolve()},t.prototype.hr=function(t,e,n){var r=this,i=0,o=[];return this.Gl.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Gl.delete(s),o.push(r.fo(t,a.targetId)),i++)})),Vn.Cn(o).next((function(){return i}))},t.prototype.do=function(t){return Vn.resolve(this.targetCount)},t.prototype.wo=function(t,e){var n=this.Gl.get(e)||null;return Vn.resolve(n)},t.prototype.To=function(t,e,n){return this.Hl.vh(e,n),Vn.resolve()},t.prototype.mo=function(t,e,n){this.Hl.Dh(e,n);var r=this.persistence.dr,i=[];return r&&e.forEach((function(e){i.push(r.Dr(t,e))})),Vn.Cn(i)},t.prototype.fo=function(t,e){return this.Hl.Ch(e),Vn.resolve()},t.prototype.Ao=function(t,e){var n=this.Hl.Fh(e);return Vn.resolve(n)},t.prototype.Nr=function(t,e){return Vn.resolve(this.Hl.Nr(e))},t}(),Eo=function(){function t(t){var e=this;this.Jl={},this.yo=new Gn(0),this.po=!1,this.po=!0,this.dr=t(this),this.ko=new wo(this),this.zn=new Vr,this.Kn=new _o(this.zn,(function(t){return e.dr.Xl(t)}))}return t.prototype.start=function(){return Promise.resolve()},t.prototype.th=function(){return this.po=!1,Promise.resolve()},Object.defineProperty(t.prototype,"tr",{get:function(){return this.po},enumerable:!1,configurable:!0}),t.prototype.Bo=function(){},t.prototype.Uo=function(){},t.prototype.uh=function(){return this.zn},t.prototype.oh=function(t){var e=this.Jl[t.$h()];return e||(e=new bo(this.zn,this.dr),this.Jl[t.$h()]=e),e},t.prototype.hh=function(){return this.ko},t.prototype.ah=function(){return this.Kn},t.prototype.runTransaction=function(t,e,n){var r=this;f("MemoryPersistence","Starting transaction:",t);var i=new To(this.yo.next());return this.dr.Zl(),n(i).next((function(t){return r.dr.t_(i).next((function(){return t}))})).Sn().then((function(t){return i.jn(),t}))},t.prototype.e_=function(t,e){return Vn.Nn(Object.values(this.Jl).map((function(n){return function(){return n.Nr(t,e)}})))},t}(),To=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ro=e,n}return i.__extends(e,t),e}(Wn),Io=function(){function t(t){this.persistence=t,this.n_=new Oi,this.s_=null}return t.i_=function(e){return new t(e)},Object.defineProperty(t.prototype,"r_",{get:function(){if(this.s_)return this.s_;throw y()},enumerable:!1,configurable:!0}),t.prototype.Eo=function(t,e,n){return this.n_.Eo(n,e),this.r_.delete(n.toString()),Vn.resolve()},t.prototype.Io=function(t,e,n){return this.n_.Io(n,e),this.r_.add(n.toString()),Vn.resolve()},t.prototype.Dr=function(t,e){return this.r_.add(e.toString()),Vn.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.n_.Ch(e.targetId).forEach((function(t){return n.r_.add(t.toString())}));var r=this.persistence.hh();return r.Ao(t,e.targetId).next((function(t){t.forEach((function(t){return n.r_.add(t.toString())}))})).next((function(){return r._o(t,e)}))},t.prototype.Zl=function(){this.s_=new Set},t.prototype.t_=function(t){var e=this,n=this.persistence.ah().jr();return Vn.forEach(this.r_,(function(r){var i=U.B(r);return e.o_(t,i).next((function(t){t||n.Mn(i)}))})).next((function(){return e.s_=null,n.apply(t)}))},t.prototype.wh=function(t,e){var n=this;return this.o_(t,e).next((function(t){t?n.r_.delete(e.toString()):n.r_.add(e.toString())}))},t.prototype.Xl=function(t){return 0},t.prototype.o_=function(t,e){var n=this;return Vn.Nn([function(){return Vn.resolve(n.n_.Nr(e))},function(){return n.persistence.hh().Nr(t,e)},function(){return n.persistence.e_(t,e)}])},t}(),So=function(){function t(t){this.h_=t.h_,this.a_=t.a_}return t.prototype.wa=function(t){this.c_=t},t.prototype.ua=function(t){this.u_=t},t.prototype.onMessage=function(t){this.l_=t},t.prototype.close=function(){this.a_()},t.prototype.send=function(t){this.h_(t)},t.prototype.__=function(){this.c_()},t.prototype.f_=function(t){this.u_(t)},t.prototype.d_=function(t){this.l_(t)},t}(),Co={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},ko=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n}return i.__extends(e,t),e.prototype.A_=function(t,e,n,r){return new Promise((function(i,o){var s=new u.XhrIo;s.listenOnce(u.EventType.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case u.ErrorCode.NO_ERROR:var e=s.getResponseJson();f("Connection","XHR received:",JSON.stringify(e)),i(e);break;case u.ErrorCode.TIMEOUT:f("Connection",'RPC "'+t+'" timed out'),o(new P(O.DEADLINE_EXCEEDED,"Request time out"));break;case u.ErrorCode.HTTP_ERROR:var n=s.getStatus();if(f("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(O).indexOf(e)>=0?e:O.UNKNOWN}(r.status);o(new P(a,r.message))}else o(new P(O.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new P(O.UNAVAILABLE,"Connection failed."));break;default:y()}}finally{f("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Ta=function(t,e){var n=[this.T_,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=u.createWebChannelTransport(),i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.s.projectId+"/databases/"+this.s.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.I_(i.initMessageHeaders,e),a.isMobileCordova()||a.isReactNative()||a.isElectron()||a.isIE()||a.isUWP()||a.isBrowserExtension()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");f("Connection","Creating WebChannel: "+o,i);var s=r.createWebChannel(o,i),c=!1,l=!1,h=new So({h_:function(t){l?f("Connection","Not sending because WebChannel is closed:",t):(c||(f("Connection","Opening WebChannel transport."),s.open(),c=!0),f("Connection","WebChannel sending:",t),s.send(t))},a_:function(){return s.close()}}),p=function(t,e){s.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return p(u.WebChannel.EventType.OPEN,(function(){l||f("Connection","WebChannel transport opened.")})),p(u.WebChannel.EventType.CLOSE,(function(){l||(l=!0,f("Connection","WebChannel transport closed"),h.f_())})),p(u.WebChannel.EventType.ERROR,(function(t){l||(l=!0,d("Connection","WebChannel transport errored:",t),h.f_(new P(O.UNAVAILABLE,"The operation could not be completed")))})),p(u.WebChannel.EventType.MESSAGE,(function(t){var e;if(!l){var n=t.data[0];g(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){f("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=Q[t];if(void 0!==e)return Z(e)}(o),u=i.message;void 0===a&&(a=O.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),l=!0,h.f_(new P(a,u)),s.close()}else f("Connection","WebChannel received:",n),h.d_(n)}})),setTimeout((function(){h.__()}),0),h},e}(function(){function t(t){this.w_=t,this.s=t.s;var e=t.ssl?"https":"http";this.T_=e+"://"+t.host,this.E_="projects/"+this.s.projectId+"/databases/"+this.s.database+"/documents"}return t.prototype.va=function(t,e,n,r){var i=this.m_(t,e);f("RestConnection","Sending: ",i,n);var o={};return this.I_(o,r),this.A_(t,i,o,n).then((function(t){return f("RestConnection","Received: ",t),t}),(function(e){throw d("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Sa=function(t,e,n,r){return this.va(t,e,n,r)},t.prototype.I_=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/7.19.0",t["Content-Type"]="text/plain",e)for(var n in e.Mh)e.Mh.hasOwnProperty(n)&&(t[n]=e.Mh[n])},t.prototype.m_=function(t,e){var n=Co[t];return this.T_+"/v1/"+e+":"+n},t}()),No=function(){function t(){var t=this;this.R_=function(){return t.P_()},this.g_=function(){return t.V_()},this.y_=[],this.p_()}return t.prototype.Ka=function(t){this.y_.push(t)},t.prototype.th=function(){window.removeEventListener("online",this.R_),window.removeEventListener("offline",this.g_)},t.prototype.p_=function(){window.addEventListener("online",this.R_),window.addEventListener("offline",this.g_)},t.prototype.P_=function(){f("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.y_;t<e.length;t++)(0,e[t])(0)},t.prototype.V_=function(){f("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.y_;t<e.length;t++)(0,e[t])(1)},t.ks=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Ao=function(){function t(){}return t.prototype.Ka=function(t){},t.prototype.th=function(){},t}();function Oo(t){return new Kt(t,!0)}var Po="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",Ro=function(){function t(){}return t.prototype.initialize=function(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return this.Uu=this.b_(t),this.persistence=this.v_(t),[4,this.persistence.start()];case 1:return e.sent(),this.S_=this.D_(t),this.La=this.C_(t),[2]}}))}))},t.prototype.D_=function(t){return null},t.prototype.C_=function(t){return e=this.persistence,n=new mo,r=t.N_,new _i(e,n,r);var e,n,r},t.prototype.v_=function(t){if(t.k_.F_)throw new P(O.FAILED_PRECONDITION,Po);return new Eo(Io.i_)},t.prototype.b_=function(t){return new Zi},t.prototype.terminate=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.S_&&this.S_.stop(),[4,this.Uu.th()];case 1:return t.sent(),[4,this.persistence.th()];case 2:return t.sent(),[2]}}))}))},t.prototype.clearPersistence=function(t,e){throw new P(O.FAILED_PRECONDITION,Po)},t}(),xo=function(t){function e(e){var n=this;return(n=t.call(this)||this).x_=e,n}return i.__extends(e,t),e.prototype.initialize=function(e){return i.__awaiter(this,void 0,void 0,(function(){var n,r=this;return i.__generator(this,(function(o){switch(o.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return o.sent(),[4,this.x_.initialize(this,e)];case 2:return o.sent(),n=this.x_.fc,this.Uu instanceof Ji?(this.Uu.fc={mu:ao.bind(null,n),Iu:fo.bind(null,n),Au:po.bind(null,n),rh:ho.bind(null,n)},[4,this.Uu.start()]):[3,4];case 3:o.sent(),o.label=4;case 4:return[4,this.persistence.qo((function(t){return i.__awaiter(r,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return[4,uo(this.x_.fc,t)];case 1:return e.sent(),this.S_&&(t&&!this.S_.tr?this.S_.start(this.La):t||this.S_.stop()),[2]}}))}))}))];case 5:return o.sent(),[2]}}))}))},e.prototype.b_=function(t){if(t.k_.F_&&t.k_.synchronizeTabs){var e=ir();if(!Ji.ks(e))throw new P(O.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=bi(t.w_.s,t.w_.persistenceKey);return new Ji(e,t.ei,n,t.clientId,t.N_)}return new Zi},e}(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.initialize=function(e){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n;return i.__generator(this,(function(r){return e=m(t),n=m(e.Ah),[2,e.persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return n.Wr(t)})).then((function(t){e.Ih=t}))]}))}))}(this.La)];case 2:return n.sent(),[2]}}))}))},e.prototype.D_=function(t){var e=this.persistence.dr.Yi;return new pr(e,t.ei)},e.prototype.v_=function(t){var e=bi(t.w_.s,t.w_.persistenceKey),n=Oo(t.w_.s);return new di(t.k_.synchronizeTabs,e,t.clientId,fr.Ui(t.k_.cacheSizeBytes),t.ei,ir(),or(),n,this.Uu,t.k_.Vo)},e.prototype.b_=function(t){return new Zi},e.prototype.clearPersistence=function(t,e){return function(t){return i.__awaiter(this,void 0,void 0,(function(){var e;return i.__generator(this,(function(n){switch(n.label){case 0:return Yn.ks()?(e=t+"main",[4,Yn.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(bi(t,e))},e}(Ro)),Do=function(){function t(){}return t.prototype.initialize=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n=this;return i.__generator(this,(function(r){switch(r.label){case 0:return this.La?[3,3]:(this.La=t.La,this.Uu=t.Uu,this.qa=this.O_(e),this.Bu=this.M_(e),this.fc=this.L_(e),this.q_=this.B_(e),this.Uu.Da=function(t){return n.fc.xu(t,1)},this.Bu.fc=this.fc,[4,this.Bu.start()]);case 1:return r.sent(),[4,this.Bu.Sc(this.fc.el)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},t.prototype.B_=function(t){return new yo(this.fc)},t.prototype.O_=function(t){var e,n=Oo(t.w_.s),r=(e=t.w_,new ko(e));return function(t,e,n){return new qi(t,e,n)}(t.credentials,r,n)},t.prototype.M_=function(t){var e=this;return new Wi(this.La,this.qa,t.ei,(function(t){return e.fc.xu(t,0)}),No.ks()?new No:new Ao)},t.prototype.L_=function(t){return function(t,e,n,r,i,o,s){var a=new oo(t,e,n,r,i,o);return s&&(a.tl=!0),a}(this.La,this.Bu,this.qa,this.Uu,t.N_,t.Qu,!t.k_.F_||!t.k_.synchronizeTabs)},t.prototype.terminate=function(){return this.Bu.th()},t}();function Lo(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Mo=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.U_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.U_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Q_=function(){this.muted=!0},t.prototype.U_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}();function Fo(t,e){if(0!==e.length)throw new P(O.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+es(e.length,"argument")+".")}function Uo(t,e,n){if(e.length!==n)throw new P(O.INVALID_ARGUMENT,"Function "+t+"() requires "+es(n,"argument")+", but was called with "+es(e.length,"argument")+".")}function jo(t,e,n){if(e.length<n)throw new P(O.INVALID_ARGUMENT,"Function "+t+"() requires at least "+es(n,"argument")+", but was called with "+es(e.length,"argument")+".")}function Vo(t,e,n,r){if(e.length<n||e.length>r)throw new P(O.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+es(e.length,"argument")+".")}function qo(t,e,n,r){Ko(t,e,ts(n)+" argument",r)}function Bo(t,e,n,r){void 0!==r&&qo(t,e,n,r)}function Wo(t,e,n,r){Ko(t,e,n+" option",r)}function Ho(t,e,n,r){void 0!==r&&Wo(t,e,n,r)}function zo(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],s=0,a=i;s<a.length;s++){var u=a[s];if(u===r)return;o.push(Yo(u))}var c=Yo(r);throw new P(O.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function Go(t,e,n,r){if(!e.some((function(t){return t===r})))throw new P(O.INVALID_ARGUMENT,"Invalid value "+Yo(r)+" provided to function "+t+"() for its "+ts(n)+" argument. Acceptable values: "+e.join(", "));return r}function Ko(t,e,n,r){if(!("object"===e?Qo(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=Yo(r);throw new P(O.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function Qo(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function Yo(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":y()}function Xo(t,e,n){if(void 0===n)throw new P(O.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+ts(e)+" argument, but it was undefined.")}function $o(t,e,n){k(e,(function(e,r){if(n.indexOf(e)<0)throw new P(O.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function Jo(t,e,n,r){var i=Yo(r);return new P(O.INVALID_ARGUMENT,"Function "+t+"() requires its "+ts(n)+" argument to be a "+e+", but it was: "+i)}function Zo(t,e,n){if(n<=0)throw new P(O.INVALID_ARGUMENT,"Function "+t+"() requires its "+ts(e)+" argument to be a positive number, but it was: "+n+".")}function ts(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function es(t,e){return t+" "+e+(1===t?"":"s")}function ns(){if("undefined"==typeof Uint8Array)throw new P(O.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function rs(){if("undefined"==typeof atob)throw new P(O.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var is=function(){function t(t){rs(),this.W_=t}return t.fromBase64String=function(e){Uo("Blob.fromBase64String",arguments,1),qo("Blob.fromBase64String","string",1,e),rs();try{return new t(K.fromBase64String(e))}catch(e){throw new P(O.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},t.fromUint8Array=function(e){if(Uo("Blob.fromUint8Array",arguments,1),ns(),!(e instanceof Uint8Array))throw Jo("Blob.fromUint8Array","Uint8Array",1,e);return new t(K.fromUint8Array(e))},t.prototype.toBase64=function(){return Uo("Blob.toBase64",arguments,0),rs(),this.W_.toBase64()},t.prototype.toUint8Array=function(){return Uo("Blob.toUint8Array",arguments,0),ns(),this.W_.toUint8Array()},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.W_.isEqual(t.W_)},t}(),os=function(t){!function(t,e,n,r){if(!(e instanceof Array)||e.length<1)throw new P(O.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+es(1,"element")+".")}(0,t);for(var e=0;e<t.length;++e)if(qo("FieldPath","string",e,t[e]),0===t[e].length)throw new P(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.j_=new F(t)},ss=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,e)||this}return i.__extends(e,t),e.documentId=function(){return new e(F.L().F())},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Jo("isEqual","FieldPath",1,t);return this.j_.isEqual(t.j_)},e}(os),as=new RegExp("[~\\*/\\[\\]]"),us=function(){this.K_=this},cs=function(t){function e(e){var n=this;return(n=t.call(this)||this).G_=e,n}return i.__extends(e,t),e.prototype.z_=function(t){if(2!==t.H_)throw 1===t.H_?t.Y_(this.G_+"() can only appear at the top level of your update data"):t.Y_(this.G_+"() cannot be used with set() unless you pass {merge:true}");return t.qe.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(us);function ls(t,e,n){return new Ts({H_:3,J_:e.settings.J_,methodName:t.G_,X_:n},e.s,e.serializer,e.ignoreUndefinedProperties)}var hs=function(t){function e(e){var n=this;return(n=t.call(this)||this).G_=e,n}return i.__extends(e,t),e.prototype.z_=function(t){return new Le(t.path,new Ce)},e.prototype.isEqual=function(t){return t instanceof e},e}(us),fs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).G_=e,r.Z_=n,r}return i.__extends(e,t),e.prototype.z_=function(t){var e=ls(this,t,!0),n=this.Z_.map((function(t){return As(t,e)})),r=new ke(n);return new Le(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(us),ps=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).G_=e,r.Z_=n,r}return i.__extends(e,t),e.prototype.z_=function(t){var e=ls(this,t,!0),n=this.Z_.map((function(t){return As(t,e)})),r=new Ae(n);return new Le(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(us),ds=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).G_=e,r.tf=n,r}return i.__extends(e,t),e.prototype.z_=function(t){var e=new Pe(t.serializer,Xt(t.serializer,this.tf));return new Le(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(us),vs=function(t){function e(){return t.call(this)||this}return i.__extends(e,t),e.delete=function(){return Fo("FieldValue.delete",arguments),new ys(new cs("FieldValue.delete"))},e.serverTimestamp=function(){return Fo("FieldValue.serverTimestamp",arguments),new ys(new hs("FieldValue.serverTimestamp"))},e.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return jo("FieldValue.arrayUnion",arguments,1),new ys(new fs("FieldValue.arrayUnion",t))},e.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return jo("FieldValue.arrayRemove",arguments,1),new ys(new ps("FieldValue.arrayRemove",t))},e.increment=function(t){return qo("FieldValue.increment","number",1,t),Uo("FieldValue.increment",arguments,1),new ys(new ds("FieldValue.increment",t))},e}(us),ys=function(t){function e(e){var n=this;return(n=t.call(this)||this).K_=e,n.G_=e.G_,n}return i.__extends(e,t),e.prototype.z_=function(t){return this.K_.z_(t)},e.prototype.isEqual=function(t){return t instanceof e&&this.K_.isEqual(t.K_)},e}(vs),gs=function(){function t(t,e){if(Uo("GeoPoint",arguments,2),qo("GeoPoint","number",1,t),qo("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new P(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new P(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.ef=t,this.nf=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.ef},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.nf},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.ef===t.ef&&this.nf===t.nf},t.prototype.toJSON=function(){return{latitude:this.ef,longitude:this.nf}},t.prototype.T=function(t){return w(this.ef,t.ef)||w(this.nf,t.nf)},t}(),ms=/^__.*__$/,bs=function(t,e,n){this.sf=t,this.if=e,this.rf=n},_s=function(){function t(t,e,n){this.data=t,this.qe=e,this.fieldTransforms=n}return t.prototype.hf=function(t,e){var n=[];return null!==this.qe?n.push(new Ge(t,this.data,this.qe,e)):n.push(new ze(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new Qe(t,this.fieldTransforms)),n},t}(),ws=function(){function t(t,e,n){this.data=t,this.qe=e,this.fieldTransforms=n}return t.prototype.hf=function(t,e){var n=[new Ge(t,this.data,this.qe,e)];return this.fieldTransforms.length>0&&n.push(new Qe(t,this.fieldTransforms)),n},t}();function Es(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw y()}}var Ts=function(){function t(t,e,n,r,i,o){this.settings=t,this.s=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.af(),this.fieldTransforms=i||[],this.qe=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"H_",{get:function(){return this.settings.H_},enumerable:!1,configurable:!0}),t.prototype.cf=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.s,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.qe)},t.prototype.uf=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.cf({path:n,X_:!1});return r.lf(t),r},t.prototype._f=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.cf({path:n,X_:!1});return r.af(),r},t.prototype.ff=function(t){return this.cf({path:void 0,X_:!0})},t.prototype.Y_=function(t){return Ls(t,this.settings.methodName,this.settings.df||!1,this.path,this.settings.J_)},t.prototype.contains=function(t){return void 0!==this.qe.find((function(e){return t.D(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.D(e.field)}))},t.prototype.af=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.lf(this.path.get(t))},t.prototype.lf=function(t){if(0===t.length)throw this.Y_("Document fields must not be empty");if(Es(this.H_)&&ms.test(t))throw this.Y_('Document fields cannot begin and end with "__"')},t}(),Is=function(){function t(t,e,n){this.s=t,this.ignoreUndefinedProperties=e,this.serializer=n||Oo(t)}return t.prototype.wf=function(t,e,n,r){return void 0===r&&(r=!1),new Ts({H_:t,methodName:e,J_:n,path:F.$(),X_:!1,df:r},this.s,this.serializer,this.ignoreUndefinedProperties)},t}();function Ss(t,e,n,r,i,o){void 0===o&&(o={});var s=t.wf(o.merge||o.mergeFields?2:0,e,n,i);Rs("Data must be an object, but it was:",s,r);var a,u,c=Os(r,s);if(o.merge)a=new De(s.qe),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var p=f[h],d=void 0;if(p instanceof os)d=p.j_;else{if("string"!=typeof p)throw y();d=Ds(e,p,n)}if(!s.contains(d))throw new P(O.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Ms(l,d)||l.push(d)}a=new De(l),u=s.fieldTransforms.filter((function(t){return a.Ke(t.field)}))}else a=null,u=s.fieldTransforms;return new _s(new Ze(c),a,u)}function Cs(t,e,n,r){var i=t.wf(1,e,n);Rs("Data must be an object, but it was:",i,r);var o=[],s=new tn;k(r,(function(t,r){var a=Ds(e,t,n),u=i._f(a);if(r instanceof us&&r.K_ instanceof cs)o.push(a);else{var c=As(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new De(o);return new ws(s.ze(),a,i.fieldTransforms)}function ks(t,e,n,r,i,o){var s=t.wf(1,e,n),a=[xs(e,r,n)],u=[i];if(o.length%2!=0)throw new P(O.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(xs(e,o[c])),u.push(o[c+1]);for(var l=[],h=new tn,f=a.length-1;f>=0;--f)if(!Ms(l,a[f])){var p=a[f],d=u[f],v=s._f(p);if(d instanceof us&&d.K_ instanceof cs)l.push(p);else{var y=As(d,v);null!=y&&(l.push(p),h.set(p,y))}}var g=new De(l);return new ws(h.ze(),g,s.fieldTransforms)}function Ns(t,e,n,r){return void 0===r&&(r=!1),As(n,t.wf(r?4:3,e))}function As(t,e){if(Ps(t))return Rs("Unsupported field value:",e,t),Os(t,e);if(t instanceof us)return function(t,e){if(!Es(e.H_))throw e.Y_(t.G_+"() can only be used with update() and set()");if(!e.path)throw e.Y_(t.G_+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.qe.push(e.path),t instanceof Array){if(e.settings.X_&&4!==e.H_)throw e.Y_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=As(o[i],e.ff(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Xt(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=R.fromDate(t);return{timestampValue:$t(e.serializer,n)}}if(t instanceof R){var r=new R(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:$t(e.serializer,r)}}if(t instanceof gs)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof is)return{bytesValue:Jt(e.serializer,t)};if(t instanceof bs){var i=e.s,o=t.sf;if(!o.isEqual(i))throw e.Y_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:ee(t.sf||e.s,t.if.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.Y_("Unsupported field value: "+Yo(t))}(t,e)}function Os(t,e){var n={};return N(t)?e.path&&e.path.length>0&&e.qe.push(e.path):k(t,(function(t,r){var i=As(r,e.uf(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Ps(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof R||t instanceof gs||t instanceof is||t instanceof bs||t instanceof us)}function Rs(t,e,n){if(!Ps(n)||!Qo(n)){var r=Yo(n);throw"an object"===r?e.Y_(t+" a custom object"):e.Y_(t+" "+r)}}function xs(t,e,n){if(e instanceof os)return e.j_;if("string"==typeof e)return Ds(t,e);throw Ls("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}function Ds(t,e,n){try{return function(t){if(t.search(as)>=0)throw new P(O.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(ss.bind.apply(ss,i.__spreadArrays([void 0],t.split("."))))}catch(i){throw new P(O.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).j_}catch(e){throw Ls((r=e)instanceof Error?r.message:r.toString(),t,!1,void 0,n)}var r}function Ls(t,e,n,r,i){var o=r&&!r._(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new P(O.INVALID_ARGUMENT,(a+=". ")+t+u)}function Ms(t,e){return t.some((function(t){return t.isEqual(e)}))}var Fs=function(){function t(t){this.qa=t,this.Tf=new Map,this.mutations=[],this.Ef=!1,this.mf=null,this.If=new Set}return t.prototype.Af=function(t){return i.__awaiter(this,void 0,void 0,(function(){var e,n=this;return i.__generator(this,(function(r){switch(r.label){case 0:if(this.Rf(),this.mutations.length>0)throw new P(O.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,s,a,u;return i.__generator(this,(function(i){switch(i.label){case 0:return n=m(t),r=ae(n.serializer)+"/documents",o={documents:e.map((function(t){return re(n.serializer,t)}))},[4,n.Sa("BatchGetDocuments",r,o)];case 1:return s=i.sent(),a=new Map,s.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){g(!!e.found),e.found.name,e.found.updateTime;var n=ie(t,e.found.name),r=te(e.found.updateTime),i=new Ze({mapValue:{fields:e.found.fields}});return new rn(n,r,i,{})}(t,e):"missing"in e?function(t,e){g(!!e.missing),g(!!e.readTime);var n=ie(t,e.missing),r=te(e.readTime);return new on(n,r)}(t,e):y()}(n.serializer,t);a.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=a.get(t.toString());g(!!e),u.push(e)})),u)]}}))}))}(this.qa,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof on||t instanceof rn?n.Pf(t):y()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.hf(t,this.Qe(t))),this.If.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.hf(t,this.gf(t)))}catch(t){this.mf=t}this.If.add(t.toString())},t.prototype.delete=function(t){this.write([new $e(t,this.Qe(t))]),this.If.add(t.toString())},t.prototype.commit=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e=this;return i.__generator(this,(function(n){switch(n.label){case 0:if(this.Rf(),this.mf)throw this.mf;return t=this.Tf,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=U.B(n);e.mutations.push(new Je(r,e.Qe(r)))})),[4,function(t,e){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o;return i.__generator(this,(function(i){switch(i.label){case 0:return n=m(t),r=ae(n.serializer)+"/documents",o={writes:e.map((function(t){return le(n.serializer,t)}))},[4,n.va("Commit",r,o)];case 1:return i.sent(),[2]}}))}))}(this.qa,this.mutations)];case 1:return n.sent(),this.Ef=!0,[2]}}))}))},t.prototype.Pf=function(t){var e;if(t instanceof rn)e=t.version;else{if(!(t instanceof on))throw y();e=x.min()}var n=this.Tf.get(t.key.toString());if(n){if(!e.isEqual(n))throw new P(O.ABORTED,"Document version changed between two reads.")}else this.Tf.set(t.key.toString(),e)},t.prototype.Qe=function(t){var e=this.Tf.get(t.toString());return!this.If.has(t.toString())&&e?Fe.updateTime(e):Fe.We()},t.prototype.gf=function(t){var e=this.Tf.get(t.toString());if(!this.If.has(t.toString())&&e){if(e.isEqual(x.min()))throw new P(O.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Fe.updateTime(e)}return Fe.exists(!0)},t.prototype.write=function(t){this.Rf(),this.mutations=this.mutations.concat(t)},t.prototype.Rf=function(){},t}(),Us=function(){function t(t,e,n,r){this.ei=t,this.qa=e,this.updateFunction=n,this.ii=r,this.Vf=5,this.Ti=new Qn(this.ei,"transaction_retry")}return t.prototype.run=function(){this.yf()},t.prototype.yf=function(){var t=this;this.Ti.bs((function(){return i.__awaiter(t,void 0,void 0,(function(){var t,e,n=this;return i.__generator(this,(function(r){return t=new Fs(this.qa),(e=this.pf(t))&&e.then((function(e){n.ei.ai((function(){return t.commit().then((function(){n.ii.resolve(e)})).catch((function(t){n.bf(t)}))}))})).catch((function(t){n.bf(t)})),[2]}))}))}))},t.prototype.pf=function(t){try{var e=this.updateFunction(t);return!j(e)&&e.catch&&e.then?e:(this.ii.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.ii.reject(t),null}},t.prototype.bf=function(t){var e=this;this.Vf>0&&this.vf(t)?(this.Vf-=1,this.ei.ai((function(){return e.yf(),Promise.resolve()}))):this.ii.reject(t)},t.prototype.vf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!J(e)}return!1},t}(),js=function(){function t(t,e){this.credentials=t,this.ei=e,this.clientId=_.t(),this.Sf=new Kn}return t.prototype.start=function(t,e,n,r){var i=this;this.Df(),this.w_=t;var o=new Kn,s=!1;return this.credentials.Bh((function(t){if(!s)return s=!0,f("FirestoreClient","Initializing. user=",t.uid),i.Cf(e,n,r,t,o).then(i.Sf.resolve,i.Sf.reject);i.ei.gi((function(){return i.Bu.vc(t)}))})),this.ei.ai((function(){return i.Sf.promise})),o.promise},t.prototype.enableNetwork=function(){var t=this;return this.Df(),this.ei.enqueue((function(){return t.persistence.Uo(!0),t.Bu.enableNetwork()}))},t.prototype.Cf=function(t,e,n,r,o){return i.__awaiter(this,void 0,void 0,(function(){var s,a,u=this;return i.__generator(this,(function(c){switch(c.label){case 0:return c.trys.push([0,3,,4]),s={ei:this.ei,w_:this.w_,clientId:this.clientId,credentials:this.credentials,N_:r,Qu:100,k_:n},[4,t.initialize(s)];case 1:return c.sent(),[4,e.initialize(t,s)];case 2:return c.sent(),this.persistence=t.persistence,this.Uu=t.Uu,this.La=t.La,this.S_=t.S_,this.qa=e.qa,this.Bu=e.Bu,this.fc=e.fc,this.Nf=e.q_,this.persistence.Bo((function(){return i.__awaiter(u,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))})),o.resolve(),[3,4];case 3:if(a=c.sent(),o.reject(a),!this.Ff(a))throw a;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),this.Cf(new Ro,new Do,{F_:!1},r,o))];case 4:return[2]}}))}))},t.prototype.Ff=function(t){return"FirebaseError"===t.name?t.code===O.FAILED_PRECONDITION||t.code===O.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.Df=function(){if(this.ei.mi)throw new P(O.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.disableNetwork=function(){var t=this;return this.Df(),this.ei.enqueue((function(){return t.persistence.Uo(!1),t.Bu.disableNetwork()}))},t.prototype.terminate=function(){var t=this;this.ei.Pi();var e=new Kn;return this.ei.Ii((function(){return i.__awaiter(t,void 0,void 0,(function(){var t,n;return i.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),this.S_&&this.S_.stop(),[4,this.Bu.th()];case 1:return r.sent(),[4,this.Uu.th()];case 2:return r.sent(),[4,this.persistence.th()];case 3:return r.sent(),this.credentials.Uh(),e.resolve(),[3,5];case 4:return t=r.sent(),n=ur(t,"Failed to shutdown persistence"),e.reject(n),[3,5];case 5:return[2]}}))}))})),e.promise},t.prototype.waitForPendingWrites=function(){var t=this;this.Df();var e=new Kn;return this.ei.ai((function(){return t.fc._l(e)})),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.Df();var i=new Mo(n),o=new go(t,i,e);return this.ei.ai((function(){return r.Nf.listen(o)})),function(){i.Q_(),r.ei.ai((function(){return r.Nf.lc(o)}))}},t.prototype.kf=function(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return this.Df(),[4,this.Sf.promise];case 1:return[2,(e.sent(),function(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var r,o=this;return i.__generator(this,(function(s){switch(s.label){case 0:return r=new Kn,[4,t.enqueue((function(){return i.__awaiter(o,void 0,void 0,(function(){var t,o,s;return i.__generator(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,function(t,e){var n=m(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Rh.Hn(t,e)}))}(e,n)];case 1:return(t=i.sent())instanceof rn?r.resolve(t):t instanceof on?r.resolve(null):r.reject(new P(O.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return o=i.sent(),s=ur(o,"Failed to get document '"+n+" from cache"),r.reject(s),[3,3];case 3:return[2]}}))}))}))];case 1:return[2,(s.sent(),r.promise)]}}))}))}(this.ei,this.La,t))]}}))}))},t.prototype.$f=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(n){switch(n.label){case 0:return this.Df(),[4,this.Sf.promise];case 1:return[2,(n.sent(),function(t,e,n,r){var i=new Kn,o=Vs(t,e,ln(n.path),{includeMetadataChanges:!0,$l:!0},{next:function(t){o();var e=t.docs.has(n);!e&&t.fromCache?i.reject(new P(O.UNAVAILABLE,"Failed to get document because the client is offline.")):e&&t.fromCache&&r&&"server"===r.source?i.reject(new P(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(t)},error:function(t){return i.reject(t)}});return i.promise}(this.ei,this.Nf,t,e))]}}))}))},t.prototype.xf=function(t){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){switch(e.label){case 0:return this.Df(),[4,this.Sf.promise];case 1:return[2,(e.sent(),function(t,e,n){return i.__awaiter(this,void 0,void 0,(function(){var r,o=this;return i.__generator(this,(function(s){switch(s.label){case 0:return r=new Kn,[4,t.enqueue((function(){return i.__awaiter(o,void 0,void 0,(function(){var t,o,s,a,u,c;return i.__generator(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,ki(e,n,!0)];case 1:return t=i.sent(),o=new no(n,t.gh),s=o.Su(t.documents),a=o.Un(s,!1),r.resolve(a.snapshot),[3,3];case 2:return u=i.sent(),c=ur(u,"Failed to execute query '"+n+" against cache"),r.reject(c),[3,3];case 3:return[2]}}))}))}))];case 1:return[2,(s.sent(),r.promise)]}}))}))}(this.ei,this.La,t))]}}))}))},t.prototype.Of=function(t,e){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(n){switch(n.label){case 0:return this.Df(),[4,this.Sf.promise];case 1:return[2,(n.sent(),function(t,e,n,r){var i=new Kn,o=Vs(t,e,n,{includeMetadataChanges:!0,$l:!0},{next:function(t){o(),t.fromCache&&r&&"server"===r.source?i.reject(new P(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(t)},error:function(t){return i.reject(t)}});return i.promise}(this.ei,this.Nf,t,e))]}}))}))},t.prototype.write=function(t){var e=this;this.Df();var n=new Kn;return this.ei.ai((function(){return e.fc.write(t,n)})),n.promise},t.prototype.s=function(){return this.w_.s},t.prototype.bl=function(t){var e=this;this.Df();var n=new Mo(t);return this.ei.ai((function(){return i.__awaiter(e,void 0,void 0,(function(){return i.__generator(this,(function(t){return[2,this.Nf.bl(n)]}))}))})),function(){n.Q_(),e.ei.ai((function(){return i.__awaiter(e,void 0,void 0,(function(){return i.__generator(this,(function(t){return[2,this.Nf.vl(n)]}))}))}))}},Object.defineProperty(t.prototype,"Mf",{get:function(){return this.ei.mi},enumerable:!1,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.Df();var n=new Kn;return this.ei.ai((function(){return new Us(e.ei,e.qa,t,n).run(),Promise.resolve()})),n.promise},t}();function Vs(t,e,n,r,i){var o=new Mo(i),s=new go(n,o,r);return t.ai((function(){return e.listen(s)})),function(){o.Q_(),t.ai((function(){return e.lc(s)}))}}var qs=function(){function t(t,e,n,r){this.s=t,this.timestampsInSnapshots=e,this.Lf=n,this.qf=r}return t.prototype.Bf=function(t){switch(Ot(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ft(t.integerValue||t.doubleValue);case 3:return this.Uf(t.timestampValue);case 4:return this.Qf(t);case 5:return t.stringValue;case 6:return new is(Ut(t.bytesValue));case 7:return this.Wf(t.referenceValue);case 8:return this.jf(t.geoPointValue);case 9:return this.Kf(t.arrayValue);case 10:return this.Gf(t.mapValue);default:throw y()}},t.prototype.Gf=function(t){var e=this,n={};return k(t.fields||{},(function(t,r){n[t]=e.Bf(r)})),n},t.prototype.jf=function(t){return new gs(Ft(t.latitude),Ft(t.longitude))},t.prototype.Kf=function(t){var e=this;return(t.values||[]).map((function(t){return e.Bf(t)}))},t.prototype.Qf=function(t){switch(this.Lf){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return kt(n)?t(n):n}(t);return null==e?null:this.Bf(e);case"estimate":return this.Uf(Nt(t));default:return null}},t.prototype.Uf=function(t){var e=Mt(t),n=new R(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},t.prototype.Wf=function(t){var e=L.k(t);g(we(e));var n=new S(e.get(1),e.get(3)),r=new U(e.V(5));return n.isEqual(this.s)||p("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.s.projectId+"/"+this.s.database+") instead."),this.qf(r)},t}(),Bs=fr.ji,Ws=function(){function t(t){var e,n,r,i;if(void 0===t.host){if(void 0!==t.ssl)throw new P(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else Wo("settings","non-empty string","host",t.host),this.host=t.host,Ho("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if($o("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","ignoreUndefinedProperties"]),Ho("settings","object","credentials",t.credentials),this.credentials=t.credentials,Ho("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),Ho("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?p("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&p("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(r=t.ignoreUndefinedProperties)&&void 0!==r&&r,Ho("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=fr.Gi;else{if(t.cacheSizeBytes!==Bs&&t.cacheSizeBytes<fr.Ki)throw new P(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+fr.Ki);this.cacheSizeBytes=t.cacheSizeBytes}Ho("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=null!==(i=t.experimentalForceLongPolling)&&void 0!==i&&i}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Hs=function(){function t(e,n,r,o){var s=this;if(void 0===r&&(r=new Ro),void 0===o&&(o=new Do),this.zf=r,this.Hf=o,this.Yf=null,this.Jf=new ar,this.INTERNAL={delete:function(){return i.__awaiter(s,void 0,void 0,(function(){return i.__generator(this,(function(t){switch(t.label){case 0:return this.Xf(),[4,this.Zf.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var a=e;this.Yf=a,this.sf=t.td(a),this.ed=a.name,this.nd=new Li(n)}else{var u=e;if(!u.projectId)throw new P(O.INVALID_ARGUMENT,"Must provide projectId");this.sf=new S(u.projectId,u.database),this.ed="[DEFAULT]",this.nd=new Di}this.sd=new Ws({})}return Object.defineProperty(t.prototype,"rd",{get:function(){return this.od||(this.od=new Is(this.sf,this.sd.ignoreUndefinedProperties)),this.od},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){Uo("Firestore.settings",arguments,1),qo("Firestore.settings","object",1,t);var e=new Ws(t);if(this.Zf&&!this.sd.isEqual(e))throw new P(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.sd=e,void 0!==e.credentials&&(this.nd=function(t){if(!t)return new Di;switch(t.type){case"gapi":var e=t.hd;return g(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Fi(e,t.zh||"0");case"provider":return t.hd;default:throw new P(O.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.Xf(),this.Zf.enableNetwork()},t.prototype.disableNetwork=function(){return this.Xf(),this.Zf.disableNetwork()},t.prototype.enablePersistence=function(t){var e,n;if(this.Zf)throw new P(O.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1,i=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&p("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n,i=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,r&&i))throw new P(O.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.ad(this.zf,this.Hf,{F_:!0,cacheSizeBytes:this.sd.cacheSizeBytes,synchronizeTabs:r,Vo:i})},t.prototype.clearPersistence=function(){return i.__awaiter(this,void 0,void 0,(function(){var t,e=this;return i.__generator(this,(function(n){if(void 0!==this.Zf&&!this.Zf.Mf)throw new P(O.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return t=new Kn,[2,(this.Jf.Ii((function(){return i.__awaiter(e,void 0,void 0,(function(){var e;return i.__generator(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.zf.clearPersistence(this.sf,this.ed)];case 1:return n.sent(),t.resolve(),[3,3];case 2:return e=n.sent(),t.reject(e),[3,3];case 3:return[2]}}))}))})),t.promise)]}))}))},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"ud",{get:function(){return this.Xf(),this.Zf.Mf},enumerable:!1,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.Xf(),this.Zf.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){if(this.Xf(),Lo(t))return this.Zf.bl(t);qo("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.Zf.bl(e)},t.prototype.Xf=function(){return this.Zf||this.ad(new Ro,new Do,{F_:!1}),this.Zf},t.prototype.ld=function(){return new I(this.sf,this.ed,this.sd.host,this.sd.ssl,this.sd.forceLongPolling)},t.prototype.ad=function(t,e,n){var r=this.ld();return this.Zf=new js(this.nd,this.Jf),this.Zf.start(r,t,e,n)},t.td=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new P(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;if(!n||"string"!=typeof n)throw new P(O.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new S(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Yf)throw new P(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Yf},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){return Uo("Firestore.collection",arguments,1),qo("Firestore.collection","non-empty string",1,t),this.Xf(),new oa(L.k(t),this,null)},t.prototype.doc=function(t){return Uo("Firestore.doc",arguments,1),qo("Firestore.doc","non-empty string",1,t),this.Xf(),Ks._d(L.k(t),this,null)},t.prototype.collectionGroup=function(t){if(Uo("Firestore.collectionGroup",arguments,1),qo("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new P(O.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.Xf(),new ra(function(t){return new un(L.$(),t)}(t),this,null)},t.prototype.runTransaction=function(t){var e=this;return Uo("Firestore.runTransaction",arguments,1),qo("Firestore.runTransaction","function",1,t),this.Xf().transaction((function(n){return t(new zs(e,n))}))},t.prototype.batch=function(){return this.Xf(),new Gs(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(h()){case s.LogLevel.DEBUG:return"debug";case s.LogLevel.ERROR:return"error";case s.LogLevel.SILENT:return"silent";case s.LogLevel.WARN:return"warn";case s.LogLevel.INFO:return"info";case s.LogLevel.VERBOSE:return"verbose";default:return"error"}},enumerable:!1,configurable:!0}),t.setLogLevel=function(t){var e;Uo("Firestore.setLogLevel",arguments,1),Go("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),e=t,l.setLogLevel(e)},t.prototype.fd=function(){return this.sd.timestampsInSnapshots},t}(),zs=function(){function t(t,e){this.dd=t,this.wd=e}return t.prototype.get=function(t){var e=this;Uo("Transaction.get",arguments,1);var n=ca("Transaction.get",t,this.dd);return this.wd.Af([n.if]).then((function(t){if(!t||1!==t.length)return y();var r=t[0];if(r instanceof on)return new Ys(e.dd,n.if,null,!1,!1,n.rf);if(r instanceof rn)return new Ys(e.dd,n.if,r,!1,!1,n.rf);throw y()}))},t.prototype.set=function(t,e,n){Vo("Transaction.set",arguments,2,3);var r=ca("Transaction.set",t,this.dd);n=sa("Transaction.set",n);var i=ha(r.rf,e,n),o=Ss(this.dd.rd,"Transaction.set",r.if,i,null!==r.rf,n);return this.wd.set(r.if,o),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return"string"==typeof e||e instanceof ss?(jo("Transaction.update",arguments,3),r=ca("Transaction.update",t,this.dd),i=ks(this.dd.rd,"Transaction.update",r.if,e,n,o)):(Uo("Transaction.update",arguments,2),r=ca("Transaction.update",t,this.dd),i=Cs(this.dd.rd,"Transaction.update",r.if,e)),this.wd.update(r.if,i),this},t.prototype.delete=function(t){Uo("Transaction.delete",arguments,1);var e=ca("Transaction.delete",t,this.dd);return this.wd.delete(e.if),this},t}(),Gs=function(){function t(t){this.dd=t,this.Td=[],this.Ed=!1}return t.prototype.set=function(t,e,n){Vo("WriteBatch.set",arguments,2,3),this.md();var r=ca("WriteBatch.set",t,this.dd);n=sa("WriteBatch.set",n);var i=ha(r.rf,e,n),o=Ss(this.dd.rd,"WriteBatch.set",r.if,i,null!==r.rf,n);return this.Td=this.Td.concat(o.hf(r.if,Fe.We())),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.md(),"string"==typeof e||e instanceof ss?(jo("WriteBatch.update",arguments,3),r=ca("WriteBatch.update",t,this.dd),i=ks(this.dd.rd,"WriteBatch.update",r.if,e,n,o)):(Uo("WriteBatch.update",arguments,2),r=ca("WriteBatch.update",t,this.dd),i=Cs(this.dd.rd,"WriteBatch.update",r.if,e)),this.Td=this.Td.concat(i.hf(r.if,Fe.exists(!0))),this},t.prototype.delete=function(t){Uo("WriteBatch.delete",arguments,1),this.md();var e=ca("WriteBatch.delete",t,this.dd);return this.Td=this.Td.concat(new $e(e.if,Fe.We())),this},t.prototype.commit=function(){return this.md(),this.Ed=!0,this.Td.length>0?this.dd.Xf().write(this.Td):Promise.resolve()},t.prototype.md=function(){if(this.Ed)throw new P(O.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Ks=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.sf,e,r)||this).if=e,i.firestore=n,i.rf=r,i.Zf=i.firestore.Xf(),i}return i.__extends(e,t),e._d=function(t,n,r){if(t.length%2!=0)throw new P(O.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.F()+" has "+t.length);return new e(new U(t),n,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this.if.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new oa(this.if.path.p(),this.firestore,this.rf)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.if.path.F()},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){if(Uo("DocumentReference.collection",arguments,1),qo("DocumentReference.collection","non-empty string",1,t),!t)throw new P(O.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=L.k(t);return new oa(this.if.path.child(e),this.firestore,null)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Jo("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.if.isEqual(t.if)&&this.rf===t.rf},e.prototype.set=function(t,e){Vo("DocumentReference.set",arguments,1,2),e=sa("DocumentReference.set",e);var n=ha(this.rf,t,e),r=Ss(this.firestore.rd,"DocumentReference.set",this.if,n,null!==this.rf,e);return this.Zf.write(r.hf(this.if,Fe.We()))},e.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof ss?(jo("DocumentReference.update",arguments,2),n=ks(this.firestore.rd,"DocumentReference.update",this.if,t,e,r)):(Uo("DocumentReference.update",arguments,1),n=Cs(this.firestore.rd,"DocumentReference.update",this.if,t)),this.Zf.write(n.hf(this.if,Fe.exists(!0)))},e.prototype.delete=function(){return Uo("DocumentReference.delete",arguments,0),this.Zf.write([new $e(this.if,Fe.We())])},e.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];Vo("DocumentReference.onSnapshot",arguments,1,4);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Lo(i[a])||($o("DocumentReference.onSnapshot",s=i[a],["includeMetadataChanges"]),Ho("DocumentReference.onSnapshot","boolean","includeMetadataChanges",s.includeMetadataChanges),a++);var u={includeMetadataChanges:s.includeMetadataChanges};if(Lo(i[a])){var c=i[a];i[a]=null===(t=c.next)||void 0===t?void 0:t.bind(c),i[a+1]=null===(e=c.error)||void 0===e?void 0:e.bind(c),i[a+2]=null===(n=c.complete)||void 0===n?void 0:n.bind(c)}else qo("DocumentReference.onSnapshot","function",a,i[a]),Bo("DocumentReference.onSnapshot","function",a+1,i[a+1]),Bo("DocumentReference.onSnapshot","function",a+2,i[a+2]);var l={next:function(t){i[a]&&i[a](r.Id(t))},error:i[a+1],complete:i[a+2]};return this.Zf.listen(ln(this.if.path),u,l)},e.prototype.get=function(t){var e=this;Vo("DocumentReference.get",arguments,0,1),ua("DocumentReference.get",t);var n=this.firestore.Xf();return t&&"cache"===t.source?n.kf(this.if).then((function(t){return new Ys(e.firestore,e.if,t,!0,t instanceof rn&&t.Ge,e.rf)})):n.$f(this.if,t).then((function(t){return e.Id(t)}))},e.prototype.withConverter=function(t){return new e(this.if,this.firestore,t)},e.prototype.Id=function(t){var e=t.docs.get(this.if);return new Ys(this.firestore,this.if,e,t.fromCache,t.hasPendingWrites,this.rf)},e}(bs),Qs=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Ys=function(){function t(t,e,n,r,i,o){this.dd=t,this.if=e,this.Ad=n,this.Rd=r,this.Pd=i,this.rf=o}return t.prototype.data=function(t){var e=this;if(Vo("DocumentSnapshot.data",arguments,0,1),t=aa("DocumentSnapshot.data",t),this.Ad){if(this.rf){var n=new Xs(this.dd,this.if,this.Ad,this.Rd,this.Pd,null);return this.rf.fromFirestore(n,t)}return new qs(this.dd.sf,this.dd.fd(),t.serverTimestamps||"none",(function(t){return new Ks(t,e.dd,null)})).Bf(this.Ad.tn())}},t.prototype.get=function(t,e){var n=this;if(Vo("DocumentSnapshot.get",arguments,1,2),e=aa("DocumentSnapshot.get",e),this.Ad){var r=this.Ad.data().field(xs("DocumentSnapshot.get",t,this.if));if(null!==r)return new qs(this.dd.sf,this.dd.fd(),e.serverTimestamps||"none",(function(t){return new Ks(t,n.dd,n.rf)})).Bf(r)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.if.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ks(this.if,this.dd,this.rf)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.Ad},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new Qs(this.Pd,this.Rd)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw Jo("isEqual","DocumentSnapshot",1,e);return this.dd===e.dd&&this.Rd===e.Rd&&this.if.isEqual(e.if)&&(null===this.Ad?null===e.Ad:this.Ad.isEqual(e.Ad))&&this.rf===e.rf},t}(),Xs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.__extends(e,t),e.prototype.data=function(e){return t.prototype.data.call(this,e)},e}(Ys);function $s(t,e,n,r,i,o,s){var a;if(i.M()){if("array-contains"===o||"array-contains-any"===o)throw new P(O.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){ta(s,o);for(var u=[],c=0,l=s;c<l.length;c++){var h=l[c];u.push(Zs(r,t,h))}a={arrayValue:{values:u}}}else a=Zs(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||ta(s,o),a=Ns(n,e,s,"in"===o||"not-in"===o);var f=En.create(i,o,a);return function(t,e){if(e._n()){var n=t.ln();if(null!==n&&!n.isEqual(e.field))throw new P(O.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=t.un();null!==r&&ea(t,e.field,r)}var i=t.fn(function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new P(O.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new P(O.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}function Js(t,e,n){if(null!==t.startAt)throw new P(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new P(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ln(e,n);return function(t,e){if(null===t.un()){var n=t.ln();null!==n&&ea(t,n,e.field)}}(t,r),r}function Zs(t,e,n){if("string"==typeof n){if(""===n)throw new P(O.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!hn(e)&&-1!==n.indexOf("/"))throw new P(O.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(L.k(n));if(!U.j(r))throw new P(O.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return jt(t,new U(r))}if(n instanceof bs)return jt(t,n.if);throw new P(O.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Yo(n)+".")}function ta(t,e){if(!Array.isArray(t)||0===t.length)throw new P(O.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new P(O.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if("in"===e||"array-contains-any"===e){if(t.indexOf(null)>=0)throw new P(O.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new P(O.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")}}function ea(t,e,n){if(!n.isEqual(e))throw new P(O.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function na(t){if(t.cn()&&0===t.en.length)throw new P(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ra=function(){function t(t,e,n){this.gd=t,this.firestore=e,this.rf=n}return t.prototype.where=function(e,n,r){var i;Uo("Query.where",arguments,3),Xo("Query.where",3,r),i="not-in"===n||"!="===n?n:Go("Query.where",["<","<=","==",">=",">","array-contains","in","array-contains-any"],2,n);var o=xs("Query.where",e),s=$s(this.gd,"Query.where",this.firestore.rd,this.firestore.sf,o,i,r);return new t(function(t,e){var n=t.filters.concat([e]);return new un(t.path,t.collectionGroup,t.en.slice(),n,t.limit,t.nn,t.startAt,t.endAt)}(this.gd,s),this.firestore,this.rf)},t.prototype.orderBy=function(e,n){var r;if(Vo("Query.orderBy",arguments,1,2),Bo("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new P(O.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=xs("Query.orderBy",e),o=Js(this.gd,i,r);return new t(function(t,e){var n=t.en.concat([e]);return new un(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.nn,t.startAt,t.endAt)}(this.gd,o),this.firestore,this.rf)},t.prototype.limit=function(e){return Uo("Query.limit",arguments,1),qo("Query.limit","number",1,e),Zo("Query.limit",1,e),new t(dn(this.gd,e,"F"),this.firestore,this.rf)},t.prototype.limitToLast=function(e){return Uo("Query.limitToLast",arguments,1),qo("Query.limitToLast","number",1,e),Zo("Query.limitToLast",1,e),new t(dn(this.gd,e,"L"),this.firestore,this.rf)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];jo("Query.startAt",arguments,1);var i=this.Vd("Query.startAt",e,n,!0);return new t(vn(this.gd,i),this.firestore,this.rf)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];jo("Query.startAfter",arguments,1);var i=this.Vd("Query.startAfter",e,n,!1);return new t(vn(this.gd,i),this.firestore,this.rf)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];jo("Query.endBefore",arguments,1);var i=this.Vd("Query.endBefore",e,n,!0);return new t(yn(this.gd,i),this.firestore,this.rf)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];jo("Query.endAt",arguments,1);var i=this.Vd("Query.endAt",e,n,!1);return new t(yn(this.gd,i),this.firestore,this.rf)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Jo("isEqual","Query",1,e);return this.firestore===e.firestore&&gn(this.gd,e.gd)&&this.rf===e.rf},t.prototype.withConverter=function(e){return new t(this.gd,this.firestore,e)},t.prototype.Vd=function(t,e,n,r){if(Xo(t,1,e),e instanceof Ys)return Uo(t,i.__spreadArrays([e],n),1),function(t,e,n,r,i){if(!r)throw new P(O.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=fn(t);s<a.length;s++){var u=a[s];if(u.field.M())o.push(jt(e,r.key));else{var c=r.field(u.field);if(kt(c))throw new P(O.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.F();throw new P(O.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Pn(o,i)}(this.gd,this.firestore.sf,t,e.Ad,r);var o=[e].concat(n);return function(t,e,n,r,i,o){var s=t.en;if(i.length>s.length)throw new P(O.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.M()){if("string"!=typeof c)throw new P(O.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!hn(t)&&-1!==c.indexOf("/"))throw new P(O.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(L.k(c));if(!U.j(l))throw new P(O.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new U(l);a.push(jt(e,h))}else{var f=Ns(n,r,c);a.push(f)}}return new Pn(a,o)}(this.gd,this.firestore.sf,this.firestore.rd,t,o,r)},t.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];Vo("Query.onSnapshot",arguments,1,4);var s={},a=0;if("object"!=typeof i[a]||Lo(i[a])||($o("Query.onSnapshot",s=i[a],["includeMetadataChanges"]),Ho("Query.onSnapshot","boolean","includeMetadataChanges",s.includeMetadataChanges),a++),Lo(i[a])){var u=i[a];i[a]=null===(t=u.next)||void 0===t?void 0:t.bind(u),i[a+1]=null===(e=u.error)||void 0===e?void 0:e.bind(u),i[a+2]=null===(n=u.complete)||void 0===n?void 0:n.bind(u)}else qo("Query.onSnapshot","function",a,i[a]),Bo("Query.onSnapshot","function",a+1,i[a+1]),Bo("Query.onSnapshot","function",a+2,i[a+2]);var c={next:function(t){i[a]&&i[a](new ia(r.firestore,r.gd,t,r.rf))},error:i[a+1],complete:i[a+2]};return na(this.gd),this.firestore.Xf().listen(this.gd,s,c)},t.prototype.get=function(t){var e=this;Vo("Query.get",arguments,0,1),ua("Query.get",t),na(this.gd);var n=this.firestore.Xf();return(t&&"cache"===t.source?n.xf(this.gd):n.Of(this.gd,t)).then((function(t){return new ia(e.firestore,e.gd,t,e.rf)}))},t}(),ia=function(){function t(t,e,n,r){this.dd=t,this.yd=e,this.pd=n,this.rf=r,this.bd=null,this.vd=null,this.metadata=new Qs(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.pd.docs._()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.pd.docs.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;Vo("QuerySnapshot.forEach",arguments,1,2),qo("QuerySnapshot.forEach","function",1,t),this.pd.docs.forEach((function(r){t.call(e,n.Sd(r,n.metadata.fromCache,n.pd.qt.has(r.key)))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new ra(this.yd,this.dd,this.rf)},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){t&&($o("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),Ho("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.pd.Ut)throw new P(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.bd&&this.vd===e||(this.bd=function(t,e,n){if(t.Lt._()){var r=0;return t.docChanges.map((function(e){var i=n(e.doc,t.fromCache,t.qt.has(e.doc.key));return e.doc,{type:"added",doc:i,oldIndex:-1,newIndex:r++}}))}var i=t.Lt;return t.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var r=n(e.doc,t.fromCache,t.qt.has(e.doc.key)),o=-1,s=-1;return 0!==e.type&&(o=i.indexOf(e.doc.key),i=i.delete(e.doc.key)),1!==e.type&&(s=(i=i.add(e.doc)).indexOf(e.doc.key)),{type:la(e.type),doc:r,oldIndex:o,newIndex:s}}))}(this.pd,e,this.Sd.bind(this)),this.vd=e),this.bd},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Jo("isEqual","QuerySnapshot",1,e);return this.dd===e.dd&&gn(this.yd,e.yd)&&this.pd.isEqual(e.pd)&&this.rf===e.rf},t.prototype.Sd=function(t,e,n){return new Xs(this.dd,t.key,t,e,n,this.rf)},t}(),oa=function(t){function e(e,n,r){var i=this;if((i=t.call(this,ln(e),n,r)||this).Dd=e,e.length%2!=1)throw new P(O.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.F()+" has "+e.length);return i}return i.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.gd.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.gd.path.p();return t._()?null:new Ks(new U(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.gd.path.F()},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){Vo("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=_.t()),qo("CollectionReference.doc","non-empty string",1,t);var e=L.k(t);return Ks._d(this.gd.path.child(e),this.firestore,this.rf)},e.prototype.add=function(t){Uo("CollectionReference.add",arguments,1),qo("CollectionReference.add","object",1,this.rf?this.rf.toFirestore(t):t);var e=this.doc();return e.set(t).then((function(){return e}))},e.prototype.withConverter=function(t){return new e(this.Dd,this.firestore,t)},e}(ra);function sa(t,e){if(void 0===e)return{merge:!1};if($o(t,e,["merge","mergeFields"]),Ho(t,"boolean","merge",e.merge),function(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new P(O.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+Yo(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new P(O.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+o+" was: "+Yo(r[o]))}(t,"mergeFields",0,r,(function(t){return"string"==typeof t||t instanceof ss}))}(t,0,0,e.mergeFields),void 0!==e.mergeFields&&void 0!==e.merge)throw new P(O.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function aa(t,e){return void 0===e?{}:($o(t,e,["serverTimestamps"]),zo(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function ua(t,e){Bo(t,"object",1,e),e&&($o(t,e,["source"]),zo(t,0,"source",e.source,["default","server","cache"]))}function ca(t,e,n){if(e instanceof bs){if(e.firestore!==n)throw new P(O.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw Jo(t,"DocumentReference",1,e)}function la(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return y()}}function ha(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var fa={Firestore:Hs,GeoPoint:gs,Timestamp:R,Blob:is,Transaction:zs,WriteBatch:Gs,DocumentReference:Ks,DocumentSnapshot:Ys,Query:ra,QueryDocumentSnapshot:Xs,QuerySnapshot:ia,CollectionReference:oa,FieldPath:ss,FieldValue:vs,setLogLevel:Hs.setLogLevel,CACHE_SIZE_UNLIMITED:Bs};function pa(t){!function(t,e){t.INTERNAL.registerComponent(new c.Component("firestore",(function(t){return function(t,e){var n=new Do,r=new xo(n);return new Hs(t,e,r,n)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},fa)))}(t),t.registerVersion("@firebase/firestore","1.16.5")}pa(o),e.__PRIVATE_registerFirestore=pa}).call(this,n(15))},function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"ErrorCode",(function(){return er})),n.d(e,"EventType",(function(){return nr})),n.d(e,"WebChannel",(function(){return rr})),n.d(e,"XhrIo",(function(){return ir})),n.d(e,"createWebChannelTransport",(function(){return tr}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var o,s="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{},a=a||{},u=s||self;function c(){}function l(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function h(t){var e=l(t);return"array"==e||"object"==e&&"number"==typeof t.length}function f(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var p="closure_uid_"+(1e9*Math.random()>>>0),d=0;function v(t,e,n){return t.call.apply(t.bind,arguments)}function y(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function g(t,e,n){return(g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v:y).apply(null,arguments)}function m(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var b=Date.now;function _(t,e){function n(){}n.prototype=e.prototype,t.S=e.prototype,t.prototype=new n,t.prototype.constructor=t}function w(){this.j=this.j,this.i=this.i}w.prototype.j=!1,w.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),0))(function(t){Object.prototype.hasOwnProperty.call(t,p)&&t[p]||(t[p]=++d)})(this)},w.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var E=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},T=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function I(t){return Array.prototype.concat.apply([],arguments)}function S(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function C(t){return/^[\s\xa0]*$/.test(t)}var k,N=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function A(t,e){return-1!=t.indexOf(e)}function O(t,e){return t<e?-1:t>e?1:0}t:{var P=u.navigator;if(P){var R=P.userAgent;if(R){k=R;break t}}k=""}function x(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function D(t){var e={};for(var n in t)e[n]=t[n];return e}var L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<L.length;o++)n=L[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function F(t){return F[" "](t),t}F[" "]=c;var U,j=A(k,"Opera"),V=A(k,"Trident")||A(k,"MSIE"),q=A(k,"Edge"),B=q||V,W=A(k,"Gecko")&&!(A(k.toLowerCase(),"webkit")&&!A(k,"Edge"))&&!(A(k,"Trident")||A(k,"MSIE"))&&!A(k,"Edge"),H=A(k.toLowerCase(),"webkit")&&!A(k,"Edge");function z(){var t=u.document;return t?t.documentMode:void 0}t:{var G="",K=function(){var t=k;return W?/rv:([^\);]+)(\)|;)/.exec(t):q?/Edge\/([\d\.]+)/.exec(t):V?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):H?/WebKit\/(\S+)/.exec(t):j?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(K&&(G=K?K[1]:""),V){var Q=z();if(null!=Q&&Q>parseFloat(G)){U=String(Q);break t}}U=G}var Y,X={};function $(t){return function(t,e){var n=X;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=N(String(U)).split("."),r=N(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=O(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||O(0==s[2].length,0==a[2].length)||O(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}if(u.document&&V){var J=z();Y=J||(parseInt(U,10)||void 0)}else Y=void 0;var Z=Y,tt=!V||9<=Number(Z),et=V&&!$("9"),nt=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{u.addEventListener("test",c,e),u.removeEventListener("test",c,e)}catch(n){}return t}();function rt(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function it(t,e){if(rt.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(W){t:{try{F(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:ot[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}rt.prototype.b=function(){this.defaultPrevented=!0},_(it,rt);var ot={2:"touch",3:"pen",4:"mouse"};it.prototype.b=function(){it.S.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,et)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var st="closure_listenable_"+(1e6*Math.random()|0),at=0;function ut(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++at,this.Y=this.Z=!1}function ct(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function lt(t){this.src=t,this.a={},this.b=0}function ht(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=E(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ct(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ft(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}lt.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=ft(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new ut(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var pt="closure_lm_"+(1e6*Math.random()|0),dt={};function vt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=Tt(r),e&&e[st]?e.wa(n,r,f(i)?!!i.capture:!!i,o):yt(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)vt(t,e[o],n,r,i);return null}return n=Tt(n),t&&t[st]?t.va(e,n,f(r)?!!r.capture:!!r,i):yt(t,e,n,!1,r,i)}function yt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=f(i)?!!i.capture:!!i;if(s&&!tt)return null;var a=wt(t);if(a||(t[pt]=a=new lt(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=_t,e=tt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)nt||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(mt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function gt(t){if("number"!==typeof t&&t&&!t.Y){var e=t.src;if(e&&e[st])ht(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(mt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=wt(e))?(ht(n,t),0==n.b&&(n.src=null,e[pt]=null)):ct(t)}}}function mt(t){return t in dt?dt[t]:dt[t]="on"+t}function bt(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&gt(t),n.call(r,e)}function _t(t,e){if(t.Y)return!0;if(!tt){if(!e)t:{e=["window","event"];for(var n=u,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return bt(t,e=new it(e,this))}return bt(t,new it(e,this))}function wt(t){return(t=t[pt])instanceof lt?t:null}var Et="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tt(t){return"function"==l(t)?t:(t[Et]||(t[Et]=function(e){return t.handleEvent(e)}),t[Et])}function It(){w.call(this),this.c=new lt(this),this.J=this,this.C=null}function St(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&ht(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}_(It,w),It.prototype[st]=!0,(o=It.prototype).addEventListener=function(t,e,n,r){vt(this,t,e,n,r)},o.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=f(i)?!!i.capture:!!i,r=Tt(r),e&&e[st]?(e=e.c,(n=String(n).toString())in e.a&&(-1<(r=ft(s=e.a[n],r,i,o))&&(ct(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--)))):e&&(e=wt(e))&&(n=e.a[n.toString()],e=-1,n&&(e=ft(n,r,i,o)),(r=-1<e?n[e]:null)&&gt(r))}(this,t,e,n,r)},o.dispatchEvent=function(t){var e,n=this.C;if(n)for(e=[];n;n=n.C)e.push(n);n=this.J;var r=t.type||t;if("string"===typeof t)t=new rt(t,n);else if(t instanceof rt)t.target=t.target||n;else{var i=t;M(t=new rt(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=St(s,r,!0,t)&&i}if(i=St(s=t.a=n,r,!0,t)&&i,i=St(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=St(s=t.a=e[o],r,!1,t)&&i;return i},o.G=function(){if(It.S.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ct(n[r]);delete e.a[t],e.b--}}this.C=null},o.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},o.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Ct=u.JSON.stringify;function kt(){this.b=this.a=null}var Nt,At=new(function(){function t(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Pt}),(function(t){t.reset()}),100);function Ot(){var t=Lt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Pt(){this.next=this.b=this.a=null}function Rt(t){u.setTimeout((function(){throw t}),0)}function xt(t,e){Nt||function(){var t=u.Promise.resolve(void 0);Nt=function(){t.then(Mt)}}(),Dt||(Nt(),Dt=!0),Lt.add(t,e)}kt.prototype.add=function(t,e){var n=At.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Pt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Pt.prototype.reset=function(){this.next=this.b=this.a=null};var Dt=!1,Lt=new kt;function Mt(){for(var t;t=Ot();){try{t.a.call(t.b)}catch(n){Rt(n)}var e=At;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}Dt=!1}function Ft(t,e){It.call(this),this.b=t||1,this.a=e||u,this.f=g(this.Ya,this),this.g=b()}function Ut(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function jt(t,e,n){if("function"==l(t))n&&(t=g(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=g(t.handleEvent,t)}return 2147483647<Number(e)?-1:u.setTimeout(t,e||0)}function Vt(t){t.a=jt((function(){t.a=null,t.c&&(t.c=!1,Vt(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}_(Ft,It),(o=Ft.prototype).aa=!1,o.M=null,o.Ya=function(){if(this.aa){var t=b()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(Ut(this),this.start()))}},o.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=b())},o.G=function(){Ft.S.G.call(this),Ut(this),delete this.a};var qt=function(t){function e(e,n,r){var i=t.call(this)||this;return i.g=null!=r?e.bind(r):e,i.h=n,i.b=null,i.c=!1,i.a=null,i}return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Vt(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(u.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(w);function Bt(t){w.call(this),this.b=t,this.a={}}_(Bt,w);var Wt=[];function Ht(t,e,n,r){Array.isArray(n)||(n&&(Wt[0]=n.toString()),n=Wt);for(var i=0;i<n.length;i++){var o=vt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function zt(t){x(t.a,(function(t,e){this.a.hasOwnProperty(e)&&gt(t)}),t),t.a={}}function Gt(){this.a=!0}function Kt(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Ct(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}Bt.prototype.G=function(){Bt.S.G.call(this),zt(this)},Bt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Gt.prototype.info=function(){};var Qt=null;function Yt(){return Qt=Qt||new It}function Xt(t){rt.call(this,"serverreachability",t)}function $t(t){var e=Yt();e.dispatchEvent(new Xt(e,t))}function Jt(t){rt.call(this,"statevent",t)}function Zt(t){var e=Yt();e.dispatchEvent(new Jt(e,t))}function te(t){rt.call(this,"timingevent",t)}function ee(t,e){if("function"!=l(t))throw Error("Fn must not be null and must be a function");return u.setTimeout((function(){t()}),e)}_(Xt,rt),_(Jt,rt),_(te,rt);var ne={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},re={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function ie(){}function oe(t){var e;return(e=t.a)||(e=t.a={}),e}function se(){}ie.prototype.a=null;var ae,ue={OPEN:"a",$a:"b",Ea:"c",jb:"d"};function ce(){rt.call(this,"d")}function le(){rt.call(this,"c")}function he(){}function fe(t,e,n,r){this.g=t,this.c=e,this.f=n,this.T=r||1,this.J=new Bt(this),this.P=pe,t=B?125:void 0,this.R=new Ft(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}_(ce,rt),_(le,rt),_(he,ie),ae=new he;var pe=45e3,de={},ve={};function ye(t,e,n){t.H=1,t.i=Ue(Re(e)),t.j=n,t.I=!0,ge(t,null)}function ge(t,e){t.u=b(),_e(t),t.l=Re(t.i);var n=t.l,r=t.T;Array.isArray(r)||(r=[String(r)]),$e(n.b,"t",r),t.D=0,t.a=Gn(t.g,t.g.C?e:null),0<t.O&&(t.F=new qt(g(t.Ca,t,t.a),t.O)),Ht(t.J,t.a,"readystatechange",t.Wa),e=t.B?D(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),$t(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.T,t.j)}function me(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=be(t,n);if(i==ve){4==e&&(t.h=4,Zt(14),r=!1),Kt(t.c,t.f,null,"[Incomplete Response]");break}if(i==de){t.h=4,Zt(15),Kt(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Kt(t.c,t.f,i,null),Se(t,i)}4==e&&0==n.length&&(t.h=1,Zt(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.W&&(t.W=!0,(e=t.g).a==t&&e.V&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Un(e),e.F=!0)):(Kt(t.c,t.f,n,"[Invalid Chunked Response]"),Ie(t),Te(t))}function be(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?ve:(n=Number(e.substring(n,r)),isNaN(n)?de:(r+=1)+n>e.length?ve:(e=e.substr(r,n),t.D=r+n,e))}function _e(t){t.U=b()+t.P,we(t,t.P)}function we(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=ee(g(t.Ua,t),e)}function Ee(t){t.o&&(u.clearTimeout(t.o),t.o=null)}function Te(t){0==t.g.v||t.A||qn(t.g,t)}function Ie(t){Ee(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Ut(t.R),zt(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Se(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||on(n.b,t)))if(n.I=t.N,!t.C&&on(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(y){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Vn(n),An(n)}Fn(n),Zt(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=ee(g(n.Ra,n),6e3));if(1>=rn(n.b)&&n.ea){try{n.ea()}catch(y){}n.ea=void 0}}else Wn(n,11)}else if((t.C||n.a==t)&&Vn(n),!C(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"===typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(A(l,"spdy")||A(l,"quic")||A(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(sn(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Fe(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.V&&(n.N=b()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((u=n).la=zn(u,u.C?u.ga:null,u.fa),p.C){an(u.b,p);var d=p,v=u.D;v&&d.setTimeout(v),d.o&&(Ee(d),_e(d)),u.a=p}else Mn(u);0<n.g.length&&Rn(n)}else"stop"!=i[0]&&"close"!=i[0]||Wn(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Wn(n,7):Nn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);$t(4)}catch(y){}}function Ce(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(h(t)||"string"===typeof t)T(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(h(t)||"string"===typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"===typeof t)return t.split("");if(h(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function ke(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ke)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ne(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ae(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ae(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Ae(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(o=fe.prototype).setTimeout=function(t){this.P=t},o.Wa=function(t){t=t.target;var e=this.F;e&&3==In(t)?e.f():this.Ca(t)},o.Ca=function(t){try{if(t==this.a)t:{var e=In(this.a),n=this.a.ua(),r=this.a.X();if(!(3>e||3==e&&!B&&!this.a.$())){this.A||4!=e||7==n||$t(8==n||0>=r?3:2),Ee(this);var i=this.a.X();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.T,e,i),this.b){if(this.V&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Zt(12),Ie(this),Te(this);break t}Kt(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Se(this,u)}this.I?(me(this,e,o),B&&this.b&&3==e&&(Ht(this.J,this.R,"tick",this.Va),this.R.start())):(Kt(this.c,this.f,o,null),Se(this,o)),4==e&&Ie(this),this.b&&!this.A&&(4==e?qn(this.g,this):(this.b=!1,_e(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Zt(12)):(this.h=0,Zt(13)),Ie(this),Te(this)}}}catch(c){}},o.Va=function(){if(this.a){var t=In(this.a),e=this.a.$();this.D<e.length&&(Ee(this),me(this,t,e),this.b&&4!=t&&_e(this))}},o.cancel=function(){this.A=!0,Ie(this)},o.Ua=function(){this.o=null;var t=b();0<=t-this.U?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&($t(3),Zt(17)),Ie(this),this.h=2,Te(this)):we(this,this.U-t)},(o=ke.prototype).K=function(){Ne(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},o.L=function(){return Ne(this),this.a.concat()},o.get=function(t,e){return Ae(this.b,t)?this.b[t]:e},o.set=function(t,e){Ae(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},o.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Oe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pe(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Pe){this.a=void 0!==e?e:t.a,xe(this,t.f),this.j=t.j,De(this,t.c),Le(this,t.h),this.g=t.g,e=t.b;var n=new Ke;n.c=e.c,e.a&&(n.a=new ke(e.a),n.b=e.b),Me(this,n),this.i=t.i}else t&&(n=String(t).match(Oe))?(this.a=!!e,xe(this,n[1]||"",!0),this.j=je(n[2]||""),De(this,n[3]||"",!0),Le(this,n[4]),this.g=je(n[5]||"",!0),Me(this,n[6]||"",!0),this.i=je(n[7]||"")):(this.a=!!e,this.b=new Ke(null,this.a))}function Re(t){return new Pe(t)}function xe(t,e,n){t.f=n?je(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function De(t,e,n){t.c=n?je(e,!0):e}function Le(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Me(t,e,n){e instanceof Ke?(t.b=e,function(t,e){e&&!t.f&&(Qe(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Ye(this,e),$e(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Ve(e,ze)),t.b=new Ke(e,t.a))}function Fe(t,e,n){t.b.set(e,n)}function Ue(t){return Fe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^b()).toString(36)),t}function je(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ve(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,qe),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function qe(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Pe.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Ve(e,Be,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Ve(e,Be,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ve(n,"/"==n.charAt(0)?He:We,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Ve(n,Ge)),t.join("")};var Be=/[#\/\?@]/g,We=/[#\?:]/g,He=/[#\?]/g,ze=/[#\?@]/g,Ge=/#/g;function Ke(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Qe(t){t.a||(t.a=new ke,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Ye(t,e){Qe(t),e=Je(t,e),Ae(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ae((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ne(t)))}function Xe(t,e){return Qe(t),e=Je(t,e),Ae(t.a.b,e)}function $e(t,e,n){Ye(t,e),0<n.length&&(t.c=null,t.a.set(Je(t,e),S(n)),t.b+=n.length)}function Je(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Ze(t,e){this.b=t,this.a=e}function tn(t){this.g=t||en,u.PerformanceNavigationTiming?t=0<(t=u.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(u.ia&&u.ia.ya&&u.ia.ya()&&u.ia.ya().qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(o=Ke.prototype).add=function(t,e){Qe(this),this.c=null,t=Je(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},o.forEach=function(t,e){Qe(this),this.a.forEach((function(n,r){T(n,(function(n){t.call(e,n,r,this)}),this)}),this)},o.L=function(){Qe(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},o.K=function(t){Qe(this);var e=[];if("string"===typeof t)Xe(this,t)&&(e=I(e,this.a.get(Je(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=I(e,t[n])}return e},o.set=function(t,e){return Qe(this),this.c=null,Xe(this,t=Je(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},o.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},o.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var en=10;function nn(t){return!!t.b||!!t.a&&t.a.size>=t.f}function rn(t){return t.b?1:t.a?t.a.size:0}function on(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function sn(t,e){t.a?t.a.add(e):t.b=e}function an(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function un(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var o=i(t.a.values()),s=o.next();!s.done;s=o.next()){var a=s.value;r=r.concat(a.s)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}return S(t.c)}function cn(){}function ln(){this.a=new cn}function hn(t,e,n){var r=n||"";try{Ce(t,(function(t,n){var i=t;f(t)&&(i=Ct(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function fn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}tn.prototype.cancel=function(){var t,e;if(this.c=un(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=i(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(o){t={error:o}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},cn.prototype.stringify=function(t){return u.JSON.stringify(t,void 0)},cn.prototype.parse=function(t){return u.JSON.parse(t,void 0)};var pn=u.JSON.parse;function dn(t){It.call(this),this.headers=new ke,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=vn,this.D=this.F=!1}_(dn,It);var vn="",yn=/^https?$/i,gn=["POST","PUT"];function mn(t){return"content-type"==t.toLowerCase()}function bn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,_n(t),En(t)}function _n(t){t.u||(t.u=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function wn(t){if(t.b&&"undefined"!=typeof a&&(!t.s[1]||4!=In(t)||2!=t.X()))if(t.l&&4==In(t))jt(t.za,0,t);else if(t.dispatchEvent("readystatechange"),4==In(t)){t.b=!1;try{var e,n=t.X();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Oe)[1]||null;if(!o&&u.self&&u.self.location){var s=u.self.location.protocol;o=s.substr(0,s.length-1)}i=!yn.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var c=2<In(t)?t.a.statusText:""}catch(l){c=""}t.f=c+" ["+t.X()+"]",_n(t)}}finally{En(t)}}}function En(t,e){if(t.a){Tn(t);var n=t.a,r=t.s[0]?c:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){}}}function Tn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(u.clearTimeout(t.m),t.m=null)}function In(t){return t.a?t.a.readyState:0}function Sn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return x(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):Fe(t,e,n))}function Cn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function kn(t){this.pa=0,this.g=[],this.c=new Gt,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=Cn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=Cn("baseRetryDelayMs",5e3,t),this.Ma=Cn("retryDelaySeedMs",1e4,t),this.Ja=Cn("forwardChannelMaxRetries",2,t),this.ma=Cn("forwardChannelRequestTimeoutMs",2e4,t),this.Ka=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new tn(t&&t.concurrentRequestLimit),this.ka=new ln,this.da=t&&t.fastHandshake||!1,this.Ga=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&t&&t.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function Nn(t){if(On(t),3==t.v){var e=t.R++,n=Re(t.B);Fe(n,"SID",t.J),Fe(n,"RID",e),Fe(n,"TYPE","terminate"),Dn(t,n),(e=new fe(t,t.c,e,void 0)).H=2,e.i=Ue(Re(n)),n=!1,u.navigator&&u.navigator.sendBeacon&&(n=u.navigator.sendBeacon(e.i.toString(),"")),!n&&u.Image&&((new Image).src=e.i,n=!0),n||(e.a=Gn(e.g,null),e.a.ba(e.i)),e.u=b(),_e(e)}Hn(t)}function An(t){t.a&&(Un(t),t.a.cancel(),t.a=null)}function On(t){An(t),t.j&&(u.clearTimeout(t.j),t.j=null),Vn(t),t.b.cancel(),t.h&&("number"===typeof t.h&&u.clearTimeout(t.h),t.h=null)}function Pn(t,e){t.g.push(new Ze(t.La++,e)),3==t.v&&Rn(t)}function Rn(t){nn(t.b)||t.h||(t.h=!0,xt(t.Ba,t),t.u=0)}function xn(t,e){var n;n=e?e.f:t.R++;var r=Re(t.B);Fe(r,"SID",t.J),Fe(r,"RID",n),Fe(r,"AID",t.P),Dn(t,r),t.i&&t.l&&Sn(r,t.i,t.l),n=new fe(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Ln(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),sn(t.b,n),ye(n,r,e)}function Dn(t,e){t.f&&Ce({},(function(t,n){Fe(e,n,t)}))}function Ln(t,e,n){n=Math.min(t.g.length,n);var r=t.f?g(t.f.Ha,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{hn(l,s,"req"+c+"_")}catch(h){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Mn(t){t.a||t.j||(t.U=1,xt(t.Aa,t),t.o=0)}function Fn(t){return!(t.a||t.j||3<=t.o)&&(t.U++,t.j=ee(g(t.Aa,t),Bn(t,t.o)),t.o++,!0)}function Un(t){null!=t.s&&(u.clearTimeout(t.s),t.s=null)}function jn(t){t.a=new fe(t,t.c,"rpc",t.U),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Re(t.la);Fe(e,"RID","rpc"),Fe(e,"SID",t.J),Fe(e,"CI",t.H?"0":"1"),Fe(e,"AID",t.P),Dn(t,e),Fe(e,"TYPE","xmlhttp"),t.i&&t.l&&Sn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Ue(Re(e)),n.j=null,n.I=!0,ge(n,t)}function Vn(t){null!=t.m&&(u.clearTimeout(t.m),t.m=null)}function qn(t,e){var n=null;if(t.a==e){Vn(t),Un(t),t.a=null;var r=2}else{if(!on(t.b,e))return;n=e.s,an(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=b()-e.u;var i=t.u;(r=Yt()).dispatchEvent(new te(r,n,e,i)),Rn(t)}else Mn(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(rn(t.b)>=t.b.f-(t.h?1:0))&&(t.h?(t.g=e.s.concat(t.g),!0):!(1==t.v||2==t.v||t.u>=(t.Ia?0:t.Ja))&&(t.h=ee(g(t.Ba,t,e),Bn(t,t.u)),t.u++,!0))}(t,e)||2==r&&Fn(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Wn(t,5);break;case 4:Wn(t,10);break;case 3:Wn(t,6);break;default:Wn(t,2)}}function Bn(t,e){var n=t.Fa+Math.floor(Math.random()*t.Ma);return t.f||(n*=2),n*e}function Wn(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=g(t.Xa,t);n||(n=new Pe("//www.google.com/images/cleardot.gif"),u.location&&"http"==u.location.protocol||xe(n,"https"),Ue(n)),function(t,e){var n=new Gt;if(u.Image){var r=new Image;r.onload=m(fn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=m(fn,n,r,"TestLoadImage: error",!1,e),r.onabort=m(fn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=m(fn,n,r,"TestLoadImage: timeout",!1,e),u.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Zt(2);t.v=0,t.f&&t.f.ra(e),Hn(t),On(t)}function Hn(t){t.v=0,t.I=-1,t.f&&(0==un(t.b).length&&0==t.g.length||(t.b.c.length=0,S(t.g),t.g.length=0),t.f.qa())}function zn(t,e,n){var r=function(t){return t instanceof Pe?Re(t):new Pe(t,void 0)}(n);if(""!=r.c)e&&De(r,e+"."+r.c),Le(r,r.h);else{var i=u.location;r=function(t,e,n,r){var i=new Pe(null,void 0);return t&&xe(i,t),e&&De(i,e),n&&Le(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.W&&x(t.W,(function(t,e){Fe(r,e,t)})),e=t.A,n=t.na,e&&n&&Fe(r,e,n),Fe(r,"VER",t.ha),Dn(t,r),r}function Gn(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new dn(t.Ka)).F=t.C,e}function Kn(){}function Qn(){if(V&&!(10<=Number(Z)))throw Error("Environmental error: no available transport.")}function Yn(t,e){It.call(this),this.a=new kn(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!C(t)&&(this.a.i=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!C(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new Jn(this)}function Xn(t){ce.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function $n(){le.call(this),this.status=1}function Jn(t){this.a=t}(o=dn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?oe(this.H):oe(ae),this.a.onreadystatechange=g(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void bn(this,o)}t=n||"";var i=new ke(this.headers);r&&Ce(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=mn,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}(i.L()),n=u.FormData&&t instanceof u.FormData,!(0<=E(gn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Tn(this),0<this.o&&((this.D=function(t){return V&&$(9)&&"number"===typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=g(this.xa,this)):this.m=jt(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){bn(this,o)}},o.xa=function(){"undefined"!=typeof a&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},o.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),En(this))},o.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),En(this,!0)),dn.S.G.call(this)},o.za=function(){this.j||(this.A||this.l||this.g?wn(this):this.Ta())},o.Ta=function(){wn(this)},o.X=function(){try{return 2<In(this)?this.a.status:-1}catch(t){return-1}},o.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},o.Na=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),pn(e)}},o.ua=function(){return this.h},o.Qa=function(){return"string"===typeof this.f?this.f:String(this.f)},(o=kn.prototype).ha=8,o.v=1,o.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new fe(this,this.c,t,void 0),r=this.l;if(this.O&&(r?M(r=D(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"===typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Ln(this,n,e),Fe(i=Re(this.B),"RID",t),Fe(i,"CVER",22),this.A&&Fe(i,"X-HTTP-Session-Id",this.A),Dn(this,i),this.i&&r&&Sn(i,this.i,r),sn(this.b,n),this.Ga&&Fe(i,"TYPE","init"),this.da?(Fe(i,"$req",e),Fe(i,"SID","null"),n.V=!0,ye(n,i,null)):ye(n,i,e),this.v=2}}else 3==this.v&&(t?xn(this,t):0==this.g.length||nn(this.b)||xn(this))},o.Aa=function(){if(this.j=null,jn(this),this.V&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=ee(g(this.Sa,this),t)}},o.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,An(this),jn(this))},o.Ra=function(){null!=this.m&&(this.m=null,An(this),Fn(this),Zt(19))},o.Xa=function(t){t?(this.c.info("Successfully pinged google.com"),Zt(2)):(this.c.info("Failed to ping google.com"),Zt(1))},(o=Kn.prototype).ta=function(){},o.sa=function(){},o.ra=function(){},o.qa=function(){},o.Ha=function(){},Qn.prototype.a=function(t,e){return new Yn(t,e)},_(Yn,It),(o=Yn.prototype).addEventListener=function(t,e,n,r){Yn.S.addEventListener.call(this,t,e,n,r)},o.removeEventListener=function(t,e,n,r){Yn.S.removeEventListener.call(this,t,e,n,r)},o.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var t=this.a,e=this.l,n=this.b||void 0;Zt(0),t.fa=e,t.W=n||{},t.H=t.T,t.B=zn(t,null,t.fa),Rn(t)},o.close=function(){Nn(this.a)},o.Pa=function(t){if("string"===typeof t){var e={};e.__data__=t,Pn(this.a,e)}else this.g?((e={}).__data__=Ct(t),Pn(this.a,e)):Pn(this.a,t)},o.G=function(){this.a.f=null,delete this.f,Nn(this.a),delete this.a,Yn.S.G.call(this)},_(Xn,ce),_($n,le),_(Jn,Kn),Jn.prototype.ta=function(){this.a.dispatchEvent("a")},Jn.prototype.sa=function(t){this.a.dispatchEvent(new Xn(t))},Jn.prototype.ra=function(t){this.a.dispatchEvent(new $n(t))},Jn.prototype.qa=function(){this.a.dispatchEvent("b")},Qn.prototype.createWebChannel=Qn.prototype.a,Yn.prototype.send=Yn.prototype.Pa,Yn.prototype.open=Yn.prototype.Oa,Yn.prototype.close=Yn.prototype.close,ne.NO_ERROR=0,ne.TIMEOUT=8,ne.HTTP_ERROR=6,re.COMPLETE="complete",se.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",It.prototype.listen=It.prototype.va,dn.prototype.listenOnce=dn.prototype.wa,dn.prototype.getLastError=dn.prototype.Qa,dn.prototype.getLastErrorCode=dn.prototype.ua,dn.prototype.getStatus=dn.prototype.X,dn.prototype.getResponseJson=dn.prototype.Na,dn.prototype.getResponseText=dn.prototype.$,dn.prototype.send=dn.prototype.ba;var Zn={createWebChannelTransport:function(){return new Qn},ErrorCode:ne,EventType:re,WebChannel:se,XhrIo:dn},tr=Zn.createWebChannelTransport,er=Zn.ErrorCode,nr=Zn.EventType,rr=Zn.WebChannel,ir=Zn.XhrIo;e.default=Zn}.call(this,n(12))},function(t,e,n){"use strict";var r,i=(r=n(3))&&"object"===typeof r&&"default"in r?r.default:r,o=n(0),s=n(4),a={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},u=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return o.__extends(e,t),e}(Error);var c=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(e){return[2,void 0]}return[2]}))}))},t.prototype.getContext=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e;return o.__generator(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}();function l(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var h=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"===typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"===typeof t||"object"===typeof t)return l(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"===typeof t||"object"===typeof t?l(t,(function(t){return e.decode(t)})):t},t}();var f=function(){function t(t,e,n,r){var i=this;void 0===r&&(r="us-central1"),this.app_=t,this.region_=r,this.serializer=new h,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return i.deleteService()}},this.contextProvider=new c(e,n),this.cancelAllRequests=new Promise((function(t){i.deleteService=function(){return t()}}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId,n=this.region_;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+n+"/"+t:"https://"+n+"-"+e+".cloudfunctions.net/"+t},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var r,i;return o.__generator(this,(function(o){switch(o.label){case 0:n.append("Content-Type","application/json"),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:i=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return i=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}}))}))},t.prototype.call=function(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var r,i,s,c,l,h,f,d,v,y,g;return o.__generator(this,(function(o){switch(o.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},s=new Headers,[4,this.contextProvider.getContext()];case 1:return(c=o.sent()).authToken&&s.append("Authorization","Bearer "+c.authToken),c.instanceIdToken&&s.append("Firebase-Instance-ID-Token",c.instanceIdToken),l=n.timeout||7e4,h=function(t){var e,n=new Promise((function(n,r){e=setTimeout((function(){r(new u("deadline-exceeded","deadline-exceeded"))}),t)}));return{timer:e,promise:n}}(l),f=h.timer,d=h.promise,[4,Promise.race([p(f,this.postJSON(r,i,s)),d,p(f,this.cancelAllRequests)])];case 2:if(!(v=o.sent()))throw new u("cancelled","Firebase Functions instance was deleted.");if(y=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var c=s.status;if("string"===typeof c){if(!a[c])return new u("internal","internal");r=a[c],i=c}var l=s.message;"string"===typeof l&&(i=l),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(h){}return"ok"===r?null:new u(r,i,o)}(v.status,v.json,this.serializer))throw y;if(!v.json)throw new u("internal","Response is not valid JSON object.");if("undefined"===typeof(g=v.json.data)&&(g=v.json.result),"undefined"===typeof g)throw new u("internal","Response is missing data field.");return[2,{data:this.serializer.decode(g)}]}}))}))},t}();function p(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}}))}))}function d(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("messaging");return new f(n,r,i,e)}!function(t){var e={Functions:f};t.INTERNAL.registerComponent(new s.Component("functions",d,"PUBLIC").setServiceProps(e).setMultipleInstances(!0))}(i),i.registerVersion("@firebase/functions","0.4.50")},function(t,e,n){"use strict";n.r(e);n(13);var r,i,o=n(4),s=n(2),a=n(0),u=n(10),c=n(3),l=n.n(c),h=((r={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',r["only-available-in-window"]="This method is available in a Window context.",r["only-available-in-sw"]="This method is available in a service worker context.",r["permission-default"]="The notification permission was not granted and dismissed instead.",r["permission-blocked"]="The notification permission was not granted and blocked instead.",r["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",r["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",r["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$errorInfo}",r["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",r["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$errorInfo}",r["token-update-failed"]="A problem occured while updating the user from FCM: {$errorInfo}",r["token-update-no-token"]="FCM returned no token when updating the user to push.",r["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",r["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",r["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",r["invalid-vapid-key"]="The public VAPID key must be a string.",r["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",r),f=new s.ErrorFactory("messaging","Messaging",h),p="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";function d(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,Object(a.__spread)(e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function v(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}!function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"}(i||(i={}));function y(t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var e,n,r=this;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=i.sent(),!e.map((function(t){return t.name})).includes("fcm_token_details_db"))return[2,null];i.label=2;case 2:return n=null,[4,Object(u.openDb)("fcm_token_details_db",5,(function(e){return Object(a.__awaiter)(r,void 0,void 0,(function(){var r,i,o,s;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:return e.oldVersion<2?[2]:e.objectStoreNames.contains("fcm_token_object_Store")?[4,(r=e.transaction.objectStore("fcm_token_object_Store")).index("fcmSenderId").get(t)]:[2];case 1:return i=a.sent(),[4,r.clear()];case 2:if(a.sent(),!i)return[2];if(2===e.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];n={token:o.fcmToken,createTime:null!==(s=o.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"===typeof o.vapidKey?o.vapidKey:d(o.vapidKey)}}}else(3===e.oldVersion||4===e.oldVersion)&&(n={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:d(o.auth),p256dh:d(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:d(o.vapidKey)}});return[2]}}))}))}))];case 3:return i.sent().close(),[4,Object(u.deleteDb)("fcm_token_details_db")];case 4:return i.sent(),[4,Object(u.deleteDb)("fcm_vapid_details_db")];case 5:return i.sent(),[4,Object(u.deleteDb)("undefined")];case 6:return i.sent(),[2,g(n)?n:null]}}))}))}function g(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"===typeof t.createTime&&t.createTime>0&&"string"===typeof t.token&&t.token.length>0&&"string"===typeof e.auth&&e.auth.length>0&&"string"===typeof e.p256dh&&e.p256dh.length>0&&"string"===typeof e.endpoint&&e.endpoint.length>0&&"string"===typeof e.swScope&&e.swScope.length>0&&"string"===typeof e.vapidKey&&e.vapidKey.length>0}var m="firebase-messaging-store",b=null;function _(){return b||(b=Object(u.openDb)("firebase-messaging-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(m)}}))),b}function w(t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return e=I(t),[4,_()];case 1:return[4,i.sent().transaction(m).objectStore(m).get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,y(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,E(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}}))}))}function E(t,e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(a.__generator)(this,(function(o){switch(o.label){case 0:return n=I(t),[4,_()];case 1:return r=o.sent(),[4,(i=r.transaction(m,"readwrite")).objectStore(m).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}}))}))}function T(t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return e=I(t),[4,_()];case 1:return n=i.sent(),[4,(r=n.transaction(m,"readwrite")).objectStore(m).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function I(t){return t.appConfig.appId}function S(t,e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,u;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:return[4,A(t)];case 1:n=a.sent(),r=O(e),i={method:"POST",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(N(t.appConfig),i)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),f.create("token-subscribe-failed",{errorInfo:s});case 6:if(o.error)throw u=o.error.message,f.create("token-subscribe-failed",{errorInfo:u});if(!o.token)throw f.create("token-subscribe-no-token");return[2,o.token]}}))}))}function C(t,e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,u;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:return[4,A(t)];case 1:n=a.sent(),r=O(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(N(t.appConfig)+"/"+e.token,i)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),f.create("token-update-failed",{errorInfo:s});case 6:if(o.error)throw u=o.error.message,f.create("token-update-failed",{errorInfo:u});if(!o.token)throw f.create("token-update-no-token");return[2,o.token]}}))}))}function k(t,e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:return[4,A(t)];case 1:n=a.sent(),r={method:"DELETE",headers:n},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(N(t.appConfig)+"/"+e,r)];case 3:return[4,a.sent().json()];case 4:if((i=a.sent()).error)throw o=i.error.message,f.create("token-unsubscribe-failed",{errorInfo:o});return[3,6];case 5:throw s=a.sent(),f.create("token-unsubscribe-failed",{errorInfo:s});case 6:return[2]}}))}))}function N(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function A(t){var e=t.appConfig,n=t.installations;return Object(a.__awaiter)(this,void 0,void 0,(function(){var t;return Object(a.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function O(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==p&&(o.web.applicationPubKey=i),o}function P(t,e,n){return Object(a.__awaiter)(this,void 0,void 0,(function(){var r,i,o,s;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:if("granted"!==Notification.permission)throw f.create("permission-blocked");return[4,L(e,n)];case 1:return r=a.sent(),[4,w(t)];case 2:return i=a.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:d(r.getKey("auth")),p256dh:d(r.getKey("p256dh"))},i?[3,3]:[2,D(t,o)];case 3:if(function(t,e){var n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,o=e.p256dh===t.p256dh;return n&&r&&i&&o}(i.subscriptionOptions,o))return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,k(t,i.token)];case 5:return a.sent(),[3,7];case 6:return s=a.sent(),console.warn(s),[3,7];case 7:return[2,D(t,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,x({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}}))}))}function R(t,e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return[4,w(t)];case 1:return(n=i.sent())?[4,k(t,n.token)]:[3,4];case 2:return i.sent(),[4,T(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function x(t,e,n){return Object(a.__awaiter)(this,void 0,void 0,(function(){var r,i,o;return Object(a.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,5]),[4,C(e,t)];case 1:return r=s.sent(),i=Object(a.__assign)(Object(a.__assign)({},t),{token:r,createTime:Date.now()}),[4,E(e,i)];case 2:return s.sent(),[2,r];case 3:return o=s.sent(),[4,R(e,n)];case 4:throw s.sent(),o;case 5:return[2]}}))}))}function D(t,e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return[4,S(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,E(t,r)];case 2:return i.sent(),[2,r.token]}}))}))}function L(t,e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n;return Object(a.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:v(e)})]}}))}))}function M(t){return"object"===typeof t&&!!t&&"google.c.a.c_id"in t}var F=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!==typeof t)throw f.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return Object(a.__awaiter)(this,void 0,void 0,(function(){var n;return Object(a.__generator)(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,w(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null===n||void 0===n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:p,r.label=2;case 2:return[2,P(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},t.prototype.deleteToken=function(){return R(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw f.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw f.create("use-vapid-key-after-get-token");if("string"!==typeof t||0===t.length)throw f.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw f.create("only-available-in-window")},t.prototype.onMessage=function(){throw f.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw f.create("only-available-in-window")},t.prototype.onPush=function(t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var e,n,r,i;return Object(a.__generator)(this,(function(o){switch(o.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(n){return null}}(t))?[4,q()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))}(n=o.sent())?[2,V(n,e)]:(r=!1,e.notification?[4,B(U(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed||this.bgMessageHandler&&(i=function(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(!e.notification)return;t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}(e,t),function(t,e){if(!e.data)return;t.data=e.data}(e,t),function(t,e){if(!e.fcmOptions)return;t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}(e,t),e}(e),"function"===typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[2]}}))}))},t.prototype.onSubChange=function(t){var e,n;return Object(a.__awaiter)(this,void 0,void 0,(function(){var r;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,R(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,w(this.firebaseDependencies)];case 3:return r=i.sent(),[4,R(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,P(this.firebaseDependencies,self.registration,null!==(n=null===(e=null===r||void 0===r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:p)];case 5:return i.sent(),[2]}}))}))},t.prototype.onNotificationClick=function(t){var e,n;return Object(a.__awaiter)(this,void 0,void 0,(function(){var r,o,s;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(o=function(t){var e,n,r,i=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;if(i)return i;return M(t.data)?self.location.origin:null}(r))?[4,j(o)]:[2]):[2];case 1:return(s=a.sent())?[3,4]:[4,self.clients.openWindow(o)];case 2:return s=a.sent(),[4,(u=3e3,new Promise((function(t){setTimeout(t,u)})))];case 3:return a.sent(),[3,6];case 4:return[4,s.focus()];case 5:s=a.sent(),a.label=6;case 6:return s?(r.messageType=i.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,s.postMessage(r)]):[2]}var u}))}))},t}();function U(t){var e,n=Object(a.__assign)({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function j(t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var e,n,r,i,o,s,u;return Object(a.__generator)(this,(function(c){switch(c.label){case 0:return e=new URL(t,self.location.href),[4,q()];case 1:n=c.sent();try{for(r=Object(a.__values)(n),i=r.next();!i.done;i=r.next())if(o=i.value,new URL(o.url,self.location.href).host===e.host)return[2,o]}catch(l){s={error:l}}finally{try{i&&!i.done&&(u=r.return)&&u.call(r)}finally{if(s)throw s.error}}return[2,null]}}))}))}function V(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=i.PUSH_RECEIVED;try{for(var o=Object(a.__values)(t),s=o.next();!s.done;s=o.next()){s.value.postMessage(e)}}catch(u){n={error:u}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}function q(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function B(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var W=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var e,n;return Object(a.__generator)(this,(function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===i.PUSH_RECEIVED&&("function"===typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),M(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return Object(a.__awaiter)(this,void 0,void 0,(function(){return Object(a.__generator)(this,(function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw f.create("permission-blocked");return[4,this.updateVapidKey(null===t||void 0===t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null===t||void 0===t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,P(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},t.prototype.updateVapidKey=function(t){return Object(a.__awaiter)(this,void 0,void 0,(function(){return Object(a.__generator)(this,(function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=p),[2]}))}))},t.prototype.updateSwReg=function(t){return Object(a.__awaiter)(this,void 0,void 0,(function(){return Object(a.__generator)(this,(function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw f.create("invalid-sw-registration");return this.swRegistration=t,[2]}}))}))},t.prototype.registerDefaultSw=function(){return Object(a.__awaiter)(this,void 0,void 0,(function(){var t,e;return Object(a.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw e=n.sent(),f.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}}))}))},t.prototype.deleteToken=function(){return Object(a.__awaiter)(this,void 0,void 0,(function(){return Object(a.__generator)(this,(function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,R(this.firebaseDependencies,this.swRegistration)]}}))}))},t.prototype.requestPermission=function(){return Object(a.__awaiter)(this,void 0,void 0,(function(){var t;return Object(a.__generator)(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw"denied"===t?f.create("permission-blocked"):f.create("permission-default")}}))}))},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw f.create("use-vapid-key-after-get-token");if("string"!==typeof t||0===t.length)throw f.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw f.create("invalid-sw-registration");if(this.swRegistration)throw f.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw f.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw f.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n;return Object(a.__generator)(this,(function(r){switch(r.label){case 0:return n=function(t){switch(t){case i.NOTIFICATION_CLICKED:return"notification_open";case i.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e["google.c.a.c_id"],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},t}();function H(t){return f.create("missing-app-config-values",{valueName:t})}var z={isSupported:G};function G(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}l.a.INTERNAL.registerComponent(new o.Component("messaging",(function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw H("App Configuration Object");if(!t.name)throw H("App Name");var r=t.options;try{for(var i=Object(a.__values)(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw H(s)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!G())throw f.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new F(n):new W(n)}),"PUBLIC").setServiceProps(z))},function(t,e,n){"use strict";n.r(e),n.d(e,"registerStorage",(function(){return fe}));var r=n(3),i=n.n(r),o=n(0),s=n(4),a=function(){function t(t,e){this.code_=C(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}return t.prototype.codeProp=function(){return this.code},t.prototype.codeEquals=function(t){return C(t)===this.codeProp()},t.prototype.serverResponseProp=function(){return this.serverResponse_},t.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(t.prototype,"name",{get:function(){return this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"code",{get:function(){return this.code_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.serverResponse_?this.message_+"\n"+this.serverResponse_:this.message_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!1,configurable:!0}),t}(),u="unknown",c="object-not-found",l="quota-exceeded",h="unauthenticated",f="unauthorized",p="retry-limit-exceeded",d="canceled",v="invalid-url",y="invalid-default-bucket",g="cannot-slice-blob",m="server-file-wrong-size",b="no-download-url",_="invalid-argument",w="invalid-argument-count",E="app-deleted",T="invalid-root-operation",I="invalid-format",S="internal-error";function C(t){return"storage/"+t}function k(){return new a(u,"An unknown error occurred, please check the error payload for server response.")}function N(){return new a(d,"User canceled the upload/download.")}function A(){return new a(g,"Cannot slice blob for upload. Please retry the upload.")}function O(){return new a(b,"The given file does not have any download URLs.")}function P(t,e,n){return new a(_,"Invalid argument in `"+e+"` at index "+t+": "+n)}function R(){return new a(E,"The Firebase app was deleted.")}function x(t,e){return new a(I,"String does not match format '"+t+"': "+e)}function D(t){throw new a(S,"Internal error: "+t)}var L={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function M(t){switch(t){case L.RAW:case L.BASE64:case L.BASE64URL:case L.DATA_URL:return;default:throw"Expected one of the event types: ["+L.RAW+", "+L.BASE64+", "+L.BASE64URL+", "+L.DATA_URL+"]."}}var F=function(t,e){this.data=t,this.contentType=e||null};function U(t,e){switch(t){case L.RAW:return new F(j(e));case L.BASE64:case L.BASE64URL:return new F(V(t,e));case L.DATA_URL:return new F(function(t){var e=new q(t);return e.base64?V(L.BASE64,e.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(n){throw x(L.DATA_URL,"Malformed data URL.")}return j(e)}(e.rest)}(e),new q(e).contentType)}throw k()}function j(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<t.length-1&&56320===(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320===(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function V(t,e){switch(t){case L.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw x(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case L.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw x(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(c){throw x(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var q=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw x(L.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1);var r,i};var B,W={STATE_CHANGED:"state_changed"},H="running",z="pausing",G="paused",K="success",Q="canceling",Y="canceled",X="error",$={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function J(t){switch(t){case H:case z:case Q:return $.RUNNING;case G:return $.PAUSED;case K:return $.SUCCESS;case Y:return $.CANCELED;case X:default:return $.ERROR}}function Z(t){return null!=t}function tt(t){return void 0!==t}function et(t){return"function"===typeof t}function nt(t){return"object"===typeof t}function rt(t){return nt(t)&&null!==t}function it(t){return"string"===typeof t||t instanceof String}function ot(t){return st(t)&&Number.isInteger(t)}function st(t){return"number"===typeof t||t instanceof Number}function at(t){return ut()&&t instanceof Blob}function ut(){return"undefined"!==typeof Blob}!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(B||(B={}));var ct=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=B.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=B.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=B.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw D("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),Z(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return Z(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw D("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw D("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw D("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){Z(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){Z(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},t}(),lt=function(){function t(){}return t.prototype.createXhrIo=function(){return new ct},t}();function ht(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function ft(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=ht();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(ut())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}var pt=function(){function t(t,e){var n=0,r="";at(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(at(this.data_)){var r=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===r?null:new t(r)}return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(ut()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(ft.apply(null,r))}var i=e.map((function(t){return it(t)?U(L.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var s=new Uint8Array(o),a=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]})),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}(),dt=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(r){return new t(e,"")}if(""===n.path)return n;throw new a(y,"Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null;var r=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function i(t){t.path_=decodeURIComponent(t.path)}for(var o="firebasestorage.googleapis.com".replace(/[.]/g,"\\."),s=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+o+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/([A-Za-z0-9.\\-_]+)/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:i}],u=0;u<s.length;u++){var c=s[u],l=c.regex.exec(e);if(l){var h=l[c.indices.bucket],f=l[c.indices.path];f||(f=""),n=new t(h,f),c.postModify(n);break}}if(null==n)throw function(t){return new a(v,"Invalid URL '"+t+"'.")}(e);return n},t}();function vt(t){var e,n;try{e=JSON.parse(t)}catch(r){return null}return nt(n=e)&&!Array.isArray(n)?e:null}function yt(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}function gt(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function mt(t){return"https://firebasestorage.googleapis.com/v0"+t}function bt(t){var e=encodeURIComponent,n="?";for(var r in t){if(t.hasOwnProperty(r))n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1)}function _t(t,e){return e}var wt=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||_t},Et=null;function Tt(){if(Et)return Et;var t=[];t.push(new wt("bucket")),t.push(new wt("generation")),t.push(new wt("metageneration")),t.push(new wt("name","fullPath",!0));var e=new wt("name");e.xform=function(t,e){return function(t){return!it(t)||t.length<2?t:gt(t)}(e)},t.push(e);var n=new wt("size");return n.xform=function(t,e){return Z(e)?Number(e):e},t.push(n),t.push(new wt("timeCreated")),t.push(new wt("updated")),t.push(new wt("md5Hash",null,!0)),t.push(new wt("cacheControl",null,!0)),t.push(new wt("contentDisposition",null,!0)),t.push(new wt("contentEncoding",null,!0)),t.push(new wt("contentLanguage",null,!0)),t.push(new wt("contentType",null,!0)),t.push(new wt("metadata","customMetadata",!0)),Et=t}function It(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new dt(n,r);return e.makeStorageReference(i)}})}(r,t),r}function St(t,e,n){var r=vt(e);return null===r?null:It(t,r,n)}function Ct(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function kt(t){if(!nt(t)||!t)throw"Expected Metadata object.";for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if("customMetadata"===e){if(!nt(n))throw"Expected object for 'customMetadata' mapping."}else if(rt(n))throw"Mapping for '"+e+"' cannot be an object."}}function Nt(t,e,n){var r=vt(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new dt(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var l=c[u];a=t.makeStorageReference(new dt(e,l.name));r.items.push(a)}return r}(t,e,r)}function At(t){if(!nt(t)||!t)throw"Expected ListOptions object.";for(var e in t)if("maxResults"===e){if(!ot(t.maxResults)||t.maxResults<=0)throw"Expected maxResults to be a positive number.";if(t.maxResults>1e3)throw"Expected maxResults to be less than or equal to 1000."}else{if("pageToken"!==e)throw"Unknown option: "+e;if(t.pageToken&&!it(t.pageToken))throw"Expected pageToken to be string."}}var Ot=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function Pt(t){if(!t)throw k()}function Rt(t,e){return function(n,r){var i=St(t,r,e);return Pt(null!==i),i}}function xt(t,e){return function(n,r){var i=St(t,r,e);return Pt(null!==i),function(t,e){var n=vt(e);if(null===n)return null;if(!it(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(e){var n=t.bucket,r=t.fullPath;return mt("/b/"+i(n)+"/o/"+i(r))+bt({alt:"media",token:e})}))[0]}(i,r)}}function Dt(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=new a(h,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new a(l,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new a(f,"User does not have permission to access '"+i+"'.")):r=n,r.setServerResponseProp(n.serverResponseProp()),r}}function Lt(t){var e=Dt(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new a(c,"Object '"+i+"' does not exist.")),o.setServerResponseProp(r.serverResponseProp()),o}}function Mt(t,e,n){var r=mt(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new Ot(r,"GET",Rt(t,n),i);return o.errorHandler=Lt(e),o}function Ft(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=mt(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime,u=new Ot(s,"GET",function(t,e){return function(n,r){var i=Nt(t,e,r);return Pt(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=Dt(e),u}function Ut(t,e,n){var r=mt(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new Ot(r,"GET",xt(t,n),i);return o.errorHandler=Lt(e),o}function jt(t,e,n,r){var i=mt(e.fullServerUrl()),o=Ct(n,r),s=t.maxOperationRetryTime,a=new Ot(i,"PATCH",Rt(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=Lt(e),a}function Vt(t,e){var n=mt(e.fullServerUrl()),r=t.maxOperationRetryTime;var i=new Ot(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=Lt(e),i}function qt(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}var Bt=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function Wt(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(r){Pt(!1)}return Pt(!!n&&-1!==(e||["active"]).indexOf(n)),n}function Ht(t,e,n,r,i,o,s,u){var c=new Bt(0,0);if(s?(c.current=s.current,c.total=s.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw new a(m,"Server recorded incorrect upload file size, please retry the upload.");var l=c.total-c.current,h=l;i>0&&(h=Math.min(h,i));var f=c.current,p=f+h,d={"X-Goog-Upload-Command":h===l?"upload, finalize":"upload","X-Goog-Upload-Offset":c.current},v=r.slice(f,p);if(null===v)throw A();var y=e.maxUploadRetryTime,g=new Ot(n,"POST",(function(t,n){var i,s=Wt(t,["active","final"]),a=c.current+h,u=r.size();return i="final"===s?Rt(e,o)(t,n):null,new Bt(a,u,"final"===s,i)}),y);return g.headers=d,g.body=v.uploadData(),g.progressCallback=u||null,g.errorHandler=Dt(t),g}var zt=function(t,e,n){if(et(t)||Z(e)||Z(n))this.next=t,this.error=e||null,this.complete=n||null;else{var r=t;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}},Gt=function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o};function Kt(t,e,n){for(var r=e.length,i=e.length,o=0;o<e.length;o++)if(e[o].optional){r=o;break}if(!(r<=n.length&&n.length<=i))throw function(t,e,n,r){var i,o;return t===e?(i=t,o=1===t?"argument":"arguments"):(i="between "+t+" and "+e,o="arguments"),new a(w,"Invalid argument count in `"+n+"`: Expected "+i+" "+o+", received "+r+".")}(r,i,t,n.length);for(o=0;o<n.length;o++)try{e[o].validator(n[o])}catch(s){throw s instanceof Error?P(o,t,s.message):P(o,t,s)}}var Qt=function(t,e){var n=this;this.validator=function(e){n.optional&&!tt(e)||t(e)},this.optional=!!e};function Yt(t,e){function n(t){if(!it(t))throw"Expected string."}var r,i,o;return t?(i=n,o=t,r=function(t){i(t),o(t)}):r=n,new Qt(r,e)}function Xt(){return new Qt((function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||ut()&&t instanceof Blob))throw"Expected Blob or File."}))}function $t(t){return new Qt(kt,t)}function Jt(t){return new Qt(At,t)}function Zt(){return new Qt((function(t){if(!(st(t)&&t>=0))throw"Expected a number 0 or greater."}))}function te(t,e){return new Qt((function(e){if(!(null===e||Z(e)&&e instanceof Object))throw"Expected an Object.";void 0!==t&&null!==t&&t(e)}),e)}function ee(t){return new Qt((function(t){if(!(null===t||et(t)))throw"Expected a Function."}),t)}function ne(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var re=function(){function t(t,e,n,r,i,o){var s=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.service_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=H,this.errorHandler_=function(t){s.request_=null,s.chunkMultiplier_=1,t.codeEquals(d)?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=t,s.transition_(X))},this.metadataErrorHandler_=function(t){s.request_=null,t.codeEquals(d)?s.completeTransitions_():(s.error_=t,s.transition_(X))},this.promise_=new Promise((function(t,e){s.resolve_=t,s.reject_=e,s.start_()})),this.promise_.then(null,(function(){}))}return t.prototype.makeProgressCallback_=function(){var t=this,e=this.transferred_;return function(n){return t.updateProgress_(e+n)}},t.prototype.shouldDoResumable_=function(t){return t.size()>262144},t.prototype.start_=function(){this.state_===H&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},t.prototype.resolveToken_=function(t){var e=this;this.service_.getAuthToken().then((function(n){switch(e.state_){case H:t(n);break;case Q:e.transition_(Y);break;case z:e.transition_(G)}}))},t.prototype.createResumable_=function(){var t=this;this.resolveToken_((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=qt(e,r,i),a={name:s.fullPath},u=mt(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=Ct(s,n),h=t.maxUploadRetryTime,f=new Ot(u,"POST",(function(t){var e;Wt(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(n){Pt(!1)}return Pt(it(e)),e}),h);return f.urlParams=a,f.headers=c,f.body=l,f.errorHandler=Dt(e),f}(t.service_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.service_.makeRequest(n,e);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.uploadUrl_=e,t.needToFetchStatus_=!1,t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.fetchStatus_=function(){var t=this,e=this.uploadUrl_;this.resolveToken_((function(n){var r=function(t,e,n,r){var i=t.maxUploadRetryTime,o=new Ot(n,"POST",(function(t){var e=Wt(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){Pt(!1)}n||Pt(!1);var i=Number(n);return Pt(!isNaN(i)),new Bt(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=Dt(e),o}(t.service_,t.location_,e,t.blob_),i=t.service_.makeRequest(r,n);t.request_=i,i.getPromise().then((function(e){e=e,t.request_=null,t.updateProgress_(e.current),t.needToFetchStatus_=!1,e.finalized&&(t.needToFetchMetadata_=!0),t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.continueUpload_=function(){var t=this,e=262144*this.chunkMultiplier_,n=new Bt(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_((function(i){var o;try{o=Ht(t.location_,t.service_,r,t.blob_,e,t.mappings_,n,t.makeProgressCallback_())}catch(a){return t.error_=a,void t.transition_(X)}var s=t.service_.makeRequest(o,i);t.request_=s,s.getPromise().then((function(e){t.increaseMultiplier_(),t.request_=null,t.updateProgress_(e.current),e.finalized?(t.metadata_=e.metadata,t.transition_(K)):t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},t.prototype.fetchMetadata_=function(){var t=this;this.resolveToken_((function(e){var n=Mt(t.service_,t.location_,t.mappings_),r=t.service_.makeRequest(n,e);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.metadata_=e,t.transition_(K)}),t.metadataErrorHandler_)}))},t.prototype.oneShotUpload_=function(){var t=this;this.resolveToken_((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=qt(e,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Ct(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+a+"--",h=pt.getBlob(c,r,l);if(null===h)throw A();var f={name:u.fullPath},p=mt(o),d=t.maxUploadRetryTime,v=new Ot(p,"POST",Rt(t,n),d);return v.urlParams=f,v.headers=s,v.body=h.uploadData(),v.errorHandler=Dt(e),v}(t.service_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.service_.makeRequest(n,e);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.metadata_=e,t.updateProgress_(t.blob_.size()),t.transition_(K)}),t.errorHandler_)}))},t.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},t.prototype.transition_=function(t){if(this.state_!==t)switch(t){case Q:case z:this.state_=t,null!==this.request_&&this.request_.cancel();break;case H:var e=this.state_===G;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case G:this.state_=t,this.notifyObservers_();break;case Y:this.error_=N(),this.state_=t,this.notifyObservers_();break;case X:case K:this.state_=t,this.notifyObservers_()}},t.prototype.completeTransitions_=function(){switch(this.state_){case z:this.transition_(G);break;case Q:this.transition_(Y);break;case H:this.start_()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=J(this.state_);return new Gt(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){function i(){if(t!==W.STATE_CHANGED)throw"Expected one of the event types: ["+W.STATE_CHANGED+"]."}var o="Expected a function or an Object with one of `next`, `error`, `complete` properties.",s=ee(!0).validator,a=te(null,!0).validator;function u(t){try{return void s(t)}catch(e){}try{if(a(t),!(tt(t.next)||tt(t.error)||tt(t.complete)))throw"";return}catch(e){throw o}}var c=[Yt(i),te(u,!0),ee(!0),ee(!0)];Kt("on",c,arguments);var l=this;function h(t){return function(e,n,i){null!==t&&Kt("on",t,arguments);var o=new zt(e,n,r);return l.addObserver_(o),function(){l.removeObserver_(o)}}}function f(t){if(null===t)throw o;u(t)}var p=[te(f),ee(!0),ee(!0)],d=!(tt(e)||tt(n)||tt(r));return d?h(p):h(null)(e,n,r)},t.prototype.then=function(t,e){return this.promise_.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},t.prototype.removeObserver_=function(t){var e=this.observers_.indexOf(t);-1!==e&&this.observers_.splice(e,1)},t.prototype.notifyObservers_=function(){var t=this;this.finishPromise_(),this.observers_.slice().forEach((function(e){t.notifyObserver_(e)}))},t.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(J(this.state_)){case $.SUCCESS:ne(this.resolve_.bind(null,this.snapshot))();break;case $.CANCELED:case $.ERROR:ne(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},t.prototype.notifyObserver_=function(t){switch(J(this.state_)){case $.RUNNING:case $.PAUSED:t.next&&ne(t.next.bind(t,this.snapshot))();break;case $.SUCCESS:t.complete&&ne(t.complete.bind(t))();break;case $.CANCELED:case $.ERROR:t.error&&ne(t.error.bind(t,this.error_))();break;default:t.error&&ne(t.error.bind(t,this.error_))()}},t.prototype.resume=function(){Kt("resume",[],arguments);var t=this.state_===G||this.state_===z;return t&&this.transition_(H),t},t.prototype.pause=function(){Kt("pause",[],arguments);var t=this.state_===H;return t&&this.transition_(z),t},t.prototype.cancel=function(){Kt("cancel",[],arguments);var t=this.state_===H||this.state_===z;return t&&this.transition_(Q),t},t}(),ie=function(){function t(t,e){this.service=t,this.location=e instanceof dt?e:dt.makeFromUrl(e)}return t.prototype.toString=function(){return Kt("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},t.prototype.newRef=function(e,n){return new t(e,n)},t.prototype.mappings=function(){return Tt()},t.prototype.child=function(t){Kt("child",[Yt()],arguments);var e=yt(this.location.path,t),n=new dt(this.location.bucket,e);return this.newRef(this.service,n)},Object.defineProperty(t.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new dt(this.location.bucket,t);return this.newRef(this.service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){var t=new dt(this.location.bucket,"");return this.newRef(this.service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return gt(this.location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this.service},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return void 0===e&&(e=null),Kt("put",[Xt(),$t(!0)],arguments),this.throwIfRoot_("put"),new re(this,this.service,this.location,this.mappings(),new pt(t),e)},t.prototype.putString=function(t,e,n){void 0===e&&(e=L.RAW),Kt("putString",[Yt(),Yt(M,!0),$t(!0)],arguments),this.throwIfRoot_("putString");var r=U(e,t),i=Object.assign({},n);return!Z(i.contentType)&&Z(r.contentType)&&(i.contentType=r.contentType),new re(this,this.service,this.location,this.mappings(),new pt(r.data,!0),i)},t.prototype.delete=function(){var t=this;return Kt("delete",[],arguments),this.throwIfRoot_("delete"),this.service.getAuthToken().then((function(e){var n=Vt(t.service,t.location);return t.service.makeRequest(n,e).getPromise()}))},t.prototype.listAll=function(){Kt("listAll",[],arguments);var t={prefixes:[],items:[]};return this.listAllHelper(t).then((function(){return t}))},t.prototype.listAllHelper=function(t,e){return Object(o.__awaiter)(this,void 0,void 0,(function(){var n,r,i,s;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return n={pageToken:e},[4,this.list(n)];case 1:return r=o.sent(),(i=t.prefixes).push.apply(i,r.prefixes),(s=t.items).push.apply(s,r.items),null==r.nextPageToken?[3,3]:[4,this.listAllHelper(t,r.nextPageToken)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))},t.prototype.list=function(t){Kt("list",[Jt(!0)],arguments);var e=this;return this.service.getAuthToken().then((function(n){var r=t||{},i=Ft(e.service,e.location,"/",r.pageToken,r.maxResults);return e.service.makeRequest(i,n).getPromise()}))},t.prototype.getMetadata=function(){var t=this;return Kt("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.service.getAuthToken().then((function(e){var n=Mt(t.service,t.location,t.mappings());return t.service.makeRequest(n,e).getPromise()}))},t.prototype.updateMetadata=function(t){var e=this;return Kt("updateMetadata",[$t()],arguments),this.throwIfRoot_("updateMetadata"),this.service.getAuthToken().then((function(n){var r=jt(e.service,e.location,t,e.mappings());return e.service.makeRequest(r,n).getPromise()}))},t.prototype.getDownloadURL=function(){var t=this;return Kt("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.service.getAuthToken().then((function(e){var n=Ut(t.service,t.location,t.mappings());return t.service.makeRequest(n,e).getPromise().then((function(t){if(null===t)throw O();return t}))}))},t.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw function(t){return new a(T,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)},t}(),oe=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();var se=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var u=t.callback_(s,s.getResponseText());tt(u)?i(u):i()}catch(c){o(c)}else null!==s?((r=k()).setServerResponseProp(s.getResponseText()),t.errorCallback_?o(t.errorCallback_(s,r)):o(r)):n.canceled?o(r=t.appDelete_?R():N()):o(r=new a(p,"Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new ae(!1,null,!0)):this.backoffId_=function(t,e,n){var r=1,i=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];c||(c=!0,e.apply(null,t))}function h(e){i=setTimeout((function(){i=null,t(f,u())}),e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,Object(o.__spreadArrays)([null,t],e));else{var i,f=u()||s;if(f)l.call.apply(l,Object(o.__spreadArrays)([null,t],e));else r<64&&(r*=2),1===a?(a=2,i=0):i=1e3*(r+Math.random()),h(i)}}var p=!1;function d(t){p||(p=!0,c||(null!==i?(t||(a=2),clearTimeout(i),h(0)):t||(a=1)))}return h(0),setTimeout((function(){s=!0,d(!0)}),n),d}((function(e,n){if(n)e(!1,new ae(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===B.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new ae(s,n))}else{var a=n.getErrorCode()===B.ABORT;e(!1,new ae(!1,null,a))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}),e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),ae=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function ue(t,e,n,r){var o=bt(t.urlParams),s=t.url+o,a=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(a,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(a,n),function(t){var e="undefined"!==typeof i.a?i.a.SDK_VERSION:"AppManager";t["X-Firebase-Storage-Version"]="webjs/"+e}(a),new se(s,t.method,a,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}var ce=function(){function t(e,n,r,i){var o;this.bucket_=null,this.appId_=null,this.deleted_=!1,this.app_=e,this.authProvider_=n,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e5,this.requests_=new Set,this.pool_=r,this.bucket_=null!=i?dt.makeFromBucketSpec(i):t.extractBucket_(null===(o=this.app_)||void 0===o?void 0:o.options),this.internals_=new le(this)}return t.extractBucket_=function(t){var e=null===t||void 0===t?void 0:t.storageBucket;return null==e?null:dt.makeFromBucketSpec(e)},t.prototype.getAuthToken=function(){return Object(o.__awaiter)(this,void 0,void 0,(function(){var t,e;return Object(o.__generator)(this,(function(n){switch(n.label){case 0:return(t=this.authProvider_.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requests_.forEach((function(t){return t.cancel()})),this.requests_.clear()},t.prototype.makeStorageReference=function(t){return new ie(this,t)},t.prototype.makeRequest=function(t,e){var n=this;if(this.deleted_)return new oe(R());var r=ue(t,this.appId_,e,this.pool_);return this.requests_.add(r),r.getPromise().then((function(){return n.requests_.delete(r)}),(function(){return n.requests_.delete(r)})),r},t.prototype.ref=function(t){function e(t){if("string"!==typeof t)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."}if(Kt("ref",[Yt(e,!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var n=new ie(this,this.bucket_);return null!=t?n.child(t):n},t.prototype.refFromURL=function(t){function e(t){if("string"!==typeof t)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{dt.makeFromUrl(t)}catch(e){throw"Expected valid full URL but got an invalid one."}}return Kt("refFromURL",[Yt(e,!1)],arguments),new ie(this,t)},Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this.maxUploadRetryTime_},enumerable:!1,configurable:!0}),t.prototype.setMaxUploadRetryTime=function(t){Kt("setMaxUploadRetryTime",[Zt()],arguments),this.maxUploadRetryTime_=t},Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this.maxOperationRetryTime_},enumerable:!1,configurable:!0}),t.prototype.setMaxOperationRetryTime=function(t){Kt("setMaxOperationRetryTime",[Zt()],arguments),this.maxOperationRetryTime_=t},Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!1,configurable:!0}),t}(),le=function(){function t(t){this.service_=t}return t.prototype.delete=function(){return this.service_.deleteApp(),Promise.resolve()},t}();function he(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new ce(n,r,new lt,e)}function fe(t){var e={TaskState:$,TaskEvent:W,StringFormat:L,Storage:ce,Reference:ie};t.INTERNAL.registerComponent(new s.Component("storage",he,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.3.42")}fe(i.a)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(3))&&"object"===typeof r&&"default"in r?r.default:r;n(13);var o,s,a,u=n(0),c=n(2),l=n(11),h=n(4),f=((o={})["trace started"]="Trace {$traceName} was started before.",o["trace stopped"]="Trace {$traceName} is not running.",o["no window"]="Window is not available.",o["no app id"]="App id is not available.",o["no project id"]="Project id is not available.",o["no api key"]="Api key is not available.",o["invalid cc log"]="Attempted to queue invalid cc event",o["FB not default"]="Performance can only start when Firebase app instance is the default one.",o["RC response not ok"]="RC response is not ok",o["invalid attribute name"]="Attribute name {$attributeName} is invalid.",o["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",o["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",o["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",o),p=new c.ErrorFactory("performance","Performance",f),d=new l.Logger("Performance");d.logLevel=l.LogLevel.INFO;var v,y=function(){function t(t){if(this.window=t,!t)throw p.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!c.isIndexedDBAvailable()||(d.info("IndexedDB is not supported by current browswer"),!1):(d.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++){var i=r[n];e(i)}})).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===s&&(s=new t(a)),s},t}();function g(t,e){var n=t.length-e.length;if(n<0||n>1)throw p.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var m,b,_=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=g("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=g("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw p.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw p.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw p.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===v&&(v=new t),v},t}();function w(){return m}!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN"}(b||(b={}));var E=["firebase_","google_","ga_"],T=new RegExp("^[a-zA-Z]\\w*$");function I(){var t=y.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function S(){switch(y.getInstance().document.visibilityState){case"visible":return b.VISIBLE;case"hidden":return b.HIDDEN;default:return b.UNKNOWN}}function C(){var t=y.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}var k=!0;function N(t){var e=function(){var t=y.getInstance().localStorage;if(!t)return;var e=t.getItem("@firebase/performance/configexpire");if(!e||(n=e,!(Number(n)>Date.now())))return;var n;var r=t.getItem("@firebase/performance/config");if(!r)return;try{return JSON.parse(r)}catch(o){return}}();return e?(A(e),Promise.resolve()):function(t){return function(){var t=_.getInstance().installationsService.getToken();return t.then((function(t){})),t}().then((function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+_.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+_.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:_.getInstance().getAppId(),app_version:"0.4.0",sdk_version:"0.0.1"})});return fetch(r).then((function(t){if(t.ok)return t.json();throw p.create("RC response not ok")}))})).catch((function(){d.info("Could not fetch config, will use default configs")}))}(t).then(A).then((function(t){return function(t){var e=y.getInstance().localStorage;if(!t||!e)return;e.setItem("@firebase/performance/config",JSON.stringify(t)),e.setItem("@firebase/performance/configexpire",String(Date.now()+60*_.getInstance().configTimeToLive*60*1e3))}(t)}),(function(){}))}function A(t){if(!t)return t;var e=_.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=k,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=O(e.tracesSamplingRate),e.logNetworkAfterSampling=O(e.networkRequestsSamplingRate),t}function O(t){return Math.random()<=t}var P,R=1;function x(){return R=2,P=P||function(){var t=y.getInstance().document;return new Promise((function(e){t&&"complete"!==t.readyState?t.addEventListener("readystatechange",(function n(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())})):e()}))}().then((function(){return function(){var t=_.getInstance().installationsService.getId();return t.then((function(t){m=t})),t}()})).then((function(t){return N(t)})).then((function(){return D()}),(function(){return D()}))}function D(){R=3}var L,M=3,F=[],U=!1;function j(t){setTimeout((function(){if(0!==M)return F.length?void function(){var t=u.__spreadArrays(F);F=[];var e=t.map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}}));(function(t,e){return function(t){var e=_.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then((function(t){return t.ok||d.info("Call to Firebase backend failed."),t.json()})).then((function(t){var n=Number(t.nextRequestWaitMillis),r=1e4;isNaN(n)||(r=Math.max(n,r));var i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(F=u.__spreadArrays(e,F),d.info("Retry transport request later.")),M=3,j(r)}))})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:_.getInstance().logSource,log_event:e},t).catch((function(){F=u.__spreadArrays(t,F),M--,d.info("Tries left: "+M+"."),j(1e4)}))}():j(1e4)}),t)}function V(t){if(!t.eventTime||!t.message)throw p.create("invalid cc log");F=u.__spreadArrays(F,[t])}function q(t,e){L||(L=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.apply(void 0,e);V({message:r,eventTime:Date.now()})}}(H)),L(t,e)}function B(t){var e=_.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&y.getInstance().requiredApisAvailable()&&(t.isAuto&&S()!==b.VISIBLE||e.loggingEnabled&&e.logTraceAfterSampling&&(3===R?W(t):x().then((function(){return W(t)}),(function(){return W(t)}))))}function W(t){w()&&setTimeout((function(){return q(t,1)}),0)}function H(t,e){return 0===e?function(t){var e={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},n={application_info:z(),network_request_metric:e};return JSON.stringify(n)}(t):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:z(),trace_metric:e};return JSON.stringify(r)}(t)}function z(){return{google_app_id:_.getInstance().getAppId(),app_instance_id:w(),web_app_info:{sdk_version:"0.4.0",page_url:y.getInstance().getUrl(),service_worker_status:I(),visibility_state:S(),effective_connection_type:C()},application_process_state:0}}var G=["_fp","_fcp","_fid"];var K=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=y.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw p.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw p.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),B(this)},t.prototype.record=function(t,e,n){if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=u.__assign({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}B(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(!function(t,e){return!(0===t.length||t.length>100)&&(e&&e.startsWith("_wt_")&&G.indexOf(t)>-1||!t.startsWith("_"))}(t,this.name))throw p.create("invalid custom metric name",{customMetricName:t});this.counters[t]=function(t){var e=Math.floor(t);return e<t&&d.info("Metric value should be an Integer, setting the value as : "+e+"."),e}(e)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n=function(t){return!(0===t.length||t.length>40)&&(!E.some((function(e){return t.startsWith(e)}))&&!!t.match(T))}(t),r=function(t){return 0!==t.length&&t.length<=100}(e);if(n&&r)this.customAttributes[t]=e;else{if(!n)throw p.create("invalid attribute name",{attributeName:t});if(!r)throw p.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return u.__assign({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=y.getInstance().getUrl();if(i){var o=new t("_wt_"+i,!0),s=Math.floor(1e3*y.getInstance().getTimeOrigin());o.setStartTime(s),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd)));if(n){var a=n.find((function(t){return"first-paint"===t.name}));a&&a.startTime&&o.putMetric("_fp",Math.floor(1e3*a.startTime));var u=n.find((function(t){return"first-contentful-paint"===t.name}));u&&u.startTime&&o.putMetric("_fcp",Math.floor(1e3*u.startTime)),r&&o.putMetric("_fid",Math.floor(1e3*r))}B(o)}},t.createUserTimingTrace=function(e){B(new t(e,!1,e))},t}();function Q(t){var e=t;if(e&&void 0!==e.responseStart){var n=y.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=_.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((function(){return q(t,0)}),0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}function Y(){w()&&(setTimeout((function(){return function(){var t=y.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout((function(){K.createOobTrace(e,n),r=void 0}),5e3);t.onFirstInputDelay((function(t){r&&(clearTimeout(r),K.createOobTrace(e,n,t))}))}else K.createOobTrace(e,n)}()}),0),setTimeout((function(){return function(){for(var t=y.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){Q(r[n])}t.setupObserver("resource",Q)}()}),0),setTimeout((function(){return function(){for(var t=y.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){X(r[n])}t.setupObserver("measure",X)}()}),0))}function X(t){var e=t.name;"FB-PERF-TRACE-MEASURE"!==e.substring(0,"FB-PERF-TRACE-MEASURE".length)&&K.createUserTimingTrace(e)}var $=function(){function t(t){this.app=t,y.getInstance().requiredApisAvailable()&&c.validateIndexedDBOpenable().then((function(t){t&&(U||(j(5500),U=!0),x().then(Y,Y))})).catch((function(t){d.info("Environment doesn't support IndexedDB: "+t)}))}return t.prototype.trace=function(t){return new K(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return _.getInstance().instrumentationEnabled},set:function(t){_.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return _.getInstance().dataCollectionEnabled},set:function(t){_.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();function J(t){var e=function(t,e){if("[DEFAULT]"!==t.name)throw p.create("FB not default");if("undefined"===typeof window)throw p.create("no window");return function(t){a=t}(window),_.getInstance().firebaseAppInstance=t,_.getInstance().installationsService=e,new $(t)};t.INTERNAL.registerComponent(new h.Component("performance",(function(t){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();return e(n,r)}),"PUBLIC")),t.registerVersion("@firebase/performance","0.4.0")}J(i),e.registerPerformance=J},function(t,e,n){"use strict";n.r(e),n.d(e,"factory",(function(){return C})),n.d(e,"getGlobalVars",(function(){return I})),n.d(e,"registerAnalytics",(function(){return k})),n.d(e,"resetGlobalVars",(function(){return T})),n.d(e,"settings",(function(){return S}));var r,i,o=n(0),s=n(3),a=n.n(s),u=(n(13),n(11)),c=n(2),l=n(4),h="https://www.googletagmanager.com/gtag/js";!function(t){t.EVENT="event",t.SET="set",t.CONFIG="config"}(r||(r={})),function(t){t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results"}(i||(i={}));var f,p=new u.Logger("@firebase/analytics");function d(t,e,n){var i=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];window[e].push(arguments)};return window[n]&&"function"===typeof window[n]&&(i=window[n]),window[n]=function(t,e){return function(n,i,o){if(n===r.EVENT){var s=[];if(o&&o.send_to){var a=o.send_to;Array.isArray(a)||(a=[a]);for(var u=0,c=a;u<c.length;u++){var l=c[u],h=e[l];if(!h){s=[];break}s.push(h)}}if(0===s.length)for(var f=0,d=Object.values(e);f<d.length;f++){var v=d[f];s.push(v)}Promise.all(s).then((function(){return t(r.EVENT,i,o||{})})).catch((function(t){return p.error(t)}))}else if(n===r.CONFIG){(e[i]||Promise.resolve()).then((function(){t(r.CONFIG,i,o)})).catch((function(t){return p.error(t)}))}else t(r.SET,i)}}(i,t),{gtagCore:i,wrappedGtag:window[n]}}var v,y,g=((f={})["no-ga-id"]='"measurementId" field is empty in Firebase config. Firebase Analytics requires this field to contain a valid measurement ID.',f["already-exists"]="A Firebase Analytics instance with the measurement ID ${id}  already exists. Only one Firebase Analytics instance can be created for each measurement ID.",f["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",f["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate",f["indexedDB-unsupported"]="IndexedDB is not supported by current browswer",f["invalid-indexedDB-context"]="Environment doesn't support IndexedDB: {$errorInfo}. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments",f["cookies-not-enabled"]="Cookies are not enabled in this browser environment. Analytics requires cookies to be enabled.",f["invalid-analytics-context"]="Firebase Analytics is not supported in browser extensions.",f),m=new c.ErrorFactory("analytics","Analytics",g),b={},_="dataLayer",w="gtag",E=!1;function T(t,e){void 0===t&&(t=!1),void 0===e&&(e={}),E=t,b=e,_="dataLayer",w="gtag"}function I(){return{initializedIdPromisesMap:b}}function S(t){if(E)throw m.create("already-initialized");t.dataLayerName&&(_=t.dataLayerName),t.gtagName&&(w=t.gtagName)}function C(t,e){if(Object(c.isBrowserExtension)())throw m.create("invalid-analytics-context");if(!Object(c.areCookiesEnabled)())throw m.create("cookies-not-enabled");if(!Object(c.isIndexedDBAvailable)())throw m.create("indexedDB-unsupported");Object(c.validateIndexedDBOpenable)().catch((function(t){throw m.create("invalid-indexedDB-context",{errorInfo:t})}));var n=t.options.measurementId;if(!n)throw m.create("no-ga-id");if(null!=b[n])throw m.create("already-exists",{id:n});if(!E){(function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(h))return r}return null})()||function(t){var e=document.createElement("script");e.src=h+"?l="+t,e.async=!0,document.head.appendChild(e)}(_),function(t){var e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(_);var i=d(b,_,w),s=i.wrappedGtag,a=i.gtagCore;y=s,v=a,E=!0}return b[n]=function(t,e,n){return Object(o.__awaiter)(this,void 0,void 0,(function(){var i,s;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return[4,e.getId()];case 1:return i=o.sent(),n("js",new Date),n(r.CONFIG,t.options.measurementId,((s={}).firebase_id=i,s.origin="firebase",s.update=!0,s)),[2]}}))}))}(t,e,v),{app:t,logEvent:function(t,e,i){return function(t,e,n,i,s){var a=i||{};s&&s.global||(a=Object(o.__assign)(Object(o.__assign)({},i),{send_to:e})),t(r.EVENT,n,a||{})}(y,n,t,e,i)},setCurrentScreen:function(t,e){return function(t,e,n,i){i&&i.global?t(r.SET,{screen_name:n}):t(r.CONFIG,e,{update:!0,screen_name:n})}(y,n,t,e)},setUserId:function(t,e){return function(t,e,n,i){i&&i.global?t(r.SET,{user_id:n}):t(r.CONFIG,e,{update:!0,user_id:n})}(y,n,t,e)},setUserProperties:function(t,e){return function(t,e,n,i){if(i&&i.global){for(var o={},s=0,a=Object.keys(n);s<a.length;s++){var u=a[s];o["user_properties."+u]=n[u]}t(r.SET,o)}else t(r.CONFIG,e,{update:!0,user_properties:n})}(y,n,t,e)},setAnalyticsCollectionEnabled:function(t){return function(t,e){window["ga-disable-"+t]=!e}(n,t)}}}function k(t){t.INTERNAL.registerComponent(new l.Component("analytics",(function(t){return C(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:S,EventName:i,isSupported:N})),t.INTERNAL.registerComponent(new l.Component("analytics-internal",(function(t){try{return{logEvent:t.getProvider("analytics").getImmediate().logEvent}}catch(e){throw m.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),t.registerVersion("@firebase/analytics","0.4.2")}function N(){return Object(o.__awaiter)(this,void 0,void 0,(function(){return Object(o.__generator)(this,(function(t){switch(t.label){case 0:if(Object(c.isBrowserExtension)())return[2,!1];if(!Object(c.areCookiesEnabled)())return[2,!1];if(!Object(c.isIndexedDBAvailable)())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Object(c.validateIndexedDBOpenable)()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}k(a.a)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(3))&&"object"===typeof r&&"default"in r?r.default:r;n(13);var o,s=n(0),a=n(2),u=n(11),c=n(4),l=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return s.__awaiter(this,void 0,void 0,(function(){var e,n,r,i,o;return s.__generator(this,(function(s){switch(s.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=s.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=s.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return s.sent(),[2,i]}}))}))},t}(),h=((o={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",o["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",o["registration-api-key"]="Undefined API key. Check Firebase app initialization.",o["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",o["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",o["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",o["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",o["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",o["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",o["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',o["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',o["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",o["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",o),f=new a.ErrorFactory("remoteconfig","Remote Config",h);var p=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return s.__awaiter(this,void 0,void 0,(function(){var e,n,r,i,o,a,u,c,l,h,p,d,v,y,g,m,b,_,w;return s.__generator(this,(function(s){switch(s.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=s.sent(),n=e[0],r=e[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},u={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:(void 0===E&&(E=navigator),E.languages&&E.languages[0]||E.language)},c={method:"POST",headers:a,body:JSON.stringify(u)},l=fetch(o,c),h=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),s.label=2;case 2:return s.trys.push([2,5,,6]),[4,Promise.race([l,h])];case 3:return s.sent(),[4,l];case 4:return p=s.sent(),[3,6];case 5:throw d=s.sent(),v="fetch-client-network","AbortError"===d.name&&(v="fetch-timeout"),f.create(v,{originalErrorMessage:d.message});case 6:if(y=p.status,g=p.headers.get("ETag")||void 0,200!==p.status)return[3,11];_=void 0,s.label=7;case 7:return s.trys.push([7,9,,10]),[4,p.json()];case 8:return _=s.sent(),[3,10];case 9:throw w=s.sent(),f.create("fetch-client-parse",{originalErrorMessage:w.message});case 10:m=_.entries,b=_.state,s.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===b?y=500:"NO_CHANGE"===b?y=304:"NO_TEMPLATE"!==b&&"EMPTY_CONFIG"!==b||(m={}),304!==y&&200!==y)throw f.create("fetch-status",{httpStatus:y});return[2,{status:y,eTag:g,config:m}]}var E}))}))},t}(),d=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),v=["1","true","t","yes","y","on"],y=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&v.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),g=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=u.LogLevel.DEBUG;break;case"silent":this._logger.logLevel=u.LogLevel.SILENT;break;default:this._logger.logLevel=u.LogLevel.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return s.__awaiter(this,void 0,void 0,(function(){var t,e,n;return s.__generator(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),e=t[0],n=t[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},t.prototype.fetch=function(){return s.__awaiter(this,void 0,void 0,(function(){var t,e,n,r=this;return s.__generator(this,(function(i){switch(i.label){case 0:t=new d,setTimeout((function(){return s.__awaiter(r,void 0,void 0,(function(){return s.__generator(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),u="fetch-throttle",n=(o=e)instanceof a.FirebaseError&&-1!==o.code.indexOf(u)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}var o,u}))}))},t.prototype.fetchAndActivate=function(){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},t.prototype.getAll=function(){var t=this;return function(t,e){void 0===t&&(t={});void 0===e&&(e={});return Object.keys(s.__assign(s.__assign({},t),e))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(e,n){return e[n]=t.getValue(n),e}),{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new y("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new y("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new y("static"))},t}();function m(t,e){var n=t.target.error||void 0;return f.create(e,{originalErrorMessage:n&&n.message})}var b=function(){function t(t,e,n,r){void 0===r&&(r=new Promise((function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(m(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore("app_namespace_store",{keyPath:"compositeKey"})}}}))),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return s.__awaiter(this,void 0,void 0,(function(){var e,n=this;return s.__generator(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction(["app_namespace_store"],"readonly").objectStore("app_namespace_store"),s=n.createCompositeKey(t);try{var a=o.get(s);a.onerror=function(t){i(m(t,"storage-get"))},a.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(u){i(f.create("storage-get",{originalErrorMessage:u&&u.message}))}}))]}}))}))},t.prototype.set=function(t,e){return s.__awaiter(this,void 0,void 0,(function(){var n,r=this;return s.__generator(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var s=n.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),a=r.createCompositeKey(t);try{var u=s.put({compositeKey:a,value:e});u.onerror=function(t){o(m(t,"storage-set"))},u.onsuccess=function(){i()}}catch(c){o(f.create("storage-set",{originalErrorMessage:c&&c.message}))}}))]}}))}))},t.prototype.delete=function(t){return s.__awaiter(this,void 0,void 0,(function(){var e,n=this;return s.__generator(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),s=n.createCompositeKey(t);try{var a=o.delete(s);a.onerror=function(t){i(m(t,"storage-delete"))},a.onsuccess=function(){r()}}catch(u){i(f.create("storage-delete",{originalErrorMessage:u&&u.message}))}}))]}}))}))},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),_=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return s.__awaiter(this,void 0,void 0,(function(){var t,e,n,r,i,o;return s.__generator(this,(function(s){switch(s.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=s.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(i=s.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=s.sent())&&(this.activeConfig=o),[2]}}))}))},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();function w(t){var e=1e3*Math.pow(2,t),n=Math.round(.5*e*(Math.random()-.5)*2);return Math.min(144e5,e+n)}function E(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(f.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var T=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return s.__awaiter(this,void 0,void 0,(function(){var e;return s.__generator(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return s.__awaiter(this,void 0,void 0,(function(){var e,i,o;return s.__generator(this,(function(s){switch(s.label){case 0:return[4,E(t.signal,n)];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=s.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return s.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof a.FirebaseError))return!1;var e=Number(t.httpStatus);return 429===e||500===e||503===e||504===e}(i=s.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+w(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return s.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}}))}))},t}(),I="@firebase/remote-config";function S(t){t.INTERNAL.registerComponent(new c.Component("remoteConfig",(function(e,n){var r=e.getProvider("app").getImmediate(),i=e.getProvider("installations").getImmediate();if("undefined"===typeof window)throw f.create("registration-window");var o=r.options,s=o.projectId,a=o.apiKey,c=o.appId;if(!s)throw f.create("registration-project-id");if(!a)throw f.create("registration-api-key");if(!c)throw f.create("registration-app-id");n=n||"firebase";var h=new b(c,r.name,n),d=new _(h),v=new u.Logger(I);v.logLevel=u.LogLevel.ERROR;var y=new p(i,t.SDK_VERSION,n,s,a,c),m=new T(y,h),w=new l(m,h,d,v),E=new g(r,w,d,h,v);return E.ensureInitialized(),E}),"PUBLIC").setMultipleInstances(!0)),t.registerVersion(I,"0.1.27")}S(i),e.registerRemoteConfig=S},function(t,e,n){(function(e,n){t.exports=function(){"use strict";function t(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function r(t){return"string"!=typeof t&&(t=String(t)),t}function i(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return y&&(e[Symbol.iterator]=function(){return e}),e}function o(t){this.map={},t instanceof o?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function s(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function a(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function u(t){var e=new FileReader,n=a(e);return e.readAsArrayBuffer(t),n}function c(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function l(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(g&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(m&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(v&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(b&&g&&w(t))this._bodyArrayBuffer=c(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!b||!ArrayBuffer.prototype.isPrototypeOf(t)&&!E(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=c(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},g&&(this.blob=function(){var t=s(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?s(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(u)}),this.text=function(){var t,e,n,r=s(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,n=a(e=new FileReader),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},m&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(t,e){var n,r,i=(e=e||{}).body;if(t instanceof h){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new o(t.headers)),this.method=t.method,this.mode=t.mode,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new o(e.headers)),this.method=(r=(n=e.method||this.method||"GET").toUpperCase(),-1<T.indexOf(r)?r:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function f(t){var e=new FormData;return t.trim().split("&").forEach((function(t){var n,r,i;t&&(r=(n=t.split("=")).shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," "),e.append(decodeURIComponent(r),decodeURIComponent(i)))})),e}function p(t,e){e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new o(e.headers),this.url=e.url||"",this._initBody(t)}var d,v,y,g,m,b,_,w,E,T,I;(d="undefined"!=typeof self?self:void 0).fetch||(v="URLSearchParams"in d,y="Symbol"in d&&"iterator"in Symbol,g="FileReader"in d&&"Blob"in d&&function(){try{return new Blob,!0}catch(i){return!1}}(),m="FormData"in d,(b="ArrayBuffer"in d)&&(_=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],w=function(t){return t&&DataView.prototype.isPrototypeOf(t)},E=ArrayBuffer.isView||function(t){return t&&-1<_.indexOf(Object.prototype.toString.call(t))}),o.prototype.append=function(e,n){e=t(e),n=r(n);var i=this.map[e];this.map[e]=i?i+","+n:n},o.prototype.delete=function(e){delete this.map[t(e)]},o.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},o.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},o.prototype.set=function(e,n){this.map[t(e)]=r(n)},o.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},o.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),i(t)},o.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),i(t)},o.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),i(t)},y&&(o.prototype[Symbol.iterator]=o.prototype.entries),T=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],h.prototype.clone=function(){return new h(this,{body:this._bodyInit})},l.call(h.prototype),l.call(p.prototype),p.prototype.clone=function(){return new p(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},p.error=function(){var t=new p(null,{status:0,statusText:""});return t.type="error",t},I=[301,302,303,307,308],p.redirect=function(t,e){if(-1===I.indexOf(e))throw new RangeError("Invalid status code");return new p(null,{status:e,headers:{location:t}})},d.Headers=o,d.Request=h,d.Response=p,d.fetch=function(t,e){return new Promise((function(n,r){var i=new h(t,e),s=new XMLHttpRequest;s.onload=function(){var t,e,r={status:s.status,statusText:s.statusText,headers:(t=s.getAllResponseHeaders()||"",e=new o,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var n,r=t.split(":"),i=r.shift().trim();i&&(n=r.join(":").trim(),e.append(i,n))})),e)};r.url="responseURL"in s?s.responseURL:r.headers.get("X-Request-URL");var i="response"in s?s.response:s.responseText;n(new p(i,r))},s.onerror=function(){r(new TypeError("Network request failed"))},s.ontimeout=function(){r(new TypeError("Network request failed"))},s.open(i.method,i.url,!0),"include"===i.credentials?s.withCredentials=!0:"omit"===i.credentials&&(s.withCredentials=!1),"responseType"in s&&g&&(s.responseType="blob"),i.headers.forEach((function(t,e){s.setRequestHeader(e,t)})),s.send(void 0===i._bodyInit?null:i._bodyInit)}))},d.fetch.polyfill=!0);var S="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{};function C(t,e){return t(e={exports:{}},e.exports),e.exports}function k(t){return t&&t.Math==Math&&t}function N(t){try{return!!t()}catch(t){return!0}}function A(t){return"object"==typeof t?null!==t:"function"==typeof t}function O(t){return B?q.createElement(t):{}}function P(t){if(!A(t))throw TypeError(String(t)+" is not an object");return t}function R(t,e){if(!A(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!A(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!A(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!A(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function x(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function D(t,e){try{G(U,t,e)}catch(i){U[t]=e}return e}function L(t,e){return X.call(t,e)}function M(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++$+J).toString(36)}function F(t){return L(et,t)||(Z&&L(nt,t)?et[t]=nt[t]:et[t]=rt("Symbol."+t)),et[t]}var U=k("object"==typeof globalThis&&globalThis)||k("object"==typeof window&&window)||k("object"==typeof self&&self)||k("object"==typeof S&&S)||Function("return this")(),j=!1,V=!N((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),q=U.document,B=A(q)&&A(q.createElement),W=!V&&!N((function(){return 7!=Object.defineProperty(O("div"),"a",{get:function(){return 7}}).a})),H=Object.defineProperty,z={f:V?H:function(t,e,n){if(P(t),e=R(e,!0),P(n),W)try{return H(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},G=V?function(t,e,n){return z.f(t,e,x(1,n))}:function(t,e,n){return t[e]=n,t},K="__core-js_shared__",Q=U[K]||D(K,{}),Y=C((function(t){(t.exports=function(t,e){return Q[t]||(Q[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})})),X={}.hasOwnProperty,$=0,J=Math.random(),Z=!!Object.getOwnPropertySymbols&&!N((function(){return!String(Symbol())})),tt=Z&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,et=Y("wks"),nt=U.Symbol,rt=tt?nt:nt&&nt.withoutSetter||M,it={};it[F("toStringTag")]="z";var ot="[object z]"===String(it),st=Function.toString;function at(t){return bt[t]||(bt[t]=M(t))}"function"!=typeof Q.inspectSource&&(Q.inspectSource=function(t){return st.call(t)});var ut,ct,lt,ht,ft,pt,dt,vt,yt=Q.inspectSource,gt=U.WeakMap,mt="function"==typeof gt&&/native code/.test(yt(gt)),bt=Y("keys"),_t={},wt=U.WeakMap;function Et(t){return St.call(t).slice(8,-1)}dt=mt?(ut=new wt,ct=ut.get,lt=ut.has,ht=ut.set,ft=function(t,e){return ht.call(ut,t,e),e},pt=function(t){return ct.call(ut,t)||{}},function(t){return lt.call(ut,t)}):(vt=at("state"),_t[vt]=!0,ft=function(t,e){return G(t,vt,e),e},pt=function(t){return L(t,vt)?t[vt]:{}},function(t){return L(t,vt)});var Tt={set:ft,get:pt,has:dt,enforce:function(t){return dt(t)?pt(t):ft(t,{})},getterFor:function(t){return function(e){var n;if(!A(e)||(n=pt(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},It=C((function(t){var e=Tt.get,n=Tt.enforce,r=String(String).split("String");(t.exports=function(t,e,i,o){var s=!!o&&!!o.unsafe,a=!!o&&!!o.enumerable,u=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof e||L(i,"name")||G(i,"name",e),n(i).source=r.join("string"==typeof e?e:"")),t!==U?(s?!u&&t[e]&&(a=!0):delete t[e],a?t[e]=i:G(t,e,i)):a?t[e]=i:D(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||yt(this)}))})),St={}.toString,Ct=F("toStringTag"),kt="Arguments"==Et(function(){return arguments}()),Nt=ot?Et:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Ct))?n:kt?Et(e):"Object"==(r=Et(e))&&"function"==typeof e.callee?"Arguments":r},At=ot?{}.toString:function(){return"[object "+Nt(this)+"]"};function Ot(t){return isNaN(t=+t)?0:(0<t?Kt:Gt)(t)}function Pt(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function Rt(t){return function(e,n){var r,i,o=String(Pt(e)),s=Ot(n),a=o.length;return s<0||a<=s?t?"":void 0:(r=o.charCodeAt(s))<55296||56319<r||s+1===a||(i=o.charCodeAt(s+1))<56320||57343<i?t?o.charAt(s):r:t?o.slice(s,s+2):i-56320+(r-55296<<10)+65536}}function xt(t){return Zt(Pt(t))}function Dt(t){return"function"==typeof t?t:void 0}function Lt(t,e){return arguments.length<2?Dt(ne[t])||Dt(U[t]):ne[t]&&ne[t][e]||U[t]&&U[t][e]}function Mt(t){return 0<t?re(Ot(t),9007199254740991):0}function Ft(t){return function(e,n,r){var i,o,s,a=xt(e),u=Mt(a.length),c=(i=u,(o=Ot(r))<0?ie(o+i,0):oe(o,i));if(t&&n!=n){for(;c<u;)if((s=a[c++])!=s)return!0}else for(;c<u;c++)if((t||c in a)&&a[c]===n)return t||c||0;return!t&&-1}}function Ut(t,e){var n,r=xt(t),i=0,o=[];for(n in r)!L(_t,n)&&L(r,n)&&o.push(n);for(;e.length>i;)L(r,n=e[i++])&&(~se(o,n)||o.push(n));return o}function jt(t,e){for(var n=he(e),r=z.f,i=ee.f,o=0;o<n.length;o++){var s=n[o];L(t,s)||r(t,s,i(e,s))}}function Vt(t,e){var n=de[pe(t)];return n==ye||n!=ve&&("function"==typeof e?N(e):!!e)}function qt(t,e){var n,r,i,o,s=t.target,a=t.global,u=t.stat,c=a?U:u?U[s]||D(s,{}):(U[s]||{}).prototype;if(c)for(n in e){if(i=e[n],r=t.noTargetGet?(o=me(c,n))&&o.value:c[n],!ge(a?n:s+(u?".":"#")+n,t.forced)&&void 0!==r){if(typeof i==typeof r)continue;jt(i,r)}(t.sham||r&&r.sham)&&G(i,"sham",!0),It(c,n,i,t)}}function Bt(t){return Object(Pt(t))}ot||It(Object.prototype,"toString",At,{unsafe:!0});var Wt,Ht,zt,Gt=Math.ceil,Kt=Math.floor,Qt={codeAt:Rt(!1),charAt:Rt(!0)},Yt={}.propertyIsEnumerable,Xt=Object.getOwnPropertyDescriptor,$t={f:Xt&&!Yt.call({1:2},1)?function(t){var e=Xt(this,t);return!!e&&e.enumerable}:Yt},Jt="".split,Zt=N((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==Et(t)?Jt.call(t,""):Object(t)}:Object,te=Object.getOwnPropertyDescriptor,ee={f:V?te:function(t,e){if(t=xt(t),e=R(e,!0),W)try{return te(t,e)}catch(t){}if(L(t,e))return x(!$t.f.call(t,e),t[e])}},ne=U,re=Math.min,ie=Math.max,oe=Math.min,se=(Ft(!0),Ft(!1)),ae=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ue=ae.concat("length","prototype"),ce={f:Object.getOwnPropertyNames||function(t){return Ut(t,ue)}},le={f:Object.getOwnPropertySymbols},he=Lt("Reflect","ownKeys")||function(t){var e=ce.f(P(t)),n=le.f;return n?e.concat(n(t)):e},fe=/#|\.prototype\./,pe=Vt.normalize=function(t){return String(t).replace(fe,".").toLowerCase()},de=Vt.data={},ve=Vt.NATIVE="N",ye=Vt.POLYFILL="P",ge=Vt,me=ee.f,be=!N((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),_e=at("IE_PROTO"),we=Object.prototype,Ee=be?Object.getPrototypeOf:function(t){return L(t=Bt(t),_e)?t[_e]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?we:null},Te=F("iterator"),Ie=!1;function Se(){}function Ce(t){return"<script>"+t+"</"+xe+">"}[].keys&&("next"in(zt=[].keys())?(Ht=Ee(Ee(zt)))!==Object.prototype&&(Wt=Ht):Ie=!0),null==Wt&&(Wt={}),L(Wt,Te)||G(Wt,Te,(function(){return this}));var ke,Ne={IteratorPrototype:Wt,BUGGY_SAFARI_ITERATORS:Ie},Ae=Object.keys||function(t){return Ut(t,ae)},Oe=V?Object.defineProperties:function(t,e){P(t);for(var n,r=Ae(e),i=r.length,o=0;o<i;)z.f(t,n=r[o++],e[n]);return t},Pe=Lt("document","documentElement"),Re="prototype",xe="script",De=at("IE_PROTO"),Le=function(){try{ke=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;Le=ke?function(t){t.write(Ce("")),t.close();var e=t.parentWindow.Object;return t=null,e}(ke):((e=O("iframe")).style.display="none",Pe.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Ce("document.F=Object")),t.close(),t.F);for(var n=ae.length;n--;)delete Le[Re][ae[n]];return Le()};function Me(t,e,n){t&&!L(t=n?t:t.prototype,Be)&&qe(t,Be,{configurable:!0,value:e})}function Fe(){return this}function Ue(){return this}function je(t,e,n,r,i,o,s){var a,u,c;function l(t){if(t===i&&m)return m;if(!Ke&&t in y)return y[t];switch(t){case"keys":case Ye:case Xe:return function(){return new n(this,t)}}return function(){return new n(this)}}u=r,c=e+" Iterator",(a=n).prototype=Ve(He,{next:x(1,u)}),Me(a,c,!1),We[c]=Fe;var h,f,p,d=e+" Iterator",v=!1,y=t.prototype,g=y[Qe]||y["@@iterator"]||i&&y[i],m=!Ke&&g||l(i),b="Array"==e&&y.entries||g;if(b&&(h=Ee(b.call(new t)),Ge!==Object.prototype&&h.next&&(Ee(h)!==Ge&&(ze?ze(h,Ge):"function"!=typeof h[Qe]&&G(h,Qe,Ue)),Me(h,d,!0))),i==Ye&&g&&g.name!==Ye&&(v=!0,m=function(){return g.call(this)}),y[Qe]!==m&&G(y,Qe,m),We[e]=m,i)if(f={values:l(Ye),keys:o?m:l("keys"),entries:l(Xe)},s)for(p in f)!Ke&&!v&&p in y||It(y,p,f[p]);else qt({target:e,proto:!0,forced:Ke||v},f);return f}_t[De]=!0;var Ve=Object.create||function(t,e){var n;return null!==t?(Se[Re]=P(t),n=new Se,Se[Re]=null,n[De]=t):n=Le(),void 0===e?n:Oe(n,e)},qe=z.f,Be=F("toStringTag"),We={},He=Ne.IteratorPrototype,ze=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(n){}return function(n,r){return P(n),function(t){if(!A(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),Ge=Ne.IteratorPrototype,Ke=Ne.BUGGY_SAFARI_ITERATORS,Qe=F("iterator"),Ye="values",Xe="entries",$e=Qt.charAt,Je="String Iterator",Ze=Tt.set,tn=Tt.getterFor(Je);je(String,"String",(function(t){Ze(this,{type:Je,string:String(t),index:0})}),(function(){var t,e=tn(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=$e(n,r),e.index+=t.length,{value:t,done:!1})}));var en={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},nn=F("unscopables"),rn=Array.prototype;function on(t){rn[nn][t]=!0}null==rn[nn]&&z.f(rn,nn,{configurable:!0,value:Ve(null)});var sn="Array Iterator",an=Tt.set,un=Tt.getterFor(sn),cn=je(Array,"Array",(function(t,e){an(this,{type:sn,target:xt(t),index:0,kind:e})}),(function(){var t=un(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");We.Arguments=We.Array,on("keys"),on("values"),on("entries");var ln=F("iterator"),hn=F("toStringTag"),fn=cn.values;for(var pn in en){var dn=U[pn],vn=dn&&dn.prototype;if(vn){if(vn[ln]!==fn)try{G(vn,ln,fn)}catch(Tu){vn[ln]=fn}if(vn[hn]||G(vn,hn,pn),en[pn])for(var yn in cn)if(vn[yn]!==cn[yn])try{G(vn,yn,cn[yn])}catch(Tu){vn[yn]=cn[yn]}}}function gn(t,e,n){for(var r in e)It(t,r,e[r],n);return t}function mn(t){var e=Lt(t),n=z.f;V&&e&&!e[Cn]&&n(e,Cn,{configurable:!0,get:function(){return this}})}function bn(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function _n(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}function wn(t){return void 0!==t&&(We.Array===t||Nn[kn]===t)}function En(t,e,n){if(bn(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}function Tn(t){if(null!=t)return t[An]||t["@@iterator"]||We[Nt(t)]}function In(t,e,n,r){try{return r?e(P(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&P(i.call(t)),e}}var Sn=U.Promise,Cn=F("species"),kn=F("iterator"),Nn=Array.prototype,An=F("iterator"),On=C((function(t){function e(t,e){this.stopped=t,this.result=e}(t.exports=function(t,n,r,i,o){var s,a,u,c,l,h,f,p=En(n,r,i?2:1);if(o)s=t;else{if("function"!=typeof(a=Tn(t)))throw TypeError("Target is not iterable");if(wn(a)){for(u=0,c=Mt(t.length);u<c;u++)if((l=i?p(P(f=t[u])[0],f[1]):p(t[u]))&&l instanceof e)return l;return new e(!1)}s=a.call(t)}for(h=s.next;!(f=h.call(s)).done;)if("object"==typeof(l=In(s,p,f.value,i))&&l&&l instanceof e)return l;return new e(!1)}).stop=function(t){return new e(!0,t)}})),Pn=F("iterator"),Rn=!1;try{var xn=0,Dn={next:function(){return{done:!!xn++}},return:function(){Rn=!0}};Dn[Pn]=function(){return this},Array.from(Dn,(function(){throw 2}))}catch(Tu){}function Ln(t,e){if(!e&&!Rn)return!1;var n=!1;try{var r={};r[Pn]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}function Mn(t,e){var n,r=P(t).constructor;return void 0===r||null==(n=P(r)[Hn])?e:bn(n)}function Fn(t){var e;tr.hasOwnProperty(t)&&(e=tr[t],delete tr[t],e())}function Un(t){return function(){Fn(t)}}function jn(t){Fn(t.data)}function Vn(t){U.postMessage(t+"",Kn.protocol+"//"+Kn.host)}var qn,Bn,Wn,Hn=F("species"),zn=Lt("navigator","userAgent")||"",Gn=/(iphone|ipod|ipad).*applewebkit/i.test(zn),Kn=U.location,Qn=U.setImmediate,Yn=U.clearImmediate,Xn=U.process,$n=U.MessageChannel,Jn=U.Dispatch,Zn=0,tr={},er="onreadystatechange";Qn&&Yn||(Qn=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return tr[++Zn]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},qn(Zn),Zn},Yn=function(t){delete tr[t]},"process"==Et(Xn)?qn=function(t){Xn.nextTick(Un(t))}:Jn&&Jn.now?qn=function(t){Jn.now(Un(t))}:$n&&!Gn?(Wn=(Bn=new $n).port2,Bn.port1.onmessage=jn,qn=En(Wn.postMessage,Wn,1)):!U.addEventListener||"function"!=typeof postMessage||U.importScripts||N(Vn)||"file:"===Kn.protocol?qn=er in O("script")?function(t){Pe.appendChild(O("script"))[er]=function(){Pe.removeChild(this),Fn(t)}}:function(t){setTimeout(Un(t),0)}:(qn=Vn,U.addEventListener("message",jn,!1)));var nr,rr,ir,or,sr,ar,ur,cr,lr={set:Qn,clear:Yn},hr=ee.f,fr=lr.set,pr=U.MutationObserver||U.WebKitMutationObserver,dr=U.process,vr=U.Promise,yr="process"==Et(dr),gr=hr(U,"queueMicrotask"),mr=gr&&gr.value;function br(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=bn(e),this.reject=bn(n)}function _r(t,e){if(P(t),A(e)&&e.constructor===t)return e;var n=Sr.f(t);return(0,n.resolve)(e),n.promise}function wr(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}mr||(nr=function(){var t,e;for(yr&&(t=dr.domain)&&t.exit();rr;){e=rr.fn,rr=rr.next;try{e()}catch(t){throw rr?or():ir=void 0,t}}ir=void 0,t&&t.enter()},or=yr?function(){dr.nextTick(nr)}:pr&&!Gn?(sr=!0,ar=document.createTextNode(""),new pr(nr).observe(ar,{characterData:!0}),function(){ar.data=sr=!sr}):vr&&vr.resolve?(ur=vr.resolve(void 0),cr=ur.then,function(){cr.call(ur,nr)}):function(){fr.call(U,nr)});var Er,Tr,Ir=mr||function(t){var e={fn:t,next:void 0};ir&&(ir.next=e),rr||(rr=e,or()),ir=e},Sr={f:function(t){return new br(t)}},Cr=U.process,kr=Cr&&Cr.versions,Nr=kr&&kr.v8;function Ar(t){var e;return!(!A(t)||"function"!=typeof(e=t.then))&&e}function Or(t,e,n){var r;e.notified||(e.notified=!0,r=e.reactions,Ir((function(){for(var i=e.value,o=1==e.state,s=0;r.length>s;){var a,u,c,l=r[s++],h=o?l.ok:l.fail,f=l.resolve,p=l.reject,d=l.domain;try{h?(o||(2===e.rejection&&oi(t,e),e.rejection=1),!0===h?a=i:(d&&d.enter(),a=h(i),d&&(d.exit(),c=!0)),a===l.promise?p(Gr("Promise-chain cycle")):(u=Ar(a))?u.call(a,f,p):f(a)):p(i)}catch(i){d&&!c&&d.exit(),p(i)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&ri(t,e)})))}function Pr(t,e,n){var r,i;Zr?((r=Kr.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),U.dispatchEvent(r)):r={promise:e,reason:n},(i=U["on"+t])?i(r):t===ti&&function(t,e){var n=U.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)}function Rr(t,e,n,r){return function(i){t(e,n,i,r)}}function xr(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,Or(t,e,!0))}Nr?Tr=(Er=Nr.split("."))[0]+Er[1]:zn&&(!(Er=zn.match(/Edge\/(\d+)/))||74<=Er[1])&&(Er=zn.match(/Chrome\/(\d+)/))&&(Tr=Er[1]);var Dr,Lr,Mr,Fr,Ur=Tr&&+Tr,jr=lr.set,Vr=F("species"),qr="Promise",Br=Tt.get,Wr=Tt.set,Hr=Tt.getterFor(qr),zr=Sn,Gr=U.TypeError,Kr=U.document,Qr=U.process,Yr=Lt("fetch"),Xr=Sr.f,$r=Xr,Jr="process"==Et(Qr),Zr=!!(Kr&&Kr.createEvent&&U.dispatchEvent),ti="unhandledrejection",ei=ge(qr,(function(){if(yt(zr)===String(zr)){if(66===Ur)return!0;if(!Jr&&"function"!=typeof PromiseRejectionEvent)return!0}if(51<=Ur&&/native code/.test(zr))return!1;function t(t){t((function(){}),(function(){}))}var e=zr.resolve(1);return(e.constructor={})[Vr]=t,!(e.then((function(){}))instanceof t)})),ni=ei||!Ln((function(t){zr.all(t).catch((function(){}))})),ri=function(t,e){jr.call(U,(function(){var n,r=e.value;if(ii(e)&&(n=wr((function(){Jr?Qr.emit("unhandledRejection",r,t):Pr(ti,t,r)})),e.rejection=Jr||ii(e)?2:1,n.error))throw n.value}))},ii=function(t){return 1!==t.rejection&&!t.parent},oi=function(t,e){jr.call(U,(function(){Jr?Qr.emit("rejectionHandled",t):Pr("rejectionhandled",t,e.value)}))},si=function t(e,n,r,i){if(!n.done){n.done=!0,i&&(n=i);try{if(e===r)throw Gr("Promise can't be resolved itself");var o=Ar(r);o?Ir((function(){var i={done:!1};try{o.call(r,Rr(t,e,i,n),Rr(xr,e,i,n))}catch(r){xr(e,i,r,n)}})):(n.value=r,n.state=1,Or(e,n,!1))}catch(r){xr(e,{done:!1},r,n)}}};ei&&(zr=function(t){_n(this,zr,qr),bn(t),Dr.call(this);var e=Br(this);try{t(Rr(si,this,e),Rr(xr,this,e))}catch(t){xr(this,e,t)}},(Dr=function(){Wr(this,{type:qr,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=gn(zr.prototype,{then:function(t,e){var n=Hr(this),r=Xr(Mn(this,zr));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Jr?Qr.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Or(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Lr=function(){var t=new Dr,e=Br(t);this.promise=t,this.resolve=Rr(si,t,e),this.reject=Rr(xr,t,e)},Sr.f=Xr=function(t){return t===zr||t===Mr?new Lr:$r(t)},"function"==typeof Sn&&(Fr=Sn.prototype.then,It(Sn.prototype,"then",(function(t,e){var n=this;return new zr((function(t,e){Fr.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof Yr&&qt({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return _r(zr,Yr.apply(U,arguments))}}))),qt({global:!0,wrap:!0,forced:ei},{Promise:zr}),Me(zr,qr,!1),mn(qr),Mr=Lt(qr),qt({target:qr,stat:!0,forced:ei},{reject:function(t){var e=Xr(this);return e.reject.call(void 0,t),e.promise}}),qt({target:qr,stat:!0,forced:ei},{resolve:function(t){return _r(this,t)}}),qt({target:qr,stat:!0,forced:ni},{all:function(t){var e=this,n=Xr(e),r=n.resolve,i=n.reject,o=wr((function(){var n=bn(e.resolve),o=[],s=0,a=1;On(t,(function(t){var u=s++,c=!1;o.push(void 0),a++,n.call(e,t).then((function(t){c||(c=!0,o[u]=t,--a||r(o))}),i)})),--a||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=Xr(e),r=n.reject,i=wr((function(){var i=bn(e.resolve);On(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}}),qt({target:"Promise",stat:!0},{allSettled:function(t){var e=this,n=Sr.f(e),r=n.resolve,i=n.reject,o=wr((function(){var n=bn(e.resolve),i=[],o=0,s=1;On(t,(function(t){var a=o++,u=!1;i.push(void 0),s++,n.call(e,t).then((function(t){u||(u=!0,i[a]={status:"fulfilled",value:t},--s||r(i))}),(function(t){u||(u=!0,i[a]={status:"rejected",reason:t},--s||r(i))}))})),--s||r(i)}));return o.error&&i(o.value),n.promise}}),qt({target:"Promise",proto:!0,real:!0,forced:!!Sn&&N((function(){Sn.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=Mn(this,Lt("Promise")),n="function"==typeof t;return this.then(n?function(n){return _r(e,t()).then((function(){return n}))}:t,n?function(n){return _r(e,t()).then((function(){throw n}))}:t)}}),"function"!=typeof Sn||Sn.prototype.finally||It(Sn.prototype,"finally",Lt("Promise").prototype.finally),ne.Promise;var ai=Tt.set,ui=Tt.getterFor("AggregateError"),ci=function t(e,n){var r=this;if(!(r instanceof t))return new t(e,n);ze&&(r=ze(new Error(n),Ee(r)));var i=[];return On(e,i.push,i),V?ai(r,{errors:i,type:"AggregateError"}):r.errors=i,void 0!==n&&G(r,"message",String(n)),r};ci.prototype=Ve(Error.prototype,{constructor:x(5,ci),message:x(5,""),name:x(5,"AggregateError")}),V&&z.f(ci.prototype,"errors",{get:function(){return ui(this).errors},configurable:!0}),qt({global:!0},{AggregateError:ci}),qt({target:"Promise",stat:!0},{try:function(t){var e=Sr.f(this),n=wr(t);return(n.error?e.reject:e.resolve)(n.value),e.promise}});var li="No one promise resolved";function hi(t,e){var n;return vi(t)&&("function"==typeof(n=t.constructor)&&(n===Array||vi(n.prototype))||A(n)&&null===(n=n[yi]))&&(n=void 0),new(void 0===n?Array:n)(0===e?0:e)}function fi(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,s=5==t||o;return function(a,u,c,l){for(var h,f,p=Bt(a),d=Zt(p),v=En(u,c,3),y=Mt(d.length),g=0,m=l||hi,b=e?m(a,y):n?m(a,0):void 0;g<y;g++)if((s||g in d)&&(f=v(h=d[g],g,p),t))if(e)b[g]=f;else if(f)switch(t){case 3:return!0;case 5:return h;case 6:return g;case 2:gi.call(b,h)}else if(i)return!1;return o?-1:r||i?i:b}}function pi(t){throw t}function di(t,e){if(L(_i,t))return _i[t];var n=[][t],r=!!L(e=e||{},"ACCESSORS")&&e.ACCESSORS,i=L(e,0)?e[0]:pi,o=L(e,1)?e[1]:void 0;return _i[t]=!!n&&!N((function(){if(r&&!V)return 1;var t={length:-1};r?bi(t,1,{enumerable:!0,get:pi}):t[1]=1,n.call(t,i,o)}))}qt({target:"Promise",stat:!0},{any:function(t){var e=this,n=Sr.f(e),r=n.resolve,i=n.reject,o=wr((function(){var n=bn(e.resolve),o=[],s=0,a=1,u=!1;On(t,(function(t){var c=s++,l=!1;o.push(void 0),a++,n.call(e,t).then((function(t){l||u||(u=!0,r(t))}),(function(t){l||u||(l=!0,o[c]=t,--a||i(new(Lt("AggregateError"))(o,li)))}))})),--a||i(new(Lt("AggregateError"))(o,li))}));return o.error&&i(o.value),n.promise}});var vi=Array.isArray||function(t){return"Array"==Et(t)},yi=F("species"),gi=[].push,mi={forEach:fi(0),map:fi(1),filter:fi(2),some:fi(3),every:fi(4),find:fi(5),findIndex:fi(6)},bi=Object.defineProperty,_i={},wi=mi.find,Ei="find",Ti=!0,Ii=di(Ei);function Si(t,e,n){return En(Ci,U[t].prototype[e],n)}Ei in[]&&Array(1)[Ei]((function(){Ti=!1})),qt({target:"Array",proto:!0,forced:Ti||!Ii},{find:function(t,e){return wi(this,t,1<arguments.length?e:void 0)}}),on(Ei);var Ci=Function.call,ki=(Si("Array","find"),mi.findIndex),Ni="findIndex",Ai=!0,Oi=di(Ni);function Pi(t,e,n){var r=R(e);r in t?z.f(t,r,x(0,n)):t[r]=n}Ni in[]&&Array(1)[Ni]((function(){Ai=!1})),qt({target:"Array",proto:!0,forced:Ai||!Oi},{findIndex:function(t,e){return ki(this,t,1<arguments.length?e:void 0)}}),on(Ni),Si("Array","findIndex"),qt({target:"Array",stat:!0,forced:!Ln((function(t){Array.from(t)}))},{from:function(t,e,n){var r,i,o,s,a,u=Bt(t),c="function"==typeof this?this:Array,l=arguments.length,h=1<l?e:void 0,f=void 0!==h,p=Tn(u),d=0;if(f&&(h=En(h,2<l?n:void 0,2)),null==p||c==Array&&wn(p))for(i=new c(r=Mt(u.length));d<r;d++)Pi(i,d,f?h(u[d],d):u[d]);else for(a=(s=p.call(u)).next,i=new c;!(o=a.call(s)).done;d++)Pi(i,d,f?In(s,h,[o.value,d],!0):o.value);return i.length=d,i}}),ne.Array.from;var Ri,xi=mi.some,Di=!!(Ri=[].some)&&N((function(){Ri.call(null,(function(){throw 1}),1)})),Li=di("some");qt({target:"Array",proto:!0,forced:!Di||!Li},{some:function(t,e){return xi(this,t,1<arguments.length?e:void 0)}}),Si("Array","some");var Mi,Fi="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Ui=z.f,ji=U.Int8Array,Vi=ji&&ji.prototype,qi=U.Uint8ClampedArray,Bi=qi&&qi.prototype,Wi=ji&&Ee(ji),Hi=Vi&&Ee(Vi),zi=Object.prototype,Gi=(zi.isPrototypeOf,F("toStringTag")),Ki=M("TYPED_ARRAY_TAG"),Qi=Fi&&!!ze&&"Opera"!==Nt(U.opera),Yi={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(Mi in Yi)U[Mi]||(Qi=!1);if((!Qi||"function"!=typeof Wi||Wi===Function.prototype)&&(Wi=function(){throw TypeError("Incorrect invocation")},Qi))for(Mi in Yi)U[Mi]&&ze(U[Mi],Wi);if((!Qi||!Hi||Hi===zi)&&(Hi=Wi.prototype,Qi))for(Mi in Yi)U[Mi]&&ze(U[Mi].prototype,Hi);if(Qi&&Ee(Bi)!==Hi&&ze(Bi,Hi),V&&!L(Hi,Gi))for(Mi in Ui(Hi,Gi,{get:function(){return A(this)?this[Ki]:void 0}}),Yi)U[Mi]&&G(U[Mi],Ki,Mi);function Xi(){return Zi.call(no(this))}var $i=F("iterator"),Ji=U.Uint8Array,Zi=cn.values,to=cn.keys,eo=cn.entries,no=function(t){if(function(t){return A(t)&&L(Yi,Nt(t))}(t))return t;throw TypeError("Target is not a typed array")},ro=function(t,e,n){if(V){if(n)for(var r in Yi){var i=U[r];i&&L(i.prototype,t)&&delete i.prototype[t]}Hi[t]&&!n||It(Hi,t,!n&&Qi&&Vi[t]||e)}},io=Ji&&Ji.prototype[$i],oo=!!io&&("values"==io.name||null==io.name);ro("entries",(function(){return eo.call(no(this))})),ro("keys",(function(){return to.call(no(this))})),ro("values",Xi,!oo),ro($i,Xi,!oo);var so=Object.assign,ao=Object.defineProperty,uo=!so||N((function(){if(V&&1!==so({b:1},so(ao({},"a",{enumerable:!0,get:function(){ao(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return 1;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=so({},t)[n]||Ae(so({},e)).join("")!=r}))?function(t,e){for(var n=Bt(t),r=arguments.length,i=1,o=le.f,s=$t.f;i<r;)for(var a,u=Zt(arguments[i++]),c=o?Ae(u).concat(o(u)):Ae(u),l=c.length,h=0;h<l;)a=c[h++],V&&!s.call(u,a)||(n[a]=u[a]);return n}:so;function co(t){return function(e){for(var n,r=xt(e),i=Ae(r),o=i.length,s=0,a=[];s<o;)n=i[s++],V&&!lo.call(r,n)||a.push(t?[n,r[n]]:r[n]);return a}}qt({target:"Object",stat:!0,forced:Object.assign!==uo},{assign:uo}),ne.Object.assign;var lo=$t.f,ho={entries:co(!0),values:co(!1)},fo=ho.entries;qt({target:"Object",stat:!0},{entries:function(t){return fo(t)}}),ne.Object.entries;var po=ho.values;function vo(t){if(A(e=t)&&(void 0!==(n=e[go])?n:"RegExp"==Et(e)))throw TypeError("The method doesn't accept regular expressions");var e,n;return t}function yo(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[mo]=!1,"/./"[t](e)}catch(i){}}return!1}qt({target:"Object",stat:!0},{values:function(t){return po(t)}}),ne.Object.values;var go=F("match"),mo=F("match");qt({target:"String",proto:!0,forced:!yo("includes")},{includes:function(t,e){return!!~String(Pt(this)).indexOf(vo(t),1<arguments.length?e:void 0)}}),Si("String","includes");var bo,_o=ee.f,wo="".startsWith,Eo=Math.min,To=yo("startsWith");qt({target:"String",proto:!0,forced:!(!To&&(bo=_o(String.prototype,"startsWith"))&&!bo.writable)&&!To},{startsWith:function(t,e){var n=String(Pt(this));vo(t);var r=Mt(Eo(1<arguments.length?e:void 0,n.length)),i=String(t);return wo?wo.call(n,i,r):n.slice(r,r+i.length)===i}}),Si("String","startsWith"),qt({target:"String",proto:!0},{repeat:"".repeat||function(t){var e=String(Pt(this)),n="",r=Ot(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}}),Si("String","repeat");var Io=F("species"),So=F("isConcatSpreadable"),Co=9007199254740991,ko="Maximum allowed index exceeded",No=51<=Ur||!N((function(){var t=[];return t[So]=!1,t.concat()[0]!==t})),Ao=51<=Ur||!N((function(){var t=[];return(t.constructor={})[Io]=function(){return{foo:1}},1!==t.concat(Boolean).foo}));function Oo(t){var e=ne.Symbol||(ne.Symbol={});L(e,t)||Vo(e,t,{value:jo.f(t)})}function Po(t,e){var n=es[t]=Ve(Yo[Ho]);return Go(n,{type:Wo,tag:t,description:e}),V||(n.description=e),n}function Ro(t,e){P(t);var n=xt(e),r=Ae(n).concat(fs(n));return qo(r,(function(e){V&&!hs.call(n,e)||ls(t,e,n[e])})),t}function xo(t,e){var n=xt(t),r=R(e,!0);if(n!==Qo||!L(es,r)||L(ns,r)){var i=$o(n,r);return!i||!L(es,r)||L(n,Bo)&&n[Bo][r]||(i.enumerable=!0),i}}function Do(t){var e=Zo(xt(t)),n=[];return qo(e,(function(t){L(es,t)||L(_t,t)||n.push(t)})),n}qt({target:"Array",proto:!0,forced:!No||!Ao},{concat:function(t){for(var e,n,r,i=Bt(this),o=hi(i,0),s=0,a=-1,u=arguments.length;a<u;a++)if(function(t){if(!A(t))return!1;var e=t[So];return void 0!==e?!!e:vi(t)}(r=-1===a?i:arguments[a])){if(n=Mt(r.length),Co<s+n)throw TypeError(ko);for(e=0;e<n;e++,s++)e in r&&Pi(o,s,r[e])}else{if(Co<=s)throw TypeError(ko);Pi(o,s++,r)}return o.length=s,o}});var Lo=ce.f,Mo={}.toString,Fo="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Uo={f:function(t){return Fo&&"[object Window]"==Mo.call(t)?function(t){try{return Lo(t)}catch(t){return Fo.slice()}}(t):Lo(xt(t))}},jo={f:F},Vo=z.f,qo=mi.forEach,Bo=at("hidden"),Wo="Symbol",Ho="prototype",zo=F("toPrimitive"),Go=Tt.set,Ko=Tt.getterFor(Wo),Qo=Object[Ho],Yo=U.Symbol,Xo=Lt("JSON","stringify"),$o=ee.f,Jo=z.f,Zo=Uo.f,ts=$t.f,es=Y("symbols"),ns=Y("op-symbols"),rs=Y("string-to-symbol-registry"),is=Y("symbol-to-string-registry"),os=Y("wks"),ss=U.QObject,as=!ss||!ss[Ho]||!ss[Ho].findChild,us=V&&N((function(){return 7!=Ve(Jo({},"a",{get:function(){return Jo(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=$o(Qo,e);r&&delete Qo[e],Jo(t,e,n),r&&t!==Qo&&Jo(Qo,e,r)}:Jo,cs=tt?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof Yo},ls=function t(e,n,r){e===Qo&&t(ns,n,r),P(e);var i=R(n,!0);return P(r),L(es,i)?(r.enumerable?(L(e,Bo)&&e[Bo][i]&&(e[Bo][i]=!1),r=Ve(r,{enumerable:x(0,!1)})):(L(e,Bo)||Jo(e,Bo,x(1,{})),e[Bo][i]=!0),us(e,i,r)):Jo(e,i,r)},hs=function(t){var e=R(t,!0),n=ts.call(this,e);return!(this===Qo&&L(es,e)&&!L(ns,e))&&(!(n||!L(this,e)||!L(es,e)||L(this,Bo)&&this[Bo][e])||n)},fs=function(t){var e=t===Qo,n=Zo(e?ns:xt(t)),r=[];return qo(n,(function(t){!L(es,t)||e&&!L(Qo,t)||r.push(es[t])})),r};Z||(It((Yo=function(t){if(this instanceof Yo)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==t?String(t):void 0,n=M(e),r=function t(e){this===Qo&&t.call(ns,e),L(this,Bo)&&L(this[Bo],n)&&(this[Bo][n]=!1),us(this,n,x(1,e))};return V&&as&&us(Qo,n,{configurable:!0,set:r}),Po(n,e)})[Ho],"toString",(function(){return Ko(this).tag})),It(Yo,"withoutSetter",(function(t){return Po(M(t),t)})),$t.f=hs,z.f=ls,ee.f=xo,ce.f=Uo.f=Do,le.f=fs,jo.f=function(t){return Po(F(t),t)},V&&(Jo(Yo[Ho],"description",{configurable:!0,get:function(){return Ko(this).description}}),It(Qo,"propertyIsEnumerable",hs,{unsafe:!0}))),qt({global:!0,wrap:!0,forced:!Z,sham:!Z},{Symbol:Yo}),qo(Ae(os),(function(t){Oo(t)})),qt({target:Wo,stat:!0,forced:!Z},{for:function(t){var e=String(t);if(L(rs,e))return rs[e];var n=Yo(e);return rs[e]=n,is[n]=e,n},keyFor:function(t){if(!cs(t))throw TypeError(t+" is not a symbol");if(L(is,t))return is[t]},useSetter:function(){as=!0},useSimple:function(){as=!1}}),qt({target:"Object",stat:!0,forced:!Z,sham:!V},{create:function(t,e){return void 0===e?Ve(t):Ro(Ve(t),e)},defineProperty:ls,defineProperties:Ro,getOwnPropertyDescriptor:xo}),qt({target:"Object",stat:!0,forced:!Z},{getOwnPropertyNames:Do,getOwnPropertySymbols:fs}),qt({target:"Object",stat:!0,forced:N((function(){le.f(1)}))},{getOwnPropertySymbols:function(t){return le.f(Bt(t))}}),Xo&&qt({target:"JSON",stat:!0,forced:!Z||N((function(){var t=Yo();return"[null]"!=Xo([t])||"{}"!=Xo({a:t})||"{}"!=Xo(Object(t))}))},{stringify:function(t,e,n){for(var r,i=[t],o=1;o<arguments.length;)i.push(arguments[o++]);if((A(r=e)||void 0!==t)&&!cs(t))return vi(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!cs(e))return e}),i[1]=e,Xo.apply(null,i)}}),Yo[Ho][zo]||G(Yo[Ho],zo,Yo[Ho].valueOf),Me(Yo,Wo),_t[Bo]=!0,Oo("asyncIterator");var ps,ds,vs,ys,gs,ms,bs=z.f,_s=U.Symbol;function ws(t,e,n){function r(t){var e=p[t];It(p,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(l&&!A(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return l&&!A(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(l&&!A(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})}var i,o,s,a,u,c=-1!==t.indexOf("Map"),l=-1!==t.indexOf("Weak"),h=c?"set":"add",f=U[t],p=f&&f.prototype,d=f,v={};return ge(t,"function"!=typeof f||!(l||p.forEach&&!N((function(){(new f).entries().next()}))))?(d=n.getConstructor(e,t,c,h),Is.REQUIRED=!0):ge(t,!0)&&(o=(i=new d)[h](l?{}:-0,1)!=i,s=N((function(){i.has(1)})),a=Ln((function(t){new f(t)})),u=!l&&N((function(){for(var t=new f,e=5;e--;)t[h](e,e);return!t.has(-0)})),a||(((d=e((function(e,n){_n(e,d,t);var r,i,o,s,a=(r=new f,i=d,ze&&"function"==typeof(o=e.constructor)&&o!==i&&A(s=o.prototype)&&s!==i.prototype&&ze(r,s),r);return null!=n&&On(n,a[h],a,c),a}))).prototype=p).constructor=d),(s||u)&&(r("delete"),r("has"),c&&r("get")),(u||o)&&r(h),l&&p.clear&&delete p.clear),v[t]=d,qt({global:!0,forced:d!=f},v),Me(d,t),l||n.setStrong(d,t,c),d}function Es(t,e,n){var r,i,o,s,a=arguments.length,u=1<a?e:void 0;return bn(this),(r=void 0!==u)&&bn(u),null==t?new this:(i=[],r?(o=0,s=En(u,2<a?n:void 0,2),On(t,(function(t){i.push(s(t,o++))}))):On(t,i.push,i),new this(i))}!V||"function"!=typeof _s||"description"in _s.prototype&&void 0===_s().description||(ps={},jt(ds=function(t){var e=arguments.length<1||void 0===t?void 0:String(t),n=this instanceof ds?new _s(e):void 0===e?_s():_s(e);return""===e&&(ps[n]=!0),n},_s),(vs=ds.prototype=_s.prototype).constructor=ds,ys=vs.toString,gs="Symbol(test)"==String(_s("test")),ms=/^Symbol\((.*)\)[^)]+$/,bs(vs,"description",{configurable:!0,get:function(){var t=A(this)?this.valueOf():this,e=ys.call(t);if(L(ps,t))return"";var n=gs?e.slice(7,-1):e.replace(ms,"$1");return""===n?void 0:n}}),qt({global:!0,forced:!0},{Symbol:ds})),Oo("hasInstance"),Oo("isConcatSpreadable"),Oo("iterator"),Oo("match"),Oo("matchAll"),Oo("replace"),Oo("search"),Oo("species"),Oo("split"),Oo("toPrimitive"),Oo("toStringTag"),Oo("unscopables"),Me(Math,"Math",!0),Me(U.JSON,"JSON",!0),ne.Symbol,Oo("asyncDispose"),Oo("dispose"),Oo("observable"),Oo("patternMatch"),Oo("replaceAll"),jo.f("iterator");var Ts=!N((function(){return Object.isExtensible(Object.preventExtensions({}))})),Is=C((function(t){function e(t){n(t,r,{value:{objectID:"O"+ ++i,weakData:{}}})}var n=z.f,r=M("meta"),i=0,o=Object.isExtensible||function(){return!0},s=t.exports={REQUIRED:!1,fastKey:function(t,n){if(!A(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!L(t,r)){if(!o(t))return"F";if(!n)return"E";e(t)}return t[r].objectID},getWeakData:function(t,n){if(!L(t,r)){if(!o(t))return!0;if(!n)return!1;e(t)}return t[r].weakData},onFreeze:function(t){return Ts&&s.REQUIRED&&o(t)&&!L(t,r)&&e(t),t}};_t[r]=!0})),Ss=(Is.REQUIRED,Is.fastKey,Is.getWeakData,Is.onFreeze,z.f),Cs=Is.fastKey,ks=Tt.set,Ns=Tt.getterFor,As={getConstructor:function(t,e,n,r){function i(t,e,n){var r,i,o=s(t),u=a(t,e);return u?u.value=n:(o.last=u={index:i=Cs(e,!0),key:e,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=u),r&&(r.next=u),V?o.size++:t.size++,"F"!==i&&(o.index[i]=u)),t}var o=t((function(t,i){_n(t,o,e),ks(t,{type:e,index:Ve(null),first:void 0,last:void 0,size:0}),V||(t.size=0),null!=i&&On(i,t[r],t,n)})),s=Ns(e),a=function(t,e){var n,r=s(t),i=Cs(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return gn(o.prototype,{clear:function(){for(var t=s(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,V?t.size=0:this.size=0},delete:function(t){var e,n,r=s(this),i=a(this,t);return i&&(e=i.next,n=i.previous,delete r.index[i.index],i.removed=!0,n&&(n.next=e),e&&(e.previous=n),r.first==i&&(r.first=e),r.last==i&&(r.last=n),V?r.size--:this.size--),!!i},forEach:function(t,e){for(var n,r=s(this),i=En(t,1<arguments.length?e:void 0,3);n=n?n.next:r.first;)for(i(n.value,n.key,this);n&&n.removed;)n=n.previous},has:function(t){return!!a(this,t)}}),gn(o.prototype,n?{get:function(t){var e=a(this,t);return e&&e.value},set:function(t,e){return i(this,0===t?0:t,e)}}:{add:function(t){return i(this,t=0===t?0:t,t)}}),V&&Ss(o.prototype,"size",{get:function(){return s(this).size}}),o},setStrong:function(t,e,n){var r=e+" Iterator",i=Ns(e),o=Ns(r);je(t,e,(function(t,e){ks(this,{type:r,target:t,state:i(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}}),n?"entries":"values",!n,!0),mn(e)}};function Os(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}function Ps(){for(var t,e=P(this),n=bn(e.delete),r=!0,i=0,o=arguments.length;i<o;i++)t=n.call(e,arguments[i]),r=r&&t;return!!r}function Rs(t){return Map.prototype.entries.call(t)}function xs(t,e,n){var r,i=P(this),o=2<arguments.length?n:void 0;if("function"!=typeof e&&"function"!=typeof o)throw TypeError("At least one callback required");return i.has(t)?(r=i.get(t),"function"==typeof e&&(r=e(r),i.set(t,r))):"function"==typeof o&&(r=o(),i.set(t,r)),r}function Ds(t){return Set.prototype.values.call(t)}ws("Map",(function(t){return function(e){return t(this,arguments.length?e:void 0)}}),As),ne.Map,qt({target:"Map",stat:!0},{from:Es}),qt({target:"Map",stat:!0},{of:Os}),qt({target:"Map",proto:!0,real:!0,forced:j},{deleteAll:function(){return Ps.apply(this,arguments)}}),qt({target:"Map",proto:!0,real:!0,forced:j},{every:function(t,e){var n=P(this),r=Rs(n),i=En(t,1<arguments.length?e:void 0,3);return!On(r,(function(t,e){if(!i(e,t,n))return On.stop()}),void 0,!0,!0).stopped}}),qt({target:"Map",proto:!0,real:!0,forced:j},{filter:function(t,e){var n=P(this),r=Rs(n),i=En(t,1<arguments.length?e:void 0,3),o=new(Mn(n,Lt("Map"))),s=bn(o.set);return On(r,(function(t,e){i(e,t,n)&&s.call(o,t,e)}),void 0,!0,!0),o}}),qt({target:"Map",proto:!0,real:!0,forced:j},{find:function(t,e){var n=P(this),r=Rs(n),i=En(t,1<arguments.length?e:void 0,3);return On(r,(function(t,e){if(i(e,t,n))return On.stop(e)}),void 0,!0,!0).result}}),qt({target:"Map",proto:!0,real:!0,forced:j},{findKey:function(t,e){var n=P(this),r=Rs(n),i=En(t,1<arguments.length?e:void 0,3);return On(r,(function(t,e){if(i(e,t,n))return On.stop(t)}),void 0,!0,!0).result}}),qt({target:"Map",stat:!0},{groupBy:function(t,e){var n=new this;bn(e);var r=bn(n.has),i=bn(n.get),o=bn(n.set);return On(t,(function(t){var s=e(t);r.call(n,s)?i.call(n,s).push(t):o.call(n,s,[t])})),n}}),qt({target:"Map",proto:!0,real:!0,forced:j},{includes:function(t){return On(Rs(P(this)),(function(e,n){if((r=n)===(i=t)||r!=r&&i!=i)return On.stop();var r,i}),void 0,!0,!0).stopped}}),qt({target:"Map",stat:!0},{keyBy:function(t,e){var n=new this;bn(e);var r=bn(n.set);return On(t,(function(t){r.call(n,e(t),t)})),n}}),qt({target:"Map",proto:!0,real:!0,forced:j},{keyOf:function(t){return On(Rs(P(this)),(function(e,n){if(n===t)return On.stop(e)}),void 0,!0,!0).result}}),qt({target:"Map",proto:!0,real:!0,forced:j},{mapKeys:function(t,e){var n=P(this),r=Rs(n),i=En(t,1<arguments.length?e:void 0,3),o=new(Mn(n,Lt("Map"))),s=bn(o.set);return On(r,(function(t,e){s.call(o,i(e,t,n),e)}),void 0,!0,!0),o}}),qt({target:"Map",proto:!0,real:!0,forced:j},{mapValues:function(t,e){var n=P(this),r=Rs(n),i=En(t,1<arguments.length?e:void 0,3),o=new(Mn(n,Lt("Map"))),s=bn(o.set);return On(r,(function(t,e){s.call(o,t,i(e,t,n))}),void 0,!0,!0),o}}),qt({target:"Map",proto:!0,real:!0,forced:j},{merge:function(t){for(var e=P(this),n=bn(e.set),r=0;r<arguments.length;)On(arguments[r++],n,e,!0);return e}}),qt({target:"Map",proto:!0,real:!0,forced:j},{reduce:function(t,e){var n=P(this),r=Rs(n),i=arguments.length<2,o=i?void 0:e;if(bn(t),On(r,(function(e,r){o=i?(i=!1,r):t(o,r,e,n)}),void 0,!0,!0),i)throw TypeError("Reduce of empty map with no initial value");return o}}),qt({target:"Map",proto:!0,real:!0,forced:j},{some:function(t,e){var n=P(this),r=Rs(n),i=En(t,1<arguments.length?e:void 0,3);return On(r,(function(t,e){if(i(e,t,n))return On.stop()}),void 0,!0,!0).stopped}}),qt({target:"Map",proto:!0,real:!0,forced:j},{update:function(t,e,n){var r=P(this),i=arguments.length;bn(e);var o=r.has(t);if(!o&&i<3)throw TypeError("Updating absent value");var s=o?r.get(t):bn(2<i?n:void 0)(t,r);return r.set(t,e(s,t,r)),r}}),qt({target:"Map",proto:!0,real:!0,forced:j},{upsert:xs}),qt({target:"Map",proto:!0,real:!0,forced:j},{updateOrInsert:xs}),ws("Set",(function(t){return function(e){return t(this,arguments.length?e:void 0)}}),As),ne.Set,qt({target:"Set",stat:!0},{from:Es}),qt({target:"Set",stat:!0},{of:Os}),qt({target:"Set",proto:!0,real:!0,forced:j},{addAll:function(){return function(){for(var t=P(this),e=bn(t.add),n=0,r=arguments.length;n<r;n++)e.call(t,arguments[n]);return t}.apply(this,arguments)}}),qt({target:"Set",proto:!0,real:!0,forced:j},{deleteAll:function(){return Ps.apply(this,arguments)}}),qt({target:"Set",proto:!0,real:!0,forced:j},{every:function(t,e){var n=P(this),r=Ds(n),i=En(t,1<arguments.length?e:void 0,3);return!On(r,(function(t){if(!i(t,t,n))return On.stop()}),void 0,!1,!0).stopped}}),qt({target:"Set",proto:!0,real:!0,forced:j},{difference:function(t){var e=P(this),n=new(Mn(e,Lt("Set")))(e),r=bn(n.delete);return On(t,(function(t){r.call(n,t)})),n}}),qt({target:"Set",proto:!0,real:!0,forced:j},{filter:function(t,e){var n=P(this),r=Ds(n),i=En(t,1<arguments.length?e:void 0,3),o=new(Mn(n,Lt("Set"))),s=bn(o.add);return On(r,(function(t){i(t,t,n)&&s.call(o,t)}),void 0,!1,!0),o}}),qt({target:"Set",proto:!0,real:!0,forced:j},{find:function(t,e){var n=P(this),r=Ds(n),i=En(t,1<arguments.length?e:void 0,3);return On(r,(function(t){if(i(t,t,n))return On.stop(t)}),void 0,!1,!0).result}}),qt({target:"Set",proto:!0,real:!0,forced:j},{intersection:function(t){var e=P(this),n=new(Mn(e,Lt("Set"))),r=bn(e.has),i=bn(n.add);return On(t,(function(t){r.call(e,t)&&i.call(n,t)})),n}}),qt({target:"Set",proto:!0,real:!0,forced:j},{isDisjointFrom:function(t){var e=P(this),n=bn(e.has);return!On(t,(function(t){if(!0===n.call(e,t))return On.stop()})).stopped}}),qt({target:"Set",proto:!0,real:!0,forced:j},{isSubsetOf:function(t){var e=function(t){var e=Tn(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return P(e.call(t))}(this),n=P(t),r=n.has;return"function"!=typeof r&&(n=new(Lt("Set"))(t),r=bn(n.has)),!On(e,(function(t){if(!1===r.call(n,t))return On.stop()}),void 0,!1,!0).stopped}}),qt({target:"Set",proto:!0,real:!0,forced:j},{isSupersetOf:function(t){var e=P(this),n=bn(e.has);return!On(t,(function(t){if(!1===n.call(e,t))return On.stop()})).stopped}}),qt({target:"Set",proto:!0,real:!0,forced:j},{join:function(t){var e=Ds(P(this)),n=void 0===t?",":String(t),r=[];return On(e,r.push,r,!1,!0),r.join(n)}}),qt({target:"Set",proto:!0,real:!0,forced:j},{map:function(t,e){var n=P(this),r=Ds(n),i=En(t,1<arguments.length?e:void 0,3),o=new(Mn(n,Lt("Set"))),s=bn(o.add);return On(r,(function(t){s.call(o,i(t,t,n))}),void 0,!1,!0),o}}),qt({target:"Set",proto:!0,real:!0,forced:j},{reduce:function(t,e){var n=P(this),r=Ds(n),i=arguments.length<2,o=i?void 0:e;if(bn(t),On(r,(function(e){o=i?(i=!1,e):t(o,e,e,n)}),void 0,!1,!0),i)throw TypeError("Reduce of empty set with no initial value");return o}}),qt({target:"Set",proto:!0,real:!0,forced:j},{some:function(t,e){var n=P(this),r=Ds(n),i=En(t,1<arguments.length?e:void 0,3);return On(r,(function(t){if(i(t,t,n))return On.stop()}),void 0,!1,!0).stopped}}),qt({target:"Set",proto:!0,real:!0,forced:j},{symmetricDifference:function(t){var e=P(this),n=new(Mn(e,Lt("Set")))(e),r=bn(n.delete),i=bn(n.add);return On(t,(function(t){r.call(n,t)||i.call(n,t)})),n}}),qt({target:"Set",proto:!0,real:!0,forced:j},{union:function(t){var e=P(this),n=new(Mn(e,Lt("Set")))(e);return On(t,bn(n.add),n),n}});var Ls=Math.floor;qt({target:"Number",stat:!0},{isInteger:function(t){return!A(t)&&isFinite(t)&&Ls(t)===t}}),ne.Number.isInteger,qt({target:"Number",stat:!0},{isNaN:function(t){return t!=t}}),ne.Number.isNaN;var Ms=function(t,e){return(Ms=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Fs(t,e){function n(){this.constructor=t}Ms(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Us=function(){return(Us=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function js(t,e,n,r){return new(n=n||Promise)((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):((e=t.value)instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function Vs(t,e){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=0<(i=o.trys).length&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function qs(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Bs(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function Ws(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Bs(arguments[e]));return t}function Hs(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function zs(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}function Gs(t){try{return $s.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}var Ks=!1,Qs="${JSCORE_VERSION}",Ys=function(t,e){if(!t)throw Xs(e)},Xs=function(t){return new Error("Firebase Database ("+Qs+") INTERNAL ASSERT FAILED: "+t)},$s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(zs(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i,o,s,a=t[n++];a<128?e[r++]=String.fromCharCode(a):191<a&&a<224?(o=t[n++],e[r++]=String.fromCharCode((31&a)<<6|63&o)):239<a&&a<365?(i=((7&a)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536,e[r++]=String.fromCharCode(55296+(i>>10)),e[r++]=String.fromCharCode(56320+(1023&i))):(o=t[n++],s=t[n++],e[r++]=String.fromCharCode((15&a)<<12|(63&o)<<6|63&s))}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c,l,h=o<<2|s>>4;r.push(h),64!==a&&(c=s<<4&240|a>>2,r.push(c),64!==u&&(l=a<<6&192|u,r.push(l)))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function Js(t){return Zs(void 0,t)}function Zs(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=Zs(t[n],e[n]));return t}var ta=(ea.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},ea);function ea(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}function na(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ra(){return"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(na())}function ia(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function oa(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function sa(){return!0===Ks}function aa(){return"indexedDB"in self&&null!==indexedDB}function ua(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}function ca(){return!(!navigator||!navigator.cookieEnabled)}var la,ha=(Fs(fa,la=Error),fa);function fa(t,e){var n=la.call(this,e)||this;return n.code=t,n.name="FirebaseError",Object.setPrototypeOf(n,fa.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,pa.prototype.create),n}var pa=(da.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r,i=e[0]||{},o=this.service+"/"+t,s=this.errors[t],a=s?(r=i,s.replace(va,(function(t,e){var n=r[e];return null!=n?String(n):"<"+e+"?>"}))):"Error",u=this.serviceName+": "+a+" ("+o+").",c=new ha(o,u),l=0,h=Object.keys(i);l<h.length;l++){var f=h[l];"_"!==f.slice(-1)&&(f in c&&console.warn('Overwriting FirebaseError base field "'+f+'" can cause unexpected behavior.'),c[f]=i[f])}return c},da);function da(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var va=/\{\$([^}]+)}/g;function ya(t){return JSON.parse(t)}function ga(t){return JSON.stringify(t)}function ma(t){var e={},n={},r={},i="";try{var o=t.split(".");e=ya(Gs(o[0])||""),n=ya(Gs(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}}function ba(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function _a(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function wa(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ea(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}var Ta=(Ia.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},Ia.prototype.compress_=function(t,e){e=e||0;var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++)s=r<40?r<20?(o=l^u&(c^l),1518500249):(o=u^c^l,1859775393):r<60?(o=u&c|l&(u|c),2400959708):(o=u^c^l,3395469782),i=(a<<5|a>>>27)+o+h+s+n[r]&4294967295,h=l,l=c,c=4294967295&(u<<30|u>>>2),u=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},Ia.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},Ia.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},Ia);function Ia(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}function Sa(t,e){var n=new Ca(t,e);return n.subscribe.bind(n)}var Ca=(ka.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},ka.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},ka.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},ka.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"==typeof t&&null!==t)for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return 1}}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=Na),void 0===r.error&&(r.error=Na),void 0===r.complete&&(r.complete=Na);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},ka.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},ka.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},ka.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},ka.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},ka);function ka(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}function Na(){}function Aa(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function Oa(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function Pa(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(Oa(t,e,r)+"must be a valid function.")}function Ra(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(Oa(t,e,r)+"must be a valid context object.")}function xa(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e}var Da=(La.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},La.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},La.prototype.setServiceProps=function(t){return this.serviceProps=t,this},La);function La(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var Ma="[DEFAULT]",Fa=(Ua.prototype.get=function(t){void 0===t&&(t=Ma);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new ta;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},Ua.prototype.getImmediate=function(t){var e=Us({identifier:Ma,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(o)return o;if(r)return null;throw Error("Service "+this.name+" is not available")}catch(t){if(r)return null;throw t}},Ua.prototype.getComponent=function(){return this.component},Ua.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if("EAGER"===(this.component=t).instantiationMode)try{this.getOrInitializeService(Ma)}catch(t){}try{for(var r=qs(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=Bs(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},Ua.prototype.clearInstance=function(t){void 0===t&&(t=Ma),this.instancesDeferred.delete(t),this.instances.delete(t)},Ua.prototype.delete=function(){return js(this,void 0,void 0,(function(){var t;return Vs(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return e.sent(),[2]}}))}))},Ua.prototype.isComponentSet=function(){return null!=this.component},Ua.prototype.getOrInitializeService=function(t){var e,n=this.instances.get(t);return!n&&this.component&&(n=this.component.instanceFactory(this.container,(e=t)===Ma?void 0:e),this.instances.set(t,n)),n||null},Ua.prototype.normalizeInstanceIdentifier=function(t){return!this.component||this.component.multipleInstances?t:Ma},Ua);function Ua(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}var ja,Va=(qa.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},qa.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},qa.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new Fa(t,this);return this.providers.set(t,e),e},qa.prototype.getProviders=function(){return Array.from(this.providers.values())},qa);function qa(t){this.name=t,this.providers=new Map}function Ba(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var Wa,Ha,za=[];function Ga(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Xa[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,Ba(["["+i+"]  "+t.name+":"],n))}}(Ha=Wa=Wa||{})[Ha.DEBUG=0]="DEBUG",Ha[Ha.VERBOSE=1]="VERBOSE",Ha[Ha.INFO=2]="INFO",Ha[Ha.WARN=3]="WARN",Ha[Ha.ERROR=4]="ERROR",Ha[Ha.SILENT=5]="SILENT";var Ka,Qa={debug:Wa.DEBUG,verbose:Wa.VERBOSE,info:Wa.INFO,warn:Wa.WARN,error:Wa.ERROR,silent:Wa.SILENT},Ya=Wa.INFO,Xa=((ja={})[Wa.DEBUG]="log",ja[Wa.VERBOSE]="log",ja[Wa.INFO]="info",ja[Wa.WARN]="warn",ja[Wa.ERROR]="error",ja),$a=(Object.defineProperty(Ja.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Wa))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),Ja.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Qa[t]:t},Object.defineProperty(Ja.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(Ja.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),Ja.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ba([this,Wa.DEBUG],t)),this._logHandler.apply(this,Ba([this,Wa.DEBUG],t))},Ja.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ba([this,Wa.VERBOSE],t)),this._logHandler.apply(this,Ba([this,Wa.VERBOSE],t))},Ja.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ba([this,Wa.INFO],t)),this._logHandler.apply(this,Ba([this,Wa.INFO],t))},Ja.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ba([this,Wa.WARN],t)),this._logHandler.apply(this,Ba([this,Wa.WARN],t))},Ja.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ba([this,Wa.ERROR],t)),this._logHandler.apply(this,Ba([this,Wa.ERROR],t))},Ja);function Ja(t){this.name=t,this._logLevel=Ya,this._logHandler=Ga,this._userLogHandler=null,za.push(this)}function Za(t){za.forEach((function(e){e.setLogLevel(t)}))}var tu,eu=((Ka={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Ka["bad-app-name"]="Illegal App name: '{$appName}",Ka["duplicate-app"]="Firebase App named '{$appName}' already exists",Ka["app-deleted"]="Firebase App named '{$appName}' already deleted",Ka["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Ka["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Ka),nu=new pa("app","Firebase",eu),ru="@firebase/app",iu="[DEFAULT]",ou=((tu={})[ru]="fire-core",tu["@firebase/analytics"]="fire-analytics",tu["@firebase/auth"]="fire-auth",tu["@firebase/database"]="fire-rtdb",tu["@firebase/functions"]="fire-fn",tu["@firebase/installations"]="fire-iid",tu["@firebase/messaging"]="fire-fcm",tu["@firebase/performance"]="fire-perf",tu["@firebase/remote-config"]="fire-rc",tu["@firebase/storage"]="fire-gcs",tu["@firebase/firestore"]="fire-fst",tu["fire-js"]="fire-js",tu["firebase-wrapper"]="fire-js-all",tu),su=new $a("@firebase/app"),au=(Object.defineProperty(uu.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(uu.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(uu.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),uu.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},uu.prototype._getService=function(t,e){return void 0===e&&(e=iu),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},uu.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=iu),this.container.getProvider(t).clearInstance(e)},uu.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(i){su.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,i)}},uu.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},uu.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw nu.create("app-deleted",{appName:this.name_})},uu);function uu(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Js(t),this.container=new Va(e.name),this._addComponent(new Da("app",(function(){return o}),"PUBLIC"));try{for(var s=qs(this.firebase_.INTERNAL.components.values()),a=s.next();!a.done;a=s.next()){var u=a.value;this._addComponent(u)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}au.prototype.name&&au.prototype.options||au.prototype.delete||console.log("dc");var cu,lu=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=iu);var s=o.name;if("string"!=typeof s||!s)throw nu.create("bad-app-name",{appName:String(s)});if(ba(e,s))throw nu.create("duplicate-app",{appName:s});var a=new t(n,o,r);return e[s]=a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=ou[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void su.warn(u.join(" "))}o(new Da(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:Za,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw nu.create("invalid-log-argument",{appName:name});!function(t,e){for(var n=0,r=za;n<r.length;n++)!function(n){var r=null;e&&e.level&&(r=Qa[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:Wa[n].toLowerCase(),message:s,args:i,type:e.name})}}(r[n])}(t,e)},apps:null,SDK_VERSION:"7.19.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!ba(e,t=t||iu))throw nu.create("no-app",{appName:t});return e[t]}function o(o){var s,a,u,c=o.name;if(n.has(c))return su.debug("There were multiple attempts to register component "+c+"."),"PUBLIC"===o.type?r[c]:null;n.set(c,o),"PUBLIC"===o.type&&(u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[c])throw nu.create("invalid-app-argument",{appName:c});return t[c]()},void 0!==o.serviceProps&&Zs(u,o.serviceProps),r[c]=u,t.prototype[c]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,c).apply(this,o.multipleInstances?t:[])});try{for(var l=qs(Object.keys(e)),h=l.next();!h.done;h=l.next()){var f=h.value;e[f]._addComponent(o)}}catch(a){s={error:a}}finally{try{h&&!h.done&&(a=l.return)&&a.call(l)}finally{if(s)throw s.error}}return"PUBLIC"===o.type?r[c]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(au);return e.INTERNAL=Us(Us({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Zs(e,t)},createSubscribe:Sa,ErrorFactory:pa,deepExtend:Zs}),e}(),hu=(fu.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if("VERSION"!==(null==(e=t.getComponent())?void 0:e.type))return null;var e,n=t.getImmediate();return n.library+"/"+n.version})).filter((function(t){return t})).join(" ")},fu);function fu(t){this.container=t}"object"==typeof self&&self.self===self&&void 0!==self.firebase&&(su.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  "),(cu=self.firebase.SDK_VERSION)&&0<=cu.indexOf("LITE")&&su.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    "));var pu=lu.initializeApp;lu.initializeApp=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(t){return}}()&&su.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),pu.apply(void 0,t)};var du,vu=lu;(du=vu).INTERNAL.registerComponent(new Da("platform-logger",(function(t){return new hu(t)}),"PRIVATE")),du.registerVersion(ru,"0.6.10",void 0),du.registerVersion("fire-js",""),vu.registerVersion("firebase","7.19.0","app"),function(){var t,n="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},r=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof e&&e,t];for(var n=0;n<t.length;++n){var r=t[n];if(r&&r.Math==Math)return r}return globalThis}(this);function i(t){var e,n,r="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return r?r.call(t):{next:(e=t,n=0,function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}})}}!function(t,e){if(e){var i=r;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(e=e(o=i[t=t[t.length-1]]))!=o&&null!=e&&n(i,t,{configurable:!0,writable:!0,value:e})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function o(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){var e;null==this.a&&(this.a=[],(e=this).c((function(){e.g()}))),this.a.push(t)};var s=r.setTimeout;n.prototype.c=function(t){s(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.u(t):this.h(t)}},e.prototype.u=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.w(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new n;return e.prototype.s=function(t){var e=this.f();t.Oa(e.resolve,e.reject)},e.prototype.w=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(e){o(e)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.Oa(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Oa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=i(t),s=r.next();!s.done;s=r.next())o(s.value).Oa(e,n)}))},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e((function(t,e){for(var i=[],s=0;i.push(void 0),s++,o(r.value).Oa(function(e){return function(n){i[e]=n,0==--s&&t(i)}}(i.length-1),e),!(r=n.next()).done;);}))},e}));var o=o||{},s=this||self,a=/^[\w+/_-]+[=]{0,2}$/,u=null;function c(){}function l(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function h(t){var e=l(t);return"array"==e||"object"==e&&"number"==typeof t.length}function f(t){return"function"==l(t)}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var d="closure_uid_"+(1e9*Math.random()>>>0),v=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function g(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function m(t,e,n){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:g).apply(null,arguments)}function b(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var _=Date.now||function(){return+new Date};function w(t,e){function n(){}n.prototype=e.prototype,t.Za=e.prototype,t.prototype=new n,t.prototype.constructor=t}function E(t,e,n){this.code=S+t,this.message=e||C[t]||"",this.a=n||null}function T(t){var e=t&&t.code;return e?new E(e.substring(S.length),t.message,t.serverResponse):null}w(E,Error),E.prototype.v=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},E.prototype.toJSON=function(){return this.v()};var I,S="auth/",C={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},k={hd:{Ra:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},pd:{Ra:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://securetoken.googleapis.com/v1/token",Ua:"https://identitytoolkit.googleapis.com/v2/",id:"p"},rd:{Ra:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},sd:{Ra:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Xa:"https://test-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function N(t){for(var e in k)if(k[e].id===t)return{firebaseEndpoint:(t=k[e]).Ra,secureTokenEndpoint:t.Xa,identityPlatformEndpoint:t.Ua};return null}function A(t){if(t)try{return t.$goog_Thenable}catch(t){return}}function O(t){var e;Error.captureStackTrace?Error.captureStackTrace(this,O):(e=Error().stack)&&(this.stack=e),t&&(this.message=String(t))}function P(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");O.call(this,n+t[r])}function R(t,e){throw new P("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function x(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function D(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function L(){this.b=this.a=null}I=N("__EID__")?"__EID__":void 0,w(O,Error),O.prototype.name="CustomError",w(P,O),P.prototype.name="AssertionError",x.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t};var M=new x((function(){return new F}),(function(t){t.reset()}));function F(){this.next=this.b=this.a=null}L.prototype.add=function(t,e){var n=M.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},F.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},F.prototype.reset=function(){this.next=this.b=this.a=null};var U=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},j=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},V=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n,r=t.length,i=[],o=0,s="string"==typeof t?t.split(""):t,a=0;a<r;a++)a in s&&(n=s[a],e.call(void 0,n,a,t)&&(i[o++]=n));return i},q=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},B=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function W(t,e){return 0<=U(t,e)}function H(t,e){var n;return(n=0<=(e=U(t,e)))&&Array.prototype.splice.call(t,e,1),n}function z(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1).length}))}function G(t){return Array.prototype.concat.apply([],arguments)}function K(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Q,Y=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},X=/&/g,$=/</g,J=/>/g,Z=/"/g,tt=/'/g,et=/\x00/g,nt=/[\x00&<>"']/;function rt(t,e){return-1!=t.indexOf(e)}function it(t,e){return t<e?-1:e<t?1:0}t:{var ot=s.navigator;if(ot){var st=ot.userAgent;if(st){Q=st;break t}}Q=""}function at(t){return rt(Q,t)}function ut(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ct(t){for(var e in t)return;return 1}function lt(t){var e,n={};for(e in t)n[e]=t[e];return n}var ht="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ft(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ht.length;o++)n=ht[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function pt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(p(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;R("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function dt(t,e){this.a=t===gt&&e||"",this.b=yt}function vt(t){return t instanceof dt&&t.constructor===dt&&t.b===yt?t.a:(R("expected object of type Const, got '"+t+"'"),"type_error:Const")}dt.prototype.ra=!0,dt.prototype.qa=function(){return this.a},dt.prototype.toString=function(){return"Const{"+this.a+"}"};var yt={},gt={},mt=new dt(gt,"");function bt(t,e){this.a=t===St&&e||"",this.b=It}function _t(t){return t instanceof bt&&t.constructor===bt&&t.b===It?t.a:(R("expected object of type TrustedResourceUrl, got '"+t+"' of type "+l(t)),"type_error:TrustedResourceUrl")}function wt(t,e){var n=vt(t);if(!Tt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return t=n.replace(Et,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof dt?vt(t):encodeURIComponent(String(t))})),new bt(St,t)}bt.prototype.ra=!0,bt.prototype.qa=function(){return this.a.toString()},bt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Et=/%{(\w+)}/g,Tt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,It={},St={};function Ct(t,e){this.a=t===Pt&&e||"",this.b=Ot}function kt(t){return t instanceof Ct&&t.constructor===Ct&&t.b===Ot?t.a:(R("expected object of type SafeUrl, got '"+t+"' of type "+l(t)),"type_error:SafeUrl")}Ct.prototype.ra=!0,Ct.prototype.qa=function(){return this.a.toString()},Ct.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Nt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function At(t){return t instanceof Ct?t:(t="object"==typeof t&&t.ra?t.qa():String(t),Nt.test(t)||(t="about:invalid#zClosurez"),new Ct(Pt,t))}var Ot={},Pt={};function Rt(){this.a="",this.b=Dt}function xt(t){return t instanceof Rt&&t.constructor===Rt&&t.b===Dt?t.a:(R("expected object of type SafeHtml, got '"+t+"' of type "+l(t)),"type_error:SafeHtml")}Rt.prototype.ra=!0,Rt.prototype.qa=function(){return this.a.toString()},Rt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Dt={};function Lt(t){var e=new Rt;return e.a=t,e}Lt("<!DOCTYPE html>");var Mt=Lt("");function Ft(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ut(t){return nt.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(X,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace($,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(J,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(Z,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(tt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(et,"&#0;"))),t}function jt(t){return jt[" "](t),t}Lt("<br>"),jt[" "]=c;var Vt,qt,Bt=at("Opera"),Wt=at("Trident")||at("MSIE"),Ht=at("Edge"),zt=Ht||Wt,Gt=at("Gecko")&&!(rt(Q.toLowerCase(),"webkit")&&!at("Edge"))&&!(at("Trident")||at("MSIE"))&&!at("Edge"),Kt=rt(Q.toLowerCase(),"webkit")&&!at("Edge");function Qt(){var t=s.document;return t?t.documentMode:void 0}t:{var Yt="",Xt=(qt=Q,Gt?/rv:([^\);]+)(\)|;)/.exec(qt):Ht?/Edge\/([\d\.]+)/.exec(qt):Wt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(qt):Kt?/WebKit\/(\S+)/.exec(qt):Bt?/(?:Version)[ \/]?(\S+)/.exec(qt):void 0);if(Xt&&(Yt=Xt?Xt[1]:""),Wt){var $t=Qt();if(null!=$t&&$t>parseFloat(Yt)){Vt=String($t);break t}}Vt=Yt}var Jt,Zt={};function te(t){return e=t,n=function(){for(var e=0,n=Y(String(Vt)).split("."),r=Y(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=it(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||it(0==s[2].length,0==a[2].length)||it(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e},r=Zt,Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=n();var e,n,r}Jt=s.document&&Wt?Qt():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var ee=!Wt||9<=Number(Jt);function ne(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function re(t,e){ut(e,(function(e,n){e&&"object"==typeof e&&e.ra&&(e=e.qa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:se.hasOwnProperty(n)?t.setAttribute(se[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var ie,oe,se={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ae(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ue(t){s.setTimeout((function(){throw t}),0)}function ce(t,e){oe||function(){var t;oe=s.Promise&&s.Promise.resolve?(t=s.Promise.resolve(void 0),function(){t.then(fe)}):function(){var t=fe;!f(s.setImmediate)||s.Window&&s.Window.prototype&&!at("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(ie=ie||function(){var t=s.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!at("Presto")&&(t=function(){var t,e,n=ae(document,"IFRAME");n.style.display="none",t=n,e=new bt(St,vt(mt)),pt(t,"HTMLIFrameElement"),t.src=_t(e).toString(),document.documentElement.appendChild(n);var r=n.contentWindow;(n=r.document).open(),n.write(xt(Mt)),n.close();var i="callImmediate"+Math.random(),o="file:"==r.location.protocol?"*":r.location.protocol+"//"+r.location.host;n=m((function(t){"*"!=o&&t.origin!=o||t.data!=i||this.port1.onmessage()}),this),r.addEventListener("message",n,!1),this.port1={},this.port2={postMessage:function(){r.postMessage(i,o)}}}),void 0===t||at("Trident")||at("MSIE"))return function(t){s.setTimeout(t,0)};var e=new t,n={},r=n;return e.port1.onmessage=function(){var t;void 0!==n.next&&(t=(n=n.next).Db,n.Db=null,t())},function(t){r.next={Db:t},r=r.next,e.port2.postMessage(0)}}())(t):s.setImmediate(t)}}(),le||(oe(),le=!0),he.add(t,e)}var le=!1,he=new L;function fe(){for(var t,e,n;n=e=void 0,n=null,(e=he).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){ue(t)}D(M,t)}le=!1}function pe(t,e){if(this.a=de,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=c)try{var n=this;t.call(e,(function(t){Ce(n,ve,t)}),(function(t){if(!(t instanceof xe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Ce(n,ye,t)}))}catch(t){Ce(this,ye,t)}}var de=0,ve=2,ye=3;function ge(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}ge.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var me=new x((function(){return new ge}),(function(t){t.reset()}));function be(t,e,n){var r=me.get();return r.g=t,r.b=e,r.f=n,r}function _e(t){if(t instanceof pe)return t;var e=new pe(c);return Ce(e,ve,t),e}function we(t){return new pe((function(e,n){n(t)}))}function Ee(t,e,n){ke(t,e,n,null)||ce(b(e,t))}function Te(t){return new pe((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Mb:!0,value:o}:{Mb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Ee(t[o],b(i,o,!0),b(i,o,!1));else e(r)}))}function Ie(t,e){t.b||t.a!=ve&&t.a!=ye||Ne(t),t.f?t.f.next=e:t.b=e,t.f=e}function Se(t,e,n,r){var i=be(null,null,null);return i.a=new pe((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(n){o(n)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof xe?o(e):t(i)}catch(e){o(e)}}:o})),Ie(i.a.c=t,i),i.a}function Ce(t,e,n){var r,i;t.a==de&&(t===n&&(e=ye,n=new TypeError("Promise cannot resolve to itself")),t.a=1,ke(n,t.Yc,t.Zc,t)||(t.i=n,t.a=e,t.c=null,Ne(t),e!=ye||n instanceof xe||(i=n,(r=t).g=!0,ce((function(){r.g&&Re.call(null,i)})))))}function ke(t,e,n,r){if(t instanceof pe)return Ie(t,be(e||c,n||null,r)),1;if(A(t))return t.then(e,n,r),1;if(p(t))try{var i=t.then;if(f(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,(function(t){s||(s=!0,n.call(i,t))}),o)}catch(t){o(t)}}(t,i,e,n,r),1}catch(t){return n.call(r,t),1}}function Ne(t){t.h||(t.h=!0,ce(t.ec,t))}function Ae(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Oe(t,e,n,r){if(n==ye&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Pe(e,n,r);else try{e.c?e.g.call(e.f):Pe(e,n,r)}catch(t){Re.call(null,t)}D(me,e)}function Pe(t,e,n){e==ve?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}pe.prototype.then=function(t,e,n){return Se(this,f(t)?t:null,f(e)?e:null,n)},pe.prototype.$goog_Thenable=!0,(t=pe.prototype).ma=function(t,e){return(t=be(t,t,e)).c=!0,Ie(this,t),this},t.o=function(t,e){return Se(this,null,t,e)},t.cancel=function(t){var e;this.a==de&&(e=new xe(t),ce((function(){!function t(e,n){if(e.a==de)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==e&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==de&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):Ae(r),Oe(r,o,ye,n)))}e.c=null}else Ce(e,ye,n)}(this,e)}),this))},t.Yc=function(t){this.a=de,Ce(this,ve,t)},t.Zc=function(t){this.a=de,Ce(this,ye,t)},t.ec=function(){for(var t;t=Ae(this);)Oe(this,t,this.a,this.i);this.h=!1};var Re=ue;function xe(t){O.call(this,t)}function De(){this.wa=this.wa,this.na=this.na}function Le(t){var e;t.wa||(t.wa=!0,t.Ba(),1)||(e=t,Object.prototype.hasOwnProperty.call(e,d)&&e[d]||(e[d]=++v))}w(xe,O),De.prototype.wa=!(xe.prototype.name="cancel"),De.prototype.Ba=function(){if(this.na)for(;this.na.length;)this.na.shift()()};var Me=Object.freeze||function(t){return t},Fe=!Wt||9<=Number(Jt),Ue=Wt&&!te("9"),je=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",c,e),s.removeEventListener("test",c,e)}catch(t){}return t}();function Ve(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function qe(t,e){if(Ve.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Gt){t:{try{jt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Be[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}Ve.prototype.preventDefault=function(){this.defaultPrevented=!0},w(qe,Ve);var Be=Me({2:"touch",3:"pen",4:"mouse"});qe.prototype.preventDefault=function(){qe.Za.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ue)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},qe.prototype.f=function(){return this.a};var We="closure_listenable_"+(1e6*Math.random()|0),He=0;function ze(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ta=i,this.key=++He,this.ua=this.Na=!1}function Ge(t){t.ua=!0,t.listener=null,t.proxy=null,t.src=null,t.Ta=null}function Ke(t){this.src=t,this.a={},this.b=0}function Qe(t,e){var n=e.type;n in t.a&&H(t.a[n],e)&&(Ge(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function Ye(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ua&&o.listener==e&&o.capture==!!n&&o.Ta==r)return i}return-1}Ke.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Ye(t,e,r,i);return-1<s?(e=t[s],n||(e.Na=!1)):((e=new ze(e,this.src,o,!!r,i)).Na=n,t.push(e)),e};var Xe="closure_lm_"+(1e6*Math.random()|0),$e={};function Je(t,e,n,r,i){if(r&&r.once)tn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)Je(t,e[o],n,r,i);else n=ln(n),t&&t[We]?fn(t,e,n,p(r)?!!r.capture:!!r,i):Ze(t,e,n,!1,r,i)}function Ze(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s,a,u=p(i)?!!i.capture:!!i,c=un(t);if(c||(t[Xe]=c=new Ke(t)),!(n=c.add(e,n,r,u,o)).proxy)if(s=an,r=a=Fe?function(t){return s.call(a.src,a.listener,t)}:function(t){if(!(t=s.call(a.src,a.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)je||(i=u),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(rn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function tn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)tn(t,e[o],n,r,i);else n=ln(n),t&&t[We]?pn(t,e,n,p(r)?!!r.capture:!!r,i):Ze(t,e,n,!0,r,i)}function en(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)en(t,e[o],n,r,i);else r=p(r)?!!r.capture:!!r,n=ln(n),t&&t[We]?(t=t.u,(e=String(e).toString())in t.a&&-1<(n=Ye(o=t.a[e],n,r,i))&&(Ge(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):(t=t&&un(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Ye(e,n,r,i)),(n=-1<t?e[t]:null)&&nn(n))}function nn(t){var e,n,r;"number"!=typeof t&&t&&!t.ua&&((e=t.src)&&e[We]?Qe(e.u,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(rn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=un(e))?(Qe(n,t),0==n.b&&(n.src=null,e[Xe]=null)):Ge(t)))}function rn(t){return t in $e?$e[t]:$e[t]="on"+t}function on(t,e,n,r){var i=!0;if((t=un(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ua&&(o=sn(o,r),i=i&&!1!==o)}return i}function sn(t,e){var n=t.listener,r=t.Ta||t.src;return t.Na&&nn(t),n.call(r,e)}function an(t,e){if(t.ua)return!0;if(Fe)return sn(t,new qe(e,this));if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new qe(r=e,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=on(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=on(r[i],t,!1,e),n=n&&o}return n}function un(t){return(t=t[Xe])instanceof Ke?t:null}var cn="__closure_events_fn_"+(1e9*Math.random()>>>0);function ln(t){return f(t)?t:(t[cn]||(t[cn]=function(e){return t.handleEvent(e)}),t[cn])}function hn(){De.call(this),this.u=new Ke(this),(this.Yb=this).eb=null}function fn(t,e,n,r,i){t.u.add(String(e),n,!1,r,i)}function pn(t,e,n,r,i){t.u.add(String(e),n,!0,r,i)}function dn(t,e,n,r){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.ua&&u.capture==n&&(s=u.listener,a=u.Ta||u.src,u.Na&&Qe(t.u,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}function vn(t,e,n){if(f(t))n&&(t=m(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=m(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function yn(t){var e=null;return new pe((function(n,r){-1==(e=vn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw s.clearTimeout(e),t}))}function gn(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(h(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function mn(t){if(t.X&&"function"==typeof t.X)return t.X();if(!t.V||"function"!=typeof t.V){if(h(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function bn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof bn)for(n=t.X(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function _n(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];wn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)wn(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function wn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}w(hn,De),hn.prototype[We]=!0,hn.prototype.addEventListener=function(t,e,n,r){Je(this,t,e,n,r)},hn.prototype.removeEventListener=function(t,e,n,r){en(this,t,e,n,r)},hn.prototype.dispatchEvent=function(t){var e,n=this.eb;if(n)for(e=[];n;n=n.eb)e.push(n);n=this.Yb;var r=t.type||t;if("string"==typeof t?t=new Ve(t,n):t instanceof Ve?t.target=t.target||n:(s=t,ft(t=new Ve(r,n),s)),s=!0,e)for(var i=e.length-1;0<=i;i--)var o=t.b=e[i],s=dn(o,r,!0,t)&&s;if(s=dn(o=t.b=n,r,!0,t)&&s,s=dn(o,r,!1,t)&&s,e)for(i=0;i<e.length;i++)s=dn(o=t.b=e[i],r,!1,t)&&s;return s},hn.prototype.Ba=function(){if(hn.Za.Ba.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ge(n[r]);delete e.a[t],e.b--}}this.eb=null},(t=bn.prototype).V=function(){_n(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.X=function(){return _n(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return wn(this.b,t)?this.b[t]:e},t.set=function(t,e){wn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var En=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Tn(t,e){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,t instanceof Tn?(this.h=void 0!==e?e:t.h,In(this,t.f),this.i=t.i,this.b=t.b,Sn(this,t.l),this.c=t.c,Cn(this,zn(t.a)),this.g=t.g):t&&(n=String(t).match(En))?(this.h=!!e,In(this,n[1]||"",!0),this.i=Pn(n[2]||""),this.b=Pn(n[3]||"",!0),Sn(this,n[4]),this.c=Pn(n[5]||"",!0),Cn(this,n[6]||"",!0),this.g=Pn(n[7]||"")):(this.h=!!e,this.a=new jn(null,this.h))}function In(t,e,n){t.f=n?Pn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Sn(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.l=e}else t.l=null}function Cn(t,e,n){var r,i;e instanceof jn?(t.a=e,r=t.a,(i=t.h)&&!r.f&&(Vn(r),r.c=null,r.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Bn(this,e),Hn(this,n,t))}),r)),r.f=i):(n||(e=Rn(e,Fn)),t.a=new jn(e,t.h))}function kn(t,e,n){t.a.set(e,n)}function Nn(t,e){return t.a.get(e)}function An(t){return t instanceof Tn?new Tn(t):new Tn(t,void 0)}function On(t,e){var n=new Tn(null,void 0);return In(n,"https"),t&&(n.b=t),e&&(n.c=e),n}function Pn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Rn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,xn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function xn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Tn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Rn(e,Dn,!0),":");var n=this.b;return!n&&"file"!=e||(t.push("//"),(e=this.i)&&t.push(Rn(e,Dn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&t.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Rn(n,"/"==n.charAt(0)?Mn:Ln,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.g)&&t.push("#",Rn(n,Un)),t.join("")},Tn.prototype.resolve=function(t){var e=new Tn(this),n=!!t.f;n?In(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.l;var r,i=t.c;if(n)Sn(e,t.l);else if(n=!!t.c)if("/"!=i.charAt(0)&&(this.b&&!this.c?i="/"+i:-1!=(r=e.c.lastIndexOf("/"))&&(i=e.c.substr(0,r+1)+i)),".."==(r=i)||"."==r)i="";else if(rt(r,"./")||rt(r,"/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],s=0;s<r.length;){var a=r[s++];"."==a?i&&s==r.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&s==r.length&&o.push("")):(o.push(a),i=!0)}i=o.join("/")}else i=r;return n?e.c=i:n=""!==t.a.toString(),n?Cn(e,zn(t.a)):n=!!t.g,n&&(e.g=t.g),e};var Dn=/[#\/\?@]/g,Ln=/[#\?:]/g,Mn=/[#\?]/g,Fn=/[#\?@]/g,Un=/#/g;function jn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Vn(t){t.a||(t.a=new bn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function qn(t){var e=mn(t);if(void 0===e)throw Error("Keys are undefined");var n=new jn(null,void 0);t=gn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Hn(n,i,o):n.add(i,o)}return n}function Bn(t,e){Vn(t),e=Gn(t,e),wn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,wn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&_n(t)))}function Wn(t,e){return Vn(t),e=Gn(t,e),wn(t.a.b,e)}function Hn(t,e,n){Bn(t,e),0<n.length&&(t.c=null,t.a.set(Gn(t,e),K(n)),t.b+=n.length)}function zn(t){var e=new jn;return e.c=t.c,t.a&&(e.a=new bn(t.a),e.b=t.b),e}function Gn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Kn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(s=n[i])&&(r.push(o),$n(i,r),r.push(":"),t(e,s,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":$n(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Qn,t,e),e.join("")}function Qn(){}(t=jn.prototype).add=function(t,e){Vn(this),this.c=null,t=Gn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Vn(this),this.a.forEach((function(n,r){j(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.X=function(){Vn(this);for(var t=this.a.V(),e=this.a.X(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.V=function(t){Vn(this);var e=[];if("string"==typeof t)Wn(this,t)&&(e=G(e,this.a.get(Gn(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=G(e,t[n])}return e},t.set=function(t,e){return Vn(this),this.c=null,Wn(this,t=Gn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.X(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),o=(r=this.V(r),0);o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var Yn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Xn=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function $n(t,e){e.push('"',t.replace(Xn,(function(t){var e=Yn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Yn[t]=e),e})),'"')}function Jn(){var t=yr();return Wt&&Jt&&11==Jt||/Edge\/\d+/.test(t)}function Zn(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function tr(t,e){e=e||s.window;var n="about:blank";t&&(n=kt(At(t))),e.location.href=n}function er(t){return!!((t=(t||yr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function nr(t){t=t||s.window;try{t.close()}catch(t){}}function rr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=yr().toLowerCase(),r&&(e.target=r,rt(n,"crios/")&&(e.target="_blank")),pr(yr())==fr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Ct?n:At(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((at("iPhone")&&!at("iPod")&&!at("iPad")||at("iPad")||at("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(pt(s=ae(document,"A"),"HTMLAnchorElement"),e instanceof Ct||e instanceof Ct||(e="object"==typeof e&&e.ra?e.qa():String(e),Nt.test(e)||(e="about:invalid#zClosurez"),e=new Ct(Pt,e)),s.href=kt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=r.open("",n,s),t=kt(e),s&&(zt&&rt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t=Lt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ut(t)+'">'),r=s.document)&&(r.write(xt(t)),r.close())):(s=r.open(kt(e),n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var ir=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,or=/^[^@]+@[^@]+$/;function sr(){var t=null;return new pe((function(e){"complete"==s.document.readyState?e():(t=function(){e()},tn(window,"load",t))})).o((function(e){throw en(window,"load",t),e}))}function ar(t){return t=t||yr(),!("file:"!==wr()&&"ionic:"!==wr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function ur(){var t=s.window;try{return t&&t!=t.top}catch(t){return}}function cr(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function lr(){return vu.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":vu.INTERNAL.hasOwnProperty("node")?"Node":cr()?"Worker":"Browser"}function hr(){var t=lr();return"ReactNative"===t||"Node"===t}var fr="Firefox";function pr(t){var e=t.toLowerCase();return rt(e,"opera/")||rt(e,"opr/")||rt(e,"opios/")?"Opera":rt(e,"iemobile")?"IEMobile":rt(e,"msie")||rt(e,"trident/")?"IE":rt(e,"edge/")?"Edge":rt(e,"firefox/")?fr:rt(e,"silk/")?"Silk":rt(e,"blackberry")?"Blackberry":rt(e,"webos")?"Webos":!rt(e,"safari/")||rt(e,"chrome/")||rt(e,"crios/")||rt(e,"android")?!rt(e,"chrome/")&&!rt(e,"crios/")||rt(e,"edge/")?rt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":"Chrome":"Safari"}var dr={jd:"FirebaseCore-web",ld:"FirebaseUI-web"};function vr(t,e){e=e||[];var n,r=[],i={};for(n in dr)i[dr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=lr())?r=pr(i=yr()):"Worker"===r&&(r=pr(i=yr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function yr(){return s.navigator&&s.navigator.userAgent||""}function gr(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function mr(){try{var t=s.localStorage,e=Cr();if(t)return t.setItem(e,"1"),t.removeItem(e),!Jn()||!!s.indexedDB}catch(t){return cr()&&!!s.indexedDB}return!1}function br(){return(_r()||"chrome-extension:"===wr()||ar())&&!hr()&&mr()&&!cr()}function _r(){return"http:"===wr()||"https:"===wr()}function wr(){return s.location&&s.location.protocol||null}function Er(t){return!er(t=t||yr())&&pr(t)!=fr}function Tr(t){return void 0===t?null:Kn(t)}function Ir(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Sr(t){if(null!==t)return JSON.parse(t)}function Cr(t){return t||Math.floor(1e9*Math.random()).toString()}function kr(t){return"Safari"!=pr(t=t||yr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Nr(){var t=s.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Ar(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=yr(),e=lr(),this.b=er(t)||"ReactNative"===e}function Or(){var t=s.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Pr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Rr(){return gr("fireauth.oauthhelper",s)||gr("fireauth.iframe",s)}Ar.prototype.get=function(){var t=s.navigator;return!t||"boolean"!=typeof t.onLine||!_r()&&"chrome-extension:"!==wr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var xr,Dr={};function Lr(t){Dr[t]||(Dr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Mr={};Object.defineProperty(Mr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Mr,"abcd",{configurable:!0,enumerable:!0,value:2}),xr=2==Mr.abcd}catch(t){xr=!1}function Fr(t,e,n){xr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Ur(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Fr(t,n,e[n])}function jr(t){var e={};return Ur(e,t),e}function Vr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Fr(e,n,Vr(t[n]));return e}function qr(t){var e=t&&(t[Gr]?"phone":null);if(!(e&&t&&t[zr]))throw new E("internal-error","Internal assert: invalid MultiFactorInfo object");Fr(this,"uid",t[zr]),Fr(this,"displayName",t[Wr]||null);var n=null;t[Hr]&&(n=new Date(t[Hr]).toUTCString()),Fr(this,"enrollmentTime",n),Fr(this,"factorId",e)}function Br(t){try{var e=new Kr(t)}catch(t){e=null}return e}qr.prototype.v=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Wr="displayName",Hr="enrolledAt",zr="mfaEnrollmentId",Gr="phoneInfo";function Kr(t){qr.call(this,t),Fr(this,"phoneNumber",t[Gr])}function Qr(t){var e={},n=t[Jr],r=t[ti],i=t[ei];if(t=Br(t[Zr]),!i||i!=Xr&&i!=$r&&!n||i==$r&&!r||i==Yr&&!t)throw Error("Invalid checkActionCode response!");i==$r?(e[ri]=n||null,e[oi]=n||null,e[ni]=r):(e[ri]=r||null,e[oi]=r||null,e[ni]=n||null),e[ii]=t||null,Fr(this,ai,i),Fr(this,si,Vr(e))}w(Kr,qr),Kr.prototype.v=function(){var t=Kr.Za.v.call(this);return t.phoneNumber=this.phoneNumber,t};var Yr="REVERT_SECOND_FACTOR_ADDITION",Xr="EMAIL_SIGNIN",$r="VERIFY_AND_CHANGE_EMAIL",Jr="email",Zr="mfaInfo",ti="newEmail",ei="requestType",ni="email",ri="fromEmail",ii="multiFactorInfo",oi="previousEmail",si="data",ai="operation";function ui(t){var e=Nn(t=An(t),ci)||null,n=Nn(t,li)||null,r=(r=Nn(t,pi)||null)&&vi[r]||null;if(!e||!n||!r)throw new E("argument-error",ci+", "+li+"and "+pi+" are required in a valid action code URL.");Ur(this,{apiKey:e,operation:r,code:n,continueUrl:Nn(t,hi)||null,languageCode:Nn(t,fi)||null,tenantId:Nn(t,di)||null})}var ci="apiKey",li="oobCode",hi="continueUrl",fi="languageCode",pi="mode",di="tenantId",vi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Yr,signIn:Xr,verifyAndChangeEmail:$r,verifyEmail:"VERIFY_EMAIL"};function yi(t){try{return new ui(t)}catch(t){return null}}function gi(t){var e=t[Ei];if(void 0===e)throw new E("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new E("invalid-continue-uri");if(this.h=e,this.b=this.a=null,this.g=!1,(r=t[mi])&&"object"==typeof r){e=r[Si];var n=r[Ti],r=r[Ii];if("string"==typeof e&&e.length){if(this.a=e,void 0!==n&&"boolean"!=typeof n)throw new E("argument-error",Ti+" property must be a boolean when specified.");if(this.g=!!n,void 0!==r&&("string"!=typeof r||"string"==typeof r&&!r.length))throw new E("argument-error",Ii+" property must be a non empty string when specified.");this.b=r||null}else{if(void 0!==e)throw new E("argument-error",Si+" property must be a non empty string when specified.");if(void 0!==n||void 0!==r)throw new E("missing-android-pkg-name")}}else if(void 0!==r)throw new E("argument-error",mi+" property must be a non null object when specified.");if(this.f=null,(e=t[wi])&&"object"==typeof e){if("string"==typeof(e=e[Ci])&&e.length)this.f=e;else if(void 0!==e)throw new E("argument-error",Ci+" property must be a non empty string when specified.")}else if(void 0!==e)throw new E("argument-error",wi+" property must be a non null object when specified.");if(void 0!==(e=t[_i])&&"boolean"!=typeof e)throw new E("argument-error",_i+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[bi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new E("argument-error",bi+" property must be a non empty string when specified.");this.i=t||null}var mi="android",bi="dynamicLinkDomain",_i="handleCodeInApp",wi="iOS",Ei="url",Ti="installApp",Ii="minimumVersion",Si="packageName",Ci="bundleId";function ki(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Ni=null;function Ai(t){var e=Pi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Oi(t){try{return new Ai(t)}catch(t){return null}}function Pi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(function(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Ni[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Ni){Ni={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;n<5;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Ni[o]&&(Ni[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){e+=String.fromCharCode(t)})),e}(t))}catch(t){}return null}Ai.prototype.S=function(){return this.f},Ai.prototype.i=function(){return this.b},Ai.prototype.toString=function(){return this.g};var Ri="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),xi=["client_id","response_type","scope","redirect_uri","state"],Di={kd:{Ha:"locale",ta:700,sa:600,ea:"facebook.com",Va:xi},md:{Ha:null,ta:500,sa:750,ea:"github.com",Va:xi},nd:{Ha:"hl",ta:515,sa:680,ea:"google.com",Va:xi},td:{Ha:"lang",ta:485,sa:705,ea:"twitter.com",Va:Ri},gd:{Ha:"locale",ta:640,sa:600,ea:"apple.com",Va:[]}};function Li(t){for(var e in Di)if(Di[e].ea==t)return Di[e];return null}function Mi(t){var e={};e["facebook.com"]=qi,e["google.com"]=Wi,e["github.com"]=Bi,e["twitter.com"]=Hi;var n=t&&t[Ui];try{if(n)return e[n]?new e[n](t):new Vi(t);if(void 0!==t[Fi])return new ji(t)}catch(t){}return null}var Fi="idToken",Ui="providerId";function ji(t){var e,n=t[Ui];if(n||!t[Fi]||(e=Oi(t[Fi]))&&e.a&&(n=e.a),!n)throw Error("Invalid additional user info!");"anonymous"!=n&&"custom"!=n||(n=null),e=!1,void 0!==t.isNewUser?e=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(e=!0),Fr(this,"providerId",n),Fr(this,"isNewUser",e)}function Vi(t){ji.call(this,t),Fr(this,"profile",Vr((t=Sr(t.rawUserInfo||"{}"))||{}))}function qi(t){if(Vi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Bi(t){if(Vi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Fr(this,"username",this.profile&&this.profile.login||null)}function Wi(t){if(Vi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Hi(t){if(Vi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Fr(this,"username",t.screenName||null)}function zi(t){var e=Nn(r=An(t),"link"),n=Nn(An(e),"link"),r=Nn(r,"deep_link_id");return Nn(An(r),"link")||r||n||e||t}function Gi(t,e){if(!t&&!e)throw new E("internal-error","Internal assert: no raw session string available");if(t&&e)throw new E("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?Ki:Qi}w(Vi,ji),w(qi,Vi),w(Bi,Vi),w(Wi,Vi),w(Hi,Vi);var Ki="enroll",Qi="signin";function Yi(){}function Xi(t,e){return t.then((function(t){if(t[Us]){var n=Oi(t[Us]);if(!n||e!=n.h)throw new E("user-mismatch");return t}throw new E("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==S+"user-not-found"?new E("user-mismatch"):t}))}function $i(t,e){if(!e)throw new E("internal-error","failed to construct a credential");this.a=e,Fr(this,"providerId",t),Fr(this,"signInMethod",t)}function Ji(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function Zi(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new $i(t.providerId,t.pendingToken)}catch(t){}return null}function to(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Fr(this,"idToken",e.idToken),e.accessToken&&Fr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Fr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new E("internal-error","failed to construct a credential");Fr(this,"accessToken",e.oauthToken),Fr(this,"secret",e.oauthTokenSecret)}Fr(this,"providerId",t),Fr(this,"signInMethod",n)}function eo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:qn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function no(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new to(t.providerId,e,t.signInMethod)}catch(t){}}return null}function ro(t,e){this.Oc=e||[],Ur(this,{providerId:t,isOAuthProvider:!0}),this.Fb={},this.lb=(Li(t)||{}).Ha||null,this.kb=null}function io(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new E("argument-error",'SAML provider IDs must be prefixed with "saml."');ro.call(this,t,[])}function oo(t){ro.call(this,t,xi),this.a=[]}function so(){oo.call(this,"facebook.com")}function ao(t){if(!t)throw new E("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new so).credential({accessToken:e})}function uo(){oo.call(this,"github.com")}function co(t){if(!t)throw new E("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new uo).credential({accessToken:e})}function lo(){oo.call(this,"google.com"),this.Aa("profile")}function ho(t,e){var n=t;return p(t)&&(n=t.idToken,e=t.accessToken),(new lo).credential({idToken:n,accessToken:e})}function fo(){ro.call(this,"twitter.com",Ri)}function po(t,e){var n=t;if(p(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new E("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new to("twitter.com",n,"twitter.com")}function vo(t,e,n){this.a=t,this.f=e,Fr(this,"providerId","password"),Fr(this,"signInMethod",n===go.EMAIL_LINK_SIGN_IN_METHOD?go.EMAIL_LINK_SIGN_IN_METHOD:go.EMAIL_PASSWORD_SIGN_IN_METHOD)}function yo(t){return t&&t.email&&t.password?new vo(t.email,t.password,t.signInMethod):null}function go(){Ur(this,{providerId:"password",isOAuthProvider:!1})}function mo(t,e){if(!(e=bo(e)))throw new E("argument-error","Invalid email link!");return new vo(t,e.code,go.EMAIL_LINK_SIGN_IN_METHOD)}function bo(t){return(t=yi(t=zi(t)))&&t.operation===Xr?t:null}function _o(t){if(!(t.bb&&t.ab||t.Ja&&t.da))throw new E("internal-error");this.a=t,Fr(this,"providerId","phone"),this.ea="phone",Fr(this,"signInMethod","phone")}function wo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return j(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new _o(e)}return null}function Eo(t){return t.a.Ja&&t.a.da?{temporaryProof:t.a.Ja,phoneNumber:t.a.da}:{sessionInfo:t.a.bb,code:t.a.ab}}function To(t){try{this.a=t||vu.auth()}catch(t){throw new E("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Ur(this,{providerId:"phone",isOAuthProvider:!1})}function Io(t,e){if(!t)throw new E("missing-verification-id");if(!e)throw new E("missing-verification-code");return new _o({bb:t,ab:e})}function So(t){if(t.temporaryProof&&t.phoneNumber)return new _o({Ja:t.temporaryProof,da:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return ho(o,n);case"facebook.com":return ao(n);case"github.com":return co(n);case"twitter.com":return po(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new $i(e,s):new to(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new oo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Co(t){if(!t.isOAuthProvider)throw new E("invalid-oauth-provider")}function ko(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new E("invalid-auth-event");if(this.g&&this.a)throw new E("invalid-auth-event");if(this.g&&!this.f)throw new E("invalid-auth-event")}function No(t){return(t=t||{}).type?new ko(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&T(t.error),t.postBody,t.tenantId):null}function Ao(){this.b=null,this.a=[]}Gi.prototype.Fa=function(){return this.a?_e(this.a):_e(this.b)},Gi.prototype.v=function(){return this.type==Ki?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},Yi.prototype.ia=function(){},Yi.prototype.b=function(){},Yi.prototype.c=function(){},Yi.prototype.v=function(){},$i.prototype.ia=function(t){return ra(t,Ji(this))},$i.prototype.b=function(t,e){var n=Ji(this);return n.idToken=e,ia(t,n)},$i.prototype.c=function(t,e){return Xi(oa(t,Ji(this)),e)},$i.prototype.v=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},to.prototype.ia=function(t){return ra(t,eo(this))},to.prototype.b=function(t,e){var n=eo(this);return n.idToken=e,ia(t,n)},to.prototype.c=function(t,e){return Xi(oa(t,eo(this)),e)},to.prototype.v=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},ro.prototype.Ia=function(t){return this.Fb=lt(t),this},w(io,ro),w(oo,ro),oo.prototype.Aa=function(t){return W(this.a,t)||this.a.push(t),this},oo.prototype.Nb=function(){return K(this.a)},oo.prototype.credential=function(t,e){var n=p(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null};if(!n.idToken&&!n.accessToken)throw new E("argument-error","credential failed: must provide the ID token and/or the access token.");return new to(this.providerId,n,this.providerId)},w(so,oo),Fr(so,"PROVIDER_ID","facebook.com"),Fr(so,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),w(uo,oo),Fr(uo,"PROVIDER_ID","github.com"),Fr(uo,"GITHUB_SIGN_IN_METHOD","github.com"),w(lo,oo),Fr(lo,"PROVIDER_ID","google.com"),Fr(lo,"GOOGLE_SIGN_IN_METHOD","google.com"),w(fo,ro),Fr(fo,"PROVIDER_ID","twitter.com"),Fr(fo,"TWITTER_SIGN_IN_METHOD","twitter.com"),vo.prototype.ia=function(t){return this.signInMethod==go.EMAIL_LINK_SIGN_IN_METHOD?Va(t,pa,{email:this.a,oobCode:this.f}):Va(t,La,{email:this.a,password:this.f})},vo.prototype.b=function(t,e){return this.signInMethod==go.EMAIL_LINK_SIGN_IN_METHOD?Va(t,da,{idToken:e,email:this.a,oobCode:this.f}):Va(t,ka,{idToken:e,email:this.a,password:this.f})},vo.prototype.c=function(t,e){return Xi(this.ia(t),e)},vo.prototype.v=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Ur(go,{PROVIDER_ID:"password"}),Ur(go,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Ur(go,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),_o.prototype.ia=function(t){return t.cb(Eo(this))},_o.prototype.b=function(t,e){var n=Eo(this);return n.idToken=e,Va(t,Fa,n)},_o.prototype.c=function(t,e){var n=Eo(this);return n.operation="REAUTH",Xi(t=Va(t,Ua,n),e)},_o.prototype.v=function(){var t={providerId:"phone"};return this.a.bb&&(t.verificationId=this.a.bb),this.a.ab&&(t.verificationCode=this.a.ab),this.a.Ja&&(t.temporaryProof=this.a.Ja),this.a.da&&(t.phoneNumber=this.a.da),t},To.prototype.cb=function(t,e){var n=this.a.b;return _e(e.verify()).then((function(r){if("string"!=typeof r)throw new E("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=p(t)?t.session:null,o=p(t)?t.phoneNumber:t;return(i&&i.type==Ki?i.Fa().then((function(t){return Va(n,Aa,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}}).then((function(t){return t.phoneSessionInfo.sessionInfo}))})):i&&i.type==Qi?i.Fa().then((function(e){return i=n,o={mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}},Va(i,Oa,o).then((function(t){return t.phoneResponseInfo.sessionInfo}));var i,o})):Va(n,Sa,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new E("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Ur(To,{PROVIDER_ID:"phone"}),Ur(To,{PHONE_SIGN_IN_METHOD:"phone"}),ko.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},ko.prototype.S=function(){return this.h},ko.prototype.v=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.v()}};var Oo,Po=null;function Ro(t){var e="unauthorized-domain",n=void 0,r=An(t);t=r.b,"chrome-extension"==(r=r.f)?n=Ft("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Ft("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",E.call(this,e,n)}function xo(t,e,n){E.call(this,t,n),(t=e||{}).Gb&&Fr(this,"email",t.Gb),t.da&&Fr(this,"phoneNumber",t.da),t.credential&&Fr(this,"credential",t.credential),t.Wb&&Fr(this,"tenantId",t.Wb)}function Do(t){if(t.code){var e=t.code||"";0==e.indexOf(S)&&(e=e.substring(S.length));var n={credential:So(t),Wb:t.tenantId};if(t.email)n.Gb=t.email;else if(t.phoneNumber)n.da=t.phoneNumber;else if(!n.credential)return new E(e,t.message||void 0);return new xo(e,n,t.message)}return null}function Lo(){}function Mo(t){return t.c||(t.c=t.b())}function Fo(){}function Uo(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function jo(){}function Vo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=m(this.oc,this),this.a.onerror=m(this.Pb,this),this.a.onprogress=m(this.pc,this),this.a.ontimeout=m(this.tc,this)}function qo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Bo(t,e,n){this.reset(t,e,n,void 0,void 0)}function Wo(t){this.f=t,this.b=this.c=this.a=null}function Ho(t,e){this.name=t,this.value=e}w(Ro,E),w(xo,E),xo.prototype.v=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.v();return e&&ft(t,e),t},xo.prototype.toJSON=function(){return this.v()},Lo.prototype.c=null,w(Fo,Lo),Fo.prototype.a=function(){var t=Uo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Fo.prototype.b=function(){var t={};return Uo(this)&&(t[0]=!0,t[1]=!0),t},Oo=new Fo,w(jo,Lo),jo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Vo;throw Error("Unsupported browser")},jo.prototype.b=function(){return{}},(t=Vo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.oc=function(){this.status=200,this.response=this.responseText=this.a.responseText,qo(this,4)},t.Pb=function(){this.status=500,this.response=this.responseText="",qo(this,4)},t.tc=function(){this.Pb()},t.pc=function(){this.status=200,qo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Bo.prototype.a=null,Bo.prototype.reset=function(t,e,n,r,i){delete this.a},Ho.prototype.toString=function(){return this.name};var zo=new Ho("SEVERE",1e3),Go=new Ho("WARNING",900),Ko=new Ho("CONFIG",700),Qo=new Ho("FINE",500);Wo.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(R("Root logger has no level set."),null)}(this).value)for(f(e)&&(e=e()),t=new Bo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Yo,Xo={},$o=null;function Jo(t){var e,n,r;return $o||($o=new Wo(""),(Xo[""]=$o).c=Ko),(e=Xo[t])||(e=new Wo(t),r=t.lastIndexOf("."),n=t.substr(r+1),(r=Jo(t.substr(0,r))).b||(r.b={}),(r.b[n]=e).a=r,Xo[t]=e),e}function Zo(t,e){t&&t.log(Qo,e,void 0)}function ts(t){this.f=t}function es(t){hn.call(this),this.s=t,this.readyState=ns,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=Jo("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}w(ts,Lo),ts.prototype.a=function(){return new es(this.f)},ts.prototype.b=(Yo={},function(){return Yo}),w(es,hn);var ns=0;function rs(t){t.c.read().then(t.nc.bind(t)).catch(t.Sa.bind(t))}function is(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,os(t)}function os(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ss(t){hn.call(this),this.headers=new bn,this.D=t||null,this.c=!1,this.B=this.a=null,this.h=this.P=this.l="",this.f=this.O=this.i=this.N=!1,this.g=0,this.s=null,this.m=as,this.w=this.R=!1}(t=es.prototype).open=function(t,e){if(this.readyState!=ns)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,os(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.s.fetch(new Request(this.g,e)).then(this.sc.bind(this),this.Sa.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,is(this,!1)),this.readyState=ns},t.sc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,os(this)),this.a&&(this.readyState=3,os(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.qc.bind(this),this.Sa.bind(this)):void 0!==s.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,rs(this)):t.text().then(this.rc.bind(this),this.Sa.bind(this)))))},t.nc=function(t){var e;this.a&&((e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done}))&&(this.response=this.responseText+=e),t.done?is(this,!0):os(this),3==this.readyState&&rs(this))},t.rc=function(t){this.a&&(this.response=this.responseText=t,is(this,!0))},t.qc=function(t){this.a&&(this.response=t,is(this,!0))},t.Sa=function(t){var e=this.h;e&&e.log(Go,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&is(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(Go,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(Go,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},w(ss,hn);var as="";ss.prototype.b=Jo("goog.net.XhrIo");var us=/^https?$/i,cs=["POST","PUT"];function ls(t){return"content-type"==t.toLowerCase()}function hs(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,fs(t),ds(t)}function fs(t){t.N||(t.N=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ps(t){if(t.c&&void 0!==o)if(t.B[1]&&4==ys(t)&&2==gs(t))Zo(t.b,ms(t,"Local request error detected and ignored"));else if(t.i&&4==ys(t))vn(t.Sb,0,t);else if(t.dispatchEvent("readystatechange"),4==ys(t)){Zo(t.b,ms(t,"Request complete")),t.c=!1;try{var e,n,r,i,a=gs(t);t:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break t;default:u=!1}if((e=u)||((n=0===a)&&(!(i=String(t.l).match(En)[1]||null)&&s.self&&s.self.location&&(i=(r=s.self.location.protocol).substr(0,r.length-1)),n=!us.test(i?i.toLowerCase():"")),e=n),e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<ys(t)?t.a.statusText:""}catch(e){Zo(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+gs(t)+"]",fs(t)}}finally{ds(t)}}}function ds(t,e){if(t.a){vs(t);var n=t.a,r=t.B[0]?c:null;t.a=null,t.B=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(zo,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function vs(t){t.a&&t.w&&(t.a.ontimeout=null),t.s&&(s.clearTimeout(t.s),t.s=null)}function ys(t){return t.a?t.a.readyState:0}function gs(t){try{return 2<ys(t)?t.a.status:-1}catch(t){return-1}}function ms(t,e){return e+" ["+t.P+" "+t.l+" "+gs(t)+"]"}function bs(t){var e=Os;this.g=[],this.w=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.u=this.B=this.i=!1,this.h=0,this.b=null,this.l=0}function _s(t,e,n){t.a=!0,t.c=n,t.f=!e,Is(t)}function ws(t){if(t.a){if(!t.u)throw new Ss;t.u=!1}}function Es(t,e,n,r){t.g.push([e,n,r]),t.a&&Is(t)}function Ts(t){return B(t.g,(function(t){return f(t[1])}))}function Is(t){var e,n;t.h&&t.a&&Ts(t)&&(e=t.h,(n=Ns[e])&&(s.clearTimeout(n.a),delete Ns[e]),t.h=0),t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=(a=t.g.shift())[0],o=a[1],a=a[2];if(i=t.f?o:i)try{var u=i.call(a||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(A(e)||"function"==typeof s.Promise&&e instanceof s.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Ts(t)||(n=!0)}}t.c=e,r&&(u=m(t.m,t,!0),r=m(t.m,t,!1),e instanceof bs?(Es(e,u,r),e.B=!0):e.then(u,r)),n&&(e=new ks(e),Ns[e.a]=e,t.h=e.a)}function Ss(){O.call(this)}function Cs(){O.call(this)}function ks(t){this.a=s.setTimeout(m(this.c,this),0),this.b=t}(t=ss.prototype).Ka=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Zo(this.b,ms(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(Zo(this.b,ms(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ds(this))},t.Ba=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ds(this,!0)),ss.Za.Ba.call(this)},t.Sb=function(){this.wa||(this.O||this.i||this.f?ps(this):this.Hc())},t.Hc=function(){ps(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case as:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(zo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return Zo(this.b,"Can not get response: "+t.message),null}},bs.prototype.cancel=function(t){var e;this.a?this.c instanceof bs&&this.c.cancel():(this.b&&(e=this.b,delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())),this.w?this.w.call(this.s,this):this.u=!0,this.a||(t=new Cs,ws(this),_s(this,!1,t)))},bs.prototype.m=function(t,e){this.i=!1,_s(this,t,e)},bs.prototype.then=function(t,e,n){var r,i,o=new pe((function(t,e){r=t,i=e}));return Es(this,r,(function(t){t instanceof Cs?o.cancel():i(t)})),o.then(t,e,n)},bs.prototype.$goog_Thenable=!0,w(Ss,O),Ss.prototype.message="Deferred has already fired",Ss.prototype.name="AlreadyCalledError",w(Cs,O),Cs.prototype.message="Deferred was canceled",Cs.prototype.name="CanceledError",ks.prototype.c=function(){throw delete Ns[this.a],this.b};var Ns={};function As(t){var e,n,r,i,o=document,c=_t(t).toString(),l=ae(document,"SCRIPT"),h={Tb:l,Ka:void 0},f=new bs(h),p=window.setTimeout((function(){Ps(l,!0);var t=new Ds(xs,"Timeout reached for loading script "+c);ws(f),_s(f,!1,t)}),5e3);return h.Ka=p,l.onload=l.onreadystatechange=function(){l.readyState&&"loaded"!=l.readyState&&"complete"!=l.readyState||(Ps(l,!1,p),ws(f),_s(f,!0,null))},l.onerror=function(){Ps(l,!0,p);var t=new Ds(Rs,"Error while loading script "+c);ws(f),_s(f,!1,t)},ft(h={},{type:"text/javascript",charset:"UTF-8"}),re(l,h),n=t,pt(e=l,"HTMLScriptElement"),e.src=_t(n),null===u&&(u=(n=(n=s.document).querySelector&&n.querySelector("script[nonce]"))&&(n=n.nonce||n.getAttribute("nonce"))&&a.test(n)?n:""),(n=u)&&e.setAttribute("nonce",n),((i=((r=o)||document).getElementsByTagName("HEAD"))&&0!=i.length?i[0]:r.documentElement).appendChild(l),f}function Os(){var t;this&&this.Tb&&(t=this.Tb)&&"SCRIPT"==t.tagName&&Ps(t,!0,this.Ka)}function Ps(t,e,n){null!=n&&s.clearTimeout(n),t.onload=c,t.onerror=c,t.onreadystatechange=c,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Rs=0,xs=1;function Ds(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),O.call(this,n),this.code=t}function Ls(t){this.f=t}function Ms(t,e,n){if(this.c=t,t=e||{},this.u=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||js,this.g=lt(t.secureTokenHeaders||Vs),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.l=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.i=t.firebaseTimeout||qs,this.a=lt(t.firebaseHeaders||Bs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==lr(),!(n=s.XMLHttpRequest||n&&vu.INTERNAL.node&&vu.INTERNAL.node.XMLHttpRequest)&&!cr())throw new E("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,cr()?this.f=new ts(self):hr()?this.f=new Ls(n):this.f=new jo,this.b=null}w(Ds,O),w(Ls,Lo),Ls.prototype.a=function(){return new this.f},Ls.prototype.b=function(){return{}};var Fs,Us="idToken",js=new Ar(3e4,6e4),Vs={"Content-Type":"application/x-www-form-urlencoded"},qs=new Ar(3e4,6e4),Bs={"Content-Type":"application/json"};function Ws(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Hs(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function zs(t,e,n,r,i,o,a){var u;(t=!((u="Chrome"==pr(u=yr())&&(u=u.match(/\sChrome\/(\d+)/i))&&2==u.length?parseInt(u[1],10):null)&&u<30||Wt&&Jt&&!(9<Jt))||cr()?m(t.w,t):(Fs=Fs||new pe((function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(s[Ks]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Es(t,null,e,void 0)}(As(wt(Gs,{onload:Ks})),(function(){e(Error("CORS_UNSUPPORTED"))})))}(t,e)})),m(t.s,t)))(e,n,r,i,o,a)}Ms.prototype.S=function(){return this.b},Ms.prototype.w=function(t,e,n,r,i,o){if(cr()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new E("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a,u=new ss(this.f);o&&(u.g=Math.max(0,o),a=setTimeout((function(){u.dispatchEvent("timeout")}),o)),fn(u,"complete",(function(){a&&clearTimeout(a);var n=null;try{n=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return Zo(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){n=null}e&&e(n)})),pn(u,"ready",(function(){a&&clearTimeout(a),Le(this)})),pn(u,"timeout",(function(){a&&clearTimeout(a),Le(this),e&&e(null)})),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.N=!1,t.c=!0,t.a=t.D?t.D.a():Oo.a(),t.B=t.D?Mo(t.D):Mo(Oo),t.a.onreadystatechange=m(t.Sb,t);try{Zo(t.b,ms(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(e){return Zo(t.b,ms(t,"Error opening Xhr: "+e.message)),void hs(t,e)}e=r||"";var o,a=new bn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(h(t)||"string"==typeof t)j(t,e,void 0);else for(var n=mn(t),r=gn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){a.set(e,t)})),i=function(t){t:{for(var e=ls,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(a.X()),r=s.FormData&&e instanceof s.FormData,!W(cs,n)||i||r||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.R&&(t.a.withCredentials=t.R);try{vs(t),0<t.g&&(t.w=(o=t.a,Wt&&te(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),Zo(t.b,ms(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.w)),t.w?(t.a.timeout=t.g,t.a.ontimeout=m(t.Ka,t)):t.s=vn(t.Ka,t.g,t)),Zo(t.b,ms(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){Zo(t.b,ms(t,"Send error: "+e.message)),hs(t,e)}}(u,t,n,r,i)};var Gs=new dt(gt,"https://apis.google.com/js/client.js?onload=%{onload}"),Ks="__fcb"+Math.floor(1e6*Math.random()).toString();function Qs(t){if("string"!=typeof(t=t.email)||!or.test(t))throw new E("invalid-email")}function Ys(t){"email"in t&&Qs(t)}function Xs(t){if(!t[Us]){if(t.mfaPendingCredential)throw new E("multi-factor-auth-required",null,lt(t));throw new E("internal-error")}}function $s(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new E("internal-error")}else{if(!t.sessionInfo)throw new E("missing-verification-id");if(!t.code)throw new E("missing-verification-code")}}Ms.prototype.s=function(t,e,n,r,i){var o=this;Fs.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Ms.prototype.vb=function(){return Va(this,Na,{})},Ms.prototype.xb=function(t,e){return Va(this,Ca,{idToken:t,email:e})},Ms.prototype.yb=function(t,e){return Va(this,ka,{idToken:t,password:e})};var Js={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Zs(t){if(!t.phoneVerificationInfo)throw new E("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new E("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new E("missing-verification-code")}function ta(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new E("internal-error")}function ea(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&Wn(t=new jn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function na(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Do(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Do(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Do(t)):t.errorMessage&&(e=qa(t.errorMessage)),e)throw e;Xs(t)}function ra(t,e){return e.returnIdpCredential=!0,Va(t,Pa,e)}function ia(t,e){return e.returnIdpCredential=!0,Va(t,xa,e)}function oa(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Va(t,Ra,e)}function sa(t){if(!t.oobCode)throw new E("invalid-action-code")}(t=Ms.prototype).zb=function(t,e){var n={idToken:t},r=[];return ut(Js,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),Va(this,Ca,n)},t.rb=function(t,e){return ft(t={requestType:"PASSWORD_RESET",email:t},e),Va(this,wa,t)},t.sb=function(t,e){return ft(t={requestType:"EMAIL_SIGNIN",email:t},e),Va(this,ma,t)},t.qb=function(t,e){return ft(t={requestType:"VERIFY_EMAIL",idToken:t},e),Va(this,ba,t)},t.Ab=function(t,e,n){return ft(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Va(this,_a,t)},t.cb=function(t){return Va(this,Ma,t)},t.jb=function(t,e){return Va(this,Ia,{oobCode:t,newPassword:e})},t.Pa=function(t){return Va(this,ua,{oobCode:t})},t.fb=function(t){return Va(this,aa,{oobCode:t})};var aa={endpoint:"setAccountInfo",A:sa,Y:"email",C:!0},ua={endpoint:"resetPassword",A:sa,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new E("internal-error")},C:!0},ca={endpoint:"signupNewUser",A:function(t){if(Qs(t),!t.password)throw new E("weak-password")},G:Xs,U:!0,C:!0},la={endpoint:"createAuthUri",C:!0},ha={endpoint:"deleteAccount",M:["idToken"]},fa={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],A:function(t){if("array"!=l(t.deleteProvider))throw new E("internal-error")}},pa={endpoint:"emailLinkSignin",M:["email","oobCode"],A:Qs,G:Xs,U:!0,C:!0},da={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],A:Qs,G:Xs,U:!0},va={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],A:Zs,G:Xs,C:!0,La:!0},ya={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],A:Zs,G:Xs,C:!0,La:!0},ga={endpoint:"getAccountInfo"},ma={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new E("internal-error");Qs(t)},Y:"email",C:!0},ba={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new E("internal-error")},Y:"email",C:!0},_a={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new E("internal-error")},Y:"email",C:!0},wa={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new E("internal-error");Qs(t)},Y:"email",C:!0},Ea={hb:!0,endpoint:"getProjectConfig",Rb:"GET"},Ta={hb:!0,endpoint:"getRecaptchaParam",Rb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new E("internal-error")}},Ia={endpoint:"resetPassword",A:sa,Y:"email",C:!0},Sa={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Y:"sessionInfo",C:!0},Ca={endpoint:"setAccountInfo",M:["idToken"],A:Ys,U:!0},ka={endpoint:"setAccountInfo",M:["idToken"],A:function(t){if(Ys(t),!t.password)throw new E("weak-password")},G:Xs,U:!0},Na={endpoint:"signupNewUser",G:Xs,U:!0,C:!0},Aa={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new E("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new E("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new E("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new E("internal-error")},C:!0,La:!0},Oa={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new E("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new E("internal-error")},C:!0,La:!0},Pa={endpoint:"verifyAssertion",A:ta,Wa:ea,G:na,U:!0,C:!0},Ra={endpoint:"verifyAssertion",A:ta,Wa:ea,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new E("user-not-found");if(t.errorMessage)throw qa(t.errorMessage);Xs(t)},U:!0,C:!0},xa={endpoint:"verifyAssertion",A:function(t){if(ta(t),!t.idToken)throw new E("internal-error")},Wa:ea,G:na,U:!0},Da={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new E("invalid-custom-token")},G:Xs,U:!0,C:!0},La={endpoint:"verifyPassword",A:function(t){if(Qs(t),!t.password)throw new E("wrong-password")},G:Xs,U:!0,C:!0},Ma={endpoint:"verifyPhoneNumber",A:$s,G:Xs,C:!0},Fa={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new E("internal-error");$s(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Do(t);Xs(t)}},Ua={Eb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:$s,G:Xs,C:!0},ja={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Us]^!!t.refreshToken)throw new E("internal-error")},C:!0,La:!0};function Va(t,e,n){if(!function(t,e){if(!e||!e.length)return 1;if(t){for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return}return 1}}(n,e.M))return we(new E("internal-error"));var r,i=!!e.La,o=e.Rb||"POST";return _e(n).then(e.A).then((function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,s){var a=An(e+n);kn(a,"key",t.c),s&&kn(a,"cb",_().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&kn(a,c,i[c]);return new pe((function(e,n){zs(t,a.toString(),(function(t){t?t.error?n(Ba(t,o||{})):e(t):n(new E("network-request-failed"))}),r,u?void 0:Kn(Ir(i)),t.a,t.i.get())}))}(t,i?t.l:t.h,e.endpoint,o,n,e.Eb,e.hb||!1)})).then((function(t){return r=t,e.Wa?e.Wa(n,r):r})).then(e.G).then((function(){if(!e.Y)return r;if(!(e.Y in r))throw new E("internal-error");return r[e.Y]}))}function qa(t){return Ba({error:{errors:[{message:t}],code:400,message:t}})}function Ba(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new E(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",ft(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new E(r[i],e);return!e&&t&&(e=Tr(t)),new E("internal-error",e)}function Wa(t){var e;this.b=t,this.a=null,this.nb=(e=this,(Ka=Ka||new pe((function(t,e){function n(){Nr(),gr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Nr(),e(Error("Network Error"))},timeout:za.get()})}var r;gr("gapi.iframes.Iframe")?t():gr("gapi.load")?n():(r="__iframefcb"+Math.floor(1e6*Math.random()).toString(),s[r]=function(){gr("gapi.load")?n():e(Error("Network Error"))},_e(As(r=wt(Ha,{onload:r}))).o((function(){e(Error("Network Error"))})))})).o((function(t){throw Ka=null,t}))).then((function(){return new pe((function(t,n){gr("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:gr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),t()}e.a=r,e.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),Ga.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))})))}var Ha=new dt(gt,"https://apis.google.com/js/api.js?onload=%{onload}"),za=new Ar(3e4,6e4),Ga=new Ar(5e3,15e3),Ka=null;function Qa(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=On(this.i,"/__/auth/iframe"),kn(this.a,"apiKey",this.g),kn(this.a,"appName",this.h),this.b=null,this.c=[]}function Ya(t,e,n,r,i){this.s=t,this.m=e,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function Xa(t){try{return vu.app(t).auth().Ea()}catch(t){return[]}}function $a(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.m=this.s=this.w=null,this.g=[],this.l=this.a=null}function Ja(t){var e=Zn();return Va(t,Ea,{}).then((function(t){return t.authorizedDomains||[]})).then((function(t){t:{for(var n=(r=An(e)).f,r=r.b,i=0;i<t.length;i++){var o=t[i],s=r,a=n;if(s=0==o.indexOf("chrome-extension://")?An(o).b==s&&"chrome-extension"==a:("http"==a||"https"==a)&&(ir.test(o)?s==o:(o=o.split(".").join("\\."),new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)))){t=!0;break t}}t=!1}if(!t)throw new Ro(Zn())}))}function Za(t){return t.l||(t.l=sr().then((function(){var e,n,r,i;t.s||(e=t.c,n=t.h,r=Xa(t.b),(i=new Qa(t.u,t.f,t.b)).f=e,i.b=n,i.c=K(r||[]),t.s=i.toString()),t.i=new Wa(t.s),function(t){if(!t.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.nb.then((function(){t.a.register("authEvent",e,gr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.i,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=No(e.authEvent),n=0;n<t.g.length;n++)r=t.g[n](e)||r;return(n={}).status=r?"ACK":"ERROR",_e(n)}return n.status="ERROR",_e(n)}))}(t)}))),t.l}function tu(t){return t.m||(t.w=t.c?vr(t.c,Xa(t.b)):null,t.m=new Ms(t.f,N(t.h),t.w)),t.m}function eu(t,e,n,r,i,o,s,a,u,c,l){return(t=new Ya(t,e,n,r,i)).l=o,t.g=s,t.i=a,t.b=lt(u||null),t.f=c,t.ub(l).toString()}function nu(t){if(this.a=t||vu.INTERNAL.reactNative&&vu.INTERNAL.reactNative.AsyncStorage,!this.a)throw new E("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function ru(t){this.b=t,this.a={},this.f=m(this.c,this)}Qa.prototype.toString=function(){return this.f?kn(this.a,"v",this.f):Bn(this.a.a,"v"),this.b?kn(this.a,"eid",this.b):Bn(this.a.a,"eid"),this.c.length?kn(this.a,"fw",this.c.join(",")):Bn(this.a.a,"fw"),this.a.toString()},Ya.prototype.ub=function(t){return this.h=t,this},Ya.prototype.toString=function(){var t=On(this.s,"/__/auth/handler");if(kn(t,"apiKey",this.m),kn(t,"appName",this.c),kn(t,"authType",this.u),this.a.isOAuthProvider){var e=this.a;try{var n=vu.app(this.c).auth().ja()}catch(t){n=null}for(var r in e.kb=n,kn(t,"providerId",this.a.providerId),n=Ir((e=this.a).Fb))n[r]=n[r].toString();r=e.Oc,n=lt(n);for(var i=0;i<r.length;i++){var o=r[i];o in n&&delete n[o]}e.lb&&e.kb&&!n[e.lb]&&(n[e.lb]=e.kb),ct(n)||kn(t,"customParameters",Tr(n))}if("function"==typeof this.a.Nb&&(e=this.a.Nb()).length&&kn(t,"scopes",e.join(",")),this.l?kn(t,"redirectUrl",this.l):Bn(t.a,"redirectUrl"),this.g?kn(t,"eventId",this.g):Bn(t.a,"eventId"),this.i?kn(t,"v",this.i):Bn(t.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Nn(t,s)&&kn(t,s,this.b[s]);return this.h?kn(t,"tid",this.h):Bn(t.a,"tid"),this.f?kn(t,"eid",this.f):Bn(t.a,"eid"),(s=Xa(this.c)).length&&kn(t,"fw",s.join(",")),t.toString()},(t=$a.prototype).Lb=function(t,e,n){var r=new E("popup-closed-by-user"),i=new E("web-storage-unsupported"),o=this,s=!1;return this.ka().then((function(){var n,r;r={type:"webStorageSupport"},Za(n=o).then((function(){return t=n.i,e=r,t.nb.then((function(){return new pe((function(n){t.a.send(e.type,e,n,gr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}));var t,e})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})).then((function(n){n||(t&&nr(t),e(i),s=!0)}))})).o((function(){})).then((function(){if(!s)return e=t,new pe((function(t){return function n(){yn(2e3).then((function(){return e&&!e.closed?n():void t()}))}()}));var e})).then((function(){if(!s)return yn(n).then((function(){e(r)}))}))},t.Ub=function(){var t=yr();return!Er(t)&&!kr(t)},t.Qb=function(){return!1},t.Jb=function(t,e,n,r,i,o,s,a){if(!t)return we(new E("popup-blocked"));if(s&&!Er())return this.ka().o((function(e){nr(t),i(e)})),r(),_e();this.a||(this.a=Ja(tu(this)));var u=this;return this.a.then((function(){var e=u.ka().o((function(e){throw nr(t),i(e),e}));return r(),e})).then((function(){Co(n),s||tr(eu(u.u,u.f,u.b,e,n,null,o,u.c,void 0,u.h,a),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Kb=function(t,e,n,r){this.a||(this.a=Ja(tu(this)));var i=this;return this.a.then((function(){Co(e),tr(eu(i.u,i.f,i.b,t,e,Zn(),n,i.c,void 0,i.h,r))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ka=function(){var t=this;return Za(this).then((function(){return t.i.nb})).o((function(){throw t.a=null,new E("network-request-failed")}))},t.Xb=function(){return!0},t.Ca=function(t){this.g.push(t)},t.Qa=function(t){z(this.g,(function(e){return e==t}))},(t=nu.prototype).get=function(t){return _e(this.a.getItem(t)).then((function(t){return t&&Sr(t)}))},t.set=function(t,e){return _e(this.a.setItem(t,Tr(e)))},t.T=function(t){return _e(this.a.removeItem(t))},t.ba=function(){},t.ha=function(){};var iu,ou=[];function su(t,e,n){ct(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function au(t){this.a=t}function uu(t){this.c=t,this.b=!1,this.a=[]}function cu(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return we(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new pe((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),l),c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}},t.a.push(c),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(e){return lu(t,c),e})).o((function(e){throw lu(t,c),e}))}function lu(t,e){var n,r;e&&(n=e.messageChannel,r=e.onMessage,n&&(n.port1.removeEventListener("message",r),n.port1.close()),z(t.a,(function(t){return t==e})))}function hu(){if(!pu())throw new E("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=s.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.s=!1,this.h=null;var t,e,n,r=this;cr()&&self?(this.l=(n=cr()?self:null,j(ou,(function(t){t.b==n&&(e=t)})),e||(e=new ru(n),ou.push(e)),e),su(this.l,"keyChanged",(function(t,e){return bu(r).then((function(t){return 0<t.length&&j(r.a,(function(e){e(t)})),{keyProcessed:W(t,e.key)}}))})),su(this.l,"ping",(function(){return _e(["keyChanged"])}))):((t=s.navigator)&&t.serviceWorker?_e().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):_e(null)).then((function(t){(r.h=t)&&(r.g=new uu(new au(t)),cu(r.g,"ping",null,!0).then((function(t){t[0].fulfilled&&W(t[0].value,"keyChanged")&&(r.s=!0)})).o((function(){})))}))}function fu(t){return t.m||(t.m=function t(e){return new pe((function(n,r){var i=e.u.open("firebaseLocalStorageDb",1);i.onerror=function(t){try{t.preventDefault()}catch(t){}r(Error(t.target.error))},i.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){r(t)}},i.onsuccess=function(i){var o;(i=i.target.result).objectStoreNames.contains("firebaseLocalStorage")?n(i):(o=e,new pe((function(t,e){var n=o.u.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){t()},n.onerror=function(t){e(Error(t.target.error))}})).then((function(){return t(e)})).then((function(t){n(t)})).o((function(t){r(t)})))}}))}(t)),t.m}function pu(){try{return s.indexedDB}catch(t){return}}function du(t){return t.objectStore("firebaseLocalStorage")}function yu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function gu(t){return new pe((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function mu(t,e){return t.g&&t.h&&((n=s.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===t.h?cu(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):_e();var n}function bu(t){return fu(t).then((function(t){var e=du(yu(t,!1));return e.getAll?gu(e.getAll()):new pe((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)r in n&&typeof e[r]==typeof n[r]?"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(t.c,n),t.c=n}return r}))}function _u(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function wu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=_e().then((function(){if(pu()){var t=Cr(),r="__sak"+t;return iu=iu||new hu,(n=iu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.T(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ba((function(t){j(e.a,(function(e){e(t)}))})),t}))}function Eu(){this.a={},this.type="inMemory"}function Tu(){if(!function(){var t="Node"==lr();if(!(t=Iu()||t&&vu.INTERNAL.node&&vu.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==lr())throw new E("internal-error","The LocalStorage compatibility library was not found.");throw new E("web-storage-unsupported")}this.a=Iu()||vu.INTERNAL.node.localStorage,this.type="localStorage"}function Iu(){try{var t=s.localStorage,e=Cr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Su(){this.type="nullStorage"}function Cu(){if(!function(){var t="Node"==lr();if(!(t=ku()||t&&vu.INTERNAL.node&&vu.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==lr())throw new E("internal-error","The SessionStorage compatibility library was not found.");throw new E("web-storage-unsupported")}this.a=ku()||vu.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function ku(){try{var t=s.sessionStorage,e=Cr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Nu(){var t={};t.Browser=Pu,t.Node=Ru,t.ReactNative=xu,t.Worker=Du,this.a=t[lr()]}ru.prototype.c=function(t){var e,n=t.data.eventType,r=t.data.eventId,i=this.a[n];i&&0<i.length&&(t.ports[0].postMessage({status:"ack",eventId:r,eventType:n,response:null}),e=[],j(i,(function(n){e.push(_e().then((function(){return n(t.origin,t.data.data)})))})),Te(e).then((function(e){var i=[];j(e,(function(t){i.push({fulfilled:t.Mb,value:t.value,reason:t.reason?t.reason.message:void 0})})),j(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:r,eventType:n,response:i})})))},au.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},uu.prototype.close=function(){for(;0<this.a.length;)lu(this,this.a[0]);this.b=!0},(t=hu.prototype).set=function(t,e){var n,r=!1,i=this;return fu(this).then((function(e){return gu((e=du(yu(n=e,!0))).get(t))})).then((function(o){var s=du(yu(n,!0));return o?(o.value=e,gu(s.put(o))):(i.b++,r=!0,(o={}).fbase_key=t,o.value=e,gu(s.add(o)))})).then((function(){return i.c[t]=e,mu(i,t)})).ma((function(){r&&i.b--}))},t.get=function(t){return fu(this).then((function(e){return gu(du(yu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.T=function(t){var e=!1,n=this;return fu(this).then((function(r){return e=!0,n.b++,gu(du(yu(r,!0)).delete(t))})).then((function(){return delete n.c[t],mu(n,t)})).ma((function(){e&&n.b--}))},t.ba=function(t){var e;0==this.a.length&&(_u(e=this),function t(){e.f=setTimeout((function(){e.i=bu(e).then((function(t){0<t.length&&j(e.a,(function(e){e(t)}))})).then((function(){t()})).o((function(e){"STOP_EVENT"!=e.message&&t()}))}),800)}()),this.a.push(t)},t.ha=function(t){z(this.a,(function(e){return e==t})),0==this.a.length&&_u(this)},(t=wu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.T=function(t){return this.b.then((function(e){return e.T(t)}))},t.ba=function(t){this.a.push(t)},t.ha=function(t){z(this.a,(function(e){return e==t}))},(t=Eu.prototype).get=function(t){return _e(this.a[t])},t.set=function(t,e){return this.a[t]=e,_e()},t.T=function(t){return delete this.a[t],_e()},t.ba=function(){},t.ha=function(){},(t=Tu.prototype).get=function(t){var e=this;return _e().then((function(){return Sr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return _e().then((function(){var r=Tr(e);null===r?n.T(t):n.a.setItem(t,r)}))},t.T=function(t){var e=this;return _e().then((function(){e.a.removeItem(t)}))},t.ba=function(t){s.window&&Je(s.window,"storage",t)},t.ha=function(t){s.window&&en(s.window,"storage",t)},(t=Su.prototype).get=function(){return _e(null)},t.set=function(){return _e()},t.T=function(){return _e()},t.ba=function(){},t.ha=function(){},(t=Cu.prototype).get=function(t){var e=this;return _e().then((function(){return Sr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return _e().then((function(){var r=Tr(e);null===r?n.T(t):n.a.setItem(t,r)}))},t.T=function(t){var e=this;return _e().then((function(){e.a.removeItem(t)}))},t.ba=function(){},t.ha=function(){};var Au,Ou,Pu={F:Tu,$a:Cu},Ru={F:Tu,$a:Cu},xu={F:nu,$a:Su},Du={F:Tu,$a:Su},Lu={od:"local",NONE:"none",qd:"session"};function Mu(){var t=!(kr(yr())||!ur()),e=Er(),n=mr();this.m=t,this.h=e,this.l=n,this.a={},t=Au=Au||new Nu;try{this.g=!Jn()&&Rr()||!s.indexedDB?new t.a.F:new wu(cr()?new Eu:new t.a.F)}catch(t){this.g=new Eu,this.h=!0}try{this.i=new t.a.$a}catch(t){this.i=new Eu}this.u=new Eu,this.f=m(this.Vb,this),this.b={}}function Fu(){return Ou=Ou||new Mu}function Uu(t,e){switch(e){case"session":return t.i;case"none":return t.u;default:return t.g}}function ju(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Vu(t,e,n){return n=ju(e,n),"local"==e.F&&(t.b[n]=null),Uu(t,e.F).T(n)}function qu(t){t.c&&(clearInterval(t.c),t.c=null)}function Bu(t){this.a=t,this.b=Fu()}(t=Mu.prototype).get=function(t,e){return Uu(this,t.F).get(ju(t,e))},t.set=function(t,e,n){var r=ju(t,n),i=this,o=Uu(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){var r;t=ju(t,e),this.l&&(this.b[t]=s.localStorage.getItem(t)),ct(this.a)&&(Uu(this,"local").ba(this.f),this.h||(Jn()||!Rr())&&s.indexedDB||!this.l||(qu(r=this),r.c=setInterval((function(){for(var t in r.a){var e=s.localStorage.getItem(t),n=r.b[t];e!=n&&(r.b[t]=e,e=new qe({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),r.Vb(e))}}),1e3))),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=ju(t,e),this.a[t]&&(z(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),ct(this.a)&&(Uu(this,"local").ha(this.f),qu(this))},t.Vb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.ib(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Uu(this,"local").ha(this.f):qu(this),this.m)if(n=s.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?s.localStorage.setItem(e,r):s.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===s.localStorage.getItem(e)||(o.b[e]=s.localStorage.getItem(e),o.ib(e))},Wt&&Jt&&10==Jt&&s.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else j(t,m(this.ib,this))},t.ib=function(t){this.a[t]&&j(this.a[t],(function(t){t()}))};var Wu,Hu={name:"authEvent",F:"local"};function zu(){this.a=Fu()}function Gu(t,e){this.b=Ku,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===Wu&&(Wu=s.Int32Array?new Int32Array(tc):tc),this.reset()}w(Gu,(function(){this.b=-1}));for(var Ku=64,Qu=Ku-1,Yu=[],Xu=0;Xu<Qu;Xu++)Yu[Xu]=0;var $u=G(128,Yu);function Ju(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;e<64;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&l^~c&h)+(0|Wu[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function Zu(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(Ju(t),i=0);else{if(!h(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(Ju(t),i=0)}}t.c=i,t.g+=n}Gu.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):K(this.h)};var tc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function ec(){Gu.call(this,8,nc)}w(ec,Gu);var nc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function rc(t,e,n,r,i){this.u=t,this.i=e,this.l=n,this.m=r||null,this.s=i||null,this.h=e+":"+n,this.w=new zu,this.g=new Bu(this.h),this.f=null,this.b=[],this.a=this.c=null}function ic(t){return new E("invalid-cordova-configuration",t)}function oc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function sc(t){return t.f||(t.f=t.ka().then((function(){return new pe((function(e){function n(t){o=!0,a&&a.cancel(),ac(r).then((function(e){var n,o=i;e&&t&&t.url&&(n=null,-1!=(o=zi(t.url)).indexOf("/__/auth/callback")&&(n=(n="object"==typeof(n=Sr(Nn(n=An(o),"firebaseError")||null))?T(n):null)?new ko(e.c,e.b,null,null,n,null,e.S()):new ko(e.c,e.b,o,e.f,null,null,e.S())),o=n||i),oc(r,o)}))}var r,i,o,a,u;t.Ca((function n(r){return e(r),t.Qa(n),!1})),r=t,i=new ko("unknown",null,null,null,new E("no-auth-event")),o=!1,a=yn(500).then((function(){return ac(r).then((function(){o||oc(r,i)}))})),u=s.handleOpenURL,s.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(gr("BuildInfo.packageName",s).toLowerCase()+"://")&&n({url:t}),"function"==typeof u)try{u(t)}catch(t){console.error(t)}},Po=Po||new Ao,function(t){var e=Po;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=gr("universalLinks.subscribe",s))&&t(null,e.b))}(n)}))}))),t.f}function ac(t){var e,n=null;return(e=t.g).b.get(Hu,e.a).then(No).then((function(e){return n=e,Vu((e=t.g).b,Hu,e.a)})).then((function(){return n}))}function uc(t){this.a=t,this.b=Fu()}(t=rc.prototype).ka=function(){return this.Ga?this.Ga:this.Ga=(ar(void 0)?sr().then((function(){return new pe((function(t,e){var n=s.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):we(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof gr("universalLinks.subscribe",s))throw ic("cordova-universal-links-plugin-fix is not installed");if(void 0===gr("BuildInfo.packageName",s))throw ic("cordova-plugin-buildinfo is not installed");if("function"!=typeof gr("cordova.plugins.browsertab.openUrl",s))throw ic("cordova-plugin-browsertab is not installed");if("function"!=typeof gr("cordova.InAppBrowser.open",s))throw ic("cordova-plugin-inappbrowser is not installed")}),(function(){throw new E("cordova-not-ready")}))},t.Lb=function(t,e){return e(new E("operation-not-supported-in-this-environment")),_e()},t.Jb=function(){return we(new E("operation-not-supported-in-this-environment"))},t.Xb=function(){return!1},t.Ub=function(){return!0},t.Qb=function(){return!0},t.Kb=function(t,e,n,r){if(this.c)return we(new E("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,l=null;return this.c=_e().then((function(){return Co(e),sc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new ko(e,r,null,o,new E("no-auth-event"),null,i),u=gr("BuildInfo.packageName",s);if("string"!=typeof u)throw new E("invalid-cordova-configuration");var c=gr("BuildInfo.displayName",s),l={};if(yr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!yr().toLowerCase().match(/android/))return we(new E("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=function(t){var e=new ec;Zu(e,t),t=[];var n=8*e.g;e.c<56?Zu(e,$u,56-e.c):Zu(e,$u,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(Ju(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return q(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(o),l.sessionId=o;var h=eu(t.u,t.i,t.l,e,n,null,r,t.m,l,t.s,i);return t.ka().then((function(){var e=t.h;return t.w.a.set(Hu,a.v(),e)})).then((function(){var e=gr("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof e)throw new E("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=gr("cordova.plugins.browsertab.openUrl",s)))throw new E("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=gr("cordova.InAppBrowser.open",s)))throw new E("invalid-cordova-configuration");e=yr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new pe((function(t,e){u=function(){var e=gr("cordova.plugins.browsertab.close",s);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ca(u),c=function(){a=a||yn(2e3).then((function(){e(new E("redirect-cancelled-by-user"))}))},l=function(){Or()&&c()},o.addEventListener("resume",c,!1),yr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).o((function(t){return ac(i).then((function(){throw t}))}))})).ma((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),u&&i.Qa(u),i.c=null}))},t.Ca=function(t){this.b.push(t),sc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new ko("unknown",null,null,null,new E("no-auth-event")),t(e))}))},t.Qa=function(t){z(this.b,(function(e){return e==t}))};var cc={name:"pendingRedirect",F:"session"};function lc(t){return Vu(t.b,cc,t.a)}function hc(t,e,n){this.i={},this.w=0,this.D=t,this.u=e,this.m=n,this.h=[],this.f=!1,this.l=m(this.s,this),this.b=new Sc,this.B=new Oc,this.g=new uc(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.B,this.c.linkViaPopup=this.B,this.c.reauthViaPopup=this.B,this.a=fc(this.D,this.u,this.m,I)}function fc(t,e,n,r){var i=vu.SDK_VERSION||null;return new(ar()?rc:$a)(t,e,n,i,r)}function pc(t){t.f||(t.f=!0,t.a.Ca(t.l));var e=t.a;return t.a.ka().o((function(n){throw t.a==e&&t.reset(),n}))}function dc(t){t.a.Ub()&&pc(t).o((function(e){var n=new ko("unknown",null,null,null,new E("operation-not-supported-in-this-environment"));_c(e)&&t.s(n)})),t.a.Qb()||Cc(t.b)}function vc(t,e){var n;W(t.h,e)||t.h.push(e),t.f||(n=t.g).b.get(cc,n.a).then((function(t){return"pending"==t})).then((function(e){e?lc(t.g).then((function(){pc(t).o((function(e){var n=new ko("unknown",null,null,null,new E("operation-not-supported-in-this-environment"));_c(e)&&t.s(n)}))})):dc(t)})).o((function(){dc(t)}))}function yc(t,e){z(t.h,(function(t){return t==e}))}hc.prototype.reset=function(){this.f=!1,this.a.Qa(this.l),this.a=fc(this.D,this.u,this.m),this.i={}},hc.prototype.s=function(t){if(!t)throw new E("invalid-auth-event");if(6e5<=_()-this.w&&(this.i={},this.w=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Cb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.w=_())),e=!0;break}}return Cc(this.b),e};var gc=new Ar(2e3,1e4),mc=new Ar(3e4,6e4);function bc(t,e,n,r,i,o,s){return t.a.Jb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ca(t.l))}),(function(){t.reset()}),i,o,s)}function _c(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function wc(t,e,n,r,i){var o,s;return(s=t.g).b.set(cc,"pending",s.a).then((function(){return t.a.Kb(e,n,r,i).o((function(e){if(_c(e))throw new E("operation-not-supported-in-this-environment");return o=e,lc(t.g).then((function(){throw o}))})).then((function(){return t.a.Xb()?new pe((function(){})):lc(t.g).then((function(){return t.pa()})).then((function(){})).o((function(){}))}))}))}function Ec(t,e,n,r,i){return t.a.Lb(r,(function(t){e.la(n,null,t,i)}),gc.get())}hc.prototype.pa=function(){return this.b.pa()};var Tc={};function Ic(t,e,n){var r=e+":"+n;return Tc[r]||(Tc[r]=new hc(t,e,n)),Tc[r]}function Sc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Cc(t){t.g||(t.g=!0,Ac(t,!1,null,null))}function kc(t){t.g&&!t.i&&Ac(t,!1,null,null)}function Nc(t,e){if(t.b=function(){return _e(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Ac(t,e,n,r){e?r?function(t,e){if(t.b=function(){return we(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Nc(t,n):Nc(t,{user:null}),t.f=[],t.c=[]}function Oc(){}function Pc(){this.Bb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.Bb},set:function(t){this.Bb=t},enumerable:!1})}function Rc(t,e){this.a=e,Fr(this,"verificationId",t)}function xc(t,e,n,r){return new To(t).cb(e,n).then((function(t){return new Rc(t,r)}))}function Dc(t){var e=Pi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new E("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Ur(this,{token:t,expirationTime:Pr(1e3*e.exp),authTime:Pr(1e3*e.auth_time),issuedAtTime:Pr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Lc(t,e,n){var r=e&&e[Fc];if(!r)throw new E("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=lt(e),this.g=n,this.c=new Gi(null,r),this.b=[];var i=this;j(e[Mc]||[],(function(t){(t=Br(t))&&i.b.push(t)})),Fr(this,"auth",this.a),Fr(this,"session",this.c),Fr(this,"hints",this.b)}Sc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Sc.prototype.h=function(t,e){var n,r,i,o;t?(this.reset(),this.g=!0,n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code,this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Ac(this,!0,null,t.a),_e()):e.Da(n,r)?function(t,e,n){n=n.Da(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.S(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){Ac(t,a,e,null)})).o((function(e){Ac(t,a,null,e)}))}(this,t,e):we(new E("invalid-auth-event")):(Ac(this,!1,null,null),_e())):we(new E("invalid-auth-event"))},Sc.prototype.pa=function(){var t=this;return new pe((function(e,n){var r,i;t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),r=t,i=new E("timeout"),r.a&&r.a.cancel(),r.a=yn(mc.get()).then((function(){r.b||(r.g=!0,Ac(r,!0,null,i))})))}))},Oc.prototype.h=function(t,e){var n,r,i,o,s,a;t?(n=t.c,r=t.b,t.a?(e.la(t.c,null,t.a,t.b),_e()):e.Da(n,r)?(o=e,s=(i=t).b,a=i.c,o.Da(a,s)(i.g,i.f,i.S(),i.i).then((function(t){o.la(a,t,null,s)})).o((function(t){o.la(a,null,t,s)}))):we(new E("invalid-auth-event"))):we(new E("invalid-auth-event"))},Rc.prototype.confirm=function(t){return t=Io(this.verificationId,t),this.a(t)};var Mc="mfaInfo",Fc="mfaPendingCredential";function Uc(t,e,n,r){E.call(this,"multi-factor-auth-required",r,e),this.b=new Lc(t,e,n),Fr(this,"resolver",this.b)}function jc(t,e,n){if(t&&p(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Uc(e,t.serverResponse,n,t.message)}catch(t){}return null}function Vc(){}function qc(t){Fr(this,"factorId",t.ea),this.a=t}function Bc(t){if(qc.call(this,t),this.a.ea!=To.PROVIDER_ID)throw new E("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function Wc(t,e){for(var n in Ve.call(this,t),e)this[n]=e[n]}function Hc(t,e){this.a=t,this.b=[],this.c=m(this.wc,this),Je(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&j(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[zr]=t.uid),t.displayName&&(r[Wr]=t.displayName),t.enrollmentTime&&(r[Hr]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[Gr]=t.phoneNumber);try{e=new Kr(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),zc(this,n)}function zc(t,e){t.b=e,Fr(t,"enrolledFactors",e)}function Gc(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Kc(t){this.c=t,this.b=this.a=null}function Qc(t){return t.b&&1e3*t.b.c||0}function Yc(t,e){var n=e.refreshToken;t.b=Oi(e[Us]||""),t.a=n}function Xc(t,e){this.a=t||null,this.b=e||null,Ur(this,{lastSignInTime:Pr(e||null),creationTime:Pr(t||null)})}function $c(t,e,n,r,i,o){Ur(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function Jc(t,e,n){var r;this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null,t=vu.SDK_VERSION?vr(vu.SDK_VERSION):null,this.a=new Ms(this.l,N(I),t),this.b=new Kc(this.a),ol(this,e[Us]),Yc(this.b,e),Fr(this,"refreshToken",this.b.a),ul(this,n||{}),hn.call(this),this.P=!1,this.s&&br()&&(this.i=Ic(this.s,this.l,this.m)),this.R=[],this.h=null,this.B=(r=this,new Gc((function(){return r.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var t=Qc(r.b)-_()-3e5;return 0<t?t:0}))),this.Z=m(this.Ma,this);var i=this;this.oa=null,this.za=function(t){i.va(t.g)},this.aa=null,this.W=[],this.ya=function(t){tl(i,t.c)},this.$=null,this.O=new Hc(this,n),Fr(this,"multiFactor",this.O)}function Zc(t,e){t.aa&&en(t.aa,"languageCodeChanged",t.za),(t.aa=e)&&Je(e,"languageCodeChanged",t.za)}function tl(t,e){t.W=e,Hs(t.a,vu.SDK_VERSION?vr(vu.SDK_VERSION,t.W):null)}function el(t,e){t.$&&en(t.$,"frameworkChanged",t.ya),(t.$=e)&&Je(e,"frameworkChanged",t.ya)}function nl(e){try{return vu.app(e.m).auth()}catch(t){throw new E("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function rl(t){t.D||t.B.b||(t.B.start(),en(t,"tokenChanged",t.Z),Je(t,"tokenChanged",t.Z))}function il(t){en(t,"tokenChanged",t.Z),t.B.stop()}function ol(t,e){t.xa=e,Fr(t,"_lat",e)}function sl(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return Te(e).then((function(){return t}))}function al(t){t.i&&!t.P&&(t.P=!0,vc(t.i,t))}function ul(t,e){Ur(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new Xc(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function cl(){}function ll(t){return _e().then((function(){if(t.D)throw new E("app-deleted")}))}function hl(t){return q(t.providerData,(function(t){return t.providerId}))}function fl(t,e){e&&(pl(t,e.providerId),t.providerData.push(e))}function pl(t,e){z(t.providerData,(function(t){return t.providerId==e}))}function dl(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Fr(t,e,n)}function vl(t,e){var n,r,i;t!=e&&(Ur(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Fr(t,"metadata",new Xc((i=e.metadata).a,i.b)):Fr(t,"metadata",new Xc),j(e.providerData,(function(e){fl(t,e)})),n=t.b,r=e.b,n.b=r.b,n.a=r.a,Fr(t,"refreshToken",t.b.a),zc(t.O,e.O.b))}function yl(t){return t.I().then((function(e){var n,r,i=t.isAnonymous;return r=e,Va((n=t).a,ga,{idToken:r}).then(m(n.Ic,n)).then((function(){return i||dl(t,"isAnonymous",!1),e}))}))}function gl(t,e){e[Us]&&t.xa!=e[Us]&&(Yc(t.b,e),t.dispatchEvent(new Wc("tokenChanged")),ol(t,e[Us]),dl(t,"refreshToken",t.b.a))}function ml(t,e){return yl(t).then((function(){if(W(hl(t),e))return sl(t).then((function(){throw new E("provider-already-linked")}))}))}function bl(t,e,n){return jr({user:t,credential:So(e),additionalUserInfo:e=Mi(e),operationType:n})}function _l(t,e){return gl(t,e),t.reload().then((function(){return t}))}function wl(t,e,n,r,i){if(!br())return we(new E("operation-not-supported-in-this-environment"));if(t.h&&!i)return we(t.h);var o=Li(n.providerId),s=Cr(t.uid+":::"),a=null;(!Er()||ur())&&t.s&&n.isOAuthProvider&&(a=eu(t.s,t.l,t.m,e,n,null,s,vu.SDK_VERSION||null,null,null,t.tenantId));var u=rr(a,o&&o.ta,o&&o.sa);return r=r().then((function(){if(Tl(t),!i)return t.I().then((function(){}))})).then((function(){return bc(t.i,u,e,n,s,!!a,t.tenantId)})).then((function(){return new pe((function(n,r){t.la(e,null,new E("cancelled-popup-request"),t.g||null),t.f=n,t.w=r,t.g=s,t.c=Ec(t.i,t,e,u,s)}))})).then((function(t){return u&&nr(u),t?jr(t):null})).o((function(t){throw u&&nr(u),t})),Il(t,r,i)}function El(t,e,n,r,i){if(!br())return we(new E("operation-not-supported-in-this-environment"));if(t.h&&!i)return we(t.h);var o=null,s=Cr(t.uid+":::");return r=r().then((function(){if(Tl(t),!i)return t.I().then((function(){}))})).then((function(){return t.fa=s,sl(t)})).then((function(e){return t.ga&&(e=(e=t.ga).b.set(kl,t.v(),e.a)),e})).then((function(){return wc(t.i,e,n,s,t.tenantId)})).o((function(e){if(o=e,t.ga)return Nl(t.ga);throw o})).then((function(){if(o)throw o})),Il(t,r,i)}function Tl(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new E("internal-error");throw new E("auth-domain-config-required")}}function Il(t,e,n){var r,i,o,s=(i=e,o=n,(r=t).h&&!o?(i.cancel(),we(r.h)):i.o((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(r.h||r.dispatchEvent(new Wc("userInvalidated")),r.h=t),t})));return t.N.push(s),s.ma((function(){H(t.N,s)})),s.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=jc(e.v(),nl(t),m(t.hc,t))),n||e}))}function Sl(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Us]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=new Jc(e,n,t);return t.providerData&&j(t.providerData,(function(t){t&&fl(r,jr(t))})),t.redirectEventId&&(r.fa=t.redirectEventId),r}function Cl(t){this.a=t,this.b=Fu()}Lc.prototype.Pc=function(t){var e=this;return t.ob(this.a.b,this.c).then((function(t){var n=lt(e.f);return delete n[Mc],delete n[Fc],ft(n,t),e.g(n)}))},w(Uc,E),Vc.prototype.ob=function(t,e,n){return e.type==Ki?(o=this,s=t,a=n,e.Fa().then((function(t){return t={idToken:t},void 0!==a&&(t.displayName=a),ft(t,{phoneVerificationInfo:Eo(o.a)}),Va(s,va,t)}))):(r=this,i=t,e.Fa().then((function(t){return ft(t={mfaPendingCredential:t},{phoneVerificationInfo:Eo(r.a)}),Va(i,ya,t)})));var r,i,o,s,a},w(qc,Vc),w(Bc,qc),w(Wc,Ve),(t=Hc.prototype).wc=function(t){var e,n;zc(this,(e=t.ed,n=[],j(e.mfaInfo||[],(function(t){(t=Br(t))&&n.push(t)})),n))},t.Ob=function(){return this.a.I().then((function(t){return new Gi(t,null)}))},t.dc=function(t,e){var n=this,r=this.a.a;return this.Ob().then((function(n){return t.ob(r,n,e)})).then((function(t){return gl(n.a,t),n.a.reload()}))},t.$c=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return Va(r,ja,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=V(e.b,(function(t){return t.uid!=n}));return zc(e,r),gl(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.v=function(){return{multiFactor:{enrolledFactors:q(this.b,(function(t){return t.v()}))}}},Gc.prototype.start=function(){this.a=this.c,function t(e,n){e.stop(),e.b=yn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then((function(){return t=s.document,e=null,Or()||!t?_e():new pe((function(n){e=function(){Or()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}));var t,e})).then((function(){return e.h()})).then((function(){t(e,!0)})).o((function(n){e.i(n)&&t(e,!1)}))}(this,!0)},Gc.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Kc.prototype.v=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:Qc(this)}},Kc.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?we(new E("user-token-expired")):t||!this.b||_()>Qc(this)-3e4?this.a?function(t,e){return n=t.c,r=e,new pe((function(t,e){"refresh_token"==r.grant_type&&r.refresh_token||"authorization_code"==r.grant_type&&r.code?zs(n,n.u+"?key="+encodeURIComponent(n.c),(function(n){n?n.error?e(Ba(n)):n.access_token&&n.refresh_token?t(n):e(new E("internal-error")):e(new E("network-request-failed"))}),"POST",qn(r).toString(),n.g,n.m.get()):e(new E("internal-error"))})).then((function(e){return t.b=Oi(e.access_token),t.a=e.refresh_token,{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}));var n,r}(this,{grant_type:"refresh_token",refresh_token:this.a}):_e(null):_e({accessToken:this.b.toString(),refreshToken:this.a})},Xc.prototype.v=function(){return{lastLoginAt:this.b,createdAt:this.a}},w(Jc,hn),Jc.prototype.va=function(t){this.oa=t,Ws(this.a,t)},Jc.prototype.ja=function(){return this.oa},Jc.prototype.Ea=function(){return K(this.W)},Jc.prototype.Ma=function(){this.B.b&&(this.B.stop(),this.B.start())},Fr(Jc.prototype,"providerId","firebase"),(t=Jc.prototype).reload=function(){var t=this;return Il(this,ll(this).then((function(){return yl(t).then((function(){return sl(t)})).then(cl)})))},t.mc=function(t){return this.I(t).then((function(t){return new Dc(t)}))},t.I=function(t){var e=this;return Il(this,ll(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new E("internal-error");return t.accessToken!=e.xa&&(ol(e,t.accessToken),e.dispatchEvent(new Wc("tokenChanged"))),dl(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Ic=function(t){if(!(t=t.users)||!t.length)throw new E("internal-error");ul(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e,n=(e=(e=t).providerUserInfo)&&e.length?q(e,(function(t){return new $c(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[],r=0;r<n.length;r++)fl(this,n[r]);dl(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new Wc("userReloaded",{ed:t}))},t.Jc=function(t){return Lr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.pb(t)},t.pb=function(t){var e=this,n=null;return Il(this,t.c(this.a,this.uid).then((function(t){return gl(e,t),n=bl(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},t.Ac=function(t){return Lr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.mb(t)},t.mb=function(t){var e=this,n=null;return Il(this,ml(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=bl(e,t,"link"),_l(e,t)})).then((function(){return n})))},t.Bc=function(t,e){var n=this;return Il(this,ml(this,"phone").then((function(){return xc(nl(n),t,e,m(n.mb,n))})))},t.Kc=function(t,e){var n=this;return Il(this,_e().then((function(){return xc(nl(n),t,e,m(n.pb,n))})),!0)},t.xb=function(t){var e=this;return Il(this,this.I().then((function(n){return e.a.xb(n,t)})).then((function(t){return gl(e,t),e.reload()})))},t.cd=function(t){var e=this;return Il(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return gl(e,t),e.reload()})))},t.yb=function(t){var e=this;return Il(this,this.I().then((function(n){return e.a.yb(n,t)})).then((function(t){return gl(e,t),e.reload()})))},t.zb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return ll(this);var e=this;return Il(this,this.I().then((function(n){return e.a.zb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return gl(e,t),dl(e,"displayName",t.displayName||null),dl(e,"photoURL",t.photoUrl||null),j(e.providerData,(function(t){"password"===t.providerId&&(Fr(t,"displayName",e.displayName),Fr(t,"photoURL",e.photoURL))})),sl(e)})).then(cl))},t.ad=function(t){var e=this;return Il(this,yl(this).then((function(n){return W(hl(e),t)?Va(e.a,fa,{idToken:n,deleteProvider:[t]}).then((function(t){var n={};return j(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),j(hl(e),(function(t){n[t]||pl(e,t)})),n[To.PROVIDER_ID]||Fr(e,"phoneNumber",null),sl(e)})):sl(e).then((function(){throw new E("no-such-provider")}))})))},t.delete=function(){var t=this;return Il(this,this.I().then((function(e){return Va(t.a,ha,{idToken:e})})).then((function(){t.dispatchEvent(new Wc("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");Zc(t,null),el(t,null),t.N=[],t.D=!0,il(t),Fr(t,"refreshToken",null),t.i&&yc(t.i,t)}))},t.Cb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.fa||null)==e||"reauthViaRedirect"==t&&(this.fa||null)==e)},t.la=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?m(this.Hb,this):"reauthViaPopup"==t&&e==(this.g||null)?m(this.Ib,this):"linkViaRedirect"==t&&(this.fa||null)==e?m(this.Hb,this):"reauthViaRedirect"==t&&(this.fa||null)==e?m(this.Ib,this):null},t.Cc=function(t){var e=this;return wl(this,"linkViaPopup",t,(function(){return ml(e,t.providerId).then((function(){return sl(e)}))}),!1)},t.Lc=function(t){return wl(this,"reauthViaPopup",t,(function(){return _e()}),!0)},t.Dc=function(t){var e=this;return El(this,"linkViaRedirect",t,(function(){return ml(e,t.providerId)}),!1)},t.Mc=function(t){return El(this,"reauthViaRedirect",t,(function(){return _e()}),!0)},t.Hb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Il(this,this.I().then((function(n){return ia(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=bl(i,t,"link"),_l(i,t)})).then((function(){return o})))},t.Ib=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Il(this,_e().then((function(){return Xi(oa(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=bl(i,t,"reauthenticate"),gl(i,t),i.h=null,i.reload()})).then((function(){return o})),!0)},t.qb=function(t){var e=this,n=null;return Il(this,this.I().then((function(e){return n=e,void 0===t||ct(t)?{}:ki(new gi(t))})).then((function(t){return e.a.qb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Ab=function(t,e){var n=this,r=null;return Il(this,this.I().then((function(t){return r=t,void 0===e||ct(e)?{}:ki(new gi(e))})).then((function(e){return n.a.Ab(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.hc=function(t){var e=null,n=this;return Il(this,t=Xi(_e(t),n.uid).then((function(t){return e=bl(n,t,"reauthenticate"),gl(n,t),n.h=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.v()},t.v=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.v(),redirectEventId:this.fa||null};return this.metadata&&ft(t,this.metadata.v()),j(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),ft(t,this.O.v()),t};var kl={name:"redirectUser",F:"session"};function Nl(t){return Vu(t.b,kl,t.a)}function Al(t){var e,n,r,i;this.a=t,this.b=Fu(),this.c=null,this.f=(n=Rl("local"),r=Rl("session"),i=Rl("none"),function(t,e,n){var r=ju(e,n),i=Uu(t,e.F);return t.get(e,n).then((function(o){var a=null;try{a=Sr(s.localStorage.getItem(r))}catch(o){}if(a&&!o)return s.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)}))}((e=this).b,n,e.a).then((function(){return e.b.get(r,e.a)})).then((function(t){return t?r:e.b.get(i,e.a).then((function(t){return t?i:e.b.get(n,e.a).then((function(t){return t?n:e.b.get(Pl,e.a).then((function(t){return t?Rl(t):n}))}))}))})).then((function(t){return e.c=t,Ol(e,t.F)})).o((function(){e.c||(e.c=n)}))),this.b.addListener(Rl("local"),this.a,m(this.g,this))}function Ol(t,e){var n,r,i=[];for(n in Lu)Lu[n]!==e&&i.push(Vu(t.b,Rl(Lu[n]),t.a));return i.push(Vu(t.b,Pl,t.a)),r=i,new pe((function(t,e){var n=r.length,i=[];if(n)for(var o=function(e,r){n--,i[e]=r,0==n&&t(i)},s=function(t){e(t)},a=0;a<r.length;a++)Ee(r[a],b(o,a),s);else t(i)}))}Al.prototype.g=function(){var t=this,e=Rl("local");Ml(this,(function(){return _e().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return Ol(t,"local").then((function(){t.c=e}))}))}))};var Pl={name:"persistence",F:"session"};function Rl(t){return{name:"authUser",F:t}}function xl(t,e){return Ml(t,(function(){return t.b.set(t.c,e.v(),t.a)}))}function Dl(t){return Ml(t,(function(){return Vu(t.b,t.c,t.a)}))}function Ll(t,e){return Ml(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),Sl(t||{})}))}))}function Ml(t,e){return t.f=t.f.then(e,e),t.f}function Fl(t){if(this.l=!1,Fr(this,"settings",new Pc),Fr(this,"app",t),!this.app.options||!this.app.options.apiKey)throw new E("invalid-api-key");var e,n,r,i,o,s,a,u;t=vu.SDK_VERSION?vr(vu.SDK_VERSION):null,this.b=new Ms(this.app.options&&this.app.options.apiKey,N(I),t),this.P=[],this.m=[],this.O=[],this.$b=vu.INTERNAL.createSubscribe(m(this.xc,this)),this.W=void 0,this.ac=vu.INTERNAL.createSubscribe(m(this.yc,this)),Bl(this,null),this.i=new Al(this.app.options.apiKey+":"+this.app.name),this.B=new Cl(this.app.options.apiKey+":"+this.app.name),this.Z=Kl(this,(n=(e=this).app.options.authDomain,r=function(t){var e=function(t,e){return t.b.get(kl,t.a).then((function(t){return t&&e&&(t.authDomain=e),Sl(t||{})}))}(t.B,t.app.options.authDomain).then((function(e){return(t.D=e)&&(e.ga=t.B),Nl(t.B)}));return Kl(t,e)}(e).then((function(){return Ll(e.i,n)})).then((function(t){return t?(t.ga=e.B,e.D&&(e.D.fa||null)==(t.fa||null)?t:t.reload().then((function(){return xl(e.i,t).then((function(){return t}))})).o((function(n){return"auth/network-request-failed"==n.code?t:Dl(e.i)}))):null})).then((function(t){Bl(e,t||null)})),Kl(e,r))),this.h=Kl(this,(i=this).Z.then((function(){return ql(i)})).o((function(){})).then((function(){if(!i.l)return i.oa()})).o((function(){})).then((function(){var t;i.l||(i.aa=!0,(t=i.i).b.addListener(Rl("local"),t.a,i.oa))}))),this.aa=!1,this.oa=m(this.Xc,this),this.Ma=m(this.ca,this),this.xa=m(this.jc,this),this.ya=m(this.uc,this),this.za=m(this.vc,this),this.a=null,s=(o=this).app.options.authDomain,a=o.app.options.apiKey,s&&br()&&(o.Zb=o.Z.then((function(){var t;if(!o.l)return o.a=Ic(s,a,o.app.name),vc(o.a,o),Hl(o)&&al(Hl(o)),o.D&&(al(o.D),(t=o.D).va(o.ja()),Zc(t,o),tl(t=o.D,o.N),el(t,o),o.D=null),o.a}))),this.INTERNAL={},this.INTERNAL.delete=m(this.delete,this),this.INTERNAL.logFramework=m(this.Ec,this),this.s=0,hn.call(this),u=this,Object.defineProperty(u,"lc",{get:function(){return this.ja()},set:function(t){this.va(t)},enumerable:!1}),u.$=null,Object.defineProperty(u,"ti",{get:function(){return this.S()},set:function(t){this.ub(t)},enumerable:!1}),u.R=null,this.N=[]}function Ul(t){Ve.call(this,"languageCodeChanged"),this.g=t}function jl(t){Ve.call(this,"frameworkChanged"),this.c=t}function Vl(t){return t.Zb||we(new E("auth-domain-config-required"))}function ql(t){if(!br())return we(new E("operation-not-supported-in-this-environment"));var e=Vl(t).then((function(){return t.a.pa()})).then((function(t){return t?jr(t):null}));return Kl(t,e)}function Bl(t,e){var n,r;Hl(t)&&(n=Hl(t),r=t.Ma,z(n.R,(function(t){return t==r})),en(Hl(t),"tokenChanged",t.xa),en(Hl(t),"userDeleted",t.ya),en(Hl(t),"userInvalidated",t.za),il(Hl(t))),e&&(e.R.push(t.Ma),Je(e,"tokenChanged",t.xa),Je(e,"userDeleted",t.ya),Je(e,"userInvalidated",t.za),0<t.s&&rl(e)),Fr(t,"currentUser",e),e&&(e.va(t.ja()),Zc(e,t),tl(e,t.N),el(e,t))}function Wl(t,e){var n=null,r=null;return Kl(t,e.then((function(e){return n=So(e),r=Mi(e),function(t,e){var n={};return n.apiKey=t.app.options.apiKey,n.authDomain=t.app.options.authDomain,n.appName=t.app.name,t.Z.then((function(){return r=n,i=e,o=t.B,s=t.Ea(),a=new Jc(r,i),o&&(a.ga=o),s&&tl(a,s),a.reload().then((function(){return a}));var r,i,o,s,a})).then((function(e){return Hl(t)&&e.uid==Hl(t).uid?vl(Hl(t),e):(Bl(t,e),al(e)),t.ca(e)})).then((function(){Gl(t)}))}(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=jc(e.v(),t,m(t.ic,t))),n||e})).then((function(){return jr({user:Hl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function Hl(t){return t.currentUser}function zl(t){return Hl(t)&&Hl(t)._lat||null}function Gl(t){if(t.aa){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](zl(t));if(t.W!==t.getUid()&&t.O.length)for(t.W=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](zl(t))}}function Kl(t,e){return t.P.push(e),e.ma((function(){H(t.P,e)})),e}function Ql(){}function Yl(){this.a={},this.b=1e12}Al.prototype.tb=function(t){var e=null,n=this;return function(t){var e=new E("invalid-persistence-type"),n=new E("unsupported-persistence-type");t:{for(r in Lu)if(Lu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(lr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!pu()&&"none"!==t)throw n;break;default:if(!mr()&&"none"!==t)throw n}}(t),Ml(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,Ol(n,t)})).then((function(){if(n.c=Rl(t),e)return n.b.set(n.c,e,n.a)})):_e()}))},w(Fl,hn),w(Ul,Ve),w(jl,Ve),(t=Fl.prototype).tb=function(t){return Kl(this,t=this.i.tb(t))},t.va=function(t){this.$===t||this.l||(this.$=t,Ws(this.b,this.$),this.dispatchEvent(new Ul(this.ja())))},t.ja=function(){return this.$},t.dd=function(){var t=s.navigator;this.va(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.Ec=function(t){this.N.push(t),Hs(this.b,vu.SDK_VERSION?vr(vu.SDK_VERSION,this.N):null),this.dispatchEvent(new jl(this.N))},t.Ea=function(){return K(this.N)},t.ub=function(t){this.R===t||this.l||(this.R=t,this.b.b=this.R)},t.S=function(){return this.R},t.toJSON=function(){return{apiKey:this.app.options.apiKey,authDomain:this.app.options.authDomain,appName:this.app.name,currentUser:Hl(this)&&Hl(this).v()}},t.Cb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.la=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?m(this.gc,this):null},t.gc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.Z.then((function(){return Wl(i,ra(i.b,o))}))},t.Vc=function(t){if(!br())return we(new E("operation-not-supported-in-this-environment"));var e=this,n=Li(t.providerId),r=Cr(),i=null;(!Er()||ur())&&this.app.options.authDomain&&t.isOAuthProvider&&(i=eu(this.app.options.authDomain,this.app.options.apiKey,this.app.name,"signInViaPopup",t,null,r,vu.SDK_VERSION||null,null,null,this.S()));var o=rr(i,n&&n.ta,n&&n.sa);return Kl(this,n=Vl(this).then((function(n){return bc(n,o,"signInViaPopup",t,r,!!i,e.S())})).then((function(){return new pe((function(t,n){e.la("signInViaPopup",null,new E("cancelled-popup-request"),e.g),e.f=t,e.w=n,e.g=r,e.c=Ec(e.a,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&nr(o),t?jr(t):null})).o((function(t){throw o&&nr(o),t})))},t.Wc=function(t){if(!br())return we(new E("operation-not-supported-in-this-environment"));var e=this;return Kl(this,Vl(this).then((function(){return Ml(t=e.i,(function(){return t.b.set(Pl,t.c.F,t.a)}));var t})).then((function(){return wc(e.a,"signInViaRedirect",t,void 0,e.S())})))},t.pa=function(){var t=this;return ql(this).then((function(e){return t.a&&kc(t.a.b),e})).o((function(e){throw t.a&&kc(t.a.b),e}))},t.bd=function(t){if(!t)return we(new E("null-user"));if(this.R!=t.tenantId)return we(new E("tenant-id-mismatch"));var e=this,n={};n.apiKey=this.app.options.apiKey,n.authDomain=this.app.options.authDomain,n.appName=this.app.name;var r,i,o,s,a,u,c=(r=t,i=n,o=e.B,s=e.Ea(),a=r.b,(u={})[Us]=a.b&&a.b.toString(),u.refreshToken=a.a,i=new Jc(i||{apiKey:r.l,authDomain:r.s,appName:r.m},u),o&&(i.ga=o),s&&tl(i,s),vl(i,r),i);return Kl(this,this.h.then((function(){if(e.app.options.apiKey!=t.l)return c.reload()})).then((function(){return Hl(e)&&t.uid==Hl(e).uid?(vl(Hl(e),t),e.ca(t)):(Bl(e,c),al(c),e.ca(c))})).then((function(){Gl(e)})))},t.wb=function(){var t=this;return Kl(this,this.h.then((function(){return t.a&&kc(t.a.b),Hl(t)?(Bl(t,null),Dl(t.i).then((function(){Gl(t)}))):_e()})))},t.Xc=function(){var t=this;return Ll(this.i,this.app.options.authDomain).then((function(e){if(!t.l){var n,r;if((r=Hl(t)&&e)&&(r=Hl(t).uid,n=e.uid,r=null!=r&&""!==r&&null!=n&&""!==n&&r==n),r)return vl(Hl(t),e),Hl(t).I();(Hl(t)||e)&&(Bl(t,e),e&&(al(e),e.ga=t.B),t.a&&vc(t.a,t),Gl(t))}}))},t.ca=function(t){return xl(this.i,t)},t.jc=function(){Gl(this),this.ca(Hl(this))},t.uc=function(){this.wb()},t.vc=function(){this.wb()},t.ic=function(t){var e=this;return this.h.then((function(){return Wl(e,_e(t))}))},t.xc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(Hl(e))}))},t.yc=function(t){var e,n,r=this;n=function(){t.next(Hl(r))},(e=this).O.push(n),Kl(e,e.h.then((function(){!e.l&&W(e.O,n)&&e.W!==e.getUid()&&(e.W=e.getUid(),n(zl(e)))})))},t.Gc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then((function(){"function"==typeof t?t(Hl(r)):"function"==typeof t.next&&t.next(Hl(r))})),this.$b(t,e,n)},t.Fc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then((function(){r.W=r.getUid(),"function"==typeof t?t(Hl(r)):"function"==typeof t.next&&t.next(Hl(r))})),this.ac(t,e,n)},t.kc=function(t){var e=this;return Kl(this,this.h.then((function(){return Hl(e)?Hl(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Rc=function(t){var e=this;return this.h.then((function(){return Wl(e,Va(e.b,Da,{token:t}))})).then((function(t){var n=t.user;return dl(n,"isAnonymous",!1),e.ca(n),t}))},t.Sc=function(t,e){var n=this;return this.h.then((function(){return Wl(n,Va(n.b,La,{email:t,password:e}))}))},t.cc=function(t,e){var n=this;return this.h.then((function(){return Wl(n,Va(n.b,ca,{email:t,password:e}))}))},t.Ya=function(t){var e=this;return this.h.then((function(){return Wl(e,t.ia(e.b))}))},t.Qc=function(t){return Lr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ya(t)},t.vb=function(){var t=this;return this.h.then((function(){var e=Hl(t);if(e&&e.isAnonymous){var n=jr({providerId:null,isNewUser:!1});return jr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return Wl(t,t.b.vb()).then((function(e){var n=e.user;return dl(n,"isAnonymous",!0),t.ca(n),e}))}))},t.getUid=function(){return Hl(this)&&Hl(this).uid||null},t.bc=function(t){this.addAuthTokenListener(t),this.s++,0<this.s&&Hl(this)&&rl(Hl(this))},t.Nc=function(t){var e=this;j(this.m,(function(n){n==t&&e.s--})),this.s<0&&(this.s=0),0==this.s&&Hl(this)&&il(Hl(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.m.push(t),Kl(this,this.h.then((function(){e.l||W(e.m,t)&&t(zl(e))})))},t.removeAuthTokenListener=function(t){z(this.m,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(Rl("local"),t.a,this.oa),this.a&&(yc(this.a,this),kc(this.a.b)),Promise.resolve()},t.fc=function(t){return Kl(this,Va(this.b,la,{identifier:t,continueUri:_r()?Zn():"http://localhost"}).then((function(t){return t.signinMethods||[]})))},t.zc=function(t){return!!bo(t)},t.sb=function(t,e){var n=this;return Kl(this,_e().then((function(){var t=new gi(e);if(!t.c)throw new E("argument-error",_i+" must be true when sending sign in link to email");return ki(t)})).then((function(e){return n.b.sb(t,e)})).then((function(){})))},t.fd=function(t){return this.Pa(t).then((function(t){return t.data.email}))},t.jb=function(t,e){return Kl(this,this.b.jb(t,e).then((function(){})))},t.Pa=function(t){return Kl(this,this.b.Pa(t).then((function(t){return new Qr(t)})))},t.fb=function(t){return Kl(this,this.b.fb(t).then((function(){})))},t.rb=function(t,e){var n=this;return Kl(this,_e().then((function(){return void 0===e||ct(e)?{}:ki(new gi(e))})).then((function(e){return n.b.rb(t,e)})).then((function(){})))},t.Uc=function(t,e){return Kl(this,xc(this,t,e,m(this.Ya,this)))},t.Tc=function(t,e){var n=this;return Kl(this,_e().then((function(){var r=e||Zn(),i=mo(t,r);if(!(r=bo(r)))throw new E("argument-error","Invalid email link!");if(r.tenantId!==n.S())throw new E("tenant-id-mismatch");return n.Ya(i)})))},Ql.prototype.render=function(){},Ql.prototype.reset=function(){},Ql.prototype.getResponse=function(){},Ql.prototype.execute=function(){};var Xl=null;function $l(t,e){return(e=Jl(e))&&t.a[e]||null}function Jl(t){return(t=void 0===t?1e12:t)?t.toString():null}function Zl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ne(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():Je(this.f,"click",this.i)}function th(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function eh(){}function nh(){}Yl.prototype.render=function(t,e){return this.a[this.b.toString()]=new Zl(t,e),this.b++},Yl.prototype.reset=function(t){var e=$l(this,t);t=Jl(t),e&&t&&(e.delete(),delete this.a[t])},Yl.prototype.getResponse=function(t){return(t=$l(this,t))?t.getResponse():null},Yl.prototype.execute=function(t){(t=$l(this,t))&&t.execute()},Zl.prototype.getResponse=function(){return th(this),this.b},Zl.prototype.execute=function(){th(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(e){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(e){}t.h&&t.execute()}),6e4)}),500))},Zl.prototype.delete=function(){th(this),this.g=!0,clearTimeout(this.a),this.a=null,en(this.f,"click",this.i)},Fr(eh,"FACTOR_ID","phone"),nh.prototype.g=function(){return _e(Xl=Xl||new Yl)},nh.prototype.c=function(){};var rh=null;function ih(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var oh=new dt(gt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),sh=new Ar(3e4,6e4);ih.prototype.g=function(t){var e=this;return new pe((function(n,r){var i=setTimeout((function(){r(new E("network-request-failed"))}),sh.get());!s.grecaptcha||t!==e.f&&!e.b?(s[e.a]=function(){var o;s.grecaptcha?(e.f=t,o=s.grecaptcha.render,s.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(s.grecaptcha)):(clearTimeout(i),r(new E("internal-error"))),delete s[e.a]},_e(As(wt(oh,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new E("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},ih.prototype.c=function(){this.b--};var ah=null;function uh(t,e,n,r,i,o,a){if(Fr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.u=e,this.g=null,a=a?rh=rh||new nh:ah=ah||new ih,this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[hh])throw new E("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[fh],!s.document)throw new E("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ne(e)||!this.i&&ne(e).hasChildNodes())throw new E("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ms(t,o||null,i||null),this.w=r||function(){return null};var u=this;this.l=[];var c=this.a[ch];this.a[ch]=function(t){var e;ph(u,t),"function"==typeof c?c(t):"string"!=typeof c||"function"==typeof(e=gr(c,s))&&e(t)};var l=this.a[lh];this.a[lh]=function(){var t;ph(u,null),"function"==typeof l?l():"string"!=typeof l||"function"==typeof(t=gr(l,s))&&t()}}var ch="callback",lh="expired-callback",hh="sitekey",fh="size";function ph(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function dh(t,e){return t.h.push(e),e.ma((function(){H(t.h,e)})),e}function vh(t){if(t.D)throw new E("internal-error","RecaptchaVerifier instance has been destroyed.")}function yh(t,e,n){var r=!1;try{this.b=n||vu.app()}catch(t){throw new E("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new E("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ea()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=vu.SDK_VERSION?vr(vu.SDK_VERSION,o):null,uh.call(this,n,t,e,(function(){try{var e=i.b.auth().ja()}catch(t){e=null}return e}),o,N(I),r)}function gh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new E("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],i<0||i>=mh.length)throw new E("internal-error","Argument validator received an unsupported number of arguments.");n=mh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new E("argument-error",t+" failed: "+r)}(t=uh.prototype).Ga=function(){var t=this;return this.f?this.f:this.f=dh(this,_e().then((function(){if(_r()&&!cr())return sr();throw new E("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.w())})).then((function(e){return t.g=e,Va(t.s,Ta,{})})).then((function(e){t.a[hh]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){vh(this);var t=this;return dh(this,this.Ga().then((function(){var e,n;return null===t.c&&(n=t.u,t.i||(e=ne(n),n=function(t,e,n){var r,i=arguments,o=document,s=String(i[0]),a=i[1];return!ee&&a&&(a.name||a.type)&&(s=["<",s],a.name&&s.push(' name="',Ut(a.name),'"'),a.type&&(s.push(' type="',Ut(a.type),'"'),ft(r={},a),delete r.type,a=r),s.push(">"),s=s.join("")),s=ae(o,s),a&&("string"==typeof a?s.className=a:Array.isArray(a)?s.className=a.join(" "):re(s,a)),2<i.length&&function(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];!h(o)||p(o)&&0<o.nodeType?r(o):j(function(t){if(t&&"number"==typeof t.length){if(p(t))return"function"==typeof t.item||"string"==typeof t.item;if(f(t))return"function"==typeof t.item}return!1}(o)?K(o):o,r)}}(o,s,i),s}("DIV"),e.appendChild(n)),t.c=t.g.render(n,t.a)),t.c})))},t.verify=function(){vh(this);var t=this;return dh(this,this.render().then((function(e){return new pe((function(n){var r,i=t.g.getResponse(e);i?n(i):(r=function(e){var i;e&&(i=r,z(t.l,(function(t){return t==i})),n(e))},t.l.push(r),t.i&&t.g.execute(t.c))}))})))},t.reset=function(){vh(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){vh(this),this.D=!0,this.m.c();for(var t,e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i)for(e=ne(this.u);t=e.firstChild;)e.removeChild(t)},w(yh,uh);var mh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function bh(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function _h(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function wh(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:p}}function Eh(t,e){return{name:t||"",J:"a function",optional:!!e,K:function(t){return"function"==typeof t}}}function Th(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function Ih(t){return{name:t?t+"Credential":"credential",J:t?"a valid "+t+" credential":"a valid credential",optional:!1,K:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ia||!n)}}}function Sh(t,e){return p(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Fa}function Ch(t){return p(t)&&"string"==typeof t.uid}function kh(t,e,n,r){return{name:n||"",J:t.J+" or "+e.J,optional:!!r,K:function(n){return t.K(n)||e.K(n)}}}function Nh(t,e){for(var n in e){var r=e[n].name;t[r]=Ph(r,t[n],e[n].j)}}function Ah(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:b((function(t){return this[t]}),n),set:b((function(t,e,n,r){gh(t,[n],[r],!0),this[e]=r}),r,n,e[n].gb),enumerable:!0})}}function Oh(t,e,n,r){t[e]=Ph(e,n,r)}function Ph(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return gh(s,n,t),e.apply(this,t)}if(!n)return e;var i,o,s=(o=(o=t).split("."))[o.length-1];for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Nh(Fl.prototype,{fb:{name:"applyActionCode",j:[bh("code")]},Pa:{name:"checkActionCode",j:[bh("code")]},jb:{name:"confirmPasswordReset",j:[bh("code"),bh("newPassword")]},cc:{name:"createUserWithEmailAndPassword",j:[bh("email"),bh("password")]},fc:{name:"fetchSignInMethodsForEmail",j:[bh("email")]},pa:{name:"getRedirectResult",j:[]},zc:{name:"isSignInWithEmailLink",j:[bh("emailLink")]},Fc:{name:"onAuthStateChanged",j:[kh(wh(),Eh(),"nextOrObserver"),Eh("opt_error",!0),Eh("opt_completed",!0)]},Gc:{name:"onIdTokenChanged",j:[kh(wh(),Eh(),"nextOrObserver"),Eh("opt_error",!0),Eh("opt_completed",!0)]},rb:{name:"sendPasswordResetEmail",j:[bh("email"),kh(wh("opt_actionCodeSettings",!0),Th(null,!0),"opt_actionCodeSettings",!0)]},sb:{name:"sendSignInLinkToEmail",j:[bh("email"),wh("actionCodeSettings")]},tb:{name:"setPersistence",j:[bh("persistence")]},Qc:{name:"signInAndRetrieveDataWithCredential",j:[Ih()]},vb:{name:"signInAnonymously",j:[]},Ya:{name:"signInWithCredential",j:[Ih()]},Rc:{name:"signInWithCustomToken",j:[bh("token")]},Sc:{name:"signInWithEmailAndPassword",j:[bh("email"),bh("password")]},Tc:{name:"signInWithEmailLink",j:[bh("email"),bh("emailLink",!0)]},Uc:{name:"signInWithPhoneNumber",j:[bh("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Vc:{name:"signInWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Wc:{name:"signInWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},bd:{name:"updateCurrentUser",j:[kh({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof Jc)}},Th(),"user")]},wb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[bh(null,!0)]},dd:{name:"useDeviceLanguage",j:[]},fd:{name:"verifyPasswordResetCode",j:[bh("code")]}}),Ah(Fl.prototype,{lc:{name:"languageCode",gb:kh(bh(),Th(),"languageCode")},ti:{name:"tenantId",gb:kh(bh(),Th(),"tenantId")}}),(Fl.Persistence=Lu).LOCAL="local",Fl.Persistence.SESSION="session",Fl.Persistence.NONE="none",Nh(Jc.prototype,{delete:{name:"delete",j:[]},mc:{name:"getIdTokenResult",j:[_h("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[_h("opt_forceRefresh",!0)]},Ac:{name:"linkAndRetrieveDataWithCredential",j:[Ih()]},mb:{name:"linkWithCredential",j:[Ih()]},Bc:{name:"linkWithPhoneNumber",j:[bh("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Cc:{name:"linkWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"linkWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Jc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Ih()]},pb:{name:"reauthenticateWithCredential",j:[Ih()]},Kc:{name:"reauthenticateWithPhoneNumber",j:[bh("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Lc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},qb:{name:"sendEmailVerification",j:[kh(wh("opt_actionCodeSettings",!0),Th(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[bh(null,!0)]},ad:{name:"unlink",j:[bh("provider")]},xb:{name:"updateEmail",j:[bh("email")]},yb:{name:"updatePassword",j:[bh("password")]},cd:{name:"updatePhoneNumber",j:[Ih("phone")]},zb:{name:"updateProfile",j:[wh("profile")]},Ab:{name:"verifyBeforeUpdateEmail",j:[bh("email"),kh(wh("opt_actionCodeSettings",!0),Th(null,!0),"opt_actionCodeSettings",!0)]}}),Nh(Yl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Nh(Ql.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Nh(pe.prototype,{ma:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Ah(Pc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",gb:_h("appVerificationDisabledForTesting")}}),Nh(Rc.prototype,{confirm:{name:"confirm",j:[bh("verificationCode")]}}),Oh(Yi,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[no,yo,wo,Zi],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[kh(bh(),wh(),"json")]),Oh(go,"credential",(function(t,e){return new vo(t,e)}),[bh("email"),bh("password")]),Nh(vo.prototype,{v:{name:"toJSON",j:[bh(null,!0)]}}),Nh(so.prototype,{Aa:{name:"addScope",j:[bh("scope")]},Ia:{name:"setCustomParameters",j:[wh("customOAuthParameters")]}}),Oh(so,"credential",ao,[kh(bh(),wh(),"token")]),Oh(go,"credentialWithLink",mo,[bh("email"),bh("emailLink")]),Nh(uo.prototype,{Aa:{name:"addScope",j:[bh("scope")]},Ia:{name:"setCustomParameters",j:[wh("customOAuthParameters")]}}),Oh(uo,"credential",co,[kh(bh(),wh(),"token")]),Nh(lo.prototype,{Aa:{name:"addScope",j:[bh("scope")]},Ia:{name:"setCustomParameters",j:[wh("customOAuthParameters")]}}),Oh(lo,"credential",ho,[kh(bh(),kh(wh(),Th()),"idToken"),kh(bh(),Th(),"accessToken",!0)]),Nh(fo.prototype,{Ia:{name:"setCustomParameters",j:[wh("customOAuthParameters")]}}),Oh(fo,"credential",po,[kh(bh(),wh(),"token"),bh("secret",!0)]),Nh(oo.prototype,{Aa:{name:"addScope",j:[bh("scope")]},credential:{name:"credential",j:[kh(bh(),kh(wh(),Th()),"optionsOrIdToken"),kh(bh(),Th(),"accessToken",!0)]},Ia:{name:"setCustomParameters",j:[wh("customOAuthParameters")]}}),Nh(to.prototype,{v:{name:"toJSON",j:[bh(null,!0)]}}),Nh($i.prototype,{v:{name:"toJSON",j:[bh(null,!0)]}}),Oh(To,"credential",Io,[bh("verificationId"),bh("verificationCode")]),Nh(To.prototype,{cb:{name:"verifyPhoneNumber",j:[kh(bh(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?Sh(t.session,Ki)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Sh(t.session,Qi)&&Ch(t.multiFactorHint):t.session&&t.multiFactorUid?Sh(t.session,Qi)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Nh(_o.prototype,{v:{name:"toJSON",j:[bh(null,!0)]}}),Nh(E.prototype,{toJSON:{name:"toJSON",j:[bh(null,!0)]}}),Nh(xo.prototype,{toJSON:{name:"toJSON",j:[bh(null,!0)]}}),Nh(Ro.prototype,{toJSON:{name:"toJSON",j:[bh(null,!0)]}}),Nh(Uc.prototype,{toJSON:{name:"toJSON",j:[bh(null,!0)]}}),Nh(Lc.prototype,{Pc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.ob}}]}}),Nh(Hc.prototype,{Ob:{name:"getSession",j:[]},dc:{name:"enroll",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.ob}},bh("displayName",!0)]},$c:{name:"unenroll",j:[kh({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Ch},bh(),"multiFactorInfoIdentifier")]}}),Nh(yh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Oh(ui,"parseLink",yi,[bh("link")]),Oh(eh,"assertion",(function(t){return new Bc(t)}),[Ih("phone")]),function(){if(void 0===vu||!vu.INTERNAL||!vu.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Xr,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Yr,VERIFY_AND_CHANGE_EMAIL:$r,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Fl,AuthCredential:Yi,Error:E};Oh(t,"EmailAuthProvider",go,[]),Oh(t,"FacebookAuthProvider",so,[]),Oh(t,"GithubAuthProvider",uo,[]),Oh(t,"GoogleAuthProvider",lo,[]),Oh(t,"TwitterAuthProvider",fo,[]),Oh(t,"OAuthProvider",oo,[bh("providerId")]),Oh(t,"SAMLAuthProvider",io,[bh("providerId")]),Oh(t,"PhoneAuthProvider",To,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof Fl)}}]),Oh(t,"RecaptchaVerifier",yh,[kh(bh(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),wh("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof vu.app.App)}}]),Oh(t,"ActionCodeURL",ui,[]),Oh(t,"PhoneMultiFactorGenerator",eh,[]),vu.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new Fl(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),vu.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:m((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:m(t.kc,t),addAuthTokenListener:m(t.bc,t),removeAuthTokenListener:m(t.Nc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),vu.registerVersion("@firebase/auth","0.14.9"),vu.INTERNAL.extendNamespace({User:Jc})}()}.apply("undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var yu=(gu.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),ga(e))},gu.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:ya(e)},gu.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},gu.prototype.prefixedName_=function(t){return this.prefix_+t},gu.prototype.toString=function(){return this.domStorage_.toString()},gu);function gu(t){this.domStorage_=t,this.prefix_="firebase:"}var mu=(bu.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},bu.prototype.get=function(t){return ba(this.cache_,t)?this.cache_[t]:null},bu.prototype.remove=function(t){delete this.cache_[t]},bu);function bu(){this.cache_={},this.isInMemoryStorage=!0}function _u(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new yu(e)}}catch(t){}return new mu}function wu(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i,o=t.charCodeAt(r);55296<=o&&o<=56319&&(i=o-55296,Ys(++r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(i<<10)+(t.charCodeAt(r)-56320)),o<128?e[n++]=o:(o<2048?e[n++]=o>>6|192:(o<65536?e[n++]=o>>12|224:(e[n++]=o>>18|240,e[n++]=o>>12&63|128),e[n++]=o>>6&63|128),e[n++]=63&o|128)}return e}(t),n=new Ta;n.update(e);var r=n.digest();return $s.encodeByteArray(r)}function Eu(t,e){Ys(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(xu.logLevel=Wa.VERBOSE,Mu=xu.log.bind(xu),e&&Ru.set("logging_enabled",!0)):"function"==typeof t?Mu=t:(Mu=null,Ru.remove("logging_enabled"))}function Tu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+Lu.apply(void 0,Ws(t));xu.error(n)}function Iu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+Lu.apply(void 0,Ws(t));throw xu.error(n),new Error(n)}function Su(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+Lu.apply(void 0,Ws(t));xu.warn(n)}function Cu(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)}function ku(t,e){return t===e?0:t<e?-1:1}function Nu(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ga(e))}function Au(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)n<i+e?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r}var Ou,Pu=_u("localStorage"),Ru=_u("sessionStorage"),xu=new $a("@firebase/database"),Du=(Ou=1,function(){return Ou++}),Lu=function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r="",i=0;i<e.length;i++){var o=e[i];Array.isArray(o)||o&&"object"==typeof o&&"number"==typeof o.length?r+=t.apply(null,o):r+="object"==typeof o?ga(o):o,r+=" "}return r},Mu=null,Fu=!0,Uu=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!0===Fu&&(Fu=!1,null===Mu&&!0===Ru.get("logging_enabled")&&Eu(!0)),Mu&&(t=Lu.apply(null,e),Mu(t))},ju=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Uu.apply(void 0,Ws([t],e))}},Vu="[MIN_NAME]",qu="[MAX_NAME]",Bu=function(t,e){if(t===e)return 0;if(t===Vu||e===qu)return-1;if(e===Vu||t===qu)return 1;var n=Yu(t),r=Yu(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null===r&&t<e?-1:1},Wu=function t(e){if("object"!=typeof e||null===e)return ga(e);var n=[];for(var r in e)n.push(r);n.sort();for(var i="{",o=0;o<n.length;o++)0!==o&&(i+=","),i+=ga(n[o]),i+=":",i+=t(e[n[o]]);return i+"}"};function Hu(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function zu(t){var e,n,r,i;Ys(!Cu(t),"Invalid JSON number"),0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074))));for(var o=[],s=52;s;--s)o.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;--s)o.push(n%2?1:0),n=Math.floor(n/2);o.push(e?1:0),o.reverse();var a=o.join(""),u="";for(s=0;s<64;s+=8){var c=parseInt(a.substr(s,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()}function Gu(t){try{t()}catch(u){setTimeout((function(){throw Su("Exception was thrown by user callback.",u.stack||""),u}),Math.floor(0))}}function Ku(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n}var Qu=new RegExp("^-?(0*)\\d{1,10}$"),Yu=function(t){if(Qu.test(t)){var e=Number(t);if(-2147483648<=e&&e<=2147483647)return e}return null},Xu=(Object.defineProperty($u,"Empty",{get:function(){return new $u("")},enumerable:!1,configurable:!0}),$u.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},$u.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},$u.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new $u(this.pieces_,t)},$u.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},$u.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},$u.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},$u.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},$u.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],e=this.pieceNum_;e<this.pieces_.length-1;e++)t.push(this.pieces_[e]);return new $u(t,0)},$u.prototype.child=function(t){for(var e=[],n=this.pieceNum_;n<this.pieces_.length;n++)e.push(this.pieces_[n]);if(t instanceof $u)for(n=t.pieceNum_;n<t.pieces_.length;n++)e.push(t.pieces_[n]);else{var r=t.split("/");for(n=0;n<r.length;n++)0<r[n].length&&e.push(r[n])}return new $u(e,0)},$u.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},$u.relativePath=function(t,e){var n=t.getFront(),r=e.getFront();if(null===n)return e;if(n===r)return $u.relativePath(t.popFront(),e.popFront());throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")},$u.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=Bu(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},$u.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},$u.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},$u);function $u(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}var Ju=(Object.defineProperty(Zu,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(Zu,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),Zu.prototype.push=function(t){0<this.parts_.length&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=xa(t),this.checkValid_()},Zu.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=xa(t),0<this.parts_.length&&--this.byteLength_},Zu.prototype.checkValid_=function(){if(this.byteLength_>Zu.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+Zu.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>Zu.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Zu.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},Zu.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},Zu);function Zu(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=xa(this.parts_[n]);this.checkValid_()}var tc="firebaseio.com",ec="websocket",nc="long_polling",rc=(ic.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},ic.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},ic.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},ic.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},ic.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Pu.set("host:"+this.host,this.internalHost))},ic.prototype.connectionURL=function(t,e){var n;if(Ys("string"==typeof t,"typeof type must == string"),Ys("object"==typeof e,"typeof params must == object"),t===ec)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==nc)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return Hu(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},ic.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},ic.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},ic);function ic(t,e,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=Pu.get("host:"+t)||this.host}function oc(t){var e=gc(t),n=e.namespace;"firebase.com"===e.domain&&Iu(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===e.domain||Iu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Su("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var r="ws"===e.scheme||"wss"===e.scheme;return{repoInfo:new rc(e.host,e.secure,n,r,"",n!==e.subdomain),path:new Xu(e.pathString)}}function sc(t){return"string"==typeof t&&0!==t.length&&!mc.test(t)}function ac(t){return"string"==typeof t&&0!==t.length&&!bc.test(t)}function uc(t){return null===t||"string"==typeof t||"number"==typeof t&&!Cu(t)||t&&"object"==typeof t&&ba(t,".sv")}function cc(t,e,n,r,i){i&&void 0===n||wc(Oa(t,e,i),n,r)}function lc(t,e,n,r,i){if(!i||void 0!==n){var o=Oa(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];Hu(n,(function(t,e){var n=new Xu(t);if(wc(o,e,r.child(n)),".priority"===n.getBack()&&!uc(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)})),function(t,e){for(var n,r=0;r<e.length;r++)for(var i=(n=e[r]).slice(),o=0;o<i.length;o++)if((".priority"!==i[o]||o!==i.length-1)&&!sc(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+n.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Xu.comparePaths);var s=null;for(r=0;r<e.length;r++){if(n=e[r],null!==s&&s.contains(n))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+n.toString());s=n}}(o,s)}}function hc(t,e,n,r){if(!r||void 0!==n){if(Cu(n))throw new Error(Oa(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!uc(n))throw new Error(Oa(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function fc(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Oa(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function pc(t,e,n,r){if(!(r&&void 0===n||sc(n)))throw new Error(Oa(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function dc(t,e,n,r){if(!(r&&void 0===n||ac(n)))throw new Error(Oa(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function vc(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")}function yc(t,e,n){var r,i=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!sc(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==i.length&&!ac(r=(r=i)&&r.replace(/^\/*\.info(\/|$)/,"/")))throw new Error(Oa(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')}var gc=function(t){var e,n,r,i,o,s,a="",u="",c="",l="",h="",f=!0,p="https",d=443;return"string"==typeof t&&(0<=(i=t.indexOf("//"))&&(p=t.substring(0,i-1),t=t.substring(i+2)),-1===(e=t.indexOf("/"))&&(e=t.length),-1===(n=t.indexOf("?"))&&(n=t.length),a=t.substring(0,Math.min(e,n)),e<n&&(l=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(e,n))),r=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=qs(t.split("&")),o=i.next();!o.done;o=i.next()){var s,a=o.value;0!==a.length&&(2===(s=a.split("=")).length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):Su("Invalid query segment '"+a+"' in query '"+t+"'"))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,n))),0<=(i=a.indexOf(":"))?(f="https"===p||"wss"===p,d=parseInt(a.substring(i+1),10)):i=a.length,"localhost"===(o=a.slice(0,i)).toLowerCase()?u="localhost":o.split(".").length<=2?u=o:(s=a.indexOf("."),c=a.substring(0,s).toLowerCase(),u=a.substring(s+1),h=c),"ns"in r&&(h=r.ns)),{host:a,port:d,domain:u,subdomain:c,secure:f,scheme:p,pathString:l,namespace:h}},mc=/[\[\].#$\/\u0000-\u001F\u007F]/,bc=/[\[\].#$\u0000-\u001F\u007F]/,_c=10485760,wc=function t(e,n,r){var i=r instanceof Xu?new Ju(r,e):r;if(void 0===n)throw new Error(e+"contains undefined "+i.toErrorString());if("function"==typeof n)throw new Error(e+"contains a function "+i.toErrorString()+" with contents = "+n.toString());if(Cu(n))throw new Error(e+"contains "+n.toString()+" "+i.toErrorString());if("string"==typeof n&&n.length>_c/3&&xa(n)>_c)throw new Error(e+"contains a string greater than "+_c+" utf8 bytes "+i.toErrorString()+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){var o=!1,s=!1;if(Hu(n,(function(n,r){if(".value"===n)o=!0;else if(".priority"!==n&&".sv"!==n&&(s=!0,!sc(n)))throw new Error(e+" contains an invalid key ("+n+") "+i.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');i.push(n),t(e,r,i),i.pop()})),o&&s)throw new Error(e+' contains ".value" child '+i.toErrorString()+" in addition to actual children.")}},Ec=(Tc.prototype.cancel=function(t){Aa("OnDisconnect.cancel",0,1,arguments.length),Pa("OnDisconnect.cancel",1,t,!0);var e=new ta;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},Tc.prototype.remove=function(t){Aa("OnDisconnect.remove",0,1,arguments.length),vc("OnDisconnect.remove",this.path_),Pa("OnDisconnect.remove",1,t,!0);var e=new ta;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},Tc.prototype.set=function(t,e){Aa("OnDisconnect.set",1,2,arguments.length),vc("OnDisconnect.set",this.path_),cc("OnDisconnect.set",1,t,this.path_,!1),Pa("OnDisconnect.set",2,e,!0);var n=new ta;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},Tc.prototype.setWithPriority=function(t,e,n){Aa("OnDisconnect.setWithPriority",2,3,arguments.length),vc("OnDisconnect.setWithPriority",this.path_),cc("OnDisconnect.setWithPriority",1,t,this.path_,!1),hc("OnDisconnect.setWithPriority",2,e,!1),Pa("OnDisconnect.setWithPriority",3,n,!0);var r=new ta;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},Tc.prototype.update=function(t,e){if(Aa("OnDisconnect.update",1,2,arguments.length),vc("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Su("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}lc("OnDisconnect.update",1,t,this.path_,!1),Pa("OnDisconnect.update",2,e,!0);var i=new ta;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},Tc);function Tc(t,e){this.repo_=t,this.path_=e}var Ic=(Sc.prototype.toJSON=function(){return Aa("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},Sc);function Sc(t,e){this.committed=t,this.snapshot=e}var Cc,kc,Nc,Ac=(Cc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",kc=0,Nc=[],function(t){var e=t===kc;kc=t;for(var n=new Array(8),r=7;0<=r;r--)n[r]=Cc.charAt(t%64),t=Math.floor(t/64);Ys(0===t,"Cannot push at time == 0");var i=n.join("");if(e){for(r=11;0<=r&&63===Nc[r];r--)Nc[r]=0;Nc[r]++}else for(r=0;r<12;r++)Nc[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)i+=Cc.charAt(Nc[r]);return Ys(20===i.length,"nextPushId: Length should be 20."),i}),Oc=(Pc.Wrap=function(t,e){return new Pc(t,e)},Pc);function Pc(t,e){this.name=t,this.node=e}var Rc,xc=(Dc.prototype.getCompare=function(){return this.compare.bind(this)},Dc.prototype.indexedValueChanged=function(t,e){var n=new Oc(Vu,t),r=new Oc(Vu,e);return 0!==this.compare(n,r)},Dc.prototype.minPost=function(){return Oc.MIN},Dc);function Dc(){}var Lc,Mc=(Fs(Fc,Lc=xc),Object.defineProperty(Fc,"__EMPTY_NODE",{get:function(){return Rc},set:function(t){Rc=t},enumerable:!1,configurable:!0}),Fc.prototype.compare=function(t,e){return Bu(t.name,e.name)},Fc.prototype.isDefinedOn=function(t){throw Xs("KeyIndex.isDefinedOn not expected to be called.")},Fc.prototype.indexedValueChanged=function(t,e){return!1},Fc.prototype.minPost=function(){return Oc.MIN},Fc.prototype.maxPost=function(){return new Oc(qu,Rc)},Fc.prototype.makePost=function(t,e){return Ys("string"==typeof t,"KeyIndex indexValue must always be a string."),new Oc(t,Rc)},Fc.prototype.toString=function(){return".key"},Fc);function Fc(){return null!==Lc&&Lc.apply(this,arguments)||this}var Uc,jc=new Mc;function Vc(t){return"number"==typeof t?"number:"+zu(t):"string:"+t}var qc,Bc,Wc,Hc,zc=function(t){var e;t.isLeafNode()?(e=t.val(),Ys("string"==typeof e||"number"==typeof e||"object"==typeof e&&ba(e,".sv"),"Priority must be a string or number.")):Ys(t===Uc||t.isEmpty(),"priority of unexpected type."),Ys(t===Uc||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Gc=(Object.defineProperty(Kc,"__childrenNodeConstructor",{get:function(){return qc},set:function(t){qc=t},enumerable:!1,configurable:!0}),Kc.prototype.isLeafNode=function(){return!0},Kc.prototype.getPriority=function(){return this.priorityNode_},Kc.prototype.updatePriority=function(t){return new Kc(this.value_,t)},Kc.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:Kc.__childrenNodeConstructor.EMPTY_NODE},Kc.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:Kc.__childrenNodeConstructor.EMPTY_NODE},Kc.prototype.hasChild=function(){return!1},Kc.prototype.getPredecessorChildName=function(t,e){return null},Kc.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:Kc.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},Kc.prototype.updateChild=function(t,e){var n=t.getFront();return null===n?e:e.isEmpty()&&".priority"!==n?this:(Ys(".priority"!==n||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(n,Kc.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),e)))},Kc.prototype.isEmpty=function(){return!1},Kc.prototype.numChildren=function(){return 0},Kc.prototype.forEachChild=function(t,e){return!1},Kc.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},Kc.prototype.hash=function(){var t,e;return null===this.lazyHash_&&(t="",this.priorityNode_.isEmpty()||(t+="priority:"+Vc(this.priorityNode_.val())+":"),t+=(e=typeof this.value_)+":",t+="number"==e?zu(this.value_):this.value_,this.lazyHash_=wu(t)),this.lazyHash_},Kc.prototype.getValue=function(){return this.value_},Kc.prototype.compareTo=function(t){return t===Kc.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Kc.__childrenNodeConstructor?-1:(Ys(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},Kc.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=Kc.VALUE_TYPE_ORDER.indexOf(e),i=Kc.VALUE_TYPE_ORDER.indexOf(n);return Ys(0<=r,"Unknown leaf type: "+e),Ys(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},Kc.prototype.withIndex=function(){return this},Kc.prototype.isIndexed=function(){return!0},Kc.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},Kc.VALUE_TYPE_ORDER=["object","boolean","number","string"],Kc);function Kc(t,e){void 0===e&&(e=Kc.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,Ys(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),zc(this.priorityNode_)}function Qc(){return null!==Hc&&Hc.apply(this,arguments)||this}var Yc=new(Fs(Qc,Hc=xc),Qc.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?Bu(t.name,e.name):i},Qc.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},Qc.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},Qc.prototype.minPost=function(){return Oc.MIN},Qc.prototype.maxPost=function(){return new Oc(qu,new Gc("[PRIORITY-POST]",Wc))},Qc.prototype.makePost=function(t,e){var n=Bc(t);return new Oc(e,new Gc("[PRIORITY-POST]",n))},Qc.prototype.toString=function(){return".priority"},Qc),Xc=($c.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_.pop(),e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value};if(this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},$c.prototype.hasNext=function(){return 0<this.nodeStack_.length},$c.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},$c);function $c(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}var Jc=(Zc.prototype.copy=function(t,e,n,r,i){return new Zc(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Zc.prototype.count=function(){return this.left.count()+1+this.right.count()},Zc.prototype.isEmpty=function(){return!1},Zc.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},Zc.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},Zc.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},Zc.prototype.minKey=function(){return this.min_().key},Zc.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},Zc.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},Zc.prototype.removeMin_=function(){if(this.left.isEmpty())return nl.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},Zc.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed_()||r.left.left.isRed_()||(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),r.right.isEmpty()||r.right.isRed_()||r.right.left.isRed_()||(r=r.moveRedRight_()),0===e(t,r.key)){if(r.right.isEmpty())return nl.EMPTY_NODE;n=r.right.min_(),r=r.copy(n.key,n.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp_()},Zc.prototype.isRed_=function(){return this.color},Zc.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},Zc.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},Zc.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},Zc.prototype.rotateLeft_=function(){var t=this.copy(null,null,Zc.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},Zc.prototype.rotateRight_=function(){var t=this.copy(null,null,Zc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},Zc.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},Zc.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},Zc.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},Zc.RED=!0,Zc.BLACK=!1,Zc);function Zc(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Zc.RED,this.left=null!=r?r:nl.EMPTY_NODE,this.right=null!=i?i:nl.EMPTY_NODE}var tl=(el.prototype.copy=function(t,e,n,r,i){return this},el.prototype.insert=function(t,e,n){return new Jc(t,e,null)},el.prototype.remove=function(t,e){return this},el.prototype.count=function(){return 0},el.prototype.isEmpty=function(){return!0},el.prototype.inorderTraversal=function(t){return!1},el.prototype.reverseTraversal=function(t){return!1},el.prototype.minKey=function(){return null},el.prototype.maxKey=function(){return null},el.prototype.check_=function(){return 0},el.prototype.isRed_=function(){return!1},el);function el(){}var nl=(rl.prototype.insert=function(t,e){return new rl(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Jc.BLACK,null,null))},rl.prototype.remove=function(t){return new rl(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Jc.BLACK,null,null))},rl.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},rl.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},rl.prototype.isEmpty=function(){return this.root_.isEmpty()},rl.prototype.count=function(){return this.root_.count()},rl.prototype.minKey=function(){return this.root_.minKey()},rl.prototype.maxKey=function(){return this.root_.maxKey()},rl.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},rl.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},rl.prototype.getIterator=function(t){return new Xc(this.root_,null,this.comparator_,!1,t)},rl.prototype.getIteratorFrom=function(t,e){return new Xc(this.root_,t,this.comparator_,!1,e)},rl.prototype.getReverseIteratorFrom=function(t,e){return new Xc(this.root_,t,this.comparator_,!0,e)},rl.prototype.getReverseIterator=function(t){return new Xc(this.root_,null,this.comparator_,!0,t)},rl.EMPTY_NODE=new tl,rl);function rl(t,e){void 0===e&&(e=rl.EMPTY_NODE),this.comparator_=t,this.root_=e}var il=Math.log(2),ol=(sl.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},sl);function sl(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/il,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}var al,ul,cl=function(t,e,n,r){t.sort(e);var i=function(e){for(var r=null,i=null,o=t.length,s=function(e,r){var i=o-e,s=o;o-=e;var u=function e(r,i){var o=i-r;if(0==o)return null;if(1==o)return c=t[r],l=n?n(c):c,new Jc(l,c.node,Jc.BLACK,null,null);var s=parseInt(o/2,10)+r,a=e(r,s),u=e(s+1,i),c=t[s],l=n?n(c):c;return new Jc(l,c.node,Jc.BLACK,a,u)}(1+i,s),c=t[i],l=n?n(c):c;a(new Jc(l,c.node,r,null,u))},a=function(t){r=r?r.left=t:i=t},u=0;u<e.count;++u){var c=e.nextBitIsOne(),l=Math.pow(2,e.count-(u+1));c?s(l,Jc.BLACK):(s(l,Jc.BLACK),s(l,Jc.RED))}return i}(new ol(t.length));return new nl(r||e,i)},ll={},hl=(Object.defineProperty(fl,"Default",{get:function(){return Ys(Yc,"ChildrenNode.ts has not been loaded"),al=al||new fl({".priority":ll},{".priority":Yc})},enumerable:!1,configurable:!0}),fl.prototype.get=function(t){var e=_a(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof nl?e:null},fl.prototype.hasIndex=function(t){return ba(this.indexSet_,t.toString())},fl.prototype.addIndex=function(t,e){Ys(t!==jc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n,r=[],i=!1,o=e.getIterator(Oc.Wrap),s=o.getNext();s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();n=i?cl(r,t.getCompare()):ll;var a=t.toString(),u=Us({},this.indexSet_);u[a]=t;var c=Us({},this.indexes_);return c[a]=n,new fl(c,u)},fl.prototype.addToIndexes=function(t,e){var n=this;return new fl(Ea(this.indexes_,(function(r,i){var o=_a(n.indexSet_,i);if(Ys(o,"Missing index implementation for "+i),r===ll){if(o.isDefinedOn(t.node)){for(var s=[],a=e.getIterator(Oc.Wrap),u=a.getNext();u;)u.name!==t.name&&s.push(u),u=a.getNext();return s.push(t),cl(s,o.getCompare())}return ll}var c=e.get(t.name),l=r;return c&&(l=l.remove(new Oc(t.name,c))),l.insert(t,t.node)})),this.indexSet_)},fl.prototype.removeFromIndexes=function(t,e){return new fl(Ea(this.indexes_,(function(n){if(n===ll)return n;var r=e.get(t.name);return r?n.remove(new Oc(t.name,r)):n})),this.indexSet_)},fl);function fl(t,e){this.indexes_=t,this.indexSet_=e}function pl(t,e){return Bu(t.name,e.name)}function dl(t,e){return Bu(t,e)}var vl,yl=(Object.defineProperty(gl,"EMPTY_NODE",{get:function(){return ul=ul||new gl(new nl(dl),null,hl.Default)},enumerable:!1,configurable:!0}),gl.prototype.isLeafNode=function(){return!1},gl.prototype.getPriority=function(){return this.priorityNode_||ul},gl.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new gl(this.children_,t,this.indexMap_)},gl.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?ul:e},gl.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},gl.prototype.hasChild=function(t){return null!==this.children_.get(t)},gl.prototype.updateImmediateChild=function(t,e){if(Ys(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n=new Oc(t,e),r=void 0,i=e.isEmpty()?(r=this.children_.remove(t),this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),this.indexMap_.addToIndexes(n,this.children_)),o=r.isEmpty()?ul:this.priorityNode_;return new gl(r,o,i)},gl.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;Ys(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},gl.prototype.isEmpty=function(){return this.children_.isEmpty()},gl.prototype.numChildren=function(){return this.children_.count()},gl.prototype.val=function(t){if(this.isEmpty())return null;var e={},n=0,r=0,i=!0;if(this.forEachChild(Yc,(function(o,s){e[o]=s.val(t),n++,i&&gl.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1})),!t&&i&&r<2*n){var o=[];for(var s in e)o[s]=e[s];return o}return t&&!this.getPriority().isEmpty()&&(e[".priority"]=this.getPriority().val()),e},gl.prototype.hash=function(){var t;return null===this.lazyHash_&&(t="",this.getPriority().isEmpty()||(t+="priority:"+Vc(this.getPriority().val())+":"),this.forEachChild(Yc,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":wu(t)),this.lazyHash_},gl.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Oc(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},gl.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},gl.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Oc(e,this.children_.get(e)):null},gl.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},gl.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Oc(e,this.children_.get(e)):null},gl.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},gl.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},gl.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,Oc.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},gl.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},gl.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,Oc.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},gl.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===_l?-1:0},gl.prototype.withIndex=function(t){if(t===jc||this.indexMap_.hasIndex(t))return this;var e=this.indexMap_.addIndex(t,this.children_);return new gl(this.children_,this.priorityNode_,e)},gl.prototype.isIndexed=function(t){return t===jc||this.indexMap_.hasIndex(t)},gl.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()!==e.children_.count())return!1;for(var n=this.getIterator(Yc),r=e.getIterator(Yc),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1},gl.prototype.resolveIndex_=function(t){return t===jc?null:this.indexMap_.get(t.toString())},gl.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,gl);function gl(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&zc(this.priorityNode_),this.children_.isEmpty()&&Ys(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function ml(){return vl.call(this,new nl(dl),yl.EMPTY_NODE,hl.Default)||this}var bl,_l=new(Fs(ml,vl=yl),ml.prototype.compareTo=function(t){return t===this?0:1},ml.prototype.equals=function(t){return t===this},ml.prototype.getPriority=function(){return this},ml.prototype.getImmediateChild=function(t){return yl.EMPTY_NODE},ml.prototype.isEmpty=function(){return!1},ml);function wl(t,e){if(void 0===e&&(e=null),null===t)return yl.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Ys(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Gc(t,wl(e));if(t instanceof Array){var n=yl.EMPTY_NODE;return Hu(t,(function(e,r){var i;ba(t,e)&&"."!==e.substring(0,1)&&(!(i=wl(r)).isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i)))})),n.updatePriority(wl(e))}var r=[],i=!1;if(Hu(t,(function(t,e){var n;"."!==t.substring(0,1)&&((n=wl(e)).isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Oc(t,n))))})),0===r.length)return yl.EMPTY_NODE;var o=cl(r,pl,(function(t){return t.name}),dl);if(i){var s=cl(r,Yc.getCompare());return new yl(o,wl(e),new hl({".priority":s},{".priority":Yc}))}return new yl(o,wl(e),hl.Default)}function El(){return null!==bl&&bl.apply(this,arguments)||this}Object.defineProperties(Oc,{MIN:{value:new Oc(Vu,yl.EMPTY_NODE)},MAX:{value:new Oc(qu,_l)}}),Mc.__EMPTY_NODE=yl.EMPTY_NODE,Gc.__childrenNodeConstructor=yl,Uc=_l,Wc=_l,Bc=wl;var Tl,Il=new(Fs(El,bl=xc),El.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?Bu(t.name,e.name):n},El.prototype.isDefinedOn=function(t){return!0},El.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},El.prototype.minPost=function(){return Oc.MIN},El.prototype.maxPost=function(){return Oc.MAX},El.prototype.makePost=function(t,e){var n=wl(t);return new Oc(e,n)},El.prototype.toString=function(){return".value"},El),Sl=(Fs(Cl,Tl=xc),Cl.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},Cl.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},Cl.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?Bu(t.name,e.name):i},Cl.prototype.makePost=function(t,e){var n=wl(t),r=yl.EMPTY_NODE.updateChild(this.indexPath_,n);return new Oc(e,r)},Cl.prototype.maxPost=function(){var t=yl.EMPTY_NODE.updateChild(this.indexPath_,_l);return new Oc(qu,t)},Cl.prototype.toString=function(){return this.indexPath_.slice().join("/")},Cl);function Cl(t){var e=Tl.call(this)||this;return e.indexPath_=t,Ys(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),e}var kl=(Nl.prototype.val=function(){return Aa("DataSnapshot.val",0,0,arguments.length),this.node_.val()},Nl.prototype.exportVal=function(){return Aa("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},Nl.prototype.toJSON=function(){return Aa("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},Nl.prototype.exists=function(){return Aa("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},Nl.prototype.child=function(t){Aa("DataSnapshot.child",0,1,arguments.length),dc("DataSnapshot.child",1,t=String(t),!1);var e=new Xu(t),n=this.ref_.child(e);return new Nl(this.node_.getChild(e),n,Yc)},Nl.prototype.hasChild=function(t){Aa("DataSnapshot.hasChild",1,1,arguments.length),dc("DataSnapshot.hasChild",1,t,!1);var e=new Xu(t);return!this.node_.getChild(e).isEmpty()},Nl.prototype.getPriority=function(){return Aa("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},Nl.prototype.forEach=function(t){var e=this;return Aa("DataSnapshot.forEach",1,1,arguments.length),Pa("DataSnapshot.forEach",1,t,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,(function(n,r){return t(new Nl(r,e.ref_.child(n),Yc))}))},Nl.prototype.hasChildren=function(){return Aa("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(Nl.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),Nl.prototype.numChildren=function(){return Aa("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},Nl.prototype.getRef=function(){return Aa("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(Nl.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),Nl);function Nl(t,e,n){this.node_=t,this.ref_=e,this.index_=n}var Al=(Ol.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},Ol.prototype.getEventType=function(){return this.eventType},Ol.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},Ol.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+ga(this.snapshot.exportVal())},Ol);function Ol(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}var Pl=(Rl.prototype.getPath=function(){return this.path},Rl.prototype.getEventType=function(){return"cancel"},Rl.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},Rl.prototype.toString=function(){return this.path.toString()+":cancel"},Rl);function Rl(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}var xl=(Dl.prototype.respondsTo=function(t){return"value"===t},Dl.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Al("value",this,new kl(t.snapshotNode,e.getRef(),n))},Dl.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Ys(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},Dl.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Pl(this,t,e):null},Dl.prototype.matches=function(t){return t instanceof Dl&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},Dl.prototype.hasAnyCallback=function(){return null!==this.callback_},Dl);function Dl(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}var Ll,Ml=(Fl.prototype.respondsTo=function(t){var e="children_removed"===(e="children_added"===t?"child_added":t)?"child_removed":e;return ba(this.callbacks_,e)},Fl.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Pl(this,t,e):null},Fl.prototype.createEvent=function(t,e){Ys(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Al(t.type,this,new kl(t.snapshotNode,n,r),t.prevName)},Fl.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Ys(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},Fl.prototype.matches=function(t){var e=this;if(t instanceof Fl){if(!this.callbacks_||!t.callbacks_)return!0;if(this.context_===t.context_){var n=Object.keys(t.callbacks_),r=Object.keys(this.callbacks_),i=n.length;if(i===r.length){if(1!==i)return r.every((function(n){return t.callbacks_[n]===e.callbacks_[n]}));var o=n[0],s=r[0];return!(s!==o||t.callbacks_[o]&&this.callbacks_[s]&&t.callbacks_[o]!==this.callbacks_[s])}}}return!1},Fl.prototype.hasAnyCallback=function(){return null!==this.callbacks_},Fl);function Fl(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}var Ul=(Object.defineProperty(jl,"__referenceConstructor",{get:function(){return Ys(Ll,"Reference.ts has not been loaded"),Ll},set:function(t){Ll=t},enumerable:!1,configurable:!0}),jl.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===jc){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Vu)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==qu)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Yc){if(null!=e&&!uc(e)||null!=n&&!uc(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Ys(t.getIndex()instanceof Sl||t.getIndex()===Il,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},jl.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},jl.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},jl.prototype.getQueryParams=function(){return this.queryParams_},jl.prototype.getRef=function(){return Aa("Query.ref",0,0,arguments.length),new jl.__referenceConstructor(this.repo,this.path)},jl.prototype.on=function(t,e,n,r){Aa("Query.on",2,4,arguments.length),fc("Query.on",1,t,!1),Pa("Query.on",2,e,!1);var i,o=jl.getCancelAndContextArgs_("Query.on",n,r);return"value"===t?this.onValueEvent(e,o.cancel,o.context):((i={})[t]=e,this.onChildEvent(i,o.cancel,o.context)),e},jl.prototype.onValueEvent=function(t,e,n){var r=new xl(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},jl.prototype.onChildEvent=function(t,e,n){var r=new Ml(t,e,n);this.repo.addEventCallbackForQuery(this,r)},jl.prototype.off=function(t,e,n){Aa("Query.off",0,3,arguments.length),fc("Query.off",1,t,!0),Pa("Query.off",2,e,!0),Ra("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new xl(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new Ml(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},jl.prototype.once=function(t,e,n,r){var i=this;Aa("Query.once",1,4,arguments.length),fc("Query.once",1,t,!1),Pa("Query.once",2,e,!0);var o=jl.getCancelAndContextArgs_("Query.once",n,r),s=!0,a=new ta;a.promise.catch((function(){}));var u=function n(r){s&&(s=!1,i.off(t,n),e&&e.bind(o.context)(r),a.resolve(r))};return this.on(t,u,(function(e){i.off(t,u),o.cancel&&o.cancel.bind(o.context)(e),a.reject(e)})),a.promise},jl.prototype.limitToFirst=function(t){if(Aa("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new jl(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},jl.prototype.limitToLast=function(t){if(Aa("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new jl(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},jl.prototype.orderByChild=function(t){if(Aa("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');dc("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var e=new Xu(t);if(e.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var n=new Sl(e),r=this.queryParams_.orderBy(n);return jl.validateQueryEndpoints_(r),new jl(this.repo,this.path,r,!0)},jl.prototype.orderByKey=function(){Aa("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(jc);return jl.validateQueryEndpoints_(t),new jl(this.repo,this.path,t,!0)},jl.prototype.orderByPriority=function(){Aa("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(Yc);return jl.validateQueryEndpoints_(t),new jl(this.repo,this.path,t,!0)},jl.prototype.orderByValue=function(){Aa("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(Il);return jl.validateQueryEndpoints_(t),new jl(this.repo,this.path,t,!0)},jl.prototype.startAt=function(t,e){void 0===t&&(t=null),Aa("Query.startAt",0,2,arguments.length),cc("Query.startAt",1,t,this.path,!0),pc("Query.startAt",2,e,!0);var n=this.queryParams_.startAt(t,e);if(jl.validateLimit_(n),jl.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(e=t=null),new jl(this.repo,this.path,n,this.orderByCalled_)},jl.prototype.endAt=function(t,e){void 0===t&&(t=null),Aa("Query.endAt",0,2,arguments.length),cc("Query.endAt",1,t,this.path,!0),pc("Query.endAt",2,e,!0);var n=this.queryParams_.endAt(t,e);if(jl.validateLimit_(n),jl.validateQueryEndpoints_(n),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new jl(this.repo,this.path,n,this.orderByCalled_)},jl.prototype.equalTo=function(t,e){if(Aa("Query.equalTo",1,2,arguments.length),cc("Query.equalTo",1,t,this.path,!1),pc("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},jl.prototype.toString=function(){return Aa("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},jl.prototype.toJSON=function(){return Aa("Query.toJSON",0,1,arguments.length),this.toString()},jl.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},jl.prototype.queryIdentifier=function(){var t=this.queryObject(),e=Wu(t);return"{}"===e?"default":e},jl.prototype.isEqual=function(t){if(Aa("Query.isEqual",1,1,arguments.length),!(t instanceof jl))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var e=this.repo===t.repo,n=this.path.equals(t.path),r=this.queryIdentifier()===t.queryIdentifier();return e&&n&&r},jl.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Pa(t,3,r.cancel,!0),r.context=n,Ra(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Oa(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(jl.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),jl);function jl(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}var Vl=(ql.prototype.getImmediateChild=function(t){return new ql(this.node_.getImmediateChild(t))},ql.prototype.node=function(){return this.node_},ql);function ql(t){this.node_=t}var Bl=(Wl.prototype.getImmediateChild=function(t){var e=this.path_.child(t);return new Wl(this.syncTree_,e)},Wl.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},Wl);function Wl(t,e){this.syncTree_=t,this.path_=e}function Hl(t,e,n,r){return Yl(e,new Bl(n,t),r)}function zl(t,e,n){return Yl(t,new Vl(e),n)}var Gl=function(t,e,n){return t&&"object"==typeof t?(Ys(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Kl(t[".sv"],e,n):"object"==typeof t[".sv"]?Ql(t[".sv"],e):void Ys(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Kl=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Ys(!1,"Unexpected server value: "+t)}},Ql=function(t,e,n){t.hasOwnProperty("increment")||Ys(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Ys(!1,"Unexpected increment value: "+r);var i=e.node();if(Ys(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r};function Yl(t,e,n){var r=t.getPriority().val(),i=Gl(r,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var o=t,s=Gl(o.getValue(),e,n);return s!==o.getValue()||i!==o.getPriority().val()?new Gc(s,wl(i)):t}var a=t,u=a;return i!==a.getPriority().val()&&(u=u.updatePriority(new Gc(i))),a.forEachChild(Yc,(function(t,r){var i=Yl(r,e.getImmediateChild(t),n);i!==r&&(u=u.updateImmediateChild(t,i))})),u}var Xl,$l,Jl=(Zl.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&0<this.children.size){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},Zl.prototype.remember=function(t,e){var n,r;t.isEmpty()?(this.value=e,this.children.clear()):null!==this.value?this.value=this.value.updateChild(t,e):(n=t.getFront(),this.children.has(n)||this.children.set(n,new Zl),r=this.children.get(n),t=t.popFront(),r.remember(t,e))},Zl.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Yc,(function(t,e){n.remember(new Xu(t),e)})),this.forget(t)}if(0<this.children.size){var r=t.getFront();return t=t.popFront(),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},Zl.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new Xu(t.toString()+"/"+n);r.forEachTree(i,e)}))},Zl.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},Zl);function Zl(){this.value=null,this.children=new Map}($l=Xl=Xl||{})[$l.OVERWRITE=0]="OVERWRITE",$l[$l.MERGE=1]="MERGE",$l[$l.ACK_USER_WRITE=2]="ACK_USER_WRITE",$l[$l.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var th=(eh.User=new eh(!0,!1,null,!1),eh.Server=new eh(!1,!0,null,!1),eh.forServerTaggedQuery=function(t){return new eh(!1,!0,t,!0)},eh);function eh(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,Ys(!r||e,"Tagged queries must be from server.")}var nh,rh=(ih.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Ys(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new Xu(t));return new ih(Xu.Empty,e,this.revert)}return Ys(this.path.getFront()===t,"operationForChild called for unrelated child."),new ih(this.path.popFront(),this.affectedTree,this.revert)},ih);function ih(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Xl.ACK_USER_WRITE,this.source=th.User}var oh=(sh.fromObject=function(t){var e=sh.Empty;return Hu(t,(function(t,n){e=e.set(new Xu(t),n)})),e},sh.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},sh.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Xu.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null===r)return null;var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null==i?null:{path:new Xu(n).child(i.path),value:i.value}},sh.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},sh.prototype.subtree=function(t){if(t.isEmpty())return this;var e=t.getFront(),n=this.children.get(e);return null!==n?n.subtree(t.popFront()):sh.Empty},sh.prototype.set=function(t,e){if(t.isEmpty())return new sh(e,this.children);var n=t.getFront(),r=(this.children.get(n)||sh.Empty).set(t.popFront(),e),i=this.children.insert(n,r);return new sh(this.value,i)},sh.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?sh.Empty:new sh(null,this.children);var e=t.getFront(),n=this.children.get(e);if(n){var r=n.remove(t.popFront()),i=void 0;return i=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&i.isEmpty()?sh.Empty:new sh(this.value,i)}return this},sh.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},sh.prototype.setTree=function(t,e){if(t.isEmpty())return e;var n=t.getFront(),r=(this.children.get(n)||sh.Empty).setTree(t.popFront(),e),i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r);return new sh(this.value,i)},sh.prototype.fold=function(t){return this.fold_(Xu.Empty,t)},sh.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(t.child(r),e)})),e(t,this.value,n)},sh.prototype.findOnPath=function(t,e){return this.findOnPath_(t,Xu.Empty,e)},sh.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},sh.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,Xu.Empty,e)},sh.prototype.foreachOnPath_=function(t,e,n){if(t.isEmpty())return this;this.value&&n(e,this.value);var r=t.getFront(),i=this.children.get(r);return i?i.foreachOnPath_(t.popFront(),e.child(r),n):sh.Empty},sh.prototype.foreach=function(t){this.foreach_(Xu.Empty,t)},sh.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(t.child(n),e)})),this.value&&e(t,this.value)},sh.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},sh.Empty=new sh(null),sh);function sh(t,e){void 0===e&&(e=nh=nh||new nl(ku)),this.value=t,this.children=e}var ah=(uh.prototype.operationForChild=function(t){return this.path.isEmpty()?new uh(this.source,Xu.Empty):new uh(this.source,this.path.popFront())},uh);function uh(t,e){this.source=t,this.path=e,this.type=Xl.LISTEN_COMPLETE}var ch=(lh.prototype.operationForChild=function(t){return this.path.isEmpty()?new lh(this.source,Xu.Empty,this.snap.getImmediateChild(t)):new lh(this.source,this.path.popFront(),this.snap)},lh);function lh(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Xl.OVERWRITE}var hh=(fh.prototype.operationForChild=function(t){if(this.path.isEmpty()){var e=this.children.subtree(new Xu(t));return e.isEmpty()?null:e.value?new ch(this.source,Xu.Empty,e.value):new fh(this.source,Xu.Empty,e)}return Ys(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new fh(this.source,this.path.popFront(),this.children)},fh.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},fh);function fh(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Xl.MERGE}var ph=(dh.prototype.isFullyInitialized=function(){return this.fullyInitialized_},dh.prototype.isFiltered=function(){return this.filtered_},dh.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},dh.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},dh.prototype.getNode=function(){return this.node_},dh);function dh(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}var vh=(yh.prototype.updateEventSnap=function(t,e,n){return new yh(new ph(t,e,n),this.serverCache_)},yh.prototype.updateServerSnap=function(t,e,n){return new yh(this.eventCache_,new ph(t,e,n))},yh.prototype.getEventCache=function(){return this.eventCache_},yh.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},yh.prototype.getServerCache=function(){return this.serverCache_},yh.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},yh.Empty=new yh(new ph(yl.EMPTY_NODE,!1,!1),new ph(yl.EMPTY_NODE,!1,!1)),yh);function yh(t,e){this.eventCache_=t,this.serverCache_=e}var gh=(mh.valueChange=function(t){return new mh(mh.VALUE,t)},mh.childAddedChange=function(t,e){return new mh(mh.CHILD_ADDED,e,t)},mh.childRemovedChange=function(t,e){return new mh(mh.CHILD_REMOVED,e,t)},mh.childChangedChange=function(t,e,n){return new mh(mh.CHILD_CHANGED,e,t,n)},mh.childMovedChange=function(t,e){return new mh(mh.CHILD_MOVED,e,t)},mh.CHILD_ADDED="child_added",mh.CHILD_REMOVED="child_removed",mh.CHILD_CHANGED="child_changed",mh.CHILD_MOVED="child_moved",mh.VALUE="value",mh);function mh(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}var bh=(_h.prototype.updateChild=function(t,e,n,r,i,o){Ys(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(gh.childRemovedChange(e,s)):Ys(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(gh.childAddedChange(e,n)):o.trackChildChange(gh.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},_h.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Yc,(function(t,r){e.hasChild(t)||n.trackChildChange(gh.childRemovedChange(t,r))})),e.isLeafNode()||e.forEachChild(Yc,(function(e,r){var i;t.hasChild(e)?(i=t.getImmediateChild(e)).equals(r)||n.trackChildChange(gh.childChangedChange(e,r,i)):n.trackChildChange(gh.childAddedChange(e,r))}))),e.withIndex(this.index_)},_h.prototype.updatePriority=function(t,e){return t.isEmpty()?yl.EMPTY_NODE:t.updatePriority(e)},_h.prototype.filtersNodes=function(){return!1},_h.prototype.getIndexedFilter=function(){return this},_h.prototype.getIndex=function(){return this.index_},_h);function _h(t){this.index_=t}var wh=(Eh.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Ys(e===gh.CHILD_ADDED||e===gh.CHILD_CHANGED||e===gh.CHILD_REMOVED,"Only child changes supported for tracking"),Ys(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===gh.CHILD_ADDED&&i===gh.CHILD_REMOVED)this.changeMap.set(n,gh.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===gh.CHILD_REMOVED&&i===gh.CHILD_ADDED)this.changeMap.delete(n);else if(e===gh.CHILD_REMOVED&&i===gh.CHILD_CHANGED)this.changeMap.set(n,gh.childRemovedChange(n,r.oldSnap));else if(e===gh.CHILD_CHANGED&&i===gh.CHILD_ADDED)this.changeMap.set(n,gh.childAddedChange(n,t.snapshotNode));else{if(e!==gh.CHILD_CHANGED||i!==gh.CHILD_CHANGED)throw Xs("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,gh.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},Eh.prototype.getChanges=function(){return Array.from(this.changeMap.values())},Eh);function Eh(){this.changeMap=new Map}function Th(){}var Ih=new(Th.prototype.getCompleteChild=function(t){return null},Th.prototype.getChildAfterChild=function(t,e,n){return null},Th),Sh=(Ch.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new ph(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},Ch.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},Ch);function Ch(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}var kh=function(t,e){this.viewCache=t,this.changes=e},Nh=(Ah.prototype.assertIndexed=function(t){Ys(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Ys(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},Ah.prototype.applyOperation=function(t,e,n,r){var i,o=new wh;if(e.type===Xl.OVERWRITE)var s=e,a=s.source.fromUser?this.applyUserOverwrite_(t,s.path,s.snap,n,r,o):(Ys(s.source.fromServer,"Unknown source."),i=s.source.tagged||t.getServerCache().isFiltered()&&!s.path.isEmpty(),this.applyServerOverwrite_(t,s.path,s.snap,n,r,i,o));else if(e.type===Xl.MERGE){var u=e;a=u.source.fromUser?this.applyUserMerge_(t,u.path,u.children,n,r,o):(Ys(u.source.fromServer,"Unknown source."),i=u.source.tagged||t.getServerCache().isFiltered(),this.applyServerMerge_(t,u.path,u.children,n,r,i,o))}else if(e.type===Xl.ACK_USER_WRITE){var c=e;a=c.revert?this.revertUserWrite_(t,c.path,n,r,o):this.ackUserWrite_(t,c.path,c.affectedTree,n,r,o)}else{if(e.type!==Xl.LISTEN_COMPLETE)throw Xs("Unknown operation type: "+e.type);a=this.listenComplete_(t,e.path,n,o)}var l=o.getChanges();return Ah.maybeAddValueEvent_(t,a,l),new kh(a,l)},Ah.maybeAddValueEvent_=function(t,e,n){var r,i,o=e.getEventCache();o.isFullyInitialized()&&(r=o.getNode().isLeafNode()||o.getNode().isEmpty(),i=t.getCompleteEventSnap(),(0<n.length||!t.getEventCache().isFullyInitialized()||r&&!o.getNode().equals(i)||!o.getNode().getPriority().equals(i.getPriority()))&&n.push(gh.valueChange(e.getCompleteEventSnap())))},Ah.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s,a,u,c,l,h,f,p,d,v,y,g=void 0;return y=e.isEmpty()?(Ys(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()?(a=(s=t.getCompleteServerSnap())instanceof yl?s:yl.EMPTY_NODE,u=n.calcCompleteEventChildren(a),this.filter_.updateFullNode(t.getEventCache().getNode(),u,i)):(c=n.calcCompleteEventCache(t.getCompleteServerSnap()),this.filter_.updateFullNode(t.getEventCache().getNode(),c,i))):".priority"===(l=e.getFront())?(Ys(1===e.getLength(),"Can't have a priority with additional path components"),h=o.getNode(),g=t.getServerCache().getNode(),null!=(f=n.calcEventCacheAfterServerOverwrite(e,h,g))?this.filter_.updatePriority(h,f):o.getNode()):(p=e.popFront(),null!=(v=o.isCompleteForChild(l)?(g=t.getServerCache().getNode(),null!=(d=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),g))?o.getNode().getImmediateChild(l).updateChild(p,d):o.getNode().getImmediateChild(l)):n.calcCompleteChild(l,t.getServerCache()))?this.filter_.updateChild(o.getNode(),l,v,p,r,i):o.getNode()),t.updateEventSnap(y,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},Ah.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a=t.getServerCache(),u=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())l=u.updateFullNode(a.getNode(),n,null);else if(u.filtersNodes()&&!a.isFiltered())var c=a.getNode().updateChild(e,n),l=u.updateFullNode(a.getNode(),c,null);else{var h=e.getFront();if(!a.isCompleteForPath(e)&&1<e.getLength())return t;var f=e.popFront(),p=a.getNode().getImmediateChild(h).updateChild(f,n);l=".priority"===h?u.updatePriority(a.getNode(),p):u.updateChild(a.getNode(),h,p,f,Ih,null)}var d=t.updateServerSnap(l,a.isFullyInitialized()||e.isEmpty(),u.filtersNodes()),v=new Sh(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,v,s)},Ah.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u,c,l,h,f,p=t.getEventCache(),d=new Sh(r,t,i);return e.isEmpty()?(s=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),t.updateEventSnap(s,!0,this.filter_.filtersNodes())):".priority"===(a=e.getFront())?(s=this.filter_.updatePriority(t.getEventCache().getNode(),n),t.updateEventSnap(s,p.isFullyInitialized(),p.isFiltered())):(u=e.popFront(),c=p.getNode().getImmediateChild(a),h=u.isEmpty()?n:null!=(l=d.getCompleteChild(a))?".priority"===u.getBack()&&l.getChild(u.parent()).isEmpty()?l:l.updateChild(u,n):yl.EMPTY_NODE,c.equals(h)?t:(f=this.filter_.updateChild(p.getNode(),a,h,u,d,o),t.updateEventSnap(f,p.isFullyInitialized(),this.filter_.filtersNodes())))},Ah.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},Ah.prototype.applyUserMerge_=function(t,e,n,r,i,o){var s=this,a=t;return n.foreach((function(n,u){var c=e.child(n);Ah.cacheHasChild_(t,c.getFront())&&(a=s.applyUserOverwrite_(a,c,u,r,i,o))})),n.foreach((function(n,u){var c=e.child(n);Ah.cacheHasChild_(t,c.getFront())||(a=s.applyUserOverwrite_(a,c,u,r,i,o))})),a},Ah.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},Ah.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u=t,c=e.isEmpty()?n:oh.Empty.setTree(e,n),l=t.getServerCache().getNode();return c.children.inorderTraversal((function(e,n){var c,h;l.hasChild(e)&&(c=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(c,n),u=a.applyServerOverwrite_(u,new Xu(e),h,r,i,o,s))})),c.children.inorderTraversal((function(e,n){var c,h,f=!t.getServerCache().isCompleteForChild(e)&&null==n.value;l.hasChild(e)||f||(c=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(c,n),u=a.applyServerOverwrite_(u,new Xu(e),h,r,i,o,s))})),u},Ah.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(e.isEmpty()){var u=oh.Empty;return a.getNode().forEachChild(jc,(function(t,e){u=u.set(new Xu(t),e)})),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=oh.Empty;return n.foreach((function(t,n){var r=e.child(t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))})),this.applyServerMerge_(t,e,c,r,i,s,o)},Ah.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Ih,r)},Ah.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s,a,u,c,l=new Sh(n,t,r),h=t.getEventCache().getNode(),f=void 0;return e.isEmpty()||".priority"===e.getFront()?(a=t.getServerCache().isFullyInitialized()?n.calcCompleteEventCache(t.getCompleteServerSnap()):(s=t.getServerCache().getNode(),Ys(s instanceof yl,"serverChildren would be complete if leaf node"),n.calcCompleteEventChildren(s)),f=this.filter_.updateFullNode(h,a,i)):(u=e.getFront(),null==(c=n.calcCompleteChild(u,t.getServerCache()))&&t.getServerCache().isCompleteForChild(u)&&(c=h.getImmediateChild(u)),(f=null!=c?this.filter_.updateChild(h,u,c,e.popFront(),l,i):t.getEventCache().getNode().hasChild(u)?this.filter_.updateChild(h,u,yl.EMPTY_NODE,e.popFront(),l,i):h).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(f=this.filter_.updateFullNode(f,o,i))),o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(Xu.Empty),t.updateEventSnap(f,o,this.filter_.filtersNodes())},Ah);function Ah(t){this.filter_=t}var Oh=(Ph.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach((function(t){t.type===gh.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(gh.childMovedChange(t.childName,t.snapshotNode))})),this.generateEventsForType_(i,gh.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,gh.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,gh.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,gh.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,gh.VALUE,t,n,e),i},Ph.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,s=n.filter((function(t){return t.type===e}));s.sort(this.compareChanges_.bind(this)),s.forEach((function(e){var n=o.materializeSingleChange_(e,i);r.forEach((function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))}))}))},Ph.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},Ph.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw Xs("Should only compare child_ events.");var n=new Oc(t.childName,t.snapshotNode),r=new Oc(e.childName,e.snapshotNode);return this.index_.compare(n,r)},Ph);function Ph(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}var Rh,xh=(Dh.prototype.getQuery=function(){return this.query_},Dh.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},Dh.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},Dh.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},Dh.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},Dh.prototype.removeEventRegistration=function(t,e){var n,r=[];if(e&&(Ys(null==t,"A cancel should cancel all event registrations."),n=this.query_.path,this.eventRegistrations_.forEach((function(t){var i=t.createCancelEvent(e,n);i&&r.push(i)}))),t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(s)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return r},Dh.prototype.applyOperation=function(t,e,n){t.type===Xl.MERGE&&null!==t.source.queryId&&(Ys(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Ys(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),Ys(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},Dh.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Yc,(function(t,e){n.push(gh.childAddedChange(t,e))})),e.isFullyInitialized()&&n.push(gh.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},Dh.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},Dh);function Dh(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new bh(n.getIndex()),i=n.getNodeFilter();this.processor_=new Nh(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(yl.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(yl.EMPTY_NODE,s.getNode(),null),c=new ph(a,o.isFullyInitialized(),r.filtersNodes()),l=new ph(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new vh(l,c),this.eventGenerator_=new Oh(this.query_)}var Lh=(Object.defineProperty(Mh,"__referenceConstructor",{get:function(){return Ys(Rh,"Reference.ts has not been loaded"),Rh},set:function(t){Ys(!Rh,"__referenceConstructor has already been defined"),Rh=t},enumerable:!1,configurable:!0}),Mh.prototype.isEmpty=function(){return 0===this.views.size},Mh.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var s=this.views.get(o);return Ys(null!=s,"SyncTree gave us an op for an invalid query."),s.applyOperation(t,e,n)}var a=[];try{for(var u=qs(this.views.values()),c=u.next();!c.done;c=u.next())s=c.value,a=a.concat(s.applyOperation(t,e,n))}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a},Mh.prototype.addEventRegistration=function(t,e,n,r,i){var o,s,a,u=t.queryIdentifier(),c=this.views.get(u);return c||(s=!!(o=n.calcCompleteEventCache(i?r:null))||(o=r instanceof yl?n.calcCompleteEventChildren(r):yl.EMPTY_NODE,!1),a=new vh(new ph(o,s,!1),new ph(r,i,!1)),c=new xh(t,a),this.views.set(u,c)),c.addEventRegistration(e),c.getInitialEvents(e)},Mh.prototype.removeEventRegistration=function(t,e,n){var r,i,o=t.queryIdentifier(),s=[],a=[],u=this.hasCompleteView();if("default"===o)try{for(var c=qs(this.views.entries()),l=c.next();!l.done;l=c.next()){var h=Bs(l.value,2),f=h[0],p=h[1];a=a.concat(p.removeEventRegistration(e,n)),p.isEmpty()&&(this.views.delete(f),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery()))}}catch(t){r={error:t}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}else(p=this.views.get(o))&&(a=a.concat(p.removeEventRegistration(e,n)),p.isEmpty()&&(this.views.delete(o),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery())));return u&&!this.hasCompleteView()&&s.push(new Mh.__referenceConstructor(t.repo,t.path)),{removed:s,events:a}},Mh.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=qs(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},Mh.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=qs(this.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r||s.getCompleteServerCache(t)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},Mh.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},Mh.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},Mh.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},Mh.prototype.getCompleteView=function(){var t,e;try{for(var n=qs(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},Mh);function Mh(){this.views=new Map}var Fh=(Uh.prototype.addWrite=function(t,e){if(t.isEmpty())return new Uh(new oh(e));var n=this.writeTree_.findRootMostValueAndPath(t);if(null!=n){var r=n.path,i=n.value,o=Xu.relativePath(r,t);return i=i.updateChild(o,e),new Uh(this.writeTree_.set(r,i))}var s=new oh(e);return new Uh(this.writeTree_.setTree(t,s))},Uh.prototype.addWrites=function(t,e){var n=this;return Hu(e,(function(e,r){n=n.addWrite(t.child(e),r)})),n},Uh.prototype.removeWrite=function(t){return t.isEmpty()?Uh.Empty:new Uh(this.writeTree_.setTree(t,oh.Empty))},Uh.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},Uh.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(Xu.relativePath(e.path,t)):null},Uh.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Yc,(function(e,n){t.push(new Oc(e,n))})):this.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Oc(e,n.value))})),t},Uh.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var e=this.getCompleteNode(t);return new Uh(null!=e?new oh(e):this.writeTree_.subtree(t))},Uh.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},Uh.prototype.apply=function(t){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal((function(n,o){".priority"===n?(Ys(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=t(e.child(n),o,r)})),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(".priority"),i)),r}(Xu.Empty,this.writeTree_,t)},Uh.Empty=new Uh(new oh(null)),Uh);function Uh(t){this.writeTree_=t}var jh=(Vh.prototype.childWrites=function(t){return new qh(t,this)},Vh.prototype.addOverwrite=function(t,e,n,r){Ys(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},Vh.prototype.addMerge=function(t,e,n){Ys(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},Vh.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},Vh.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));Ys(0<=n,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&0<=s;){var a=this.allWrites_[s];a.visible&&(n<=s&&this.recordContainsPath_(a,r.path)?i=!1:r.path.contains(a.path)&&(o=!0)),s--}return!!i&&(o?this.resetTree_():r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):Hu(r.children,(function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))})),!0)},Vh.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},Vh.prototype.calcCompleteEventCache=function(t,e,n,r){if(n||r){var i=this.visibleWrites_.childCompoundWrite(t);if(!r&&i.isEmpty())return e;if(r||null!=e||i.hasCompleteWrite(Xu.Empty)){var o=Vh.layerTree_(this.allWrites_,(function(e){return(e.visible||r)&&(!n||!~n.indexOf(e.writeId))&&(e.path.contains(t)||t.contains(e.path))}),t),s=e||yl.EMPTY_NODE;return o.apply(s)}return null}var a=this.visibleWrites_.getCompleteNode(t);if(null!=a)return a;var u=this.visibleWrites_.childCompoundWrite(t);return u.isEmpty()?e:null!=e||u.hasCompleteWrite(Xu.Empty)?(s=e||yl.EMPTY_NODE,u.apply(s)):null},Vh.prototype.calcCompleteEventChildren=function(t,e){var n=yl.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(Yc,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Yc,(function(t,e){var r=i.childCompoundWrite(new Xu(t)).apply(e);n=n.updateImmediateChild(t,r)})),i.getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},Vh.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Ys(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},Vh.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},Vh.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},Vh.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode(Xu.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},Vh.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},Vh.prototype.resetTree_=function(){this.visibleWrites_=Vh.layerTree_(this.allWrites_,Vh.DefaultFilter_,Xu.Empty),0<this.allWrites_.length?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},Vh.DefaultFilter_=function(t){return t.visible},Vh.layerTree_=function(t,e,n){for(var r=Fh.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var s,a,u=o.path,c=void 0;if(o.snap)n.contains(u)?(c=Xu.relativePath(n,u),r=r.addWrite(c,o.snap)):u.contains(n)&&(c=Xu.relativePath(u,n),r=r.addWrite(Xu.Empty,o.snap.getChild(c)));else{if(!o.children)throw Xs("WriteRecord should have .snap or .children");n.contains(u)?(c=Xu.relativePath(n,u),r=r.addWrites(c,o.children)):u.contains(n)&&((c=Xu.relativePath(u,n)).isEmpty()?r=r.addWrites(Xu.Empty,o.children):(s=_a(o.children,c.getFront()))&&(a=s.getChild(c.popFront()),r=r.addWrite(Xu.Empty,a)))}}}return r},Vh);function Vh(){this.visibleWrites_=Fh.Empty,this.allWrites_=[],this.lastWriteId_=-1}var qh=(Bh.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},Bh.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},Bh.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},Bh.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},Bh.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},Bh.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},Bh.prototype.child=function(t){return new Bh(this.treePath_.child(t),this.writeTree_)},Bh);function Bh(t,e){this.treePath_=t,this.writeTree_=e}var Wh=(Hh.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new ch(th.User,t,e)):[]},Hh.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=oh.fromObject(e);return this.applyOperationToSyncPoints_(new hh(th.User,t,r))},Hh.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=oh.Empty;return null!=n.snap?r=r.set(Xu.Empty,!0):Hu(n.children,(function(t,e){r=r.set(new Xu(t),e)})),this.applyOperationToSyncPoints_(new rh(n.path,r,e))}return[]},Hh.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new ch(th.Server,t,e))},Hh.prototype.applyServerMerge=function(t,e){var n=oh.fromObject(e);return this.applyOperationToSyncPoints_(new hh(th.Server,t,n))},Hh.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new ah(th.Server,t))},Hh.prototype.applyTaggedQueryOverwrite=function(t,e,n){var r=this.queryKeyForTag_(n);if(null==r)return[];var i=Hh.parseQueryKey_(r),o=i.path,s=i.queryId,a=Xu.relativePath(o,t),u=new ch(th.forServerTaggedQuery(s),a,e);return this.applyTaggedOperation_(o,u)},Hh.prototype.applyTaggedQueryMerge=function(t,e,n){var r=this.queryKeyForTag_(n);if(r){var i=Hh.parseQueryKey_(r),o=i.path,s=i.queryId,a=Xu.relativePath(o,t),u=oh.fromObject(e),c=new hh(th.forServerTaggedQuery(s),a,u);return this.applyTaggedOperation_(o,c)}return[]},Hh.prototype.applyTaggedListenComplete=function(t,e){var n=this.queryKeyForTag_(e);if(n){var r=Hh.parseQueryKey_(n),i=r.path,o=r.queryId,s=Xu.relativePath(i,t),a=new ah(th.forServerTaggedQuery(o),s);return this.applyTaggedOperation_(i,a)}return[]},Hh.prototype.addEventRegistration=function(t,e){var n=t.path,r=null,i=!1;this.syncPointTree_.foreachOnPath(n,(function(t,e){var o=Xu.relativePath(t,n);r=r||e.getCompleteServerCache(o),i=i||e.hasCompleteView()}));var o,s=this.syncPointTree_.get(n);s?(i=i||s.hasCompleteView(),r=r||s.getCompleteServerCache(Xu.Empty)):(s=new Lh,this.syncPointTree_=this.syncPointTree_.set(n,s)),null!=r?o=!0:(o=!1,r=yl.EMPTY_NODE,this.syncPointTree_.subtree(n).foreachChild((function(t,e){var n=e.getCompleteServerCache(Xu.Empty);n&&(r=r.updateImmediateChild(t,n))})));var a,u,c=s.viewExistsForQuery(t);c||t.getQueryParams().loadsAllData()||(a=Hh.makeQueryKey_(t),Ys(!this.queryToTagMap.has(a),"View does not exist, but we have a tag"),u=Hh.getNextQueryTag_(),this.queryToTagMap.set(a,u),this.tagToQueryMap.set(u,a));var l,h=this.pendingWriteTree_.childWrites(n),f=s.addEventRegistration(t,e,h,r,o);return c||i||(l=s.viewForQuery(t),f=f.concat(this.setupListener_(t,l))),f},Hh.prototype.removeEventRegistration=function(t,e,n){var r=this,i=t.path,o=this.syncPointTree_.get(i),s=[];if(o&&("default"===t.queryIdentifier()||o.viewExistsForQuery(t))){var a=o.removeEventRegistration(t,e,n);o.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(i));var u=a.removed,c=(s=a.events,-1!==u.findIndex((function(t){return t.getQueryParams().loadsAllData()}))),l=this.syncPointTree_.findOnPath(i,(function(t,e){return e.hasCompleteView()}));if(c&&!l){var h=this.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=this.collectDistinctViewsForSubTree_(h),p=0;p<f.length;++p){var d=f[p],v=d.getQuery(),y=this.createListenerForView_(d);this.listenProvider_.startListening(Hh.queryForListening_(v),this.tagForQuery_(v),y.hashFn,y.onComplete)}}!l&&0<u.length&&!n&&(c?this.listenProvider_.stopListening(Hh.queryForListening_(t),null):u.forEach((function(t){var e=r.queryToTagMap.get(Hh.makeQueryKey_(t));r.listenProvider_.stopListening(Hh.queryForListening_(t),e)}))),this.removeTags_(u)}return s},Hh.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,(function(e,n){var r=Xu.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(t,r,e,!0)},Hh.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),Hu(n,(function(t,e){r=r.concat(e)})),r}))},Hh.prototype.removeTags_=function(t){for(var e=0;e<t.length;++e){var n,r,i=t[e];i.getQueryParams().loadsAllData()||(n=Hh.makeQueryKey_(i),r=this.queryToTagMap.get(n),this.queryToTagMap.delete(n),this.tagToQueryMap.delete(r))}},Hh.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},Hh.prototype.setupListener_=function(t,e){var n=t.path,r=this.tagForQuery_(t),i=this.createListenerForView_(e),o=this.listenProvider_.startListening(Hh.queryForListening_(t),r,i.hashFn,i.onComplete),s=this.syncPointTree_.subtree(n);if(r)Ys(!s.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var a=s.fold((function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),Hu(n,(function(t,e){r=r.concat(e)})),r})),u=0;u<a.length;++u){var c=a[u];this.listenProvider_.stopListening(Hh.queryForListening_(c),this.tagForQuery_(c))}return o},Hh.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||yl.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},Hh.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},Hh.parseQueryKey_=function(t){var e=t.indexOf("$");return Ys(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Xu(t.substr(0,e))}},Hh.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},Hh.prototype.tagForQuery_=function(t){var e=Hh.makeQueryKey_(t);return this.queryToTagMap.get(e)},Hh.getNextQueryTag_=function(){return Hh.nextQueryTag_++},Hh.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Ys(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},Hh.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(Xu.Empty))},Hh.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(Xu.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(Xu.Empty));var o,s,a=[],u=t.path.getFront(),c=t.operationForChild(u),l=e.children.get(u);return l&&c&&(o=n?n.getImmediateChild(u):null,s=r.child(u),a=a.concat(this.applyOperationHelper_(c,l,o,s))),i&&(a=a.concat(i.applyOperation(t,r,n))),a},Hh.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(Xu.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(Xu.Empty));var s=[];return e.children.inorderTraversal((function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))})),o&&(s=s.concat(o.applyOperation(t,r,n))),s},Hh.nextQueryTag_=1,Hh);function Hh(t){this.listenProvider_=t,this.syncPointTree_=oh.Empty,this.pendingWriteTree_=new jh,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}var zh=(Gh.prototype.getNode=function(t){return this.rootNode_.getChild(t)},Gh.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},Gh);function Gh(){this.rootNode_=yl.EMPTY_NODE}var Kh=(Qh.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),ba(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},Qh.prototype.get=function(){return Js(this.counters_)},Qh);function Qh(){this.counters_={}}var Yh=(Xh.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Kh),this.collections_[e]},Xh.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},Xh.collections_={},Xh.reporters_={},Xh);function Xh(){}var $h=(Jh.prototype.get=function(){var t=this.collection_.get(),e=Us({},t);return this.last_&&Hu(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},Jh);function Jh(t){this.collection_=t,this.last_=null}var Zh=(tf.prototype.includeStat=function(t){this.statsToReport_[t]=!0},tf.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;Hu(e,(function(e,i){0<i&&ba(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),Ku(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},tf);function tf(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new $h(t);var n=1e4+2e4*Math.random();Ku(this.reportStats_.bind(this),Math.floor(n))}var ef=(nf.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new rf(i)),e.add(r)}e&&this.eventLists_.push(e)},nf.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.equals(t)}))},nf.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.contains(t)||t.contains(e)}))},nf.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},nf);function nf(){this.eventLists_=[],this.recursionDepth_=0}var rf=(of.prototype.add=function(t){this.events_.push(t)},of.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e,n=this.events_[t];null!==n&&(this.events_[t]=null,e=n.getEventRunner(),Mu&&Uu("event: "+n.toString()),Gu(e))}},of.prototype.getPath=function(){return this.path_},of);function of(t){this.path_=t,this.events_=[]}var sf=(af.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Ws(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},af.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},af.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},af.prototype.validateEventType_=function(t){Ys(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},af);function af(t){this.allowedEvents_=t,this.listeners_={},Ys(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}var uf,cf=(Fs(lf,uf=sf),lf.getInstance=function(){return new lf},lf.prototype.getInitialEvent=function(t){return Ys("visible"===t,"Unknown event type: "+t),[this.visible_]},lf);function lf(){var t,e,n=uf.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),n.visible_=!0,e&&document.addEventListener(e,(function(){var e=!document[t];e!==n.visible_&&(n.visible_=e,n.trigger("visible",e))}),!1),n}var hf,ff=(Fs(pf,hf=sf),pf.getInstance=function(){return new pf},pf.prototype.getInitialEvent=function(t){return Ys("online"===t,"Unknown event type: "+t),[this.online_]},pf.prototype.currentlyOnline=function(){return this.online_},pf);function pf(){var t=hf.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||ra()||(window.addEventListener("online",(function(){t.online_||(t.online_=!0,t.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){t.online_&&(t.online_=!1,t.trigger("online",!1))}),!1)),t}var df=(vf.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},vf.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=this;this.pendingResponses[this.currentResponseNum]&&"break"!==function(){var t=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var e=0;e<t.length;++e)!function(e){t[e]&&Gu((function(){n.onMessage_(t[e])}))}(e);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++}(););},vf);function vf(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var yf=(gf.prototype.open=function(t,e){var n,r,i,o=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new df(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){o.log_("Timed out trying to connect."),o.onClosed_(),o.connectTimeoutTimer_=null}),Math.floor(3e4)),n=function(){var t,e;o.isClosed_||(o.scriptTagHolder=new mf((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Bs(t,5),r=n[0],i=n[1],s=n[2];if(n[3],n[4],o.incrementIncomingBytes_(t),o.scriptTagHolder)if(o.connectTimeoutTimer_&&(clearTimeout(o.connectTimeoutTimer_),o.connectTimeoutTimer_=null),o.everConnected_=!0,"start"===r)o.id=i,o.password=s;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(o.scriptTagHolder.sendNewPolls=!1,o.myPacketOrderer.closeAfter(i,(function(){o.onClosed_()}))):o.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Bs(t,2),r=n[0],i=n[1];o.incrementIncomingBytes_(t),o.myPacketOrderer.handleResponse(r,i)}),(function(){o.onClosed_()}),o.urlFn),(t={start:"t"}).ser=Math.floor(1e8*Math.random()),o.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=o.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",o.transportSessionId&&(t.s=o.transportSessionId),o.lastSessionId&&(t.ls=o.lastSessionId),o.applicationId&&(t.p=o.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(tc)&&(t.r="f"),e=o.urlFn(t),o.log_("Connecting via long-poll to "+e),o.scriptTagHolder.addTag(e,(function(){})))},"complete"===document.readyState?n():(r=!1,i=function(){document.body?r||(r=!0,n()):setTimeout(i,Math.floor(10))},document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&i()})),window.attachEvent("onload",i)))},gf.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},gf.forceAllow=function(){gf.forceAllow_=!0},gf.forceDisallow=function(){gf.forceDisallow_=!0},gf.isAvailable=function(){return!!gf.forceAllow_||!(gf.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},gf.prototype.markConnectionHealthy=function(){},gf.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},gf.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},gf.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},gf.prototype.send=function(t){var e=ga(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n,r=Au((n=zs(e),$s.encodeByteArray(n,!0)),1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},gf.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},gf.prototype.incrementIncomingBytes_=function(t){var e=ga(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},gf);function gf(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ju(t),this.stats_=Yh.getCollection(e),this.urlFn=function(t){return e.connectionURL(nc,t)}}var mf=(bf.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Uu("No IE domain setting required")}catch(i){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},bf.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},bf.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},bf.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;0<this.pendingSegs.length&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},bf.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},bf.prototype.addLongPollTag_=function(t,e){var n=this;function r(){n.outstandingRequests.delete(e),n.newRequest_()}this.outstandingRequests.add(e);var i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},bf.prototype.addTag=function(t,e){var n=this;setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){Uu("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}}),Math.floor(1))},bf);function bf(t,e,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=Du(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=bf.createIFrame_();var i="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(i='<script>document.domain="'+document.domain+'";<\/script>');var o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(t){Uu("frame writing exception"),t.stack&&Uu(t.stack),Uu(t)}}var _f="",wf=null;"undefined"!=typeof MozWebSocket?wf=MozWebSocket:"undefined"!=typeof WebSocket&&(wf=WebSocket);var Ef=(Tf.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(tc)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(ec,r)},Tf.prototype.open=function(t,e){var r,i,o,s,a=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Pu.set("previous_websocket_failure",!0);try{sa()?(r=Ks?"AdminNode":"Node",s={headers:{"User-Agent":"Firebase/5/"+_f+"/"+n.platform+"/"+r,"X-Firebase-GMPID":this.applicationId||""}},i=Object({NODE_ENV:"production",PUBLIC_URL:"/React-app-Todos",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}),(o=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy)&&(s.proxy={origin:o})):s={headers:{"X-Firebase-GMPID":this.applicationId||""}},this.mySock=new wf(this.connURL,[],s)}catch(t){this.log_("Error instantiating WebSocket.");var u=t.message||t.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){a.log_("Websocket connected."),a.everConnected_=!0},this.mySock.onclose=function(){a.log_("Websocket connection was disconnected."),a.mySock=null,a.onClosed_()},this.mySock.onmessage=function(t){a.handleIncomingFrame(t)},this.mySock.onerror=function(t){a.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&a.log_(e),a.onClosed_()}},Tf.prototype.start=function(){},Tf.forceDisallow=function(){Tf.forceDisallow_=!0},Tf.isAvailable=function(){var t,e=!1;return"undefined"!=typeof navigator&&navigator.userAgent&&(t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/))&&1<t.length&&parseFloat(t[1])<4.4&&(e=!0),!e&&null!==wf&&!Tf.forceDisallow_},Tf.previouslyFailed=function(){return Pu.isInMemoryStorage||!0===Pu.get("previous_websocket_failure")},Tf.prototype.markConnectionHealthy=function(){Pu.remove("previous_websocket_failure")},Tf.prototype.appendFrame_=function(t){var e,n;this.frames.push(t),this.frames.length===this.totalFrames&&(e=this.frames.join(""),this.frames=null,n=ya(e),this.onMessage(n))},Tf.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},Tf.prototype.extractFrameCount_=function(t){if(Ys(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},Tf.prototype.handleIncomingFrame=function(t){var e,n;null!==this.mySock&&(e=t.data,this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames?this.appendFrame_(e):null!==(n=this.extractFrameCount_(e))&&this.appendFrame_(n))},Tf.prototype.send=function(t){this.resetKeepAlive();var e=ga(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=Au(e,16384);1<n.length&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},Tf.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},Tf.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},Tf.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},Tf.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},Tf.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},Tf.responsesRequiredToBeHealthy=2,Tf.healthyTimeout=3e4,Tf);function Tf(t,e,n,r,i){this.connId=t,this.applicationId=n,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ju(this.connId),this.stats_=Yh.getCollection(e),this.connURL=Tf.connectionURL_(e,r,i)}var If=(Object.defineProperty(Sf,"ALL_TRANSPORTS",{get:function(){return[yf,Ef]},enumerable:!1,configurable:!0}),Sf.prototype.initTransports_=function(t){var e,n,r=Ef&&Ef.isAvailable(),i=r&&!Ef.previouslyFailed();if(t.webSocketOnly&&(r||Su("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ef];else{var o=this.transports_=[];try{for(var s=qs(Sf.ALL_TRANSPORTS),a=s.next();!a.done;a=s.next()){var u=a.value;u&&u.isAvailable()&&o.push(u)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}}},Sf.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},Sf.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},Sf);function Sf(t){this.initTransports_(t)}var Cf=(kf.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;0<i&&(this.healthyTimeout_=Ku((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},kf.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},kf.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},kf.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},kf.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},kf.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},kf.prototype.onSecondaryControl_=function(t){var e;"t"in t&&("a"===(e=t.t)?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_()))},kf.prototype.onSecondaryMessageReceived_=function(t){var e=Nu("t",t),n=Nu("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},kf.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},kf.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},kf.prototype.onPrimaryMessageReceived_=function(t){var e=Nu("t",t),n=Nu("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},kf.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},kf.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},kf.prototype.onControl_=function(t){var e=Nu("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?Tu("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Tu("Unknown control packet command: "+e)}},kf.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&Su("Protocol version mismatch detected"),this.tryStartUpgrade_())},kf.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},kf.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ku((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},kf.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},kf.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ku((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},kf.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},kf.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},kf.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Pu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},kf.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},kf.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},kf.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},kf.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},kf);function kf(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ju("c:"+this.id+":"),this.transportManager_=new If(e),this.log_("Connection created"),this.start_()}var Nf=(Af.prototype.put=function(t,e,n,r){},Af.prototype.merge=function(t,e,n,r){},Af.prototype.refreshAuthToken=function(t){},Af.prototype.onDisconnectPut=function(t,e,n){},Af.prototype.onDisconnectMerge=function(t,e,n){},Af.prototype.onDisconnectCancel=function(t,e){},Af.prototype.reportStats=function(t){},Af);function Af(){}var Of,Pf=1e3,Rf=(Fs(xf,Of=Nf),xf.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(ga(i)),Ys(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},xf.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Ys(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Ys(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)},xf.prototype.sendListen_=function(t){var e=this,n=t.query,r=n.path.toString(),i=n.queryIdentifier();this.log_("Listen on "+r+" for "+i);var o={p:r};t.tag&&(o.q=n.queryObject(),o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,a=o.s;xf.warnOnListenWarnings_(s,n),(e.listens.get(r)&&e.listens.get(r).get(i))===t&&(e.log_("listen response",o),"ok"!==a&&e.removeListen_(r,i),t.onComplete&&t.onComplete(a,s))}))},xf.warnOnListenWarnings_=function(t,e){var n;t&&"object"==typeof t&&ba(t,"w")&&(n=_a(t,"w"),Array.isArray(n)&&~n.indexOf("no_index")&&Su('Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ".indexOn": "'+e.getQueryParams().getIndex().toString()+'" at '+e.path.toString()+" to your security rules for better performance."))},xf.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},xf.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e;(t&&40===t.length||"object"==typeof(e=ma(t).claims)&&!0===e.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},xf.prototype.tryAuth=function(){var t,e,n,r,i=this;this.connected_&&this.authToken_&&(e=(r=ma(t=this.authToken_).claims)&&"object"==typeof r&&r.hasOwnProperty("iat")?"auth":"gauth",n={cred:t},null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(e,n,(function(e){var n=e.s,r=e.d||"error";i.authToken_===t&&("ok"===n?i.invalidAuthTokenCount_=0:i.onAuthRevoked_(n,r))})))},xf.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Ys(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},xf.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},xf.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},xf.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},xf.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},xf.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},xf.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},xf.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},xf.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+e)},xf.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},xf.prototype.reportStats=function(t){var e,n=this;this.connected_&&(e={c:t},this.log_("reportStats",e),this.sendRequest("s",e,(function(t){var e;"ok"!==t.s&&(e=t.d,n.log_("reportStats","Error sending stats: "+e))})))},xf.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+ga(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},xf.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):Tu("Unrecognized action received from server: "+ga(t)+"\nAre you using the latest client?")},xf.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},xf.prototype.scheduleConnect_=function(t){var e=this;Ys(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},xf.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Pf,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},xf.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Pf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},xf.prototype.onRealtimeDisconnect_=function(){var t,e;this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()&&(this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=Pf),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime()),t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t),e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)),this.onConnectStatus_(!1)},xf.prototype.establishConnection_=function(){var t,e,n,r,i,o,s,a,u,c;this.shouldReconnect_()&&(this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),e=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+xf.nextConnectionId_++,o=(i=this).lastSessionId,s=!1,a=null,u=function(){a?a.close():(s=!0,n())},this.realtime_={close:u,sendRequest:function(t){Ys(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(t)}},c=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(c).then((function(u){s?Uu("getToken() completed but was canceled"):(Uu("getToken() completed. Creating connection."),i.authToken_=u&&u.accessToken,a=new Cf(r,i.repoInfo_,i.applicationId_,t,e,n,(function(t){Su(t+" ("+i.repoInfo_.toString()+")"),i.interrupt("server_kill")}),o))})).then(null,(function(t){i.log_("Failed to get token: "+t),s||u()})))},xf.prototype.interrupt=function(t){Uu("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},xf.prototype.resume=function(t){Uu("Resuming connection for reason: "+t),delete this.interruptReasons_[t],wa(this.interruptReasons_)&&(this.reconnectDelay_=Pf,this.realtime_||this.scheduleConnect_(0))},xf.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},xf.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},xf.prototype.onListenRevoked_=function(t,e){var n=e?e.map((function(t){return Wu(t)})).join("$"):"default",r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},xf.prototype.removeListen_=function(t,e){var n,r,i=new Xu(t).toString();return this.listens.has(i)?(r=(n=this.listens.get(i)).get(e),n.delete(e),0===n.size&&this.listens.delete(i)):r=void 0,r},xf.prototype.onAuthRevoked_=function(t,e){Uu("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},xf.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},xf.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=qs(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,qs(s.values())),u=a.next();!u.done;u=a.next()){var c=u.value;this.sendListen_(c)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}},xf.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+_f.replace(/\./g,"-")]=1,ra()?t["framework.cordova"]=1:oa()&&(t["framework.reactnative"]=1),this.reportStats(t)},xf.prototype.shouldReconnect_=function(){var t=ff.getInstance().currentlyOnline();return wa(this.interruptReasons_)&&t},xf.nextPersistentConnectionId_=0,xf.nextConnectionId_=0,xf);function xf(t,e,n,r,i,o,s){var a=Of.call(this)||this;if(a.repoInfo_=t,a.applicationId_=e,a.onDataUpdate_=n,a.onConnectStatus_=r,a.onServerInfoUpdate_=i,a.authTokenProvider_=o,a.authOverride_=s,a.id=xf.nextPersistentConnectionId_++,a.log_=ju("p:"+a.id+":"),a.interruptReasons_={},a.listens=new Map,a.outstandingPuts_=[],a.outstandingPutCount_=0,a.onDisconnectRequestQueue_=[],a.connected_=!1,a.reconnectDelay_=Pf,a.maxReconnectDelay_=3e5,a.securityDebugCallback_=null,a.lastSessionId=null,a.establishConnectionTimer_=null,a.visible_=!1,a.requestCBHash_={},a.requestNumber_=0,a.realtime_=null,a.authToken_=null,a.forceTokenRefresh_=!1,a.invalidAuthTokenCount_=0,a.firstConnection_=!0,a.lastConnectionAttemptTime_=null,a.lastConnectionEstablishedTime_=null,s&&!sa())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return a.scheduleConnect_(0),cf.getInstance().on("visible",a.onVisible_,a),-1===t.host.indexOf("fblocal")&&ff.getInstance().on("online",a.onOnline_,a),a}var Df,Lf=(Fs(Mf,Df=Nf),Mf.prototype.reportStats=function(t){throw new Error("Method not implemented.")},Mf.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Ys(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},Mf.prototype.listen=function(t,e,n,r){var i=this,o=t.path.toString();this.log_("Listen called for "+o+" "+t.queryIdentifier());var s=Mf.getListenId_(t,n),a={};this.listens_[s]=a;var u=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(o+".json",u,(function(t,e){var u=e;404===t&&(t=u=null),null===t&&i.onDataUpdate_(o,u,!1,n),_a(i.listens_,s)===a&&r(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},Mf.prototype.unlisten=function(t,e){var n=Mf.getListenId_(t,e);delete this.listens_[n]},Mf.prototype.refreshAuthToken=function(t){},Mf.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var o=i&&i.accessToken;o&&(e.auth=o);var s=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+function(t){for(var e=[],n=0,r=Object.entries(t);n<r.length;n++){var i=r[n];!function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}(i[0],i[1])}return e.length?"&"+e.join("&"):""}(e);r.log_("Sending REST request for "+s);var a=new XMLHttpRequest;a.onreadystatechange=function(){if(n&&4===a.readyState){r.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);var t=null;if(200<=a.status&&a.status<300){try{t=ya(a.responseText)}catch(t){Su("Failed to parse JSON response for "+s+": "+a.responseText)}n(null,t)}else 401!==a.status&&404!==a.status&&Su("Got unsuccessful REST response for "+s+" Status: "+a.status),n(a.status);n=null}},a.open("GET",s,!0),a.send()}))},Mf);function Mf(t,e,n){var r=Df.call(this)||this;return r.repoInfo_=t,r.onDataUpdate_=e,r.authTokenProvider_=n,r.log_=ju("p:rest:"),r.listens_={},r}var Ff="repo_interrupt",Uf=(jf.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},jf.prototype.name=function(){return this.repoInfo_.namespace},jf.prototype.serverTime=function(){var t=this.infoData_.getNode(new Xu(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},jf.prototype.generateServerValues=function(){return(t=t={timestamp:this.serverTime()}).timestamp=t.timestamp||(new Date).getTime(),t;var t},jf.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new Xu(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o,s,a,u,c,l=i;0<(c=r?n?(o=Ea(e,(function(t){return wl(t)})),this.serverSyncTree_.applyTaggedQueryMerge(i,o,r)):(s=wl(e),this.serverSyncTree_.applyTaggedQueryOverwrite(i,s,r)):n?(a=Ea(e,(function(t){return wl(t)})),this.serverSyncTree_.applyServerMerge(i,a)):(u=wl(e),this.serverSyncTree_.applyServerOverwrite(i,u))).length&&(l=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(l,c)},jf.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},jf.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},jf.prototype.onServerInfoUpdate_=function(t){var e=this;Hu(t,(function(t,n){e.updateInfo_(t,n)}))},jf.prototype.updateInfo_=function(t,e){var n=new Xu("/.info/"+t),r=wl(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},jf.prototype.getNextWriteId_=function(){return this.nextWriteId_++},jf.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=wl(e,n),a=zl(s,this.serverSyncTree_.calcCompleteEventCache(t),o),u=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserOverwrite(t,a,u,!0);this.eventQueue_.queueEvents(c),this.server_.put(t.toString(),s.val(!0),(function(e,n){var o="ok"===e;o||Su("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(u,!o);i.eventQueue_.raiseEventsForChangedPath(t,s),i.callOnCompleteCallback(r,e,n)}));var l=this.abortTransactions_(t);this.rerunTransactions_(l),this.eventQueue_.raiseEventsForChangedPath(l,[])},jf.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i,o,s=!0,a=this.generateServerValues(),u={};Hu(e,(function(e,n){s=!1,u[e]=Hl(t.child(e),wl(n),r.serverSyncTree_,a)})),s?(Uu("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok")):(i=this.getNextWriteId_(),o=this.serverSyncTree_.applyUserMerge(t,u,i),this.eventQueue_.queueEvents(o),this.server_.merge(t.toString(),e,(function(e,o){var s="ok"===e;s||Su("update at "+t+" failed: "+e);var a=r.serverSyncTree_.ackUserWrite(i,!s),u=0<a.length?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,a),r.callOnCompleteCallback(n,e,o)})),Hu(e,(function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(t,[]))},jf.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new Jl;this.onDisconnect_.forEachTree(Xu.Empty,(function(r,i){var o=Hl(r,i,t.serverSyncTree_,e);n.remember(r,o)}));var r=[];n.forEachTree(Xu.Empty,(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new Jl,this.eventQueue_.raiseEventsForChangedPath(Xu.Empty,r)},jf.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},jf.prototype.onDisconnectSet=function(t,e,n){var r=this,i=wl(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},jf.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=wl(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},jf.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(wa(e))return Uu("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&Hu(e,(function(e,n){var i=wl(n);r.onDisconnect_.remember(t.child(e),i)})),r.callOnCompleteCallback(n,i,o)}))},jf.prototype.addEventCallbackForQuery=function(t,e){var n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e);this.eventQueue_.raiseEventsAtPath(t.path,n)},jf.prototype.removeEventCallbackForQuery=function(t,e){var n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e);this.eventQueue_.raiseEventsAtPath(t.path,n)},jf.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(Ff)},jf.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(Ff)},jf.prototype.stats=function(t){var e,n;void 0===t&&(t=!1),"undefined"!=typeof console&&(e=t?(this.statsListener_||(this.statsListener_=new $h(this.stats_)),this.statsListener_.get()):this.stats_.get(),n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0),Hu(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)})))},jf.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},jf.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),Uu.apply(void 0,Ws([n],t))},jf.prototype.callOnCompleteCallback=function(t,e,n){t&&Gu((function(){var r,i,o;"ok"===e?t(null):(i=r=(e||"error").toUpperCase(),n&&(i+=": "+n),(o=new Error(i)).code=r,t(o))}))},Object.defineProperty(jf.prototype,"database",{get:function(){return this.__database||(this.__database=new sp(this))},enumerable:!1,configurable:!0}),jf);function jf(t,e,n,r){var i=this;if(this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ef,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Jl,this.persistentConnection_=null,this.stats_=Yh.getCollection(t),e||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.server_=new Lf(this.repoInfo_,this.onDataUpdate_.bind(this),r),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var o=n.options.databaseAuthVariableOverride;if(null!=o){if("object"!=typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ga(o)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new Rf(this.repoInfo_,n.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),r,o),this.server_=this.persistentConnection_}r.addTokenChangeListener((function(t){i.server_.refreshAuthToken(t)})),this.statsReporter_=Yh.getOrCreateReporter(t,(function(){return new Zh(i.stats_,i.server_)})),this.transactionsInit_(),this.infoData_=new zh,this.infoSyncTree_=new Wh({startListening:function(t,e,n,r){var o=[],s=i.infoData_.getNode(t.path);return s.isEmpty()||(o=i.infoSyncTree_.applyServerOverwrite(t.path,s),setTimeout((function(){r("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Wh({startListening:function(t,e,n,r){return i.server_.listen(t,n,e,(function(e,n){var o=r(e,n);i.eventQueue_.raiseEventsForChangedPath(t.path,o)})),[]},stopListening:function(t,e){i.server_.unlisten(t,e)}})}var Vf=(qf.prototype.getStartPost=function(){return this.startPost_},qf.prototype.getEndPost=function(){return this.endPost_},qf.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},qf.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Oc(e,n))||(n=yl.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},qf.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=yl.EMPTY_NODE);var r=(r=e.withIndex(this.index_)).updatePriority(yl.EMPTY_NODE),i=this;return e.forEachChild(Yc,(function(t,e){i.matches(new Oc(t,e))||(r=r.updateImmediateChild(t,yl.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},qf.prototype.updatePriority=function(t,e){return t},qf.prototype.filtersNodes=function(){return!0},qf.prototype.getIndexedFilter=function(){return this.indexedFilter_},qf.prototype.getIndex=function(){return this.index_},qf.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},qf.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},qf);function qf(t){this.indexedFilter_=new bh(t.getIndex()),this.index_=t.getIndex(),this.startPost_=qf.getStartPost_(t),this.endPost_=qf.getEndPost_(t)}var Bf=(Wf.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Oc(e,n))||(n=yl.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},Wf.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=yl.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=yl.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(yl.EMPTY_NODE);var a,u=void 0,c=void 0,l=void 0;i=void 0,l=this.reverse_?(i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost(),a=this.index_.getCompare(),function(t,e){return a(e,t)}):(i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),this.index_.getCompare()),o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&l(u,s)<=0&&(h=!0),h&&o<this.limit_&&l(s,c)<=0?o++:r=r.updateImmediateChild(s.name,yl.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},Wf.prototype.updatePriority=function(t,e){return t},Wf.prototype.filtersNodes=function(){return!0},Wf.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},Wf.prototype.getIndex=function(){return this.index_},Wf.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o,s;s=this.reverse_?(o=this.index_.getCompare(),function(t,e){return o(e,t)}):this.index_.getCompare();var a=t;Ys(a.numChildren()===this.limit_,"");var u=new Oc(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(a.hasChild(e)){for(var h=a.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,u);if(l&&!n.isEmpty()&&0<=p)return null!=i&&i.trackChildChange(gh.childChangedChange(e,n,h)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange(gh.childRemovedChange(e,h));var d=a.updateImmediateChild(e,yl.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(gh.childAddedChange(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return!n.isEmpty()&&l&&0<=s(c,u)?(null!=i&&(i.trackChildChange(gh.childRemovedChange(c.name,c.node)),i.trackChildChange(gh.childAddedChange(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,yl.EMPTY_NODE)):t},Wf);function Wf(t){this.rangedFilter_=new Vf(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}var Hf=(zf.prototype.hasStart=function(){return this.startSet_},zf.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===zf.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},zf.prototype.getIndexStartValue=function(){return Ys(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},zf.prototype.getIndexStartName=function(){return Ys(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Vu},zf.prototype.hasEnd=function(){return this.endSet_},zf.prototype.getIndexEndValue=function(){return Ys(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},zf.prototype.getIndexEndName=function(){return Ys(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:qu},zf.prototype.hasLimit=function(){return this.limitSet_},zf.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},zf.prototype.getLimit=function(){return Ys(this.limitSet_,"Only valid if limit has been set"),this.limit_},zf.prototype.getIndex=function(){return this.index_},zf.prototype.copy_=function(){var t=new zf;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},zf.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},zf.prototype.limitToFirst=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=zf.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,e},zf.prototype.limitToLast=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=zf.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,e},zf.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},zf.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},zf.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},zf.prototype.getQueryObject=function(){var t,e=zf.WIRE_PROTOCOL_CONSTANTS_,n={};return this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_&&(n[e.LIMIT]=this.limit_,""===(t=this.viewFrom_)&&(t=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=t),this.index_!==Yc&&(n[e.INDEX]=this.index_.toString()),n},zf.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},zf.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Yc},zf.prototype.getNodeFilter=function(){return this.loadsAllData()?new bh(this.getIndex()):new(this.hasLimit()?Bf:Vf)(this)},zf.prototype.toRestQueryStringParameters=function(){var t,e=zf.REST_QUERY_CONSTANTS_,n={};return this.isDefault()||(t=this.index_===Yc?e.PRIORITY_INDEX:this.index_===Il?e.VALUE_INDEX:this.index_===jc?e.KEY_INDEX:(Ys(this.index_ instanceof Sl,"Unrecognized index type!"),this.index_.toString()),n[e.ORDER_BY]=ga(t),this.startSet_&&(n[e.START_AT]=ga(this.indexStartValue_),this.startNameSet_&&(n[e.START_AT]+=","+ga(this.indexStartName_))),this.endSet_&&(n[e.END_AT]=ga(this.indexEndValue_),this.endNameSet_&&(n[e.END_AT]+=","+ga(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[e.LIMIT_TO_FIRST]=this.limit_:n[e.LIMIT_TO_LAST]=this.limit_)),n},zf.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},zf.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},zf.DEFAULT=new zf,zf);function zf(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Yc}var Gf,Kf=(Fs(Qf,Gf=Ul),Qf.prototype.getKey=function(){return Aa("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},Qf.prototype.child=function(t){var e,n,r;return Aa("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof Xu||(null===this.path.getFront()?(r=!(e=1),dc("Reference.child",e,n=(n=t)&&n.replace(/^\/*\.info(\/|$)/,"/"),r)):dc("Reference.child",1,t,!1)),new Qf(this.repo,this.path.child(t))},Qf.prototype.getParent=function(){Aa("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new Qf(this.repo,t)},Qf.prototype.getRoot=function(){Aa("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},Qf.prototype.databaseProp=function(){return this.repo.database},Qf.prototype.set=function(t,e){Aa("Reference.set",1,2,arguments.length),vc("Reference.set",this.path),cc("Reference.set",1,t,this.path,!1),Pa("Reference.set",2,e,!0);var n=new ta;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},Qf.prototype.update=function(t,e){if(Aa("Reference.update",1,2,arguments.length),vc("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Su("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}lc("Reference.update",1,t,this.path,!1),Pa("Reference.update",2,e,!0);var i=new ta;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},Qf.prototype.setWithPriority=function(t,e,n){if(Aa("Reference.setWithPriority",2,3,arguments.length),vc("Reference.setWithPriority",this.path),cc("Reference.setWithPriority",1,t,this.path,!1),hc("Reference.setWithPriority",2,e,!1),Pa("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new ta;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},Qf.prototype.remove=function(t){return Aa("Reference.remove",0,1,arguments.length),vc("Reference.remove",this.path),Pa("Reference.remove",1,t,!0),this.set(null,t)},Qf.prototype.transaction=function(t,e,n){if(Aa("Reference.transaction",1,3,arguments.length),vc("Reference.transaction",this.path),Pa("Reference.transaction",1,t,!1),Pa("Reference.transaction",2,e,!0),function(t,e,n,r){if(void 0!==n&&"boolean"!=typeof n)throw new Error(Oa("Reference.transaction",3,!0)+"must be a boolean.")}(0,0,n),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new ta;return"function"==typeof e&&r.promise.catch((function(){})),this.repo.startTransaction(this.path,t,(function(t,n,i){t?r.reject(t):r.resolve(new Ic(n,i)),"function"==typeof e&&e(t,n,i)}),n),r.promise},Qf.prototype.setPriority=function(t,e){Aa("Reference.setPriority",1,2,arguments.length),vc("Reference.setPriority",this.path),hc("Reference.setPriority",1,t,!1),Pa("Reference.setPriority",2,e,!0);var n=new ta;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},Qf.prototype.push=function(t,e){Aa("Reference.push",0,2,arguments.length),vc("Reference.push",this.path),cc("Reference.push",1,t,this.path,!0),Pa("Reference.push",2,e,!0);var n=this.repo.serverTime(),r=Ac(n),i=this.child(r),o=this.child(r),s=null!=t?i.set(t,e).then((function(){return o})):Promise.resolve(o);return i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),"function"==typeof e&&s.catch((function(){})),i},Qf.prototype.onDisconnect=function(){return vc("Reference.onDisconnect",this.path),new Ec(this.repo,this.path)},Object.defineProperty(Qf.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(Qf.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(Qf.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(Qf.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),Qf);function Qf(t,e){if(!(t instanceof Uf))throw new Error("new Reference() no longer supported - use app.database().");return Gf.call(this,t,e,Hf.DEFAULT,!1)||this}Ul.__referenceConstructor=Kf,Lh.__referenceConstructor=Kf;var Yf,Xf,$f=function(){this.children={},this.childCount=0,this.value=null},Jf=(Zf.prototype.subTree=function(t){for(var e=t instanceof Xu?t:new Xu(t),n=this,r=e.getFront();null!==r;)n=new Zf(r,n,_a(n.node_.children,r)||new $f),r=(e=e.popFront()).getFront();return n},Zf.prototype.getValue=function(){return this.node_.value},Zf.prototype.setValue=function(t){Ys(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},Zf.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},Zf.prototype.hasChildren=function(){return 0<this.node_.childCount},Zf.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},Zf.prototype.forEachChild=function(t){var e=this;Hu(this.node_.children,(function(n,r){t(new Zf(n,e,r))}))},Zf.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},Zf.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},Zf.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},Zf.prototype.path=function(){return new Xu(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},Zf.prototype.name=function(){return this.name_},Zf.prototype.parent=function(){return this.parent_},Zf.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},Zf.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=ba(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},Zf);function Zf(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new $f),this.name_=t,this.parent_=e,this.node_=n}(Xf=Yf=Yf||{})[Xf.RUN=0]="RUN",Xf[Xf.SENT=1]="SENT",Xf[Xf.COMPLETED=2]="COMPLETED",Xf[Xf.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",Xf[Xf.NEEDS_ABORT=4]="NEEDS_ABORT",Uf.MAX_TRANSACTION_RETRIES_=25,Uf.prototype.transactionsInit_=function(){this.transactionQueueTree_=new Jf},Uf.prototype.startTransaction=function(t,e,n,r){function i(){}this.log_("transaction on "+t);var o=new Kf(this,t);o.on("value",i);var s={path:t,update:e,onComplete:n,status:null,order:Du(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=this.getLatestState_(t);s.currentInputSnapshot=a;var u,c,l,h,f,p,d,v,y=s.update(a.val());void 0===y?(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&(u=new kl(s.currentInputSnapshot,new Kf(this,s.path),Yc),s.onComplete(null,!1,u))):(wc("transaction failed: Data returned ",y,s.path),s.status=Yf.RUN,(l=(c=this.transactionQueueTree_.subTree(t)).getValue()||[]).push(s),c.setValue(l),h=void 0,"object"==typeof y&&null!==y&&ba(y,".priority")?(h=_a(y,".priority"),Ys(uc(h),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):h=(this.serverSyncTree_.calcCompleteEventCache(t)||yl.EMPTY_NODE).getPriority().val(),f=this.generateServerValues(),d=zl(p=wl(y,h),a,f),s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=d,s.currentWriteId=this.getNextWriteId_(),v=this.serverSyncTree_.applyUserOverwrite(t,d,s.currentWriteId,s.applyLocally),this.eventQueue_.raiseEventsForChangedPath(t,v),this.sendReadyTransactions_())},Uf.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||yl.EMPTY_NODE},Uf.prototype.sendReadyTransactions_=function(t){var e,n=this;void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()?(e=this.buildTransactionQueue_(t),Ys(0<e.length,"Sending zero length transaction queue"),e.every((function(t){return t.status===Yf.RUN}))&&this.sendTransactionQueue_(t.path(),e)):t.hasChildren()&&t.forEachChild((function(t){n.sendReadyTransactions_(t)}))},Uf.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),o=i,s=i.hash(),a=0;a<e.length;a++){var u=e[a];Ys(u.status===Yf.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=Yf.SENT,u.retryCount++;var c=Xu.relativePath(t,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var l=o.val(!0),h=t;this.server_.put(h.toString(),l,(function(r){n.log_("transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var o,s,a,u=[],c=0;c<e.length;c++)e[c].status=Yf.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[c].currentWriteId)),e[c].onComplete&&(o=e[c].currentOutputSnapshotResolved,s=new Kf(n,e[c].path),a=new kl(o,s,Yc),u.push(e[c].onComplete.bind(null,null,!0,a))),e[c].unwatcher();for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i),c=0;c<u.length;c++)Gu(u[c])}else{if("datastale"===r)for(c=0;c<e.length;c++)e[c].status===Yf.SENT_NEEDS_ABORT?e[c].status=Yf.NEEDS_ABORT:e[c].status=Yf.RUN;else for(Su("transaction at "+h.toString()+" failed: "+r),c=0;c<e.length;c++)e[c].status=Yf.NEEDS_ABORT,e[c].abortReason=r;n.rerunTransactions_(t)}}),s)},Uf.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},Uf.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,r=[],i=[],o=t.filter((function(t){return t.status===Yf.RUN})).map((function(t){return t.currentWriteId})),s=0;s<t.length;s++){var a,u,c,l,h,f,p,d,v=t[s],y=Xu.relativePath(e,v.path),g=!1,m=void 0;Ys(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),v.status===Yf.NEEDS_ABORT?(g=!0,m=v.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(v.currentWriteId,!0))):v.status===Yf.RUN&&(i=v.retryCount>=Uf.MAX_TRANSACTION_RETRIES_?(g=!0,m="maxretry",i.concat(this.serverSyncTree_.ackUserWrite(v.currentWriteId,!0))):(a=this.getLatestState_(v.path,o),v.currentInputSnapshot=a,void 0!==(u=t[s].update(a.val()))?(wc("transaction failed: Data returned ",u,v.path),c=wl(u),"object"==typeof u&&null!=u&&ba(u,".priority")||(c=c.updatePriority(a.getPriority())),l=v.currentWriteId,h=zl(c,a,this.generateServerValues()),v.currentOutputSnapshotRaw=c,v.currentOutputSnapshotResolved=h,v.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(l),1),(i=i.concat(this.serverSyncTree_.applyUserOverwrite(v.path,h,v.currentWriteId,v.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(l,!0))):(g=!0,m="nodata",i.concat(this.serverSyncTree_.ackUserWrite(v.currentWriteId,!0))))),this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],g&&(t[s].status=Yf.COMPLETED,n=t[s].unwatcher,setTimeout(n,Math.floor(0)),t[s].onComplete&&("nodata"===m?(f=new Kf(this,t[s].path),p=t[s].currentInputSnapshot,d=new kl(p,f,Yc),r.push(t[s].onComplete.bind(null,null,!1,d))):r.push(t[s].onComplete.bind(null,new Error(m),!1,null))))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),s=0;s<r.length;s++)Gu(r[s]);this.sendReadyTransactions_()}},Uf.prototype.getAncestorTransactionNode_=function(t){for(var e=this.transactionQueueTree_,n=t.getFront();null!==n&&null===e.getValue();)e=e.subTree(n),n=(t=t.popFront()).getFront();return e},Uf.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},Uf.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},Uf.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==Yf.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(0<n.length?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},Uf.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},Uf.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)e[o].status===Yf.SENT_NEEDS_ABORT||(e[o].status===Yf.SENT?(Ys(i===o-1,"All SENT items should be at beginning of queue."),e[i=o].status=Yf.SENT_NEEDS_ABORT,e[o].abortReason="set"):(Ys(e[o].status===Yf.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),o=0;o<n.length;o++)Gu(n[o])}};var tp=(ep.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(Uu("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},ep.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},ep.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},ep.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Su(t)},ep);function ep(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}var np,rp="databaseURL",ip=(op.getInstance=function(){return np=np||new op},op.prototype.interrupt=function(){var t,e,n,r;try{for(var i=qs(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,qs(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].interrupt()}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},op.prototype.resume=function(){var t,e,n,r;try{for(var i=qs(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,qs(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].resume()}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},op.prototype.databaseFromApp=function(t,e,r){var i=r||t.options[rp];void 0===i&&Iu("Can't determine Firebase Database URL.  Be sure to include "+rp+" option when calling firebase.initializeApp().");var o=oc(i),s=o.repoInfo,a=void 0;"undefined"!=typeof n&&(a=Object({NODE_ENV:"production",PUBLIC_URL:"/React-app-Todos",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).FIREBASE_DATABASE_EMULATOR_HOST),a?s=(o=oc(i="http://"+a+"?ns="+s.namespace)).repoInfo:o.repoInfo.secure;var u=new tp(t,e);return yc("Invalid Firebase Database URL",1,o),o.path.isEmpty()||Iu("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(s,t,u).database},op.prototype.deleteRepo=function(t){var e=_a(this.repos_,t.app.name);e&&_a(e,t.repoInfo_.toURLString())===t||Iu("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},op.prototype.createRepo=function(t,e,n){var r=_a(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=_a(r,t.toURLString());return i&&Iu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Uf(t,this.useRestClient_,e,n),r[t.toURLString()]=i},op.prototype.forceRestClient=function(t){this.useRestClient_=t},op);function op(){this.repos_={},this.useRestClient_=!1}var sp=(Object.defineProperty(ap.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),ap.prototype.ref=function(t){return this.checkDeleted_("ref"),Aa("database.ref",0,1,arguments.length),t instanceof Kf?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},ap.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Aa(e,1,1,arguments.length);var n=oc(t);yc(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&Iu(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},ap.prototype.checkDeleted_=function(t){null===this.repo_&&Iu("Cannot call "+t+" on a deleted database.")},ap.prototype.goOffline=function(){Aa("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},ap.prototype.goOnline=function(){Aa("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},ap.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},ap);function ap(t){(this.repo_=t)instanceof Uf||Iu("Don't call new Database() directly - please use firebase.database()."),this.root_=new Kf(t,Xu.Empty),this.INTERNAL=new up(this)}var up=(cp.prototype.delete=function(){return js(this,void 0,void 0,(function(){return Vs(this,(function(t){return this.database.checkDeleted_("delete"),ip.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]}))}))},cp);function cp(t){this.database=t}var lp=Object.freeze({__proto__:null,forceLongPolling:function(){Ef.forceDisallow(),yf.forceAllow()},forceWebSockets:function(){yf.forceDisallow()},isWebSocketsAvailable:function(){return Ef.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),hp=Rf;Rf.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Rf.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var fp,pp,dp=Object.freeze({__proto__:null,DataConnection:hp,RealTimeConnection:Cf,hijackHash:function(t){var e=Rf.prototype.put;return Rf.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Rf.prototype.put=e}},ConnectionTarget:rc,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){ip.getInstance().forceRestClient(t)}}),vp=sp.ServerValue;pp=(fp=vu).SDK_VERSION,_f=pp,fp.INTERNAL.registerComponent(new Da("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return ip.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:Kf,Query:Ul,Database:sp,DataSnapshot:kl,enableLogging:Eu,INTERNAL:lp,ServerValue:vp,TEST_ACCESS:dp}).setMultipleInstances(!0)),fp.registerVersion("@firebase/database","0.6.11");var yp=function(t,e){return(yp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function gp(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var mp,bp="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{},_p={},wp=bp||self;function Ep(){}function Tp(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function Ip(t){var e=Tp(t);return"array"==e||"object"==e&&"number"==typeof t.length}function Sp(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Cp="closure_uid_"+(1e9*Math.random()>>>0),kp=0;function Np(t,e,n){return t.call.apply(t.bind,arguments)}function Ap(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Op(t,e,n){return(Op=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Np:Ap).apply(null,arguments)}function Pp(t){var e=Array.prototype.slice.call(arguments,1);return function(){var n=e.slice();return n.push.apply(n,arguments),t.apply(this,n)}}var Rp=Date.now;function xp(t,e){function n(){}n.prototype=e.prototype,t.S=e.prototype,t.prototype=new n,t.prototype.constructor=t}function Dp(){this.j=this.j,this.i=this.i}Dp.prototype.j=!1,Dp.prototype.ja=function(){var t;!this.j&&(this.j=!0,this.G(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,Cp)&&t[Cp]||(t[Cp]=++kp))},Dp.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Lp=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Mp=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Fp(){return Array.prototype.concat.apply([],arguments)}function Up(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function jp(t){return/^[\s\xa0]*$/.test(t)}var Vp,qp=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Bp(t,e){return-1!=t.indexOf(e)}function Wp(t,e){return t<e?-1:e<t?1:0}t:{var Hp=wp.navigator;if(Hp){var zp=Hp.userAgent;if(zp){Vp=zp;break t}}Vp=""}function Gp(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Kp(t){var e={};for(var n in t)e[n]=t[n];return e}var Qp="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Yp(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<Qp.length;i++)e=Qp[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function Xp(t){return Xp[" "](t),t}Xp[" "]=Ep;var $p,Jp,Zp=Bp(Vp,"Opera"),td=Bp(Vp,"Trident")||Bp(Vp,"MSIE"),ed=Bp(Vp,"Edge"),nd=ed||td,rd=Bp(Vp,"Gecko")&&!(Bp(Vp.toLowerCase(),"webkit")&&!Bp(Vp,"Edge"))&&!(Bp(Vp,"Trident")||Bp(Vp,"MSIE"))&&!Bp(Vp,"Edge"),id=Bp(Vp.toLowerCase(),"webkit")&&!Bp(Vp,"Edge");function od(){var t=wp.document;return t?t.documentMode:void 0}t:{var sd="",ad=(Jp=Vp,rd?/rv:([^\);]+)(\)|;)/.exec(Jp):ed?/Edge\/([\d\.]+)/.exec(Jp):td?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Jp):id?/WebKit\/(\S+)/.exec(Jp):Zp?/(?:Version)[ \/]?(\S+)/.exec(Jp):void 0);if(ad&&(sd=ad?ad[1]:""),td){var ud=od();if(null!=ud&&ud>parseFloat(sd)){$p=String(ud);break t}}$p=sd}var cd={};function ld(t){return e=t,n=function(){for(var e=0,n=qp(String($p)).split("."),r=qp(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Wp(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Wp(0==s[2].length,0==a[2].length)||Wp(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e},r=cd,Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=n();var e,n,r}var hd=wp.document&&td&&(od()||parseInt($p,10))||void 0,fd=!td||9<=Number(hd),pd=td&&!ld("9"),dd=function(){if(!wp.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{wp.addEventListener("test",Ep,e),wp.removeEventListener("test",Ep,e)}catch(t){}return t}();function vd(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function yd(t,e){if(vd.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(rd){t:{try{Xp(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:gd[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}vd.prototype.b=function(){this.defaultPrevented=!0},xp(yd,vd);var gd={2:"touch",3:"pen",4:"mouse"};yd.prototype.b=function(){yd.S.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,pd)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var md="closure_listenable_"+(1e6*Math.random()|0),bd=0;function _d(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++bd,this.Y=this.Z=!1}function wd(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Ed(t){this.src=t,this.a={},this.b=0}function Td(t,e){var n,r,i,o=e.type;o in t.a&&(n=t.a[o],(i=0<=(r=Lp(n,e)))&&Array.prototype.splice.call(n,r,1),i&&(wd(e),0==t.a[o].length&&(delete t.a[o],t.b--)))}function Id(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Ed.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Id(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new _d(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Sd="closure_lm_"+(1e6*Math.random()|0),Cd={};function kd(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=Ld(r),e&&e[md]?e.wa(n,r,Sp(i)?!!i.capture:!!i,o):Nd(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)kd(t,e[o],n,r,i);return null}return n=Ld(n),t&&t[md]?t.va(e,n,Sp(r)?!!r.capture:!!r,i):Nd(t,e,n,!1,r,i)}function Nd(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Sp(i)?!!i.capture:!!i;if(s&&!fd)return null;var a,u,c=xd(t);if(c||(t[Sd]=c=new Ed(t)),(n=c.add(e,n,r,s,o)).proxy)return n;if(a=Rd,r=u=fd?function(t){return a.call(u.src,u.listener,t)}:function(t){if(!(t=a.call(u.src,u.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)dd||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Od(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Ad(t){var e,n,r;"number"!=typeof t&&t&&!t.Y&&((e=t.src)&&e[md]?Td(e.c,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Od(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=xd(e))?(Td(n,t),0==n.b&&(n.src=null,e[Sd]=null)):wd(t)))}function Od(t){return t in Cd?Cd[t]:Cd[t]="on"+t}function Pd(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Ad(t),n.call(r,e)}function Rd(t,e){if(t.Y)return!0;if(fd)return Pd(t,new yd(e,this));if(!e)t:{e=["window","event"];for(var n=wp,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Pd(t,e=new yd(e,this))}function xd(t){return(t=t[Sd])instanceof Ed?t:null}var Dd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ld(t){return"function"==Tp(t)?t:(t[Dd]||(t[Dd]=function(e){return t.handleEvent(e)}),t[Dd])}function Md(){Dp.call(this),this.c=new Ed(this),(this.J=this).C=null}function Fd(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.Y&&u.capture==n&&(s=u.listener,a=u.ca||u.src,u.Z&&Td(t.c,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}xp(Md,Dp),Md.prototype[md]=!0,(mp=Md.prototype).addEventListener=function(t,e,n,r){kd(this,t,e,n,r)},mp.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=Sp(i)?!!i.capture:!!i,r=Ld(r),e&&e[md]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=Id(s=e.a[n],r,i,o))&&(wd(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):(e=e&&xd(e))&&(n=e.a[n.toString()],e=-1,n&&(e=Id(n,r,i,o)),(r=-1<e?n[e]:null)&&Ad(r))}(this,t,e,n,r)},mp.dispatchEvent=function(t){var e,n=this.C;if(n)for(e=[];n;n=n.C)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t?t=new vd(t,n):t instanceof vd?t.target=t.target||n:(s=t,Yp(t=new vd(r,n),s)),s=!0,e)for(var i=e.length-1;0<=i;i--)var o=t.a=e[i],s=Fd(o,r,!0,t)&&s;if(s=Fd(o=t.a=n,r,!0,t)&&s,s=Fd(o,r,!1,t)&&s,e)for(i=0;i<e.length;i++)s=Fd(o=t.a=e[i],r,!1,t)&&s;return s},mp.G=function(){if(Md.S.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)wd(n[r]);delete e.a[t],e.b--}}this.C=null},mp.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},mp.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Ud=wp.JSON.stringify;function jd(){this.b=this.a=null}var Vd,qd=(Bd.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},new Bd((function(){return new Wd}),(function(t){t.reset()}),100));function Bd(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}function Wd(){this.next=this.b=this.a=null}function Hd(t,e){var n;Vd||(n=wp.Promise.resolve(void 0),Vd=function(){n.then(Kd)}),zd||(Vd(),zd=!0),Gd.add(t,e)}jd.prototype.add=function(t,e){var n=qd.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Wd.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var zd=!(Wd.prototype.reset=function(){this.next=this.b=this.a=null}),Gd=new jd;function Kd(){for(var t,e,n;n=e=void 0,n=null,(e=Gd).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){!function(t){wp.setTimeout((function(){throw t}),0)}(t)}var r=qd;r.g(t),r.b<r.f&&(r.b++,t.next=r.a,r.a=t)}zd=!1}function Qd(t,e){Md.call(this),this.b=t||1,this.a=e||wp,this.f=Op(this.Ya,this),this.g=Rp()}function Yd(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Xd(t,e,n){if("function"==Tp(t))n&&(t=Op(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Op(t.handleEvent,t)}return 2147483647<Number(e)?-1:wp.setTimeout(t,e||0)}xp(Qd,Md),(mp=Qd.prototype).aa=!1,mp.M=null,mp.Ya=function(){var t;this.aa&&(0<(t=Rp()-this.g)&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(Yd(this),this.start())))},mp.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Rp())},mp.G=function(){Qd.S.G.call(this),Yd(this),delete this.a};var $d,Jd,Zd,tv=(yp(Jd=nv,Zd=$d=Dp),Jd.prototype=null===Zd?Object.create(Zd):(ev.prototype=Zd.prototype,new ev),nv.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:function t(e){e.a=Xd((function(){e.a=null,e.c&&(e.c=!1,t(e))}),e.h);var n=e.b;e.b=null,e.g.apply(null,n)}(this)},nv.prototype.G=function(){$d.prototype.G.call(this),this.a&&(wp.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},nv);function ev(){this.constructor=Jd}function nv(t,e,n){var r=$d.call(this)||this;return r.g=null!=n?t.bind(n):t,r.h=e,r.b=null,r.c=!1,r.a=null,r}function rv(t){Dp.call(this),this.b=t,this.a={}}xp(rv,Dp);var iv=[];function ov(t,e,n,r){Array.isArray(n)||(n&&(iv[0]=n.toString()),n=iv);for(var i=0;i<n.length;i++){var o=kd(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function sv(t){Gp(t.a,(function(t,e){this.a.hasOwnProperty(e)&&Ad(t)}),t),t.a={}}function av(){this.a=!0}function uv(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(r.length<2)){var i=r[1];if(Array.isArray(i)&&!(i.length<1)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Ud(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}rv.prototype.G=function(){rv.S.G.call(this),sv(this)},rv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},av.prototype.info=function(){};var cv=null;function lv(){return cv=cv||new Md}function hv(t){vd.call(this,"serverreachability",t)}function fv(t){var e=lv();e.dispatchEvent(new hv(e))}function pv(t){vd.call(this,"statevent",t)}function dv(t){var e=lv();e.dispatchEvent(new pv(e))}function vv(t){vd.call(this,"timingevent",t)}function yv(t,e){if("function"!=Tp(t))throw Error("Fn must not be null and must be a function");return wp.setTimeout((function(){t()}),e)}xp(hv,vd),xp(pv,vd),xp(vv,vd);var gv={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},mv={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function bv(){}function _v(t){var e;return(e=t.a)||(e=t.a={}),e}function wv(){}bv.prototype.a=null;var Ev,Tv={OPEN:"a",$a:"b",Ea:"c",jb:"d"};function Iv(){vd.call(this,"d")}function Sv(){vd.call(this,"c")}function Cv(){}function kv(t,e,n,r){this.g=t,this.c=e,this.f=n,this.T=r||1,this.J=new rv(this),this.P=Nv,t=nd?125:void 0,this.R=new Qd(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}xp(Iv,vd),xp(Sv,vd),xp(Cv,bv),Ev=new Cv;var Nv=45e3,Av={},Ov={};function Pv(t,e,n){t.H=1,t.i=Jv(Gv(e)),t.j=n,t.I=!0,Rv(t,null)}function Rv(t,e){t.u=Rp(),Dv(t),t.l=Gv(t.i);var n,r,i,o,s,a,u=t.l,c=t.T;Array.isArray(c)||(c=[String(c)]),hy(u.b,"t",c),t.D=0,t.a=ig(t.g,t.g.C?e:null),0<t.O&&(t.F=new tv(Op(t.Ca,t,t.a),t.O)),ov(t.J,t.a,"readystatechange",t.Wa),e=t.B?Kp(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),fv(),n=t.c,r=t.m,i=t.l,o=t.f,s=t.T,a=t.j,n.info((function(){if(n.a)if(a)for(var t="",e=a.split("&"),u=0;u<e.length;u++){var c,l,h=e[u].split("=");1<h.length&&(c=h[0],h=h[1],t=2<=(l=c.split("_")).length&&"type"==l[1]?t+(c+"=")+h+"&":t+(c+"=redacted&"))}else t=null;else t=a;return"XMLHTTP REQ ("+o+") [attempt "+s+"]: "+r+"\n"+i+"\n"+t}))}function xv(t,e,n){for(var r,i,o,s,a=!0;!t.A&&t.D<n.length;){var u=(i=n,s=o=void 0,o=(r=t).D,-1==(s=i.indexOf("\n",o))?Ov:(o=Number(i.substring(o,s)),isNaN(o)?Av:(s+=1)+o>i.length?Ov:(i=i.substr(s,o),r.D=s+o,i)));if(u==Ov){4==e&&(t.h=4,dv(),a=!1),uv(t.c,t.f,null,"[Incomplete Response]");break}if(u==Av){t.h=4,dv(),uv(t.c,t.f,n,"[Invalid Chunk]"),a=!1;break}uv(t.c,t.f,u,null),jv(t,u)}4==e&&0==n.length&&(t.h=1,dv(),a=!1),t.b=t.b&&a,a?0<n.length&&!t.W&&(t.W=!0,(e=t.g).a==t&&e.V&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Xy(e),e.F=!0)):(uv(t.c,t.f,n,"[Invalid Chunked Response]"),Uv(t),Fv(t))}function Dv(t){t.U=Rp()+t.P,Lv(t,t.P)}function Lv(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=yv(Op(t.Ua,t),e)}function Mv(t){t.o&&(wp.clearTimeout(t.o),t.o=null)}function Fv(t){0==t.g.v||t.A||Zy(t.g,t)}function Uv(t){Mv(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Yd(t.R),sv(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function jv(t,e){try{var n,r,i,o,s,a,u,c,l,h,f,p=t.g;if(0!=p.v&&(p.a==t||my(p.b,t)))if(p.I=t.N,!t.C&&my(p.b,t)&&3==p.v){try{var d=p.ka.a.parse(e)}catch(t){d=null}if(Array.isArray(d)&&3==d.length){var v=d;if(0==v[0]){t:if(!p.j){if(p.a){if(!(p.a.u+3e3<t.u))break t;Jy(p),qy(p)}Yy(p),dv()}}else p.oa=v[1],0<p.oa-p.P&&v[2]<37500&&p.H&&0==p.o&&!p.m&&(p.m=yv(Op(p.Ra,p),6e3));if(gy(p.b)<=1&&p.ea){try{p.ea()}catch(t){}p.ea=void 0}}else eg(p,11)}else if(!t.C&&p.a!=t||Jy(p),!jp(e))for(e=d=p.ka.a.parse(e),d=0;d<e.length;d++)v=e[d],p.P=v[0],v=v[1],2==p.v?"c"==v[0]?(p.J=v[1],p.ga=v[2],null!=(n=v[3])&&(p.ha=n,p.c.info("VER="+p.ha)),null!=(r=v[4])&&(p.pa=r,p.c.info("SVER="+p.pa)),null!=(i=v[5])&&"number"==typeof i&&0<i&&(o=1.5*i,p.D=o,p.c.info("backChannelRequestTimeoutMs_="+o)),o=p,(s=t.a)&&(!(a=s.a?s.a.getResponseHeader("X-Client-Wire-Protocol"):null)||!(u=o.b).a&&(Bp(a,"spdy")||Bp(a,"quic")||Bp(a,"h2"))&&(u.f=u.g,u.a=new Set,u.b&&(by(u,u.b),u.b=null)),!o.A||(c=s.a?s.a.getResponseHeader("X-HTTP-Session-Id"):null)&&(o.na=c,$v(o.B,o.A,c))),p.v=3,p.f&&p.f.ta(),p.V&&(p.N=Rp()-t.u,p.c.info("Handshake RTT: "+p.N+"ms")),l=t,(o=p).la=rg(o,o.C?o.ga:null,o.fa),l.C?(_y(o.b,l),h=l,(f=o.D)&&h.setTimeout(f),h.o&&(Mv(h),Dv(h)),o.a=l):Qy(o),0<p.g.length&&Hy(p)):"stop"!=v[0]&&"close"!=v[0]||eg(p,7):3==p.v&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?eg(p,7):Vy(p):"noop"!=v[0]&&p.f&&p.f.sa(v),p.o=0);fv()}catch(t){}}function Vv(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Ip(t)||"string"==typeof t)Mp(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Ip(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Ip(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function qv(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof qv)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Bv(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Wv(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Wv(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function Wv(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(mp=kv.prototype).setTimeout=function(t){this.P=t},mp.Wa=function(t){t=t.target;var e=this.F;e&&3==My(t)?e.f():this.Ca(t)},mp.Ca=function(t){try{if(t==this.a)t:{var e=My(this.a),n=this.a.ua();if(this.a.X(),!(e<3||3==e&&!nd&&!this.a.$())){this.A||4!=e||7==n||fv(),Mv(this);var r=this.a.X();this.N=r;var i=this.a.$();if(this.b=200==r,u=this.c,c=this.m,l=this.l,h=this.f,f=this.T,p=e,d=r,u.info((function(){return"XMLHTTP RESP ("+h+") [ attempt "+f+"]: "+c+"\n"+l+"\n"+p+" "+d})),this.b){if(this.V&&!this.C){e:{if(this.a){var o,s=this.a;if((o=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!jp(o)){var a=o;break e}}a=null}if(!a){this.b=!1,this.h=3,dv(),Uv(this),Fv(this);break t}uv(this.c,this.f,a,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,jv(this,a)}this.I?(xv(this,e,i),nd&&this.b&&3==e&&(ov(this.J,this.R,"tick",this.Va),this.R.start())):(uv(this.c,this.f,i,null),jv(this,i)),4==e&&Uv(this),this.b&&!this.A&&(4==e?Zy(this.g,this):(this.b=!1,Dv(this)))}else 400==r&&0<i.indexOf("Unknown SID")?(this.h=3,dv()):(this.h=0,dv()),Uv(this),Fv(this)}}}catch(t){}var u,c,l,h,f,p,d},mp.Va=function(){var t,e;this.a&&(t=My(this.a),e=this.a.$(),this.D<e.length&&(Mv(this),xv(this,t,e),this.b&&4!=t&&Dv(this)))},mp.cancel=function(){this.A=!0,Uv(this)},mp.Ua=function(){this.o=null;var t,e,n=Rp();0<=n-this.U?(t=this.c,e=this.l,t.info((function(){return"TIMEOUT: "+e})),2!=this.H&&(fv(),dv()),Uv(this),this.h=2,Fv(this)):Lv(this,this.U-n)},(mp=qv.prototype).K=function(){Bv(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},mp.L=function(){return Bv(this),this.a.concat()},mp.get=function(t,e){return Wv(this.b,t)?this.b[t]:e},mp.set=function(t,e){Wv(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},mp.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Hv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function zv(t,e){var n;this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof zv?(this.a=void 0!==e?e:t.a,Kv(this,t.f),this.j=t.j,Qv(this,t.c),Yv(this,t.h),this.g=t.g,e=t.b,(n=new ay).c=e.c,e.a&&(n.a=new qv(e.a),n.b=e.b),Xv(this,n),this.i=t.i):t&&(n=String(t).match(Hv))?(this.a=!!e,Kv(this,n[1]||"",!0),this.j=Zv(n[2]||""),Qv(this,n[3]||"",!0),Yv(this,n[4]),this.g=Zv(n[5]||"",!0),Xv(this,n[6]||"",!0),this.i=Zv(n[7]||"")):(this.a=!!e,this.b=new ay(null,this.a))}function Gv(t){return new zv(t)}function Kv(t,e,n){t.f=n?Zv(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Qv(t,e,n){t.c=n?Zv(e,!0):e}function Yv(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Xv(t,e,n){var r,i;e instanceof ay?(t.b=e,r=t.b,(i=t.a)&&!r.f&&(uy(r),r.c=null,r.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(cy(this,e),hy(this,n,t))}),r)),r.f=i):(n||(e=ty(e,oy)),t.b=new ay(e,t.a))}function $v(t,e,n){t.b.set(e,n)}function Jv(t){return $v(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Rp()).toString(36)),t}function Zv(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ty(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ey),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ey(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}zv.prototype.toString=function(){var t=[],e=this.f;e&&t.push(ty(e,ny,!0),":");var n=this.c;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(ty(e,ny,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(ty(n,"/"==n.charAt(0)?iy:ry,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",ty(n,sy)),t.join("")};var ny=/[#\/\?@]/g,ry=/[#\?:]/g,iy=/[#\?]/g,oy=/[#\?@]/g,sy=/#/g;function ay(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function uy(t){t.a||(t.a=new qv,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function cy(t,e){uy(t),e=fy(t,e),Wv(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Wv((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Bv(t)))}function ly(t,e){return uy(t),e=fy(t,e),Wv(t.a.b,e)}function hy(t,e,n){cy(t,e),0<n.length&&(t.c=null,t.a.set(fy(t,e),Up(n)),t.b+=n.length)}function fy(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function py(t,e){this.b=t,this.a=e}function dy(t){this.g=t||vy,t=wp.PerformanceNavigationTiming?0<(t=wp.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(wp.ia&&wp.ia.ya&&wp.ia.ya()&&wp.ia.ya().qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(mp=ay.prototype).add=function(t,e){uy(this),this.c=null,t=fy(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},mp.forEach=function(t,e){uy(this),this.a.forEach((function(n,r){Mp(n,(function(n){t.call(e,n,r,this)}),this)}),this)},mp.L=function(){uy(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},mp.K=function(t){uy(this);var e=[];if("string"==typeof t)ly(this,t)&&(e=Fp(e,this.a.get(fy(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Fp(e,t[n])}return e},mp.set=function(t,e){return uy(this),this.c=null,ly(this,t=fy(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},mp.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},mp.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),o=(r=this.K(r),0);o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var vy=10;function yy(t){return t.b||t.a&&t.a.size>=t.f}function gy(t){return t.b?1:t.a?t.a.size:0}function my(t,e){return t.b?t.b==e:t.a&&t.a.has(e)}function by(t,e){t.a?t.a.add(e):t.b=e}function _y(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function wy(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null==t.a||0===t.a.size)return Up(t.c);var r=t.c;try{for(var i=gp(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Ey(){}function Ty(){this.a=new Ey}function Iy(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}dy.prototype.cancel=function(){var t,e;if(this.c=wy(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=gp(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Ey.prototype.stringify=function(t){return wp.JSON.stringify(t,void 0)},Ey.prototype.parse=function(t){return wp.JSON.parse(t,void 0)};var Sy=wp.JSON.parse;function Cy(t){Md.call(this),this.headers=new qv,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=ky,this.D=this.F=!1}xp(Cy,Md);var ky="",Ny=/^https?$/i,Ay=["POST","PUT"];function Oy(t){return"content-type"==t.toLowerCase()}function Py(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Ry(t),Dy(t)}function Ry(t){t.u||(t.u=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function xy(t){if(t.b&&void 0!==_p&&(!t.s[1]||4!=My(t)||2!=t.X()))if(t.l&&4==My(t))Xd(t.za,0,t);else if(t.dispatchEvent("readystatechange"),4==My(t)){t.b=!1;try{var e,n,r,i,o=t.X();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((e=s)||((n=0===o)&&(!(i=String(t.B).match(Hv)[1]||null)&&wp.self&&wp.self.location&&(i=(r=wp.self.location.protocol).substr(0,r.length-1)),n=!Ny.test(i?i.toLowerCase():"")),e=n),e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var a=2<My(t)?t.a.statusText:""}catch(t){a=""}t.f=a+" ["+t.X()+"]",Ry(t)}}finally{Dy(t)}}}function Dy(t,e){if(t.a){Ly(t);var n=t.a,r=t.s[0]?Ep:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function Ly(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(wp.clearTimeout(t.m),t.m=null)}function My(t){return t.a?t.a.readyState:0}function Fy(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}var i;r||(i="",Gp(n,(function(t,e){i+=e,i+=":",i+=t,i+="\r\n"})),n=i,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):$v(t,e,n))}function Uy(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function jy(t){this.pa=0,this.g=[],this.c=new av,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=Uy("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=Uy("baseRetryDelayMs",5e3,t),this.Ma=Uy("retryDelaySeedMs",1e4,t),this.Ja=Uy("forwardChannelMaxRetries",2,t),this.ma=Uy("forwardChannelRequestTimeoutMs",2e4,t),this.Ka=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new dy(t&&t.concurrentRequestLimit),this.ka=new Ty,this.da=t&&t.fastHandshake||!1,this.Ga=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&t&&t.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function Vy(t){var e,n;By(t),3==t.v&&(e=t.R++,$v(n=Gv(t.B),"SID",t.J),$v(n,"RID",e),$v(n,"TYPE","terminate"),Gy(t,n),(e=new kv(t,t.c,e,void 0)).H=2,e.i=Jv(Gv(n)),n=!1,wp.navigator&&wp.navigator.sendBeacon&&(n=wp.navigator.sendBeacon(e.i.toString(),"")),!n&&wp.Image&&((new Image).src=e.i,n=!0),n||(e.a=ig(e.g,null),e.a.ba(e.i)),e.u=Rp(),Dv(e)),ng(t)}function qy(t){t.a&&(Xy(t),t.a.cancel(),t.a=null)}function By(t){qy(t),t.j&&(wp.clearTimeout(t.j),t.j=null),Jy(t),t.b.cancel(),t.h&&("number"==typeof t.h&&wp.clearTimeout(t.h),t.h=null)}function Wy(t,e){t.g.push(new py(t.La++,e)),3==t.v&&Hy(t)}function Hy(t){yy(t.b)||t.h||(t.h=!0,Hd(t.Ba,t),t.u=0)}function zy(t,e){var n=e?e.f:t.R++,r=Gv(t.B);$v(r,"SID",t.J),$v(r,"RID",n),$v(r,"AID",t.P),Gy(t,r),t.i&&t.l&&Fy(r,t.i,t.l),n=new kv(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Ky(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),by(t.b,n),Pv(n,r,e)}function Gy(t,e){t.f&&Vv({},(function(t,n){$v(e,n,t)}))}function Ky(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Op(t.f.Ha,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),a=!1;else try{!function(t,e,n){var r=n||"";try{Vv(t,(function(t,n){var i=t;Sp(t)&&(i=Ud(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}(l,s,"req"+c+"_")}catch(t){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Qy(t){t.a||t.j||(t.U=1,Hd(t.Aa,t),t.o=0)}function Yy(t){return!(t.a||t.j||3<=t.o)&&(t.U++,t.j=yv(Op(t.Aa,t),tg(t,t.o)),t.o++,1)}function Xy(t){null!=t.s&&(wp.clearTimeout(t.s),t.s=null)}function $y(t){t.a=new kv(t,t.c,"rpc",t.U),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Gv(t.la);$v(e,"RID","rpc"),$v(e,"SID",t.J),$v(e,"CI",t.H?"0":"1"),$v(e,"AID",t.P),Gy(t,e),$v(e,"TYPE","xmlhttp"),t.i&&t.l&&Fy(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Jv(Gv(e)),n.j=null,n.I=!0,Rv(n,t)}function Jy(t){null!=t.m&&(wp.clearTimeout(t.m),t.m=null)}function Zy(t,e){var n,r=null;if(t.a==e){Jy(t),Xy(t),t.a=null;var i=2}else{if(!my(t.b,e))return;r=e.s,_y(t.b,e),i=1}if(t.I=e.N,0!=t.v)if(e.b)1==i?(r=e.j?e.j.length:0,e=Rp()-e.u,n=t.u,(i=lv()).dispatchEvent(new vv(i)),Hy(t)):Qy(t);else if(3==(n=e.h)||0==n&&0<t.I||!(1==i&&function(t,e){if(!(gy(t.b)>=t.b.f-(t.h?1:0))){if(t.h)return t.g=e.s.concat(t.g),1;if(!(1==t.v||2==t.v||t.u>=(t.Ia?0:t.Ja)))return t.h=yv(Op(t.Ba,t,e),tg(t,t.u)),t.u++,1}}(t,e)||2==i&&Yy(t)))switch(r&&0<r.length&&(e=t.b,e.c=e.c.concat(r)),n){case 1:eg(t,5);break;case 4:eg(t,10);break;case 3:eg(t,6);break;default:eg(t,2)}}function tg(t,e){var n=t.Fa+Math.floor(Math.random()*t.Ma);return t.f||(n*=2),n*e}function eg(t,e){var n,r,i,o,s,a;t.c.info("Error code "+e),2==e?(n=null,t.f&&(n=null),r=Op(t.Xa,t),n||(n=new zv("//www.google.com/images/cleardot.gif"),wp.location&&"http"==wp.location.protocol||Kv(n,"https"),Jv(n)),i=n.toString(),o=r,a=new av,wp.Image?((s=new Image).onload=Pp(Iy,a,s,"TestLoadImage: loaded",!0,o),s.onerror=Pp(Iy,a,s,"TestLoadImage: error",!1,o),s.onabort=Pp(Iy,a,s,"TestLoadImage: abort",!1,o),s.ontimeout=Pp(Iy,a,s,"TestLoadImage: timeout",!1,o),wp.setTimeout((function(){s.ontimeout&&s.ontimeout()}),1e4),s.src=i):o(!1)):dv(),t.v=0,t.f&&t.f.ra(e),ng(t),By(t)}function ng(t){t.v=0,t.I=-1,t.f&&(0==wy(t.b).length&&0==t.g.length||(t.b.c.length=0,Up(t.g),t.g.length=0),t.f.qa())}function rg(t,e,n){var r,i,o,s,a,u,c,l=(r=n)instanceof zv?Gv(r):new zv(r,void 0);return""!=l.c?(e&&Qv(l,e+"."+l.c),Yv(l,l.h)):(o=(i=wp.location).protocol,s=e?e+"."+i.hostname:i.hostname,a=+i.port,u=n,c=new zv(null,void 0),o&&Kv(c,o),s&&Qv(c,s),a&&Yv(c,a),u&&(c.g=u),l=c),t.W&&Gp(t.W,(function(t,e){$v(l,e,t)})),e=t.A,n=t.na,e&&n&&$v(l,e,n),$v(l,"VER",t.ha),Gy(t,l),l}function ig(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Cy(t.Ka)).F=t.C,e}function og(){}function sg(){if(td&&!(10<=Number(hd)))throw Error("Environmental error: no available transport.")}function ag(t,e){Md.call(this),this.a=new jy(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!jp(t)&&(this.a.i=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!jp(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new lg(this)}function ug(t){Iv.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function cg(){Sv.call(this),this.status=1}function lg(t){this.a=t}(mp=Cy.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?_v(this.H):_v(Ev),this.a.onreadystatechange=Op(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void Py(this,t)}t=n||"";var i,o=new qv(this.headers);r&&Vv(r,(function(t,e){o.set(e,t)})),r=function(t){t:{for(var e=Oy,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.L()),n=wp.FormData&&t instanceof wp.FormData,0<=Lp(Ay,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Ly(this),0<this.o&&((this.D=(i=this.a,td&&ld(9)&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=Op(this.xa,this)):this.m=Xd(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Py(this,t)}},mp.xa=function(){void 0!==_p&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},mp.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Dy(this))},mp.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Dy(this,!0)),Cy.S.G.call(this)},mp.za=function(){this.j||(this.A||this.l||this.g?xy(this):this.Ta())},mp.Ta=function(){xy(this)},mp.X=function(){try{return 2<My(this)?this.a.status:-1}catch(i){return-1}},mp.$=function(){try{return this.a?this.a.responseText:""}catch(i){return""}},mp.Na=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Sy(e)}},mp.ua=function(){return this.h},mp.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(mp=jy.prototype).ha=8,mp.v=1,mp.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new kv(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Yp(r=Kp(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Ky(this,n,e),$v(i=Gv(this.B),"RID",t),$v(i,"CVER",22),this.A&&$v(i,"X-HTTP-Session-Id",this.A),Gy(this,i),this.i&&r&&Fy(i,this.i,r),by(this.b,n),this.Ga&&$v(i,"TYPE","init"),this.da?($v(i,"$req",e),$v(i,"SID","null"),n.V=!0,Pv(n,i,null)):Pv(n,i,e),this.v=2}}else 3==this.v&&(t?zy(this,t):0==this.g.length||yy(this.b)||zy(this))},mp.Aa=function(){var t;this.j=null,$y(this),this.V&&!(this.F||null==this.a||this.N<=0)&&(t=2*this.N,this.c.info("BP detection timer enabled: "+t),this.s=yv(Op(this.Sa,this),t))},mp.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,qy(this),$y(this))},mp.Ra=function(){null!=this.m&&(this.m=null,qy(this),Yy(this),dv())},mp.Xa=function(t){t?(this.c.info("Successfully pinged google.com"),dv()):(this.c.info("Failed to ping google.com"),dv())},(mp=og.prototype).ta=function(){},mp.sa=function(){},mp.ra=function(){},mp.qa=function(){},mp.Ha=function(){},sg.prototype.a=function(t,e){return new ag(t,e)},xp(ag,Md),(mp=ag.prototype).addEventListener=function(t,e,n,r){ag.S.addEventListener.call(this,t,e,n,r)},mp.removeEventListener=function(t,e,n,r){ag.S.removeEventListener.call(this,t,e,n,r)},mp.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var t=this.a,e=this.l,n=this.b||void 0;dv(),t.fa=e,t.W=n||{},t.H=t.T,t.B=rg(t,null,t.fa),Hy(t)},mp.close=function(){Vy(this.a)},mp.Pa=function(t){var e;"string"==typeof t?((e={}).__data__=t,Wy(this.a,e)):this.g?((e={}).__data__=Ud(t),Wy(this.a,e)):Wy(this.a,t)},mp.G=function(){this.a.f=null,delete this.f,Vy(this.a),delete this.a,ag.S.G.call(this)},xp(ug,Iv),xp(cg,Sv),xp(lg,og),lg.prototype.ta=function(){this.a.dispatchEvent("a")},lg.prototype.sa=function(t){this.a.dispatchEvent(new ug(t))},lg.prototype.ra=function(t){this.a.dispatchEvent(new cg)},lg.prototype.qa=function(){this.a.dispatchEvent("b")},sg.prototype.createWebChannel=sg.prototype.a,ag.prototype.send=ag.prototype.Pa,ag.prototype.open=ag.prototype.Oa,gv.NO_ERROR=0,gv.TIMEOUT=8,gv.HTTP_ERROR=6,mv.COMPLETE="complete",(wv.EventType=Tv).OPEN="a",Tv.CLOSE="b",Tv.ERROR="c",Tv.MESSAGE="d",Md.prototype.listen=Md.prototype.va,Cy.prototype.listenOnce=Cy.prototype.wa,Cy.prototype.getLastError=Cy.prototype.Qa,Cy.prototype.getLastErrorCode=Cy.prototype.ua,Cy.prototype.getStatus=Cy.prototype.X,Cy.prototype.getResponseJson=Cy.prototype.Na,Cy.prototype.getResponseText=Cy.prototype.$,Cy.prototype.send=Cy.prototype.ba;var hg={createWebChannelTransport:function(){return new sg},ErrorCode:gv,EventType:mv,WebChannel:wv,XhrIo:Cy},fg=hg.createWebChannelTransport,pg=hg.ErrorCode,dg=hg.EventType,vg=hg.WebChannel,yg=hg.XhrIo,gg=new $a("@firebase/firestore");function mg(){return gg.logLevel}function bg(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];gg.logLevel<=Wa.DEBUG&&(e=n.map(Eg),gg.debug.apply(gg,Hs(["Firestore (7.19.0): "+t],e)))}function _g(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];gg.logLevel<=Wa.ERROR&&(e=n.map(Eg),gg.error.apply(gg,Hs(["Firestore (7.19.0): "+t],e)))}function wg(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];gg.logLevel<=Wa.WARN&&(e=n.map(Eg),gg.warn.apply(gg,Hs(["Firestore (7.19.0): "+t],e)))}function Eg(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(i){return t}}function Tg(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (7.19.0) INTERNAL ASSERTION FAILED: "+t;throw _g(e),new Error(e)}function Ig(t){t||Tg()}var Sg=(Cg.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=function(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(40);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<40;r++)n[r]=Math.floor(256*Math.random());return n}(),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},Cg);function Cg(){}function kg(t,e){return t<e?-1:e<t?1:0}function Ng(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Ag(t){return t+"\0"}function Og(t,e,n,r,i){this.s=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i}var Pg=(Object.defineProperty(Rg.prototype,"i",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),Rg.prototype.isEqual=function(t){return t instanceof Rg&&t.projectId===this.projectId&&t.database===this.database},Rg.prototype.o=function(t){return kg(this.projectId,t.projectId)||kg(this.database,t.database)},Rg);function Rg(t,e){this.projectId=t,this.database=e||"(default)"}function xg(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Dg(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Lg(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Mg,Fg,Ug,jg=(nm.prototype.get=function(t){var e=this.h(t),n=this.l[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.u(s,t))return a}},nm.prototype.has=function(t){return void 0!==this.get(t)},nm.prototype.set=function(t,e){var n=this.h(t),r=this.l[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.u(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.l[n]=[[t,e]]},nm.prototype.delete=function(t){var e=this.h(t),n=this.l[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.u(n[r][0],t))return 1===n.length?delete this.l[e]:n.splice(r,1),!0;return!1},nm.prototype.forEach=function(t){Dg(this.l,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},nm.prototype._=function(){return Lg(this.l)},nm),Vg={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},qg=(Fs(em,Ug=Error),em),Bg=(tm.now=function(){return tm.fromMillis(Date.now())},tm.fromDate=function(t){return tm.fromMillis(t.getTime())},tm.fromMillis=function(t){var e=Math.floor(t/1e3);return new tm(e,1e6*(t-1e3*e))},tm.prototype.toDate=function(){return new Date(this.toMillis())},tm.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},tm.prototype.T=function(t){return this.seconds===t.seconds?kg(this.nanoseconds,t.nanoseconds):kg(this.seconds,t.seconds)},tm.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},tm.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},tm.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},tm.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},tm),Wg=(Zg.m=function(t){return new Zg(t)},Zg.min=function(){return new Zg(new Bg(0,0))},Zg.prototype.o=function(t){return this.timestamp.T(t.timestamp)},Zg.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},Zg.prototype.I=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},Zg.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},Zg.prototype.A=function(){return this.timestamp},Zg),Hg=(Object.defineProperty(Jg.prototype,"length",{get:function(){return this.R},enumerable:!1,configurable:!0}),Jg.prototype.isEqual=function(t){return 0===Jg.P(this,t)},Jg.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof Jg?t.forEach((function(t){e.push(t)})):e.push(t),this.g(e)},Jg.prototype.limit=function(){return this.offset+this.length},Jg.prototype.V=function(t){return t=void 0===t?1:t,this.g(this.segments,this.offset+t,this.length-t)},Jg.prototype.p=function(){return this.g(this.segments,this.offset,this.length-1)},Jg.prototype.v=function(){return this.segments[this.offset]},Jg.prototype.S=function(){return this.get(this.length-1)},Jg.prototype.get=function(t){return this.segments[this.offset+t]},Jg.prototype._=function(){return 0===this.length},Jg.prototype.D=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Jg.prototype.C=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Jg.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},Jg.prototype.N=function(){return this.segments.slice(this.offset,this.limit())},Jg.P=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},Jg),zg=(Fs($g,Fg=Hg),$g.prototype.g=function(t,e,n){return new $g(t,e,n)},$g.prototype.F=function(){return this.N().join("/")},$g.prototype.toString=function(){return this.F()},$g.k=function(t){if(0<=t.indexOf("//"))throw new qg(Vg.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new $g(t.split("/").filter((function(t){return 0<t.length})))},$g.$=function(){return new $g([])},$g),Gg=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Kg=(Fs(Xg,Mg=Hg),Xg.prototype.g=function(t,e,n){return new Xg(t,e,n)},Xg.O=function(t){return Gg.test(t)},Xg.prototype.F=function(){return this.N().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),Xg.O(t)||(t="`"+t+"`"),t})).join(".")},Xg.prototype.toString=function(){return this.F()},Xg.prototype.M=function(){return 1===this.length&&"__name__"===this.get(0)},Xg.L=function(){return new Xg(["__name__"])},Xg.q=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new qg(Vg.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new qg(Vg.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[r+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new qg(Vg.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=a,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new qg(Vg.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Xg(e)},Xg.$=function(){return new Xg([])},Xg),Qg=(Yg.B=function(t){return new Yg(zg.k(t))},Yg.U=function(t){return new Yg(zg.k(t).V(5))},Yg.prototype.W=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},Yg.prototype.isEqual=function(t){return null!==t&&0===zg.P(this.path,t.path)},Yg.prototype.toString=function(){return this.path.toString()},Yg.P=function(t,e){return zg.P(t.path,e.path)},Yg.j=function(t){return t.length%2==0},Yg.K=function(t){return new Yg(new zg(t.slice()))},Yg);function Yg(t){this.path=t}function Xg(){return null!==Mg&&Mg.apply(this,arguments)||this}function $g(){return null!==Fg&&Fg.apply(this,arguments)||this}function Jg(t,e,n){void 0===e?e=0:e>t.length&&Tg(),void 0===n?n=t.length-e:n>t.length-e&&Tg(),this.segments=t,this.offset=e,this.R=n}function Zg(t){this.timestamp=t}function tm(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new qg(Vg.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new qg(Vg.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new qg(Vg.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new qg(Vg.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function em(t,e){var n=this;return(n=Ug.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function nm(t,e){this.h=t,this.u=e,this.l={}}function rm(t){return null==t}function im(t){return-0===t&&1/t==-1/0}function om(t){return"number"==typeof t&&Number.isInteger(t)&&!im(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var sm=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.G=null};function am(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new sm(t,e,n,r,i,o,s)}function um(t){var e,n=t;return null===n.G&&(e=n.path.F(),null!==n.collectionGroup&&(e+="|cg:"+n.collectionGroup),e+="|f:",e+=n.filters.map((function(t){return(e=t).field.F()+e.op.toString()+lb(e.value);var e})).join(","),e+="|ob:",e+=n.orderBy.map((function(t){return(e=t).field.F()+e.dir;var e})).join(","),rm(n.limit)||(e+="|l:",e+=n.limit),n.startAt&&(e+="|lb:",e+=Bw(n.startAt)),n.endAt&&(e+="|ub:",e+=Bw(n.endAt)),n.G=e),n.G}function cm(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n,r,i=0;i<t.orderBy.length;i++)if(n=t.orderBy[i],r=e.orderBy[i],n.dir!==r.dir||!n.field.isEqual(r.field))return!1;if(t.filters.length!==e.filters.length)return!1;for(var o,s,a=0;a<t.filters.length;a++)if(o=t.filters[a],s=e.filters[a],o.op!==s.op||!o.field.isEqual(s.field)||!sb(o.value,s.value))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Hw(t.startAt,e.startAt)&&Hw(t.endAt,e.endAt)}function lm(t){return Qg.j(t.path)&&null===t.collectionGroup&&0===t.filters.length}var hm=(fm.fromBase64String=function(t){return new fm(atob(t))},fm.fromUint8Array=function(t){return new fm(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},fm.prototype.toBase64=function(){return t=this.H,btoa(t);var t},fm.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.H)},fm.prototype.Y=function(){return 2*this.H.length},fm.prototype.o=function(t){return kg(this.H,t.H)},fm.prototype.isEqual=function(t){return this.H===t.H},fm);function fm(t){this.H=t}function pm(t){this.count=t}hm.J=new hm("");var dm,vm,ym=(gm.prototype.tt=function(t){return new gm(this.target,this.targetId,this.X,t,this.Z,this.lastLimboFreeSnapshotVersion,this.resumeToken)},gm.prototype.et=function(t,e){return new gm(this.target,this.targetId,this.X,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},gm.prototype.nt=function(t){return new gm(this.target,this.targetId,this.X,this.sequenceNumber,this.Z,t,this.resumeToken)},gm);function gm(t,e,n,r,i,o,s){void 0===i&&(i=Wg.min()),void 0===o&&(o=Wg.min()),void 0===s&&(s=hm.J),this.target=t,this.targetId=e,this.X=n,this.sequenceNumber=r,this.Z=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}function mm(t){switch(t){case Vg.OK:return Tg(),0;case Vg.CANCELLED:case Vg.UNKNOWN:case Vg.DEADLINE_EXCEEDED:case Vg.RESOURCE_EXHAUSTED:case Vg.INTERNAL:case Vg.UNAVAILABLE:case Vg.UNAUTHENTICATED:return;case Vg.INVALID_ARGUMENT:case Vg.NOT_FOUND:case Vg.ALREADY_EXISTS:case Vg.PERMISSION_DENIED:case Vg.FAILED_PRECONDITION:case Vg.ABORTED:case Vg.OUT_OF_RANGE:case Vg.UNIMPLEMENTED:case Vg.DATA_LOSS:return 1;default:return Tg(),0}}function bm(t){if(void 0===t)return _g("GRPC error has no .code"),Vg.UNKNOWN;switch(t){case dm.OK:return Vg.OK;case dm.CANCELLED:return Vg.CANCELLED;case dm.UNKNOWN:return Vg.UNKNOWN;case dm.DEADLINE_EXCEEDED:return Vg.DEADLINE_EXCEEDED;case dm.RESOURCE_EXHAUSTED:return Vg.RESOURCE_EXHAUSTED;case dm.INTERNAL:return Vg.INTERNAL;case dm.UNAVAILABLE:return Vg.UNAVAILABLE;case dm.UNAUTHENTICATED:return Vg.UNAUTHENTICATED;case dm.INVALID_ARGUMENT:return Vg.INVALID_ARGUMENT;case dm.NOT_FOUND:return Vg.NOT_FOUND;case dm.ALREADY_EXISTS:return Vg.ALREADY_EXISTS;case dm.PERMISSION_DENIED:return Vg.PERMISSION_DENIED;case dm.FAILED_PRECONDITION:return Vg.FAILED_PRECONDITION;case dm.ABORTED:return Vg.ABORTED;case dm.OUT_OF_RANGE:return Vg.OUT_OF_RANGE;case dm.UNIMPLEMENTED:return Vg.UNIMPLEMENTED;case dm.DATA_LOSS:return Vg.DATA_LOSS;default:return Tg()}}(vm=dm=dm||{})[vm.OK=0]="OK",vm[vm.CANCELLED=1]="CANCELLED",vm[vm.UNKNOWN=2]="UNKNOWN",vm[vm.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vm[vm.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vm[vm.NOT_FOUND=5]="NOT_FOUND",vm[vm.ALREADY_EXISTS=6]="ALREADY_EXISTS",vm[vm.PERMISSION_DENIED=7]="PERMISSION_DENIED",vm[vm.UNAUTHENTICATED=16]="UNAUTHENTICATED",vm[vm.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vm[vm.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vm[vm.ABORTED=10]="ABORTED",vm[vm.OUT_OF_RANGE=11]="OUT_OF_RANGE",vm[vm.UNIMPLEMENTED=12]="UNIMPLEMENTED",vm[vm.INTERNAL=13]="INTERNAL",vm[vm.UNAVAILABLE=14]="UNAVAILABLE",vm[vm.DATA_LOSS=15]="DATA_LOSS";var _m=(Sm.prototype.st=function(t,e){return new Sm(this.P,this.root.st(t,e,this.P).copy(null,null,Em.it,null,null))},Sm.prototype.remove=function(t){return new Sm(this.P,this.root.remove(t,this.P).copy(null,null,Em.it,null,null))},Sm.prototype.get=function(t){for(var e=this.root;!e._();){var n=this.P(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},Sm.prototype.indexOf=function(t){for(var e=0,n=this.root;!n._();){var r=this.P(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},Sm.prototype._=function(){return this.root._()},Object.defineProperty(Sm.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),Sm.prototype.rt=function(){return this.root.rt()},Sm.prototype.ot=function(){return this.root.ot()},Sm.prototype.ht=function(t){return this.root.ht(t)},Sm.prototype.forEach=function(t){this.ht((function(e,n){return t(e,n),!1}))},Sm.prototype.toString=function(){var t=[];return this.ht((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},Sm.prototype.at=function(t){return this.root.at(t)},Sm.prototype.ct=function(){return new wm(this.root,null,this.P,!1)},Sm.prototype.ut=function(t){return new wm(this.root,t,this.P,!1)},Sm.prototype.lt=function(){return new wm(this.root,null,this.P,!0)},Sm.prototype._t=function(t){return new wm(this.root,t,this.P,!0)},Sm),wm=(Im.prototype.wt=function(){var t=this.dt.pop(),e={key:t.key,value:t.value};if(this.ft)for(t=t.left;!t._();)this.dt.push(t),t=t.right;else for(t=t.right;!t._();)this.dt.push(t),t=t.left;return e},Im.prototype.Tt=function(){return 0<this.dt.length},Im.prototype.Et=function(){if(0===this.dt.length)return null;var t=this.dt[this.dt.length-1];return{key:t.key,value:t.value}},Im),Em=(Tm.prototype.copy=function(t,e,n,r,i){return new Tm(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Tm.prototype._=function(){return!1},Tm.prototype.ht=function(t){return this.left.ht(t)||t(this.key,this.value)||this.right.ht(t)},Tm.prototype.at=function(t){return this.right.at(t)||t(this.key,this.value)||this.left.at(t)},Tm.prototype.min=function(){return this.left._()?this:this.left.min()},Tm.prototype.rt=function(){return this.min().key},Tm.prototype.ot=function(){return this.right._()?this.key:this.right.ot()},Tm.prototype.st=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.st(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.st(t,e,n))).It()},Tm.prototype.At=function(){if(this.left._())return Tm.EMPTY;var t=this;return t.left.Rt()||t.left.left.Rt()||(t=t.Pt()),(t=t.copy(null,null,null,t.left.At(),null)).It()},Tm.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left._()||r.left.Rt()||r.left.left.Rt()||(r=r.Pt()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.Rt()&&(r=r.gt()),r.right._()||r.right.Rt()||r.right.left.Rt()||(r=r.Vt()),0===e(t,r.key)){if(r.right._())return Tm.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.At())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.It()},Tm.prototype.Rt=function(){return this.color},Tm.prototype.It=function(){var t=this;return t.right.Rt()&&!t.left.Rt()&&(t=t.yt()),t.left.Rt()&&t.left.left.Rt()&&(t=t.gt()),t.left.Rt()&&t.right.Rt()&&(t=t.pt()),t},Tm.prototype.Pt=function(){var t=this.pt();return t.right.left.Rt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.gt())).yt()).pt()),t},Tm.prototype.Vt=function(){var t=this.pt();return t.left.left.Rt()&&(t=(t=t.gt()).pt()),t},Tm.prototype.yt=function(){var t=this.copy(null,null,Tm.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},Tm.prototype.gt=function(){var t=this.copy(null,null,Tm.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},Tm.prototype.pt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},Tm.prototype.bt=function(){var t=this.vt();return Math.pow(2,t)<=this.size+1},Tm.prototype.vt=function(){if(this.Rt()&&this.left.Rt())throw Tg();if(this.right.Rt())throw Tg();var t=this.left.vt();if(t!==this.right.vt())throw Tg();return t+(this.Rt()?0:1)},Tm);function Tm(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Tm.RED,this.left=null!=r?r:Tm.EMPTY,this.right=null!=i?i:Tm.EMPTY,this.size=this.left.size+1+this.right.size}function Im(t,e,n,r){this.ft=r,this.dt=[];for(var i=1;!t._();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ft?t.left:t.right;else{if(0===i){this.dt.push(t);break}this.dt.push(t),t=this.ft?t.right:t.left}}function Sm(t,e){this.P=t,this.root=e||Em.EMPTY}function Cm(){this.size=0}Em.EMPTY=null,Em.RED=!0,Em.it=!1,Em.EMPTY=(Object.defineProperty(Cm.prototype,"key",{get:function(){throw Tg()},enumerable:!1,configurable:!0}),Object.defineProperty(Cm.prototype,"value",{get:function(){throw Tg()},enumerable:!1,configurable:!0}),Object.defineProperty(Cm.prototype,"color",{get:function(){throw Tg()},enumerable:!1,configurable:!0}),Object.defineProperty(Cm.prototype,"left",{get:function(){throw Tg()},enumerable:!1,configurable:!0}),Object.defineProperty(Cm.prototype,"right",{get:function(){throw Tg()},enumerable:!1,configurable:!0}),Cm.prototype.copy=function(t,e,n,r,i){return this},Cm.prototype.st=function(t,e,n){return new Em(t,e)},Cm.prototype.remove=function(t,e){return this},Cm.prototype._=function(){return!0},Cm.prototype.ht=function(t){return!1},Cm.prototype.at=function(t){return!1},Cm.prototype.rt=function(){return null},Cm.prototype.ot=function(){return null},Cm.prototype.Rt=function(){return!1},Cm.prototype.bt=function(){return!0},Cm.prototype.vt=function(){return 0},new Cm);var km=(Pm.prototype.has=function(t){return null!==this.data.get(t)},Pm.prototype.first=function(){return this.data.rt()},Pm.prototype.last=function(){return this.data.ot()},Object.defineProperty(Pm.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),Pm.prototype.indexOf=function(t){return this.data.indexOf(t)},Pm.prototype.forEach=function(t){this.data.ht((function(e,n){return t(e),!1}))},Pm.prototype.St=function(t,e){for(var n=this.data.ut(t[0]);n.Tt();){var r=n.wt();if(0<=this.P(r.key,t[1]))return;e(r.key)}},Pm.prototype.Dt=function(t,e){for(var n=void 0!==e?this.data.ut(e):this.data.ct();n.Tt();)if(!t(n.wt().key))return},Pm.prototype.Ct=function(t){var e=this.data.ut(t);return e.Tt()?e.wt().key:null},Pm.prototype.ct=function(){return new Nm(this.data.ct())},Pm.prototype.ut=function(t){return new Nm(this.data.ut(t))},Pm.prototype.add=function(t){return this.copy(this.data.remove(t).st(t,!0))},Pm.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},Pm.prototype._=function(){return this.data._()},Pm.prototype.Nt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},Pm.prototype.isEqual=function(t){if(!(t instanceof Pm))return!1;if(this.size!==t.size)return!1;for(var e=this.data.ct(),n=t.data.ct();e.Tt();){var r=e.wt().key,i=n.wt().key;if(0!==this.P(r,i))return!1}return!0},Pm.prototype.N=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},Pm.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},Pm.prototype.copy=function(t){var e=new Pm(this.P);return e.data=t,e},Pm),Nm=(Om.prototype.wt=function(){return this.Ft.wt().key},Om.prototype.Tt=function(){return this.Ft.Tt()},Om),Am=new _m(Qg.P);function Om(t){this.Ft=t}function Pm(t){this.P=t,this.data=new _m(this.P)}var Rm=new _m(Qg.P),xm=new _m(Qg.P),Dm=new km(Qg.P);function Lm(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Dm,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Mm=new km(kg);function Fm(t,e,n,r){this.te=t,this.removedTargetIds=e,this.key=n,this.ee=r}function Um(t,e){this.targetId=t,this.ne=e}function jm(t,e,n,r){void 0===n&&(n=hm.J),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}var Vm=(Zm.xt=function(t){return new Zm(t.P)},Zm.prototype.has=function(t){return null!=this.kt.get(t)},Zm.prototype.get=function(t){return this.kt.get(t)},Zm.prototype.first=function(){return this.$t.rt()},Zm.prototype.last=function(){return this.$t.ot()},Zm.prototype._=function(){return this.$t._()},Zm.prototype.indexOf=function(t){var e=this.kt.get(t);return e?this.$t.indexOf(e):-1},Object.defineProperty(Zm.prototype,"size",{get:function(){return this.$t.size},enumerable:!1,configurable:!0}),Zm.prototype.forEach=function(t){this.$t.ht((function(e,n){return t(e),!1}))},Zm.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.kt.st(t.key,t),e.$t.st(t,null))},Zm.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.kt.remove(t),this.$t.remove(e)):this},Zm.prototype.isEqual=function(t){if(!(t instanceof Zm))return!1;if(this.size!==t.size)return!1;for(var e=this.$t.ct(),n=t.$t.ct();e.Tt();){var r=e.wt().key,i=n.wt().key;if(!r.isEqual(i))return!1}return!0},Zm.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},Zm.prototype.copy=function(t,e){var n=new Zm;return n.P=this.P,n.kt=t,n.$t=e,n},Zm),qm=(Jm.prototype.track=function(t){var e=t.doc.key,n=this.Ot.get(e);!n||0!==t.type&&3===n.type?this.Ot=this.Ot.st(e,t):3===t.type&&1!==n.type?this.Ot=this.Ot.st(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Ot=this.Ot.st(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Ot=this.Ot.st(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Ot=this.Ot.remove(e):1===t.type&&2===n.type?this.Ot=this.Ot.st(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Ot=this.Ot.st(e,{type:2,doc:t.doc}):Tg()},Jm.prototype.Mt=function(){var t=[];return this.Ot.ht((function(e,n){t.push(n)})),t},Jm),Bm=($m.Qt=function(t,e,n,r){var i=[];return e.forEach((function(t){i.push({type:0,doc:t})})),new $m(t,e,Vm.xt(e),i,n,r,!0,!1)},Object.defineProperty($m.prototype,"hasPendingWrites",{get:function(){return!this.qt._()},enumerable:!1,configurable:!0}),$m.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Bt===t.Bt&&this.qt.isEqual(t.qt)&&hw(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Lt.isEqual(t.Lt)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},$m),Wm=(Xm.zt=function(t,e){var n=new Map;return n.set(t,Hm.Ht(t,e)),new Xm(Wg.min(),n,Mm,Am,Lm())},Xm),Hm=(Ym.Ht=function(t,e){return new Ym(hm.J,e,Lm(),Lm(),Lm())},Ym),zm=(Object.defineProperty(Qm.prototype,"Yt",{get:function(){return this.oe},enumerable:!1,configurable:!0}),Object.defineProperty(Qm.prototype,"resumeToken",{get:function(){return this.re},enumerable:!1,configurable:!0}),Object.defineProperty(Qm.prototype,"ae",{get:function(){return 0!==this.se},enumerable:!1,configurable:!0}),Object.defineProperty(Qm.prototype,"ce",{get:function(){return this.he},enumerable:!1,configurable:!0}),Qm.prototype.ue=function(t){0<t.Y()&&(this.he=!0,this.re=t)},Qm.prototype.le=function(){var t=Lm(),e=Lm(),n=Lm();return this.ie.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Tg()}})),new Hm(this.re,this.oe,t,e,n)},Qm.prototype._e=function(){this.he=!1,this.ie=eb()},Qm.prototype.fe=function(t,e){this.he=!0,this.ie=this.ie.st(t,e)},Qm.prototype.de=function(t){this.he=!0,this.ie=this.ie.remove(t)},Qm.prototype.we=function(){this.se+=1},Qm.prototype.Te=function(){--this.se},Qm.prototype.Ee=function(){this.he=!0,this.oe=!0},Qm),Gm=(Km.prototype.ge=function(t){for(var e=0,n=t.te;e<n.length;e++){var r=n[e];t.ee instanceof Q_?this.Ve(r,t.ee):t.ee instanceof Y_&&this.ye(r,t.key,t.ee)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.ye(s,t.key,t.ee)}},Km.prototype.pe=function(t){var e=this;this.be(t,(function(n){var r=e.ve(n);switch(t.state){case 0:e.Se(n)&&r.ue(t.resumeToken);break;case 1:r.Te(),r.ae||r._e(),r.ue(t.resumeToken);break;case 2:r.Te(),r.ae||e.removeTarget(n);break;case 3:e.Se(n)&&(r.Ee(),r.ue(t.resumeToken));break;case 4:e.Se(n)&&(e.De(n),r.ue(t.resumeToken));break;default:Tg()}}))},Km.prototype.be=function(t,e){var n=this;0<t.targetIds.length?t.targetIds.forEach(e):this.Ie.forEach((function(t,r){n.Se(r)&&e(r)}))},Km.prototype.Ce=function(t){var e,n,r=t.targetId,i=t.ne.count,o=this.Ne(r);o&&(lm(e=o.target)?0===i?(n=new Qg(e.path),this.ye(r,n,new Y_(n,Wg.min()))):Ig(1===i):this.Fe(r)!==i&&(this.De(r),this.Pe=this.Pe.add(r)))},Km.prototype.ke=function(t){var e=this,n=new Map;this.Ie.forEach((function(r,i){var o,s=e.Ne(i);s&&(r.Yt&&lm(s.target)&&(o=new Qg(s.target.path),null!==e.Ae.get(o)||e.$e(i,o)||e.ye(i,o,new Y_(o,t))),r.ce&&(n.set(i,r.le()),r._e()))}));var r=Lm();this.Re.forEach((function(t,n){var i=!0;n.Dt((function(t){var n=e.Ne(t);return!n||2===n.X||(i=!1)})),i&&(r=r.add(t))}));var i=new Wm(t,n,this.Pe,this.Ae,r);return this.Ae=Am,this.Re=tb(),this.Pe=new km(kg),i},Km.prototype.Ve=function(t,e){var n;this.Se(t)&&(n=this.$e(t,e.key)?2:0,this.ve(t).fe(e.key,n),this.Ae=this.Ae.st(e.key,e),this.Re=this.Re.st(e.key,this.xe(e.key).add(t)))},Km.prototype.ye=function(t,e,n){var r;this.Se(t)&&(r=this.ve(t),this.$e(t,e)?r.fe(e,1):r.de(e),this.Re=this.Re.st(e,this.xe(e).delete(t)),n&&(this.Ae=this.Ae.st(e,n)))},Km.prototype.removeTarget=function(t){this.Ie.delete(t)},Km.prototype.Fe=function(t){var e=this.ve(t).le();return this.me.Oe(t).size+e.Jt.size-e.Zt.size},Km.prototype.we=function(t){this.ve(t).we()},Km.prototype.ve=function(t){var e=this.Ie.get(t);return e||(e=new zm,this.Ie.set(t,e)),e},Km.prototype.xe=function(t){var e=this.Re.get(t);return e||(e=new km(kg),this.Re=this.Re.st(t,e)),e},Km.prototype.Se=function(t){var e=null!==this.Ne(t);return e||bg("WatchChangeAggregator","Detected inactive target",t),e},Km.prototype.Ne=function(t){var e=this.Ie.get(t);return e&&e.ae?null:this.me.Me(t)},Km.prototype.De=function(t){var e=this;this.Ie.set(t,new zm),this.me.Oe(t).forEach((function(n){e.ye(t,n,null)}))},Km.prototype.$e=function(t,e){return this.me.Oe(t).has(e)},Km);function Km(t){this.me=t,this.Ie=new Map,this.Ae=Am,this.Re=tb(),this.Pe=new km(kg)}function Qm(){this.se=0,this.ie=eb(),this.re=hm.J,this.oe=!1,this.he=!0}function Ym(t,e,n,r,i){this.resumeToken=t,this.Yt=e,this.Jt=n,this.Xt=r,this.Zt=i}function Xm(t,e,n,r,i){this.Z=t,this.Wt=e,this.jt=n,this.Kt=r,this.Gt=i}function $m(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Lt=n,this.docChanges=r,this.qt=i,this.fromCache=o,this.Bt=s,this.Ut=a}function Jm(){this.Ot=new _m(Qg.P)}function Zm(t){this.P=t?function(e,n){return t(e,n)||Qg.P(e.key,n.key)}:function(t,e){return Qg.P(t.key,e.key)},this.kt=Rm,this.$t=new _m(this.P)}function tb(){return new _m(Qg.P)}function eb(){return new _m(Qg.P)}function nb(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function rb(t){var e=hb(t.mapValue.fields.__local_write_time__.timestampValue);return new Bg(e.seconds,e.nanos)}var ib=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ob(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?nb(t)?4:10:Tg()}function sb(t,e){var n,r,i,o=ob(t);if(o!==ob(e))return!1;switch(o){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return rb(t).isEqual(rb(e));case 3:return function(e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=hb(t.timestampValue),r=hb(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e);case 5:return t.stringValue===e.stringValue;case 6:return i=e,pb(t.bytesValue).isEqual(pb(i.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return r=e,fb((n=t).geoPointValue.latitude)===fb(r.geoPointValue.latitude)&&fb(n.geoPointValue.longitude)===fb(r.geoPointValue.longitude);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return fb(t.integerValue)===fb(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=fb(t.doubleValue),r=fb(e.doubleValue);return n===r?im(n)===im(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Ng(t.arrayValue.values||[],e.arrayValue.values||[],sb);case 10:return function(){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(xg(n)!==xg(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!sb(n[i],r[i])))return!1;return!0}();default:return Tg()}}function ab(t,e){return void 0!==(t.values||[]).find((function(t){return sb(t,e)}))}function ub(t,e){var n,r,i,o,s,a,u,c,l,h,f=ob(t),p=ob(e);if(f!==p)return kg(f,p);switch(f){case 0:return 0;case 1:return kg(t.booleanValue,e.booleanValue);case 2:return c=e,(l=fb(t.integerValue||t.doubleValue))<(h=fb(c.integerValue||c.doubleValue))?-1:h<l?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1;case 3:return cb(t.timestampValue,e.timestampValue);case 4:return cb(rb(t),rb(e));case 5:return kg(t.stringValue,e.stringValue);case 6:return o=t.bytesValue,s=e.bytesValue,a=pb(o),u=pb(s),a.o(u);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=kg(n[i],r[i]);if(0!==o)return o}return kg(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return n=t.geoPointValue,r=e.geoPointValue,0!==(i=kg(fb(n.latitude),fb(r.latitude)))?i:kg(fb(n.longitude),fb(r.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=ub(n[i],r[i]);if(o)return o}return kg(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=kg(r[s],o[s]);if(0!==a)return a;var u=ub(n[r[s]],i[o[s]]);if(0!==u)return u}return kg(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Tg()}}function cb(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return kg(t,e);var n=hb(t),r=hb(e),i=kg(n.seconds,r.seconds);return 0!==i?i:kg(n.nanos,r.nanos)}function lb(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?"time("+(n=hb(e.timestampValue)).seconds+","+n.nanos+")":"stringValue"in e?e.stringValue:"bytesValue"in e?pb(e.bytesValue).toBase64():"referenceValue"in e?(i=e.referenceValue,Qg.U(i).toString()):"geoPointValue"in e?"geo("+(r=e.geoPointValue).latitude+","+r.longitude+")":"arrayValue"in e?function(){for(var n="[",r=!0,i=0,o=e.arrayValue.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}():"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):Tg();var n,r,i}(t)}function hb(t){if(Ig(!!t),"string"!=typeof t)return{seconds:fb(t.seconds),nanos:fb(t.nanos)};var e,n=0,r=ib.exec(t);Ig(!!r),r[1]&&(e=((e=r[1])+"000000000").substr(0,9),n=Number(e));var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:n}}function fb(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function pb(t){return"string"==typeof t?hm.fromBase64String(t):hm.fromUint8Array(t)}function db(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.F()}}function vb(t){return t&&"integerValue"in t}function yb(t){return!!t&&"arrayValue"in t}function gb(t){return t&&"nullValue"in t}function mb(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bb(t){return t&&"mapValue"in t}var _b={asc:"ASCENDING",desc:"DESCENDING"},wb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Eb=function(t,e){this.s=t,this.Le=e};function Tb(t){return{integerValue:""+t}}function Ib(t,e){if(t.Le){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:im(e)?"-0":e}}function Sb(t,e){return om(e)?Tb(e):Ib(t,e)}function Cb(t,e){return t.Le?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function kb(t,e){return t.Le?e.toBase64():e.toUint8Array()}function Nb(t){return Ig(!!t),Wg.m((e=hb(t),new Bg(e.seconds,e.nanos)));var e}function Ab(t,e){return new zg(["projects",t.projectId,"databases",t.database]).child("documents").child(e).F()}function Ob(t){var e=zg.k(t);return Ig(Gb(e)),e}function Pb(t,e){return Ab(t.s,e.path)}function Rb(t,e){var n=Ob(e);return Ig(n.get(1)===t.s.projectId),Ig(!n.get(3)&&!t.s.database||n.get(3)===t.s.database),new Qg(Mb(n))}function xb(t,e){return Ab(t.s,e)}function Db(t){var e=Ob(t);return 4===e.length?zg.$():Mb(e)}function Lb(t){return new zg(["projects",t.s.projectId,"databases",t.s.database]).F()}function Mb(t){return Ig(4<t.length&&"documents"===t.get(4)),t.V(5)}function Fb(t,e,n){return{name:Pb(t,e),fields:n.proto.mapValue.fields}}function Ub(t,e){var n,r,i,o,s,a;if(e instanceof S_)n={update:Fb(t,e.key,e.value)};else if(e instanceof M_)n={delete:Pb(t,e.key)};else if(e instanceof C_)n={update:Fb(t,e.key,e.data),updateMask:(r=e.qe,i=[],r.fields.forEach((function(t){return i.push(t.F())})),{fieldPaths:i})};else if(e instanceof P_)n={transform:{document:Pb(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){var e=t.transform;if(e instanceof $b)return{fieldPath:t.field.F(),setToServerValue:"REQUEST_TIME"};if(e instanceof Jb)return{fieldPath:t.field.F(),appendMissingElements:{values:e.elements}};if(e instanceof r_)return{fieldPath:t.field.F(),removeAllFromArray:{values:e.elements}};if(e instanceof a_)return{fieldPath:t.field.F(),increment:e.Be};throw Tg()}))}};else{if(!(e instanceof F_))return Tg();n={verify:Pb(t,e.key)}}return e.Qe.Ue||(n.currentDocument=void 0!==(o=e.Qe).updateTime?{updateTime:(s=t,a=o.updateTime,Cb(s,a.A()))}:void 0!==o.exists?{exists:o.exists}:Tg()),n}function jb(t,e){var n,r,i=e.currentDocument?void 0!==(n=e.currentDocument).updateTime?v_.updateTime(Nb(n.updateTime)):void 0!==n.exists?v_.exists(n.exists):v_.We():v_.We();if(e.update){e.update.name;var o=Rb(t,e.update.name),s=new U_({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=(r=e.updateMask.fieldPaths||[],new h_(r.map((function(t){return Kg.q(t)}))));return new C_(o,s,a,i)}return new S_(o,s,i)}if(e.delete){var u=Rb(t,e.delete);return new M_(u,i)}if(e.transform){var c=Rb(t,e.transform.document),l=e.transform.fieldTransforms.map((function(e){return function(t,e){var n,r,i=null;"setToServerValue"in e?(Ig("REQUEST_TIME"===e.setToServerValue),i=new $b):"appendMissingElements"in e?(n=e.appendMissingElements.values||[],i=new Jb(n)):"removeAllFromArray"in e?(r=e.removeAllFromArray.values||[],i=new r_(r)):"increment"in e?i=new a_(t,e.increment):Tg();var o=Kg.q(e.fieldPath);return new f_(o,i)}(t,e)}));return Ig(!0===i.exists),new P_(c,l)}if(e.verify){var h=Rb(t,e.verify);return new F_(h,i)}return Tg()}function Vb(t,e){return{documents:[xb(t,e.path)]}}function qb(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=xb(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=xb(t,r.p()),n.structuredQuery.from=[{collectionId:r.S()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){if("=="===t.op){if(mb(t.value))return{unaryFilter:{field:Hb(t.field),op:"IS_NAN"}};if(gb(t.value))return{unaryFilter:{field:Hb(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(mb(t.value))return{unaryFilter:{field:Hb(t.field),op:"IS_NOT_NAN"}};if(gb(t.value))return{unaryFilter:{field:Hb(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hb(t.field),op:(e=t.op,wb[e]),value:t.value}};var e}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return{field:Hb((e=t).field),direction:(n=e.dir,_b[n])};var e,n}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s,a=(s=e.limit,t.Le||rm(s)?s:{value:s});return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=Bb(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Bb(e.endAt)),n}function Bb(t){return{before:t.before,values:t.position}}function Wb(t){var e=!!t.before,n=t.values||[];return new Fw(n,e)}function Hb(t){return{fieldPath:t.F()}}function zb(t){return Kg.q(t.fieldPath)}function Gb(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}function Kb(){this.je=void 0}function Qb(t,e){return t instanceof a_?vb(n=e)||n&&"doubleValue"in n?e:{integerValue:0}:null;var n}var Yb,Xb,$b=(Fs(t_,Xb=Kb),t_),Jb=(Fs(Zb,Yb=Kb),Zb);function Zb(t){var e=this;return(e=Yb.call(this)||this).elements=t,e}function t_(){return null!==Xb&&Xb.apply(this,arguments)||this}function e_(t,e){for(var n=l_(e),r=0,i=t.elements;r<i.length;r++)!function(t){n.some((function(e){return sb(e,t)}))||n.push(t)}(i[r]);return{arrayValue:{values:n}}}var n_,r_=(Fs(i_,n_=Kb),i_);function i_(t){var e=this;return(e=n_.call(this)||this).elements=t,e}function o_(t,e){for(var n=l_(e),r=0,i=t.elements;r<i.length;r++)!function(t){n=n.filter((function(e){return!sb(e,t)}))}(i[r]);return{arrayValue:{values:n}}}var s_,a_=(Fs(u_,s_=Kb),u_);function u_(t,e){var n=this;return(n=s_.call(this)||this).serializer=t,n.Be=e,n}function c_(t){return fb(t.integerValue||t.doubleValue)}function l_(t){return yb(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var h_=(p_.prototype.Ke=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].D(t))return!0;return!1},p_.prototype.isEqual=function(t){return Ng(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},p_),f_=function(t,e){this.field=t,this.transform=e};function p_(t){(this.fields=t).sort(Kg.P)}function d_(t,e){this.version=t,this.transformResults=e}var v_=(y_.We=function(){return new y_},y_.exists=function(t){return new y_(void 0,t)},y_.updateTime=function(t){return new y_(t)},Object.defineProperty(y_.prototype,"Ue",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),y_.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},y_);function y_(t,e){this.updateTime=t,this.exists=e}function g_(t,e){return void 0!==t.updateTime?e instanceof Q_&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Q_}function m_(){}function b_(t,e,n){return t instanceof S_?new Q_(t.key,n.version,t.value,{hasCommittedMutations:!0}):t instanceof C_?function(t,e,n){if(!g_(t.Qe,e))return new X_(t.key,n.version);var r=A_(t,e);return new Q_(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof P_?function(t,e,n){if(Ig(null!=n.transformResults),!g_(t.Qe,e))return new X_(t.key,n.version);var r=e,i=function(t,e,n){var r=[];Ig(t.length===n.length);for(var i,o,s,a=0;a<n.length;a++){var u=t[a],c=u.transform,l=null;e instanceof Q_&&(l=e.field(u.field)),r.push((i=c,o=l,s=n[a],i instanceof Jb?e_(i,o):i instanceof r_?o_(i,o):s))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,s=x_(t,r.data(),i);return new Q_(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):new Y_(t.key,n.version,{hasCommittedMutations:!0})}function __(t,e,n,r){return t instanceof S_?function(t,e){if(!g_(t.Qe,e))return e;var n=E_(e);return new Q_(t.key,n,t.value,{Ge:!0})}(t,e):t instanceof C_?function(t,e){if(!g_(t.Qe,e))return e;var n=E_(e),r=A_(t,e);return new Q_(t.key,n,r,{Ge:!0})}(t,e):t instanceof P_?function(t,e,n,r){if(!g_(t.Qe,e))return e;var i=e,o=function(t,e,n,r){for(var i,o,s,a,u,c,l,h=[],f=0,p=t;f<p.length;f++){var d=p[f],v=d.transform,y=null;n instanceof Q_&&(y=n.field(d.field)),null===y&&r instanceof Q_&&(y=r.field(d.field)),h.push((o=y,s=e,l=c=u=a=void 0,(i=v)instanceof $b?(l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}},o&&(l.fields.__previous_value__=o),{mapValue:l}):i instanceof Jb?e_(i,o):i instanceof r_?o_(i,o):(c=c_(u=Qb(a=i,o))+c_(a.Be),vb(u)&&vb(a.Be)?Tb(c):Ib(a.serializer,c))))}return h}(t.fieldTransforms,n,e,r),s=x_(t,i.data(),o);return new Q_(t.key,i.version,s,{Ge:!0})}(t,e,r,n):(o=e,g_((i=t).Qe,o)?new Y_(i.key,Wg.min()):o);var i,o}function w_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Qe.isEqual(e.Qe)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.qe.isEqual(e.qe):2!==t.type||Ng(t.fieldTransforms,t.fieldTransforms,(function(t,e){return r=e,(n=t).field.isEqual(r.field)&&(i=n.transform,o=r.transform,i instanceof Jb&&o instanceof Jb||i instanceof r_&&o instanceof r_?Ng(i.elements,o.elements,sb):i instanceof a_&&o instanceof a_?sb(i.Be,o.Be):i instanceof $b&&o instanceof $b);var n,r,i,o})))}function E_(t){return t instanceof Q_?t.version:Wg.min()}var T_,I_,S_=(Fs(N_,I_=m_),N_),C_=(Fs(k_,T_=m_),k_);function k_(t,e,n,r){var i=this;return(i=T_.call(this)||this).key=t,i.data=e,i.qe=n,i.Qe=r,i.type=1,i}function N_(t,e,n){var r=this;return(r=I_.call(this)||this).key=t,r.value=e,r.Qe=n,r.type=0,r}function A_(t,e){return n=t,r=e instanceof Q_?e.data():U_.empty(),i=new j_(r),n.qe.fields.forEach((function(t){var e;t._()||(null!==(e=n.data.field(t))?i.set(t,e):i.delete(t))})),i.ze();var n,r,i}var O_,P_=(Fs(R_,O_=m_),R_);function R_(t,e){var n=this;return(n=O_.call(this)||this).key=t,n.fieldTransforms=e,n.type=2,n.Qe=v_.exists(!0),n}function x_(t,e,n){for(var r=new j_(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.ze()}var D_,L_,M_=(Fs(W_,L_=m_),W_),F_=(Fs(B_,D_=m_),B_),U_=(q_.empty=function(){return new q_({mapValue:{}})},q_.prototype.field=function(t){if(t._())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!bb(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.S()])||null},q_.prototype.isEqual=function(t){return sb(this.proto,t.proto)},q_),j_=(V_.prototype.set=function(t,e){return this.Je(t,e),this},V_.prototype.delete=function(t){return this.Je(t,null),this},V_.prototype.Je=function(t,e){for(var n=this.Ye,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map||(o=o&&10===ob(o)?new Map(Object.entries(o.mapValue.fields||{})):new Map,n.set(i,o)),n=o}n.set(t.S(),e)},V_.prototype.ze=function(){var t=this.Xe(Kg.$(),this.Ye);return null!=t?new U_(t):this.He},V_.prototype.Xe=function(t,e){var n=this,r=!1,i=this.He.field(t),o=bb(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){var s;e instanceof Map?null!=(s=n.Xe(t.child(i),e))&&(o[i]=s,r=!0):null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},V_);function V_(t){void 0===t&&(t=U_.empty()),this.He=t,this.Ye=new Map}function q_(t){this.proto=t}function B_(t,e){var n=this;return(n=D_.call(this)||this).key=t,n.Qe=e,n.type=4,n}function W_(t,e){var n=this;return(n=L_.call(this)||this).key=t,n.Qe=e,n.type=3,n}function H_(t,e){this.key=t,this.version=e}var z_,G_,K_,Q_=(Fs(Z_,K_=H_),Z_.prototype.field=function(t){return this.Ze.field(t)},Z_.prototype.data=function(){return this.Ze},Z_.prototype.tn=function(){return this.Ze.proto},Z_.prototype.isEqual=function(t){return t instanceof Z_&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Ge===t.Ge&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Ze.isEqual(t.Ze)},Z_.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Ze.toString()+", {hasLocalMutations: "+this.Ge+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(Z_.prototype,"hasPendingWrites",{get:function(){return this.Ge||this.hasCommittedMutations},enumerable:!1,configurable:!0}),Z_),Y_=(Fs(J_,G_=H_),J_.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(J_.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),J_.prototype.isEqual=function(t){return t instanceof J_&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},J_),X_=(Fs($_,z_=H_),$_.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty($_.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),$_.prototype.isEqual=function(t){return t instanceof $_&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},$_);function $_(){return null!==z_&&z_.apply(this,arguments)||this}function J_(t,e,n){var r=this;return(r=G_.call(this,t,e)||this).hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function Z_(t,e,n,r){var i=this;return(i=K_.call(this,t,e)||this).Ze=n,i.Ge=!!r.Ge,i.hasCommittedMutations=!!r.hasCommittedMutations,i}function tw(t,e){if(!(t instanceof e))throw e.name===t.constructor.name?new qg(Vg.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass '"+e.name+"' from a different Firestore SDK?"):new qg(Vg.INVALID_ARGUMENT,"Expected type '"+e.name+"', but was '"+t.constructor.name+"'");return t}var ew=(nw.prototype.on=function(t){return new nw(t,null,this.en.slice(),this.filters.slice(),this.limit,this.nn,this.startAt,this.endAt)},nw.prototype.hn=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.en.length||1===this.en.length&&this.en[0].field.M())},nw.prototype.an=function(){return!rm(this.limit)&&"F"===this.nn},nw.prototype.cn=function(){return!rm(this.limit)&&"L"===this.nn},nw.prototype.un=function(){return 0<this.en.length?this.en[0].field:null},nw.prototype.ln=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n._n())return n.field}return null},nw.prototype.fn=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(0<=t.indexOf(r.op))return r.op}return null},nw);function nw(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.en=n,this.filters=r,this.limit=i,this.nn=o,this.startAt=s,this.endAt=a,this.sn=null,this.rn=null,this.startAt,this.endAt}function rw(t,e,n,r,i,o,s,a){return new ew(t,e,n,r,i,o,s,a)}function iw(t){return new ew(t)}function ow(t){return null!==t.collectionGroup}function sw(t){var e=tw(t,ew);if(null===e.sn){e.sn=[];var n=e.ln(),r=e.un();if(null!==n&&null===r)n.M()||e.sn.push(new zw(n)),e.sn.push(new zw(Kg.L(),"asc"));else{for(var i,o=!1,s=0,a=e.en;s<a.length;s++){var u=a[s];e.sn.push(u),u.field.M()&&(o=!0)}o||(i=0<e.en.length?e.en[e.en.length-1].dir:"asc",e.sn.push(new zw(Kg.L(),i)))}}return e.sn}function aw(t){var e=tw(t,ew);if(!e.rn)if("F"===e.nn)e.rn=am(e.path,e.collectionGroup,sw(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=sw(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new zw(o.field,s))}var a=e.endAt?new Fw(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Fw(e.startAt.position,!e.startAt.before):null;e.rn=am(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.rn}function uw(t,e,n){return new ew(t.path,t.collectionGroup,t.en.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function cw(t,e){return new ew(t.path,t.collectionGroup,t.en.slice(),t.filters.slice(),t.limit,t.nn,e,t.endAt)}function lw(t,e){return new ew(t.path,t.collectionGroup,t.en.slice(),t.filters.slice(),t.limit,t.nn,t.startAt,e)}function hw(t,e){return cm(aw(t),aw(e))&&t.nn===e.nn}function fw(t){return um(aw(t))+"|lt:"+t.nn}function pw(t){return"Query(target="+(n=(e=aw(t)).path.F(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),0<e.filters.length&&(n+=", filters: ["+e.filters.map((function(t){return(e=t).field.F()+" "+e.op+" "+lb(e.value);var e})).join(", ")+"]"),rm(e.limit)||(n+=", limit: "+e.limit),0<e.orderBy.length&&(n+=", orderBy: ["+e.orderBy.map((function(t){return(e=t).field.F()+" ("+e.dir+")";var e})).join(", ")+"]"),e.startAt&&(n+=", startAt: "+Bw(e.startAt)),e.endAt&&(n+=", endAt: "+Bw(e.endAt)),"Target("+n+"); limitType=")+t.nn+")";var e,n}function dw(t,e){return i=t,o=e.key.path,(null!==i.collectionGroup?e.key.W(i.collectionGroup)&&i.path.D(o):Qg.j(i.path)?i.path.isEqual(o):i.path.C(o))&&function(e){for(var n=0,r=t.en;n<r.length;n++){var i=r[n];if(!i.field.M()&&null===e.field(i.field))return}return 1}(e)&&function(e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return;return 1}(e)&&(r=e,(!(n=t).startAt||Ww(n.startAt,sw(n),r))&&(!n.endAt||!Ww(n.endAt,sw(n),r)));var n,r,i,o}function vw(t){return function(e,n){for(var r=!1,i=0,o=sw(t);i<o.length;i++){var s=o[i],a=function(t,e,n){var r=t.field.M()?Qg.P(e.key,n.key):function(t,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?ub(r,i):Tg()}(t.field,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Tg()}}(s,e,n);if(0!==a)return a;r=r||s.field.M()}return 0}}var yw,gw=(Fs(mw,yw=function(){}),mw.create=function(t,e,n){if(t.M())return"in"===e||"not-in"===e?this.dn(t,e,n):new Ew(t,e,n);if(gb(n)){if("=="!==e&&"!="!==e)throw new qg(Vg.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new mw(t,e,n)}if(mb(n)){if("=="!==e&&"!="!==e)throw new qg(Vg.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new mw(t,e,n)}return"array-contains"===e?new xw(t,n):"in"===e?new Dw(t,n):"not-in"===e?new Lw(t,n):"array-contains-any"===e?new Mw(t,n):new mw(t,e,n)},mw.dn=function(t,e,n){return new("in"===e?Tw:Iw)(t,n)},mw.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.wn(ub(e,this.value)):null!==e&&ob(this.value)===ob(e)&&this.wn(ub(e,this.value))},mw.prototype.wn=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return 0<t;case">=":return 0<=t;default:return Tg()}},mw.prototype._n=function(){return 0<=["<","<=",">",">=","!="].indexOf(this.op)},mw);function mw(t,e,n){var r=this;return(r=yw.call(this)||this).field=t,r.op=e,r.value=n,r}var bw,_w,ww,Ew=(Fs(kw,ww=gw),kw.prototype.matches=function(t){var e=Qg.P(t.key,this.key);return this.wn(e)},kw),Tw=(Fs(Cw,_w=gw),Cw.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},Cw),Iw=(Fs(Sw,bw=gw),Sw.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},Sw);function Sw(t,e){var n=this;return(n=bw.call(this,t,"not-in",e)||this).keys=Nw(0,e),n}function Cw(t,e){var n=this;return(n=_w.call(this,t,"in",e)||this).keys=Nw(0,e),n}function kw(t,e,n){var r=this;return(r=ww.call(this,t,e,n)||this).key=Qg.U(n.referenceValue),r}function Nw(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Qg.U(t.referenceValue)}))}var Aw,Ow,Pw,Rw,xw=(Fs(qw,Rw=gw),qw.prototype.matches=function(t){var e=t.field(this.field);return yb(e)&&ab(e.arrayValue,this.value)},qw),Dw=(Fs(Vw,Pw=gw),Vw.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&ab(this.value.arrayValue,e)},Vw),Lw=(Fs(jw,Ow=gw),jw.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&!ab(this.value.arrayValue,e)},jw),Mw=(Fs(Uw,Aw=gw),Uw.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!yb(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return ab(e.value.arrayValue,t)}))},Uw),Fw=function(t,e){this.position=t,this.before=e};function Uw(t,e){return Aw.call(this,t,"array-contains-any",e)||this}function jw(t,e){return Ow.call(this,t,"not-in",e)||this}function Vw(t,e){return Pw.call(this,t,"in",e)||this}function qw(t,e){return Rw.call(this,t,"array-contains",e)||this}function Bw(t){return(t.before?"b":"a")+":"+t.position.map(lb).join(",")}function Ww(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.M()?Qg.P(Qg.U(s.referenceValue),n.key):ub(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Hw(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!sb(t.position[n],e.position[n]))return!1;return!0}var zw=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e},Gw=(uE.prototype.En=function(t,e,n){for(var r=n.mn,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=b_(o,e,r[i]))}return e},uE.prototype.In=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=__(i,e,e,this.Tn))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=__(u,e,o,this.Tn))}return e},uE.prototype.An=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.In(r.key,t.get(r.key));i&&(n=n.st(r.key,i))})),n},uE.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Lm())},uE.prototype.isEqual=function(t){return this.batchId===t.batchId&&Ng(this.mutations,t.mutations,w_)&&Ng(this.baseMutations,t.baseMutations,w_)},uE),Kw=(aE.from=function(t,e,n){Ig(t.mutations.length===n.length);for(var r=xm,i=t.mutations,o=0;o<i.length;o++)r=r.st(i[o].key,n[o].version);return new aE(t,e,n,r)},aE),Qw=(sE.prototype.catch=function(t){return this.next(void 0,t)},sE.prototype.next=function(t,e){var n=this;return this.pn&&Tg(),this.pn=!0,this.yn?this.error?this.bn(e,this.error):this.vn(t,this.result):new sE((function(r,i){n.gn=function(e){n.vn(t,e).next(r,i)},n.Vn=function(t){n.bn(e,t).next(r,i)}}))},sE.prototype.Sn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},sE.prototype.Dn=function(t){try{var e=t();return e instanceof sE?e:sE.resolve(e)}catch(t){return sE.reject(t)}},sE.prototype.vn=function(t,e){return t?this.Dn((function(){return t(e)})):sE.resolve(e)},sE.prototype.bn=function(t,e){return t?this.Dn((function(){return t(e)})):sE.reject(e)},sE.resolve=function(t){return new sE((function(e,n){e(t)}))},sE.reject=function(t){return new sE((function(e,n){n(t)}))},sE.Cn=function(t){return new sE((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(t){return n(t)}))})),o=!0,i===r&&e()}))},sE.Nn=function(t){for(var e=sE.resolve(!1),n=0,r=t;n<r.length;n++)!function(t){e=e.next((function(e){return e?sE.resolve(e):t()}))}(r[n]);return e},sE.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.Cn(r)},sE),Yw=(Object.defineProperty(oE.prototype,"readTime",{get:function(){return this.$n},set:function(t){this.$n=t},enumerable:!1,configurable:!0}),oE.prototype.xn=function(t,e){this.On(),this.readTime=e,this.Fn.set(t.key,t)},oE.prototype.Mn=function(t,e){this.On(),e&&(this.readTime=e),this.Fn.set(t,null)},oE.prototype.Ln=function(t,e){this.On();var n=this.Fn.get(e);return void 0!==n?Qw.resolve(n):this.qn(t,e)},oE.prototype.getEntries=function(t,e){return this.Bn(t,e)},oE.prototype.apply=function(t){return this.On(),this.kn=!0,this.Un(t)},oE.prototype.On=function(){},oE),Xw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",$w=(iE.prototype.Wn=function(t){this.Qn.push(t)},iE.prototype.jn=function(){this.Qn.forEach((function(t){return t()}))},iE),Jw=(rE.prototype.Hn=function(t,e){var n=this;return this.Gn.Yn(t,e).next((function(r){return n.Jn(t,e,r)}))},rE.prototype.Jn=function(t,e,n){return this.Kn.Ln(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].In(e,t);return t}))},rE.prototype.Xn=function(t,e,n){var r=Am;return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].In(t,e);r=r.st(t,e)})),r},rE.prototype.Zn=function(t,e){var n=this;return this.Kn.getEntries(t,e).next((function(e){return n.ts(t,e)}))},rE.prototype.ts=function(t,e){var n=this;return this.Gn.es(t,e).next((function(r){var i=n.Xn(t,e,r),o=Am;return i.forEach((function(t,e){e=e||new Y_(t,Wg.min()),o=o.st(t,e)})),o}))},rE.prototype.ns=function(t,e,n){return r=e,Qg.j(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.ss(t,e.path):ow(e)?this.rs(t,e,n):this.os(t,e,n);var r},rE.prototype.ss=function(t,e){return this.Hn(t,new Qg(e)).next((function(t){var e=Rm;return t instanceof Q_&&(e=e.st(t.key,t)),e}))},rE.prototype.rs=function(t,e,n){var r=this,i=e.collectionGroup,o=Rm;return this.zn.hs(t,i).next((function(s){return Qw.forEach(s,(function(s){var a=e.on(s.child(i));return r.os(t,a,n).next((function(t){t.forEach((function(t,e){o=o.st(t,e)}))}))})).next((function(){return o}))}))},rE.prototype.os=function(t,e,n){var r,i,o=this;return this.Kn.ns(t,e,n).next((function(n){return r=n,o.Gn.as(t,e)})).next((function(e){return i=e,o.cs(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c),h=__(u,l,l,o.Tn);r=h instanceof Q_?r.st(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){dw(e,n)||(r=r.remove(t))})),r}))},rE.prototype.cs=function(t,e,n){for(var r=Lm(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof C_&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Kn.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof Q_&&(c=c.st(t,e))})),c}))},rE),Zw=(nE._s=function(t,e){for(var n=Lm(),r=Lm(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}}return new nE(t,e.fromCache,n,r)},nE),tE=(eE.prototype.ds=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},eE.prototype.next=function(){var t=++this.previousValue;return this.ws&&this.ws(t),t},eE);function eE(t,e){var n=this;this.previousValue=t,e&&(e.fs=function(t){return n.ds(t)},this.ws=function(t){return e.Ts(t)})}function nE(t,e,n,r){this.targetId=t,this.fromCache=e,this.us=n,this.ls=r}function rE(t,e,n){this.Kn=t,this.Gn=e,this.zn=n}function iE(){this.Qn=[]}function oE(){this.Fn=new jg((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.kn=!1}function sE(t){var e=this;this.gn=null,this.Vn=null,this.result=void 0,this.error=void 0,this.yn=!1,this.pn=!1,t((function(t){e.yn=!0,e.result=t,e.gn&&e.gn(t)}),(function(t){e.yn=!0,e.error=t,e.Vn&&e.Vn(t)}))}function aE(t,e,n,r){this.batch=t,this.Rn=e,this.mn=n,this.Pn=r}function uE(t,e,n,r){this.batchId=t,this.Tn=e,this.baseMutations=n,this.mutations=r}function cE(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}tE.Es=-1;var lE,hE=(mE.prototype.reset=function(){this.gs=0},mE.prototype.ps=function(){this.gs=this.Ps},mE.prototype.bs=function(t){var e=this;this.cancel();var n=Math.floor(this.gs+this.vs()),r=Math.max(0,Date.now()-this.ys),i=Math.max(0,n-r);0<i&&bg("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.gs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Vs=this.ms.Ss(this.Is,i,(function(){return e.ys=Date.now(),t()})),this.gs*=this.Rs,this.gs<this.As&&(this.gs=this.As),this.gs>this.Ps&&(this.gs=this.Ps)},mE.prototype.Ds=function(){null!==this.Vs&&(this.Vs.Cs(),this.Vs=null)},mE.prototype.cancel=function(){null!==this.Vs&&(this.Vs.cancel(),this.Vs=null)},mE.prototype.vs=function(){return(Math.random()-.5)*this.gs},mE),fE=(gE.delete=function(t){return bg("SimpleDb","Removing database:",t),IE(window.indexedDB.deleteDatabase(t)).Sn()},gE.ks=function(){if("undefined"==typeof indexedDB)return!1;if(gE.$s())return!0;var t=na(),e=gE.Fs(t),n=0<e&&e<10,r=gE.xs(t),i=0<r&&r<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||n||i)},gE.$s=function(){var t;return"undefined"!=typeof n&&"YES"===(null===(t=Object({NODE_ENV:"production",PUBLIC_URL:"/React-app-Todos",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}))||void 0===t?void 0:t.Os)},gE.Ms=function(t,e){return t.store(e)},gE.Fs=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},gE.xs=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},gE.prototype.Ls=function(){return js(this,void 0,void 0,(function(){var t,e=this;return Vs(this,(function(n){switch(n.label){case 0:return this.db?[3,2]:(bg("SimpleDb","Opening database:",this.name),t=this,[4,new Promise((function(t,n){var r=indexedDB.open(e.name,e.version);r.onsuccess=function(e){var n=e.target.result;t(n)},r.onblocked=function(){n(new dE("Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=function(t){var e=t.target.error;"VersionError"===e.name?n(new qg(Vg.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):n(new dE(e))},r.onupgradeneeded=function(t){bg("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',t.oldVersion);var n=t.target.result;e.Ns.createOrUpgrade(n,r.transaction,t.oldVersion,e.version).next((function(){bg("SimpleDb","Database upgrade to version "+e.version+" complete")}))}}))]);case 1:t.db=n.sent(),n.label=2;case 2:return[2,(this.qs&&(this.db.onversionchange=function(t){return e.qs(t)}),this.db)]}}))}))},gE.prototype.Bs=function(t){this.qs=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},gE.prototype.runTransaction=function(t,e,n){return js(this,void 0,void 0,(function(){var r,i,o,s,a;return Vs(this,(function(u){switch(u.label){case 0:r="readonly"===t,i=0,o=function(){var t,o,a,u,c;return Vs(this,(function(l){switch(l.label){case 0:++i,l.label=1;case 1:return l.trys.push([1,4,,5]),[4,s.Ls()];case 2:return s.db=l.sent(),t=_E.open(s.db,r?"readonly":"readwrite",e),o=n(t).catch((function(e){return t.abort(e),Qw.reject(e)})).Sn(),a={},o.catch((function(){})),[4,t.Us];case 3:return[2,(a.value=(l.sent(),o),a)];case 4:return u=l.sent(),c="FirebaseError"!==u.name&&i<3,bg("SimpleDb","Transaction failed with error: %s. Retrying: %s.",u.message,c),s.close(),c?[3,5]:[2,{value:Promise.reject(u)}];case 5:return[2]}}))},s=this,u.label=1;case 1:return[5,o()];case 2:if("object"==typeof(a=u.sent()))return[2,a.value];u.label=3;case 3:return[3,1];case 4:return[2]}}))}))},gE.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},gE),pE=(Object.defineProperty(yE.prototype,"yn",{get:function(){return this.Ws},enumerable:!1,configurable:!0}),Object.defineProperty(yE.prototype,"Ks",{get:function(){return this.js},enumerable:!1,configurable:!0}),Object.defineProperty(yE.prototype,"cursor",{set:function(t){this.Qs=t},enumerable:!1,configurable:!0}),yE.prototype.done=function(){this.Ws=!0},yE.prototype.Gs=function(t){this.js=t},yE.prototype.delete=function(){return IE(this.Qs.delete())},yE),dE=(Fs(vE,lE=qg),vE);function vE(t){var e=this;return(e=lE.call(this,Vg.UNAVAILABLE,"IndexedDB transaction failed: "+t)||this).name="IndexedDbTransactionError",e}function yE(t){this.Qs=t,this.Ws=!1,this.js=null}function gE(t,e,n){this.name=t,this.version=e,this.Ns=n,12.2===gE.Fs(na())&&_g("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function mE(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.ms=t,this.Is=e,this.As=n,this.Rs=r,this.Ps=i,this.gs=0,this.Vs=null,this.ys=Date.now(),this.reset()}function bE(t){return"IndexedDbTransactionError"===t.name}var _E=(TE.open=function(t,e,n){try{return new TE(t.transaction(n,e))}catch(t){throw new dE(t)}},Object.defineProperty(TE.prototype,"Us",{get:function(){return this.zs.promise},enumerable:!1,configurable:!0}),TE.prototype.abort=function(t){t&&this.zs.reject(t),this.aborted||(bg("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},TE.prototype.store=function(t){var e=this.transaction.objectStore(t);return new wE(e)},TE),wE=(EE.prototype.put=function(t,e){return IE(void 0!==e?(bg("SimpleDb","PUT",this.store.name,t,e),this.store.put(e,t)):(bg("SimpleDb","PUT",this.store.name,"<auto-key>",t),this.store.put(t)))},EE.prototype.add=function(t){return bg("SimpleDb","ADD",this.store.name,t,t),IE(this.store.add(t))},EE.prototype.get=function(t){var e=this;return IE(this.store.get(t)).next((function(n){return void 0===n&&(n=null),bg("SimpleDb","GET",e.store.name,t,n),n}))},EE.prototype.delete=function(t){return bg("SimpleDb","DELETE",this.store.name,t),IE(this.store.delete(t))},EE.prototype.count=function(){return bg("SimpleDb","COUNT",this.store.name),IE(this.store.count())},EE.prototype.Hs=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Ys(n,(function(t,e){r.push(e)})).next((function(){return r}))},EE.prototype.Js=function(t,e){bg("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Xs=!1;var r=this.cursor(n);return this.Ys(r,(function(t,e,n){return n.delete()}))},EE.prototype.Zs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Ys(r,e)},EE.prototype.ti=function(t){var e=this.cursor({});return new Qw((function(n,r){e.onerror=function(t){var e=CE(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},EE.prototype.Ys=function(t,e){var n=[];return new Qw((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i,o,s,a=t.target.result;a?(i=new pE(a),(o=e(a.primaryKey,a.value,i))instanceof Qw&&(s=o.catch((function(t){return i.done(),Qw.reject(t)})),n.push(s)),i.yn?r():null===i.Ks?a.continue():a.continue(i.Ks)):r()}})).next((function(){return Qw.Cn(n)}))},EE.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},EE.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Xs?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},EE);function EE(t){this.store=t}function TE(t){var e=this;this.transaction=t,this.aborted=!1,this.zs=new cE,this.transaction.oncomplete=function(){e.zs.resolve()},this.transaction.onabort=function(){t.error?e.zs.reject(new dE(t.error)):e.zs.resolve()},this.transaction.onerror=function(t){var n=CE(t.target.error);e.zs.reject(new dE(n))}}function IE(t){return new Qw((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=CE(t.target.error);n(e)}}))}var SE=!1;function CE(t){var e=fE.Fs(na());if(12.2<=e&&e<13){var n="An internal error was encountered in the Indexed Database server";if(0<=t.message.indexOf(n)){var r=new qg("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return SE||(SE=!0,setTimeout((function(){throw r}),0)),r}}return t}function kE(){return"undefined"!=typeof window?window:null}function NE(){return"undefined"!=typeof document?document:null}var AE=(RE.ri=function(t,e,n,r,i){var o=new RE(t,e,Date.now()+n,r,i);return o.start(n),o},RE.prototype.start=function(t){var e=this;this.oi=setTimeout((function(){return e.hi()}),t)},RE.prototype.Cs=function(){return this.hi()},RE.prototype.cancel=function(t){null!==this.oi&&(this.clearTimeout(),this.ii.reject(new qg(Vg.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},RE.prototype.hi=function(){var t=this;this.ei.ai((function(){return null!==t.oi?(t.clearTimeout(),t.op().then((function(e){return t.ii.resolve(e)}))):Promise.resolve()}))},RE.prototype.clearTimeout=function(){null!==this.oi&&(this.si(this),clearTimeout(this.oi),this.oi=null)},RE),OE=(Object.defineProperty(PE.prototype,"mi",{get:function(){return this.li},enumerable:!1,configurable:!0}),PE.prototype.ai=function(t){this.enqueue(t)},PE.prototype.Ii=function(t){this.Ai(),this.Ri(t)},PE.prototype.Pi=function(){var t;this.li||(this.li=!0,(t=NE())&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ei))},PE.prototype.enqueue=function(t){return this.Ai(),this.li?new Promise((function(t){})):this.Ri(t)},PE.prototype.gi=function(t){var e=this;this.ui.push(t),this.ai((function(){return e.Vi()}))},PE.prototype.Vi=function(){return js(this,void 0,void 0,(function(){var t,e=this;return Vs(this,(function(n){switch(n.label){case 0:if(0===this.ui.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.ui[0]()];case 2:return n.sent(),this.ui.shift(),this.Ti.reset(),[3,4];case 3:if(!bE(t=n.sent()))throw t;return bg("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:0<this.ui.length&&this.Ti.bs((function(){return e.Vi()})),n.label=5;case 5:return[2]}}))}))},PE.prototype.Ri=function(t){var e=this,n=this.ci.then((function(){return e.di=!0,t().catch((function(t){throw e.fi=t,e.di=!1,_g("INTERNAL UNHANDLED ERROR: ",(r=(n=t).message||"",n.stack&&(r=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),r)),t;var n,r})).then((function(t){return e.di=!1,t}))}));return this.ci=n},PE.prototype.Ss=function(t,e,n){var r=this;this.Ai(),-1<this.wi.indexOf(t)&&(e=0);var i=AE.ri(this,t,e,n,(function(t){return r.yi(t)}));return this._i.push(i),i},PE.prototype.Ai=function(){this.fi&&Tg()},PE.prototype.pi=function(){},PE.prototype.bi=function(){return js(this,void 0,void 0,(function(){var t;return Vs(this,(function(e){switch(e.label){case 0:return[4,t=this.ci];case 1:e.sent(),e.label=2;case 2:if(t!==this.ci)return[3,0];e.label=3;case 3:return[2]}}))}))},PE.prototype.vi=function(t){for(var e=0,n=this._i;e<n.length;e++)if(n[e].Is===t)return!0;return!1},PE.prototype.Si=function(t){var e=this;return this.bi().then((function(){e._i.sort((function(t,e){return t.ni-e.ni}));for(var n=0,r=e._i;n<r.length;n++){var i=r[n];if(i.Cs(),"all"!==t&&i.Is===t)break}return e.bi()}))},PE.prototype.Di=function(t){this.wi.push(t)},PE.prototype.yi=function(t){var e=this._i.indexOf(t);this._i.splice(e,1)},PE);function PE(){var t=this;this.ci=Promise.resolve(),this.ui=[],this.li=!1,this._i=[],this.fi=null,this.di=!1,this.wi=[],this.Ti=new hE(this,"async_queue_retry"),this.Ei=function(){var e=NE();e&&bg("AsyncQueue","Visibility state changed to  ",e.visibilityState),t.Ti.Ds()};var e=NE();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ei)}function RE(t,e,n,r,i){this.ei=t,this.Is=e,this.ni=n,this.op=r,this.si=i,this.ii=new cE,this.then=this.ii.promise.then.bind(this.ii.promise),this.ii.promise.catch((function(t){}))}function xE(t,e){if(_g("AsyncQueue",e+": "+t),bE(t))return new qg(Vg.UNAVAILABLE,e+": "+t);throw t}function DE(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=kg(n,i);return 0===s?kg(r,o):s}var LE=(jE.prototype.Fi=function(){return++this.Ni},jE.prototype.ki=function(t){var e,n=[t,this.Fi()];this.buffer.size<this.Ci?this.buffer=this.buffer.add(n):DE(n,e=this.buffer.last())<0&&(this.buffer=this.buffer.delete(e).add(n))},Object.defineProperty(jE.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),jE),ME={$i:!1,xi:0,Oi:0,Mi:0},FE=(UE.Ui=function(t){return new UE(t,UE.Qi,UE.Wi)},UE);function UE(t,e,n){this.Li=t,this.qi=e,this.Bi=n}function jE(t){this.Ci=t,this.buffer=new km(DE),this.Ni=0}FE.ji=-1,FE.Ki=1048576,FE.Gi=41943040,FE.Qi=10,FE.Wi=1e3,FE.zi=new FE(FE.Gi,FE.Qi,FE.Wi),FE.Hi=new FE(FE.ji,0,0);var VE=(WE.prototype.start=function(t){this.Yi.params.Li!==FE.ji&&this.Zi(t)},WE.prototype.stop=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},Object.defineProperty(WE.prototype,"tr",{get:function(){return null!==this.Xi},enumerable:!1,configurable:!0}),WE.prototype.Zi=function(t){var e=this,n=this.Ji?3e5:6e4;bg("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.Xi=this.ei.Ss("lru_garbage_collection",n,(function(){return js(e,void 0,void 0,(function(){var e;return Vs(this,(function(n){switch(n.label){case 0:this.Xi=null,this.Ji=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.er(this.Yi)];case 2:return n.sent(),[3,7];case 3:return bE(e=n.sent())?(bg("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,mI(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Zi(t)];case 8:return n.sent(),[2]}}))}))}))},WE),qE=(BE.prototype.sr=function(t,e){return this.nr.ir(t).next((function(t){return Math.floor(e/100*t)}))},BE.prototype.rr=function(t,e){var n=this;if(0===e)return Qw.resolve(tE.Es);var r=new LE(e);return this.nr.be(t,(function(t){return r.ki(t.sequenceNumber)})).next((function(){return n.nr.or(t,(function(t){return r.ki(t)}))})).next((function(){return r.maxValue}))},BE.prototype.hr=function(t,e,n){return this.nr.hr(t,e,n)},BE.prototype.ar=function(t,e){return this.nr.ar(t,e)},BE.prototype.cr=function(t,e){var n=this;return this.params.Li===FE.ji?(bg("LruGarbageCollector","Garbage collection skipped; disabled"),Qw.resolve(ME)):this.ur(t).next((function(r){return r<n.params.Li?(bg("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Li),ME):n.lr(t,e)}))},BE.prototype.ur=function(t){return this.nr.ur(t)},BE.prototype.lr=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.sr(t,this.params.qi).next((function(e){return r=e>c.params.Bi?(bg("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Bi+" from "+e),c.params.Bi):e,o=Date.now(),c.rr(t,r)})).next((function(r){return n=r,s=Date.now(),c.hr(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.ar(t,n)})).next((function(t){return u=Date.now(),mg()<=Wa.DEBUG&&bg("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Qw.resolve({$i:!0,xi:r,Oi:i,Mi:t})}))},BE);function BE(t,e){this.nr=t,this.params=e}function WE(t,e){this.Yi=t,this.ei=e,this.Ji=!1,this.Xi=null}function HE(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=zE(e)),e=function(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}(t.get(n),e);return zE(e)}function zE(t){return t+"\x01\x01"}function GE(t){var e=t.length;if(Ig(2<=e),2===e)return Ig("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),zg.$();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||n<s)&&Tg(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Tg()}o=s+2}return new zg(r)}var KE=function(t){this._r=t};function QE(t,e){if(e.document)return n=t._r,r=e.document,i=!!e.hasCommittedMutations,o=Rb(n,r.name),s=Nb(r.updateTime),a=new U_({mapValue:{fields:r.fields}}),new Q_(o,s,a,{hasCommittedMutations:!!i});var n,r,i,o,s,a;if(e.noDocument){var u=Qg.K(e.noDocument.path),c=ZE(e.noDocument.readTime);return new Y_(u,c,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var l=Qg.K(e.unknownDocument.path),h=ZE(e.unknownDocument.version);return new X_(l,h)}return Tg()}function YE(t,e,n){var r,i,o=XE(n),s=e.key.path.p().N();if(e instanceof Q_){var a={name:Pb(r=t._r,(i=e).key),fields:i.tn().mapValue.fields,updateTime:Cb(r,i.version.A())},u=e.hasCommittedMutations;return new RT(null,null,a,u,o,s)}if(e instanceof Y_){var c=e.key.path.N(),l=JE(e.version),h=e.hasCommittedMutations;return new RT(null,new OT(c,l),null,h,o,s)}if(e instanceof X_){var f=e.key.path.N(),p=JE(e.version);return new RT(new PT(f,p),null,null,!0,o,s)}return Tg()}function XE(t){var e=t.A();return[e.seconds,e.nanoseconds]}function $E(t){var e=new Bg(t[0],t[1]);return Wg.m(e)}function JE(t){var e=t.A();return new wT(e.seconds,e.nanoseconds)}function ZE(t){var e=new Bg(t.seconds,t.nanoseconds);return Wg.m(e)}function tT(t,e){var n=(e.baseMutations||[]).map((function(e){return jb(t._r,e)})),r=e.mutations.map((function(e){return jb(t._r,e)})),i=Bg.fromMillis(e.localWriteTimeMs);return new Gw(e.batchId,i,n,r)}function eT(t){var e,n=ZE(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?ZE(t.lastLimboFreeSnapshotVersion):Wg.min(),i=void 0!==t.query.documents?(Ig(1===(e=t.query).documents.length),aw(iw(Db(e.documents[0])))):function(t){var e,n=Db(t.parent),r=t.structuredQuery,i=r.from?r.from.length:0,o=null;0<i&&(Ig(1===i),(e=r.from[0]).allDescendants?o=e.collectionId:n=n.child(e.collectionId));var s=[];r.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=zb(t.unaryFilter.field);return gw.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=zb(t.unaryFilter.field);return gw.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=zb(t.unaryFilter.field);return gw.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=zb(t.unaryFilter.field);return gw.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Tg()}}(e)]:void 0!==e.fieldFilter?[(n=e,gw.create(zb(n.fieldFilter.field),function(){switch(n.fieldFilter.op){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Tg()}}(),n.fieldFilter.value))]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(t).reduce((function(t,e){return t.concat(e)})):Tg():[];var n}(r.where));var a=[];r.orderBy&&(a=r.orderBy.map((function(t){return new zw(zb((e=t).field),function(){switch(e.direction){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}());var e})));var u,c,l=null;r.limit&&(l=rm(c="object"==typeof(u=r.limit)?u.value:u)?null:c);var h=null;r.startAt&&(h=Wb(r.startAt));var f=null;return r.endAt&&(f=Wb(r.endAt)),aw(rw(n,o,a,s,l,"F",h,f))}(t.query);return new ym(i,t.targetId,0,t.lastListenSequenceNumber,n,r,hm.fromBase64String(t.resumeToken))}function nT(t,e){var n=JE(e.Z),r=JE(e.lastLimboFreeSnapshotVersion),i=(lm(e.target)?Vb:qb)(t._r,e.target),o=e.resumeToken.toBase64();return new DT(e.targetId,um(e.target),n,o,e.sequenceNumber,r,i)}var rT=(iT.Tr=function(t,e,n,r){return Ig(""!==t.uid),new iT(t.Er()?t.uid:"",e,n,r)},iT.prototype.mr=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return aT(t).Zs({index:kT.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},iT.prototype.Ir=function(t,e,n,r){var i=this,o=uT(t),s=aT(t);return s.add({}).next((function(a){Ig("number"==typeof a);for(var u,c,l,h,f,p=new Gw(a,e,n,r),d=(u=i.serializer,c=i.userId,h=(l=p).baseMutations.map((function(t){return Ub(u._r,t)})),f=l.mutations.map((function(t){return Ub(u._r,t)})),new kT(c,l.batchId,l.Tn.toMillis(),h,f)),v=[],y=new km((function(t,e){return kg(t.F(),e.F())})),g=0,m=r;g<m.length;g++){var b=m[g],_=NT.key(i.userId,b.key.path,a);y=y.add(b.key.path.p()),v.push(s.put(d)),v.push(o.put(_,NT.PLACEHOLDER))}return y.forEach((function(e){v.push(i.zn.Ar(t,e))})),t.Wn((function(){i.wr[a]=p.keys()})),Qw.Cn(v).next((function(){return p}))}))},iT.prototype.Rr=function(t,e){var n=this;return aT(t).get(e).next((function(t){return t?(Ig(t.userId===n.userId),tT(n.serializer,t)):null}))},iT.prototype.Pr=function(t,e){var n=this;return this.wr[e]?Qw.resolve(this.wr[e]):this.Rr(t,e).next((function(t){if(t){var r=t.keys();return n.wr[e]=r}return null}))},iT.prototype.gr=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return aT(t).Zs({index:kT.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Ig(e.batchId>=r),o=tT(n.serializer,e)),i.done()})).next((function(){return o}))},iT.prototype.Vr=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return aT(t).Zs({index:kT.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},iT.prototype.yr=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return aT(t).Hs(kT.userMutationsIndex,n).next((function(t){return t.map((function(t){return tT(e.serializer,t)}))}))},iT.prototype.Yn=function(t,e){var n=this,r=NT.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return uT(t).Zs({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],l=GE(u);if(a===n.userId&&e.path.isEqual(l))return aT(t).get(c).next((function(t){if(!t)throw Tg();Ig(t.userId===n.userId),o.push(tT(n.serializer,t))}));s.done()})).next((function(){return o}))},iT.prototype.es=function(t,e){var n=this,r=new km(kg),i=[];return e.forEach((function(e){var o=NT.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=uT(t).Zs({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=GE(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),Qw.Cn(i).next((function(){return n.pr(t,r)}))},iT.prototype.as=function(t,e){var n=this,r=e.path,i=r.length+1,o=NT.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new km(kg);return uT(t).Zs({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],l=GE(u);s===n.userId&&r.D(l)?l.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.pr(t,a)}))},iT.prototype.pr=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(aT(t).get(e).next((function(t){if(null===t)throw Tg();Ig(t.userId===n.userId),r.push(tT(n.serializer,t))})))})),Qw.Cn(i).next((function(){return r}))},iT.prototype.br=function(t,e){var n=this;return sT(t.vr,this.userId,e).next((function(r){return t.Wn((function(){n.Sr(e.batchId)})),Qw.forEach(r,(function(e){return n.dr.Dr(t,e)}))}))},iT.prototype.Sr=function(t){delete this.wr[t]},iT.prototype.Cr=function(t){var e=this;return this.mr(t).next((function(n){if(!n)return Qw.resolve();var r=IDBKeyRange.lowerBound(NT.prefixForUser(e.userId)),i=[];return uT(t).Zs({range:r},(function(t,n,r){var o;t[0]===e.userId?(o=GE(t[1]),i.push(o)):r.done()})).next((function(){Ig(0===i.length)}))}))},iT.prototype.Nr=function(t,e){return oT(t,this.userId,e)},iT.prototype.Fr=function(t){var e=this;return cT(t).get(this.userId).next((function(t){return t||new CT(e.userId,-1,"")}))},iT);function iT(t,e,n,r){this.userId=t,this.serializer=e,this.zn=n,this.dr=r,this.wr={}}function oT(t,e,n){var r=NT.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return uT(t).Zs({range:o,Xs:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function sT(t,e,n){var r=t.store(kT.store),i=t.store(NT.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Zs({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){Ig(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=NT.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Qw.Cn(o).next((function(){return c}))}function aT(t){return tI.Ms(t,kT.store)}function uT(t){return tI.Ms(t,NT.store)}function cT(t){return tI.Ms(t,CT.store)}var lT,hT=(fT.prototype.xn=function(t,e,n){return dT(t).put(vT(e),n)},fT.prototype.Mn=function(t,e){var n=dT(t),r=vT(e);return n.delete(r)},fT.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.kr(t,r)}))},fT.prototype.Ln=function(t,e){var n=this;return dT(t).get(vT(e)).next((function(t){return n.$r(t)}))},fT.prototype.xr=function(t,e){var n=this;return dT(t).get(vT(e)).next((function(t){var e=n.$r(t);return e?{Or:e,size:yT(t)}:null}))},fT.prototype.getEntries=function(t,e){var n=this,r=Am;return this.Mr(t,e,(function(t,e){var i=n.$r(e);r=r.st(t,i)})).next((function(){return r}))},fT.prototype.Lr=function(t,e){var n=this,r=Am,i=new _m(Qg.P);return this.Mr(t,e,(function(t,e){var o=n.$r(e);i=o?(r=r.st(t,o),i.st(t,yT(e))):(r=r.st(t,null),i.st(t,0))})).next((function(){return{qr:r,Br:i}}))},fT.prototype.Mr=function(t,e,n){if(e._())return Qw.resolve();var r=IDBKeyRange.bound(e.first().path.N(),e.last().path.N()),i=e.ct(),o=i.wt();return dT(t).Zs({range:r},(function(t,e,r){for(var s=Qg.K(t);o&&Qg.P(o,s)<0;)n(o,null),o=i.wt();o&&o.isEqual(s)&&(n(o,e),o=i.Tt()?i.wt():null),o?r.Gs(o.path.N()):r.done()})).next((function(){for(;o;)n(o,null),o=i.Tt()?i.wt():null}))},fT.prototype.ns=function(t,e,n){var r,i,o,s=this,a=Rm,u=e.path.length+1,c={};return n.isEqual(Wg.min())?(r=e.path.N(),c.range=IDBKeyRange.lowerBound(r)):(i=e.path.N(),o=XE(n),c.range=IDBKeyRange.lowerBound([i,o],!0),c.index=RT.collectionReadTimeIndex),dT(t).Zs(c,(function(t,n,r){var i;t.length===u&&(i=QE(s.serializer,n),e.path.D(i.key.path)?i instanceof Q_&&dw(e,i)&&(a=a.st(i.key,i)):r.done())})).next((function(){return a}))},fT.prototype.Ur=function(t,e){var n=this,r=Am,i=XE(e),o=dT(t),s=IDBKeyRange.lowerBound(i,!0);return o.Zs({index:RT.readTimeIndex,range:s},(function(t,e){var o=QE(n.serializer,e);r=r.st(o.key,o),i=e.readTime})).next((function(){return{Qr:r,readTime:$E(i)}}))},fT.prototype.Wr=function(t){var e=dT(t),n=Wg.min();return e.Zs({index:RT.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=$E(e.readTime)),r.done()})).next((function(){return n}))},fT.prototype.jr=function(t){return new fT.Kr(this,!!t&&t.Gr)},fT.prototype.zr=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},fT.prototype.getMetadata=function(t){return pT(t).get(xT.key).next((function(t){return Ig(!!t),t}))},fT.prototype.kr=function(t,e){return pT(t).put(xT.key,e)},fT.prototype.$r=function(t){if(t){var e=QE(this.serializer,t);return e instanceof Y_&&e.version.isEqual(Wg.min())?null:e}return null},fT);function fT(t,e){this.serializer=t,this.zn=e}function pT(t){return tI.Ms(t,xT.store)}function dT(t){return tI.Ms(t,RT.store)}function vT(t){return t.path.N()}function yT(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Tg();e=t.noDocument}return JSON.stringify(e).length}function gT(t,e){var n=this;return(n=lT.call(this)||this).Hr=t,n.Gr=e,n.Yr=new jg((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),n}hT.Kr=(Fs(gT,lT=Yw),gT.prototype.Un=function(t){var e=this,n=[],r=0,i=new km((function(t,e){return kg(t.F(),e.F())}));return this.Fn.forEach((function(o,s){var a,u,c,l=e.Yr.get(o);s?(a=YE(e.Hr.serializer,s,e.readTime),i=i.add(o.path.p()),u=yT(a),r+=u-l,n.push(e.Hr.xn(t,o,a))):(r-=l,e.Gr?(c=YE(e.Hr.serializer,new Y_(o,Wg.min()),e.readTime),n.push(e.Hr.xn(t,o,c))):n.push(e.Hr.Mn(t,o)))})),i.forEach((function(r){n.push(e.Hr.zn.Ar(t,r))})),n.push(this.Hr.updateMetadata(t,r)),Qw.Cn(n)},gT.prototype.qn=function(t,e){var n=this;return this.Hr.xr(t,e).next((function(t){return null===t?(n.Yr.set(e,0),null):(n.Yr.set(e,t.size),t.Or)}))},gT.prototype.Bn=function(t,e){var n=this;return this.Hr.Lr(t,e).next((function(t){var e=t.qr;return t.Br.forEach((function(t,e){n.Yr.set(t,e)})),e}))},gT);var mT=(ST.prototype.Ar=function(t,e){return this.Jr.add(e),Qw.resolve()},ST.prototype.hs=function(t,e){return Qw.resolve(this.Jr.getEntries(e))},ST),bT=(IT.prototype.add=function(t){var e=t.S(),n=t.p(),r=this.index[e]||new km(zg.P),i=!r.has(n);return this.index[e]=r.add(n),i},IT.prototype.has=function(t){var e=t.S(),n=t.p(),r=this.index[e];return r&&r.has(n)},IT.prototype.getEntries=function(t){return(this.index[t]||new km(zg.P)).N()},IT),_T=(TT.prototype.createOrUpgrade=function(t,e,n,r){var i=this;Ig(n<r&&0<=n&&r<=10);var o,s=new _E(e);n<1&&1<=r&&(t.createObjectStore(ET.store),(o=t).createObjectStore(CT.store,{keyPath:CT.keyPath}),o.createObjectStore(kT.store,{keyPath:kT.keyPath,autoIncrement:!0}).createIndex(kT.userMutationsIndex,kT.userMutationsKeyPath,{unique:!0}),o.createObjectStore(NT.store),UT(t),t.createObjectStore(RT.store));var a,u=Qw.resolve();return n<3&&3<=r&&(0!==n&&((a=t).deleteObjectStore(LT.store),a.deleteObjectStore(DT.store),a.deleteObjectStore(MT.store),UT(t)),u=u.next((function(){return t=s.store(MT.store),e=new MT(0,0,Wg.min().A(),0),t.put(MT.key,e);var t,e}))),n<4&&4<=r&&(0!==n&&(u=u.next((function(){return e=t,(n=s).store(kT.store).Hs().next((function(t){e.deleteObjectStore(kT.store),e.createObjectStore(kT.store,{keyPath:kT.keyPath,autoIncrement:!0}).createIndex(kT.userMutationsIndex,kT.userMutationsKeyPath,{unique:!0});var r=n.store(kT.store),i=t.map((function(t){return r.put(t)}));return Qw.Cn(i)}));var e,n}))),u=u.next((function(){t.createObjectStore(jT.store,{keyPath:jT.keyPath})}))),n<5&&5<=r&&(u=u.next((function(){return i.removeAcknowledgedMutations(s)}))),n<6&&6<=r&&(u=u.next((function(){return t.createObjectStore(xT.store),i.addDocumentGlobal(s)}))),n<7&&7<=r&&(u=u.next((function(){return i.ensureSequenceNumbers(s)}))),n<8&&8<=r&&(u=u.next((function(){return i.createCollectionParentIndex(t,s)}))),n<9&&9<=r&&(u=u.next((function(){var n,r;(r=t).objectStoreNames.contains("remoteDocumentChanges")&&r.deleteObjectStore("remoteDocumentChanges"),(n=e.objectStore(RT.store)).createIndex(RT.readTimeIndex,RT.readTimeIndexPath,{unique:!1}),n.createIndex(RT.collectionReadTimeIndex,RT.collectionReadTimeIndexPath,{unique:!1})}))),n<10&&10<=r&&(u=u.next((function(){return i.rewriteCanonicalIds(s)}))),u},TT.prototype.addDocumentGlobal=function(t){var e=0;return t.store(RT.store).Zs((function(t,n){e+=yT(n)})).next((function(){var n=new xT(e);return t.store(xT.store).put(xT.key,n)}))},TT.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(CT.store),r=t.store(kT.store);return n.Hs().next((function(n){return Qw.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Hs(kT.userMutationsIndex,i).next((function(r){return Qw.forEach(r,(function(r){Ig(r.userId===n.userId);var i=tT(e.serializer,r);return sT(t,n.userId,i).next((function(){}))}))}))}))}))},TT.prototype.ensureSequenceNumbers=function(t){var e=t.store(LT.store),n=t.store(RT.store);return t.store(MT.store).get(MT.key).next((function(t){var r=[];return n.Zs((function(n,i){var o=new zg(n),s=[0,HE(o)];r.push(e.get(s).next((function(n){return n?Qw.resolve():e.put(new LT(0,HE(o),t.highestListenSequenceNumber))})))})).next((function(){return Qw.Cn(r)}))}))},TT.prototype.createCollectionParentIndex=function(t,e){function n(t){if(i.add(t)){var e=t.S(),n=t.p();return r.put({collectionId:e,parent:HE(n)})}}t.createObjectStore(FT.store,{keyPath:FT.keyPath});var r=e.store(FT.store),i=new bT;return e.store(RT.store).Zs({Xs:!0},(function(t,e){return n(new zg(t).p())})).next((function(){return e.store(NT.store).Zs({Xs:!0},(function(t,e){t[0];var r=t[1];return n((t[2],GE(r)).p())}))}))},TT.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(DT.store);return n.Zs((function(t,r){var i=eT(r),o=nT(e.serializer,i);return n.put(o)}))},TT),wT=function(t,e){this.seconds=t,this.nanoseconds=e},ET=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};function TT(t){this.serializer=t}function IT(){this.index={}}function ST(){this.Jr=new bT}ET.store="owner",ET.key="owner";var CT=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};CT.store="mutationQueues",CT.keyPath="userId";var kT=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};kT.store="mutations",kT.keyPath="batchId",kT.userMutationsIndex="userMutationsIndex",kT.userMutationsKeyPath=["userId","batchId"];var NT=(AT.prefixForUser=function(t){return[t]},AT.prefixForPath=function(t,e){return[t,HE(e)]},AT.key=function(t,e,n){return[t,HE(e),n]},AT);function AT(){}NT.store="documentMutations",NT.PLACEHOLDER=new NT;var OT=function(t,e){this.path=t,this.readTime=e},PT=function(t,e){this.path=t,this.version=e},RT=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};RT.store="remoteDocuments",RT.readTimeIndex="readTimeIndex",RT.readTimeIndexPath="readTime",RT.collectionReadTimeIndex="collectionReadTimeIndex",RT.collectionReadTimeIndexPath=["parentPath","readTime"];var xT=function(t){this.byteSize=t};xT.store="remoteDocumentGlobal",xT.key="remoteDocumentGlobalKey";var DT=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};DT.store="targets",DT.keyPath="targetId",DT.queryTargetsIndexName="queryTargetsIndex",DT.queryTargetsKeyPath=["canonicalId","targetId"];var LT=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};LT.store="targetDocuments",LT.keyPath=["targetId","path"],LT.documentTargetsIndex="documentTargetsIndex",LT.documentTargetsKeyPath=["path","targetId"];var MT=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};MT.key="targetGlobalKey",MT.store="targetGlobal";var FT=function(t,e){this.collectionId=t,this.parent=e};function UT(t){t.createObjectStore(LT.store,{keyPath:LT.keyPath}).createIndex(LT.documentTargetsIndex,LT.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(DT.store,{keyPath:DT.keyPath}).createIndex(DT.queryTargetsIndexName,DT.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(MT.store)}FT.store="collectionParents",FT.keyPath=["collectionId","parent"];var jT=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};jT.store="clientMetadata",jT.keyPath="clientId";var VT=Hs(Hs(Hs([CT.store,kT.store,NT.store,RT.store,DT.store,ET.store,MT.store,LT.store],[jT.store]),[xT.store]),[FT.store]),qT=(BT.prototype.Ar=function(t,e){var n=this;if(this.Xr.has(e))return Qw.resolve();var r=e.S(),i=e.p();t.Wn((function(){n.Xr.add(e)}));var o={collectionId:r,parent:HE(i)};return WT(t).put(o)},BT.prototype.hs=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Ag(e),""],!1,!0);return WT(t).Hs(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(GE(o.parent))}return n}))},BT);function BT(){this.Xr=new bT}function WT(t){return tI.Ms(t,FT.store)}var HT=(KT.prototype.next=function(){return this.Zr+=2,this.Zr},KT.to=function(){return new KT(0)},KT.eo=function(){return new KT(-1)},KT),zT=(GT.prototype.no=function(t){var e=this;return this.so(t).next((function(n){var r=new HT(n.highestTargetId);return n.highestTargetId=r.next(),e.io(t,n).next((function(){return n.highestTargetId}))}))},GT.prototype.ro=function(t){return this.so(t).next((function(t){return Wg.m(new Bg(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},GT.prototype.oo=function(t){return this.so(t).next((function(t){return t.highestListenSequenceNumber}))},GT.prototype.ho=function(t,e,n){var r=this;return this.so(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.A()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.io(t,i)}))},GT.prototype.ao=function(t,e){var n=this;return this.co(t,e).next((function(){return n.so(t).next((function(r){return r.targetCount+=1,n.uo(e,r),n.io(t,r)}))}))},GT.prototype.lo=function(t,e){return this.co(t,e)},GT.prototype._o=function(t,e){var n=this;return this.fo(t,e.targetId).next((function(){return QT(t).delete(e.targetId)})).next((function(){return n.so(t)})).next((function(e){return Ig(0<e.targetCount),--e.targetCount,n.io(t,e)}))},GT.prototype.hr=function(t,e,n){var r=this,i=0,o=[];return QT(t).Zs((function(s,a){var u=eT(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r._o(t,u)))})).next((function(){return Qw.Cn(o)})).next((function(){return i}))},GT.prototype.be=function(t,e){return QT(t).Zs((function(t,n){var r=eT(n);e(r)}))},GT.prototype.so=function(t){return YT(t).get(MT.key).next((function(t){return Ig(null!==t),t}))},GT.prototype.io=function(t,e){return YT(t).put(MT.key,e)},GT.prototype.co=function(t,e){return QT(t).put(nT(this.serializer,e))},GT.prototype.uo=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},GT.prototype.do=function(t){return this.so(t).next((function(t){return t.targetCount}))},GT.prototype.wo=function(t,e){var n=um(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return QT(t).Zs({range:r,index:DT.queryTargetsIndexName},(function(t,n,r){var o=eT(n);cm(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},GT.prototype.To=function(t,e,n){var r=this,i=[],o=XT(t);return e.forEach((function(e){var s=HE(e.path);i.push(o.put(new LT(n,s))),i.push(r.dr.Eo(t,n,e))})),Qw.Cn(i)},GT.prototype.mo=function(t,e,n){var r=this,i=XT(t);return Qw.forEach(e,(function(e){var o=HE(e.path);return Qw.Cn([i.delete([n,o]),r.dr.Io(t,n,e)])}))},GT.prototype.fo=function(t,e){var n=XT(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},GT.prototype.Ao=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=XT(t),i=Lm();return r.Zs({range:n,Xs:!0},(function(t,e,n){var r=GE(t[1]),o=new Qg(r);i=i.add(o)})).next((function(){return i}))},GT.prototype.Nr=function(t,e){var n=HE(e.path),r=IDBKeyRange.bound([n],[Ag(n)],!1,!0),i=0;return XT(t).Zs({index:LT.documentTargetsIndex,Xs:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return 0<i}))},GT.prototype.Me=function(t,e){return QT(t).get(e).next((function(t){return t?eT(t):null}))},GT);function GT(t,e){this.dr=t,this.serializer=e}function KT(t){this.Zr=t}function QT(t){return tI.Ms(t,DT.store)}function YT(t){return tI.Ms(t,MT.store)}function XT(t){return tI.Ms(t,LT.store)}var $T,JT="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ZT=(Fs(nI,$T=$w),nI),tI=(eI.Ms=function(t,e){if(t instanceof ZT)return fE.Ms(t.vr,e);throw Tg()},eI.prototype.start=function(){var t=this;return this.xo().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new qg(Vg.FAILED_PRECONDITION,JT);return t.Oo(),t.Mo(),t.Lo(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.ko.oo(e)}))})).then((function(e){t.yo=new tE(e,t.Po)})).then((function(){t.po=!0})).catch((function(e){return t.Fo&&t.Fo.close(),Promise.reject(e)}))},eI.prototype.qo=function(t){var e=this;return this.Co=function(n){return js(e,void 0,void 0,(function(){return Vs(this,(function(e){return this.tr?[2,t(n)]:[2]}))}))},t(this.isPrimary)},eI.prototype.Bo=function(t){var e=this;this.Fo.Bs((function(n){return js(e,void 0,void 0,(function(){return Vs(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},eI.prototype.Uo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.ms.ai((function(){return js(e,void 0,void 0,(function(){return Vs(this,(function(t){switch(t.label){case 0:return this.tr?[4,this.xo()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},eI.prototype.xo=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return iI(e).put(new jT(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Qo(e).next((function(e){e||(t.isPrimary=!1,t.ms.gi((function(){return t.Co(!1)})))}))})).next((function(){return t.Wo(e)})).next((function(n){return t.isPrimary&&!n?t.jo(e).next((function(){return!1})):!!n&&t.Ko(e).next((function(){return!0}))}))})).catch((function(e){if(bE(e))return bg("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return bg("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.ms.gi((function(){return t.Co(e)})),t.isPrimary=e}))},eI.prototype.Qo=function(t){var e=this;return rI(t).get(ET.key).next((function(t){return Qw.resolve(e.Go(t))}))},eI.prototype.zo=function(t){return iI(t).delete(this.clientId)},eI.prototype.Ho=function(){return js(this,void 0,void 0,(function(){var t,e,n,r,i=this;return Vs(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.Yo(this.Do,18e5)?[3,2]:(this.Do=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=eI.Ms(t,jT.store);return e.Hs().next((function(t){var n=i.Jo(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return Qw.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.$o)for(e=0,n=t;e<n.length;e++)r=n[e],this.$o.removeItem(this.Xo(r.clientId));o.label=2;case 2:return[2]}}))}))},eI.prototype.Lo=function(){var t=this;this.So=this.ms.Ss("client_metadata_refresh",4e3,(function(){return t.xo().then((function(){return t.Ho()})).then((function(){return t.Lo()}))}))},eI.prototype.Go=function(t){return!!t&&t.ownerId===this.clientId},eI.prototype.Wo=function(t){var e=this;return this.Vo?Qw.resolve(!0):rI(t).get(ET.key).next((function(n){if(null!==n&&e.Yo(n.leaseTimestampMs,5e3)&&!e.Zo(n.ownerId)){if(e.Go(n)&&e.networkEnabled)return!0;if(!e.Go(n)){if(!n.allowTabSynchronization)throw new qg(Vg.FAILED_PRECONDITION,JT);return!1}}return!(!e.networkEnabled||!e.inForeground)||iI(t).Hs().next((function(t){return void 0===e.Jo(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&bg("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},eI.prototype.th=function(){return js(this,void 0,void 0,(function(){var t=this;return Vs(this,(function(e){switch(e.label){case 0:return this.po=!1,this.eh(),this.So&&(this.So.cancel(),this.So=null),this.nh(),this.sh(),[4,this.Fo.runTransaction("readwrite",[ET.store,jT.store],(function(e){var n=new ZT(e,tE.Es);return t.jo(n).next((function(){return t.zo(n)}))}))];case 1:return e.sent(),this.Fo.close(),this.ih(),[2]}}))}))},eI.prototype.Jo=function(t,e){var n=this;return t.filter((function(t){return n.Yo(t.updateTimeMs,e)&&!n.Zo(t.clientId)}))},eI.prototype.rh=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return iI(e).Hs().next((function(e){return t.Jo(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(eI.prototype,"tr",{get:function(){return this.po},enumerable:!1,configurable:!0}),eI.prototype.oh=function(t){return rT.Tr(t,this.serializer,this.zn,this.dr)},eI.prototype.hh=function(){return this.ko},eI.prototype.ah=function(){return this.Kn},eI.prototype.uh=function(){return this.zn},eI.prototype.runTransaction=function(t,e,n){var r=this;bg("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Fo.runTransaction(o,VT,(function(o){return i=new ZT(o,r.yo?r.yo.next():tE.Es),"readwrite-primary"===e?r.Qo(i).next((function(t){return!!t||r.Wo(i)})).next((function(e){if(!e)throw _g("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.ms.gi((function(){return r.Co(!1)})),new qg(Vg.FAILED_PRECONDITION,Xw);return n(i)})).next((function(t){return r.Ko(i).next((function(){return t}))})):r.lh(i).next((function(){return n(i)}))})).then((function(t){return i.jn(),t}))},eI.prototype.lh=function(t){var e=this;return rI(t).get(ET.key).next((function(t){if(null!==t&&e.Yo(t.leaseTimestampMs,5e3)&&!e.Zo(t.ownerId)&&!e.Go(t)&&!(e.Vo||e.allowTabSynchronization&&t.allowTabSynchronization))throw new qg(Vg.FAILED_PRECONDITION,JT)}))},eI.prototype.Ko=function(t){var e=new ET(this.clientId,this.allowTabSynchronization,Date.now());return rI(t).put(ET.key,e)},eI.ks=function(){return fE.ks()},eI.prototype.jo=function(t){var e=this,n=rI(t);return n.get(ET.key).next((function(t){return e.Go(t)?(bg("IndexedDbPersistence","Releasing primary lease."),n.delete(ET.key)):Qw.resolve()}))},eI.prototype.Yo=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(_g("Detected an update time that is in the future: "+t+" > "+n),1))},eI.prototype.Oo=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.vo=function(){t.ms.ai((function(){return t.inForeground="visible"===t.document.visibilityState,t.xo()}))},this.document.addEventListener("visibilitychange",this.vo),this.inForeground="visible"===this.document.visibilityState)},eI.prototype.nh=function(){this.vo&&(this.document.removeEventListener("visibilitychange",this.vo),this.vo=null)},eI.prototype.Mo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.bo=function(){e.eh(),e.ms.ai((function(){return e.th()}))},this.window.addEventListener("unload",this.bo))},eI.prototype.sh=function(){this.bo&&(this.window.removeEventListener("unload",this.bo),this.bo=null)},eI.prototype.Zo=function(t){var e;try{var n=null!==(null===(e=this.$o)||void 0===e?void 0:e.getItem(this.Xo(t)));return bg("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return _g("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},eI.prototype.eh=function(){if(this.$o)try{this.$o.setItem(this.Xo(this.clientId),String(Date.now()))}catch(i){_g("Failed to set zombie client id.",i)}},eI.prototype.ih=function(){if(this.$o)try{this.$o.removeItem(this.Xo(this.clientId))}catch(i){}},eI.prototype.Xo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},eI);function eI(t,e,n,r,i,o,s,a,u,c){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.ms=i,this.window=o,this.document=s,this.Po=u,this.Vo=c,this.yo=null,this.po=!1,this.isPrimary=!1,this.networkEnabled=!0,this.bo=null,this.inForeground=!1,this.vo=null,this.So=null,this.Do=Number.NEGATIVE_INFINITY,this.Co=function(t){return Promise.resolve()},!eI.ks())throw new qg(Vg.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.dr=new oI(this,r),this.No=e+"main",this.serializer=new KE(a),this.Fo=new fE(this.No,10,new _T(this.serializer)),this.ko=new zT(this.dr,this.serializer),this.zn=new qT,this.Kn=new hT(this.serializer,this.zn),this.window&&this.window.localStorage?this.$o=this.window.localStorage:(this.$o=null,!1===c&&_g("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}function nI(t,e){var n=this;return(n=$T.call(this)||this).vr=t,n.Ro=e,n}function rI(t){return tI.Ms(t,ET.store)}function iI(t){return tI.Ms(t,jT.store)}var oI=(sI.prototype.ir=function(t){var e=this._h(t);return this.db.hh().do(t).next((function(t){return e.next((function(e){return t+e}))}))},sI.prototype._h=function(t){var e=0;return this.or(t,(function(t){e++})).next((function(){return e}))},sI.prototype.be=function(t,e){return this.db.hh().be(t,e)},sI.prototype.or=function(t,e){return this.fh(t,(function(t,n){return e(n)}))},sI.prototype.Eo=function(t,e,n){return aI(t,n)},sI.prototype.Io=function(t,e,n){return aI(t,n)},sI.prototype.hr=function(t,e,n){return this.db.hh().hr(t,e,n)},sI.prototype.Dr=aI,sI.prototype.dh=function(t,e){return r=e,i=!1,cT(n=t).ti((function(t){return oT(n,t,r).next((function(t){return t&&(i=!0),Qw.resolve(!t)}))})).next((function(){return i}));var n,r,i},sI.prototype.ar=function(t,e){var n=this,r=this.db.ah().jr(),i=[],o=0;return this.fh(t,(function(s,a){var u;a<=e&&(u=n.dh(t,s).next((function(e){if(!e)return o++,r.Ln(t,s).next((function(){return r.Mn(s),XT(t).delete([0,HE(s.path)])}))})),i.push(u))})).next((function(){return Qw.Cn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},sI.prototype.removeTarget=function(t,e){var n=e.tt(t.Ro);return this.db.hh().lo(t,n)},sI.prototype.wh=aI,sI.prototype.fh=function(t,e){var n,r=XT(t),i=tE.Es;return r.Zs({index:LT.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),a=r.sequenceNumber;0===o?(i!==tE.Es&&e(new Qg(GE(n)),i),i=a,n=s):i=tE.Es})).next((function(){i!==tE.Es&&e(new Qg(GE(n)),i)}))},sI.prototype.ur=function(t){return this.db.ah().zr(t)},sI);function sI(t,e){this.db=t,this.Yi=new qE(this,e)}function aI(t,e){return XT(t).put((n=t.Ro,new LT(0,HE(e.path),n)));var n}function uI(t,e){var n=t.projectId;return t.i||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var cI=(lI.prototype.er=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.cr(n,e.Eh)}))},lI);function lI(t,e,n){this.persistence=t,this.Th=e,this.Eh=new _m(kg),this.mh=new jg(um,cm),this.Ih=Wg.min(),this.Gn=t.oh(n),this.Ah=t.ah(),this.ko=t.hh(),this.Rh=new Jw(this.Ah,this.Gn,this.persistence.uh()),this.Th.Ph(this.Rh)}function hI(t,e){var n=t;return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r,i,o,s,a,u,c,l=e.batch.keys(),h=n.Ah.jr({Gr:!0});return r=n,i=t,s=h,u=(a=(o=e).batch).keys(),c=Qw.resolve(),u.forEach((function(t){c=c.next((function(){return s.Ln(i,t)})).next((function(e){var n=e,r=o.Pn.get(t);Ig(null!==r),(!n||n.version.o(r)<0)&&(n=a.En(t,n,o))&&s.xn(n,o.Rn)}))})),c.next((function(){return r.Gn.br(i,a)})).next((function(){return h.apply(t)})).next((function(){return n.Gn.Cr(t)})).next((function(){return n.Rh.Zn(t,l)}))}))}function fI(t){var e=t;return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.ko.ro(t)}))}function pI(t,e){var n=t,r=e.Z,i=n.Eh;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Ah.jr({Gr:!0});i=n.Eh;var s=[];e.Wt.forEach((function(e,o){var a,u,c,l,h,f=i.get(o);f&&(s.push(n.ko.mo(t,e.Zt,o).next((function(){return n.ko.To(t,e.Jt,o)}))),0<(a=e.resumeToken).Y()&&(u=f.et(a,r).tt(t.Ro),i=i.st(o,u),c=f,h=e,Ig(0<(l=u).resumeToken.Y()),(0===c.resumeToken.Y()||3e8<=l.Z.I()-c.Z.I()||0<h.Jt.size+h.Xt.size+h.Zt.size)&&s.push(n.ko.lo(t,u))))}));var a,u=Am,c=Lm();return e.Kt.forEach((function(t,e){c=c.add(t)})),s.push(o.getEntries(t,c).next((function(i){e.Kt.forEach((function(a,c){var l=i.get(a);c instanceof Y_&&c.version.isEqual(Wg.min())?(o.Mn(a,r),u=u.st(a,c)):null==l||0<c.version.o(l.version)||0===c.version.o(l.version)&&l.hasPendingWrites?(o.xn(c,r),u=u.st(a,c)):bg("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version),e.Gt.has(a)&&s.push(n.persistence.dr.wh(t,a))}))}))),r.isEqual(Wg.min())||(a=n.ko.ro(t).next((function(e){return n.ko.ho(t,t.Ro,r)})),s.push(a)),Qw.Cn(s).next((function(){return o.apply(t)})).next((function(){return n.Rh.ts(t,u)}))})).then((function(t){return n.Eh=i,t}))}function dI(t,e){var n=t;return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.ko.wo(t,e).next((function(i){return i?(r=i,Qw.resolve(r)):n.ko.no(t).next((function(i){return r=new ym(e,i,0,t.Ro),n.ko.ao(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Eh.get(t.targetId);return(null===r||0<t.Z.o(r.Z))&&(n.Eh=n.Eh.st(t.targetId,t),n.mh.set(e,t.targetId)),t}))}function vI(t,e,n){return js(this,void 0,void 0,(function(){var r,i,o,s;return Vs(this,(function(a){switch(a.label){case 0:i=(r=t).Eh.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.dr.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!bE(s=a.sent()))throw s;return bg("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Eh=r.Eh.remove(e),r.mh.delete(i.target),[2]}}))}))}function yI(t,e,n){var r=t,i=Wg.min(),o=Lm();return r.persistence.runTransaction("Execute query","readonly",(function(t){return s=r,a=t,u=aw(e),(void 0!==(l=(c=s).mh.get(u))?Qw.resolve(c.Eh.get(l)):c.ko.wo(a,u)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.ko.Ao(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.Th.ns(t,e,n?i:Wg.min(),n?o:Lm())})).next((function(t){return{documents:t,gh:o}}));var s,a,u,c,l}))}function gI(t,e){var n=t,r=n.ko,i=n.Eh.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Me(t,e).next((function(t){return t?t.target:null}))}))}function mI(t){return js(this,void 0,void 0,(function(){return Vs(this,(function(e){if(t.code!==Vg.FAILED_PRECONDITION||t.message!==Xw)throw t;return bg("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}var bI=(II.prototype._=function(){return this.Vh._()},II.prototype.Eo=function(t,e){var n=new _I(t,e);this.Vh=this.Vh.add(n),this.ph=this.ph.add(n)},II.prototype.vh=function(t,e){var n=this;t.forEach((function(t){return n.Eo(t,e)}))},II.prototype.Io=function(t,e){this.Sh(new _I(t,e))},II.prototype.Dh=function(t,e){var n=this;t.forEach((function(t){return n.Io(t,e)}))},II.prototype.Ch=function(t){var e=this,n=new Qg(new zg([])),r=new _I(n,t),i=new _I(n,t+1),o=[];return this.ph.St([r,i],(function(t){e.Sh(t),o.push(t.key)})),o},II.prototype.Nh=function(){var t=this;this.Vh.forEach((function(e){return t.Sh(e)}))},II.prototype.Sh=function(t){this.Vh=this.Vh.delete(t),this.ph=this.ph.delete(t)},II.prototype.Fh=function(t){var e=new Qg(new zg([])),n=new _I(e,t),r=new _I(e,t+1),i=Lm();return this.ph.St([n,r],(function(t){i=i.add(t.key)})),i},II.prototype.Nr=function(t){var e=new _I(t,0),n=this.Vh.Ct(e);return null!==n&&t.isEqual(n.key)},II),_I=(TI.yh=function(t,e){return Qg.P(t.key,e.key)||kg(t.kh,e.kh)},TI.bh=function(t,e){return kg(t.kh,e.kh)||Qg.P(t.key,e.key)},TI),wI=(EI.prototype.Er=function(){return null!=this.uid},EI.prototype.$h=function(){return this.Er()?"uid:"+this.uid:"anonymous-user"},EI.prototype.isEqual=function(t){return t.uid===this.uid},EI);function EI(t){this.uid=t}function TI(t,e){this.key=t,this.kh=e}function II(){this.Vh=new km(_I.yh),this.ph=new km(_I.bh)}function SI(t,e){this.user=e,this.type="OAuth",this.Mh={},this.Mh.Authorization="Bearer "+t}wI.UNAUTHENTICATED=new wI(null),wI.xh=new wI("google-credentials-uid"),wI.Oh=new wI("first-party-uid");var CI,kI,NI,AI=(QI.prototype.getToken=function(){return Promise.resolve(null)},QI.prototype.qh=function(){},QI.prototype.Bh=function(t){(this.Lh=t)(wI.UNAUTHENTICATED)},QI.prototype.Uh=function(){this.Lh=null},QI),OI=(KI.prototype.getToken=function(){var t=this,e=this.jh,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.jh!==e?(bg("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Ig("string"==typeof n.accessToken),new SI(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},KI.prototype.qh=function(){this.forceRefresh=!0},KI.prototype.Bh=function(t){this.Lh=t,this.Wh&&t(this.currentUser)},KI.prototype.Uh=function(){this.auth&&this.auth.removeAuthTokenListener(this.Qh),this.Qh=null,this.Lh=null},KI.prototype.Kh=function(){var t=this.auth&&this.auth.getUid();return Ig(null===t||"string"==typeof t),new wI(t)},KI),PI=(Object.defineProperty(GI.prototype,"Mh",{get:function(){var t={"X-Goog-AuthUser":this.zh},e=this.Gh.auth.Hh([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),GI),RI=(zI.prototype.getToken=function(){return Promise.resolve(new PI(this.Gh,this.zh))},zI.prototype.Bh=function(t){t(wI.Oh)},zI.prototype.Uh=function(){},zI.prototype.qh=function(){},zI),xI=(HI.prototype.ea=function(){return 1===this.state||2===this.state||4===this.state},HI.prototype.na=function(){return 2===this.state},HI.prototype.start=function(){3!==this.state?this.auth():this.sa()},HI.prototype.stop=function(){return js(this,void 0,void 0,(function(){return Vs(this,(function(t){switch(t.label){case 0:return this.ea()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},HI.prototype.ia=function(){this.state=0,this.Ti.reset()},HI.prototype.ra=function(){var t=this;this.na()&&null===this.ta&&(this.ta=this.ms.Ss(this.Yh,6e4,(function(){return t.oa()})))},HI.prototype.ha=function(t){this.aa(),this.stream.send(t)},HI.prototype.oa=function(){return js(this,void 0,void 0,(function(){return Vs(this,(function(t){return this.na()?[2,this.close(0)]:[2]}))}))},HI.prototype.aa=function(){this.ta&&(this.ta.cancel(),this.ta=null)},HI.prototype.close=function(t,e){return js(this,void 0,void 0,(function(){return Vs(this,(function(n){switch(n.label){case 0:return this.aa(),this.Ti.cancel(),this.Zh++,3!==t?this.Ti.reset():e&&e.code===Vg.RESOURCE_EXHAUSTED?(_g(e.toString()),_g("Using maximum backoff delay to prevent overloading the backend."),this.Ti.ps()):e&&e.code===Vg.UNAUTHENTICATED&&this.Xh.qh(),null!==this.stream&&(this.ca(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.ua(e)];case 1:return n.sent(),[2]}}))}))},HI.prototype.ca=function(){},HI.prototype.auth=function(){var t=this;this.state=1;var e=this.la(this.Zh),n=this.Zh;this.Xh.getToken().then((function(e){t.Zh===n&&t._a(e)}),(function(n){e((function(){var e=new qg(Vg.UNKNOWN,"Fetching auth token failed: "+n.message);return t.fa(e)}))}))},HI.prototype._a=function(t){var e=this,n=this.la(this.Zh);this.stream=this.da(t),this.stream.wa((function(){n((function(){return e.state=2,e.listener.wa()}))})),this.stream.ua((function(t){n((function(){return e.fa(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},HI.prototype.sa=function(){var t=this;this.state=4,this.Ti.bs((function(){return js(t,void 0,void 0,(function(){return Vs(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},HI.prototype.fa=function(t){return bg("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},HI.prototype.la=function(t){var e=this;return function(n){e.ms.ai((function(){return e.Zh===t?n():(bg("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},HI),DI=(Fs(WI,NI=xI),WI.prototype.da=function(t){return this.Jh.Ta("Listen",t)},WI.prototype.onMessage=function(t){this.Ti.reset();var e=function(t,e){var n,r,i,o;if("targetChange"in e){e.targetChange;var s="NO_CHANGE"===(o=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===o?1:"REMOVE"===o?2:"CURRENT"===o?3:"RESET"===o?4:Tg(),a=e.targetChange.targetIds||[],u=(i=e.targetChange.resumeToken,t.Le?(Ig(void 0===i||"string"==typeof i),hm.fromBase64String(i||"")):(Ig(void 0===i||i instanceof Uint8Array),hm.fromUint8Array(i||new Uint8Array))),c=e.targetChange.cause,l=new jm(s,a,u,c&&(r=void 0===(n=c).code?Vg.UNKNOWN:bm(n.code),new qg(r,n.message||""))||null)}else if("documentChange"in e){e.documentChange;var h=e.documentChange;h.document,h.document.name,h.document.updateTime;var f=Rb(t,h.document.name),p=Nb(h.document.updateTime),d=new U_({mapValue:{fields:h.document.fields}}),v=new Q_(f,p,d,{});l=new Fm(h.targetIds||[],h.removedTargetIds||[],v.key,v)}else if("documentDelete"in e){e.documentDelete;var y=e.documentDelete;y.document;var g=Rb(t,y.document),m=y.readTime?Nb(y.readTime):Wg.min(),b=new Y_(g,m);l=new Fm([],y.removedTargetIds||[],b.key,b)}else if("documentRemove"in e){e.documentRemove;var _=e.documentRemove;_.document;var w=Rb(t,_.document);l=new Fm([],_.removedTargetIds||[],w,null)}else{if(!("filter"in e))return Tg();e.filter;var E=e.filter;E.targetId;var T=new pm(E.count||0);l=new Um(E.targetId,T)}return l}(this.serializer,t),n=function(t){if(!("targetChange"in t))return Wg.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length||!e.readTime?Wg.min():Nb(e.readTime)}(t);return this.listener.Ea(e,n)},WI.prototype.ma=function(t){var e,n,r,i,o={};o.database=Lb(this.serializer),o.addTarget=(e=this.serializer,(r=lm(i=(n=t).target)?{documents:Vb(e,i)}:{query:qb(e,i)}).targetId=n.targetId,0<n.resumeToken.Y()&&(r.resumeToken=kb(e,n.resumeToken)),r);var s,a,u=(this.serializer,s=t,null==(a=function(){switch(s.X){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Tg()}}())?null:{"goog-listen-tags":a});u&&(o.labels=u),this.ha(o)},WI.prototype.Ia=function(t){var e={};e.database=Lb(this.serializer),e.removeTarget=t,this.ha(e)},WI),LI=(Fs(BI,kI=xI),Object.defineProperty(BI.prototype,"Ra",{get:function(){return this.Aa},enumerable:!1,configurable:!0}),BI.prototype.start=function(){this.Aa=!1,this.lastStreamToken=void 0,kI.prototype.start.call(this)},BI.prototype.ca=function(){this.Aa&&this.Pa([])},BI.prototype.da=function(t){return this.Jh.Ta("Write",t)},BI.prototype.onMessage=function(t){if(Ig(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Aa){this.Ti.reset();var e=(r=t.writeResults,i=t.commitTime,r&&0<r.length?(Ig(void 0!==i),r.map((function(t){return function(t,e){var n=t.updateTime?Nb(t.updateTime):Nb(e);n.isEqual(Wg.min())&&(n=Nb(e));var r=null;return t.transformResults&&0<t.transformResults.length&&(r=t.transformResults),new d_(n,r)}(t,i)}))):[]),n=Nb(t.commitTime);return this.listener.ga(n,e)}var r,i;return Ig(!t.writeResults||0===t.writeResults.length),this.Aa=!0,this.listener.Va()},BI.prototype.ya=function(){var t={};t.database=Lb(this.serializer),this.ha(t)},BI.prototype.Pa=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Ub(e.serializer,t)}))};this.ha(n)},BI),MI=(Fs(qI,CI=function(){}),qI.prototype.ba=function(){if(this.pa)throw new qg(Vg.FAILED_PRECONDITION,"The client has already been terminated.")},qI.prototype.va=function(t,e,n){var r=this;return this.ba(),this.credentials.getToken().then((function(i){return r.Jh.va(t,e,n,i)})).catch((function(t){throw t.code===Vg.UNAUTHENTICATED&&r.credentials.qh(),t}))},qI.prototype.Sa=function(t,e,n){var r=this;return this.ba(),this.credentials.getToken().then((function(i){return r.Jh.Sa(t,e,n,i)})).catch((function(t){throw t.code===Vg.UNAUTHENTICATED&&r.credentials.qh(),t}))},qI.prototype.terminate=function(){this.pa=!1},qI),FI=(VI.prototype.ka=function(){var t=this;0===this.Ca&&(this.$a("Unknown"),this.Na=this.ei.Ss("online_state_timeout",1e4,(function(){return t.Na=null,t.xa("Backend didn't respond within 10 seconds."),t.$a("Offline"),Promise.resolve()})))},VI.prototype.Oa=function(t){"Online"===this.state?this.$a("Unknown"):(this.Ca++,1<=this.Ca&&(this.Ma(),this.xa("Connection failed 1 times. Most recent error: "+t.toString()),this.$a("Offline")))},VI.prototype.set=function(t){this.Ma(),this.Ca=0,"Online"===t&&(this.Fa=!1),this.$a(t)},VI.prototype.$a=function(t){t!==this.state&&(this.state=t,this.Da(t))},VI.prototype.xa=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Fa?(_g(e),this.Fa=!1):bg("OnlineStateTracker",e)},VI.prototype.Ma=function(){null!==this.Na&&(this.Na.cancel(),this.Na=null)},VI),UI=(jI.prototype.start=function(){return this.enableNetwork()},jI.prototype.enableNetwork=function(){return this.Wa.delete(0),this.ic()},jI.prototype.ic=function(){return js(this,void 0,void 0,(function(){return Vs(this,(function(t){switch(t.label){case 0:return this.Ga()?(this.rc()?this.oc():this.Ha.set("Unknown"),[4,this.hc()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},jI.prototype.disableNetwork=function(){return js(this,void 0,void 0,(function(){return Vs(this,(function(t){switch(t.label){case 0:return this.Wa.add(0),[4,this.ac()];case 1:return t.sent(),this.Ha.set("Offline"),[2]}}))}))},jI.prototype.ac=function(){return js(this,void 0,void 0,(function(){return Vs(this,(function(t){switch(t.label){case 0:return[4,this.tc.stop()];case 1:return t.sent(),[4,this.Ya.stop()];case 2:return t.sent(),0<this.Ba.length&&(bg("RemoteStore","Stopping write stream with "+this.Ba.length+" pending writes"),this.Ba=[]),this.cc(),[2]}}))}))},jI.prototype.th=function(){return js(this,void 0,void 0,(function(){return Vs(this,(function(t){switch(t.label){case 0:return bg("RemoteStore","RemoteStore shutting down."),this.Wa.add(5),[4,this.ac()];case 1:return t.sent(),this.ja.th(),this.Ha.set("Unknown"),[2]}}))}))},jI.prototype.listen=function(t){this.Ua.has(t.targetId)||(this.Ua.set(t.targetId,t),this.rc()?this.oc():this.Ya.na()&&this.uc(t))},jI.prototype.lc=function(t){this.Ua.delete(t),this.Ya.na()&&this._c(t),0===this.Ua.size&&(this.Ya.na()?this.Ya.ra():this.Ga()&&this.Ha.set("Unknown"))},jI.prototype.Me=function(t){return this.Ua.get(t)||null},jI.prototype.Oe=function(t){return this.fc.Oe(t)},jI.prototype.uc=function(t){this.Qa.we(t.targetId),this.Ya.ma(t)},jI.prototype._c=function(t){this.Qa.we(t),this.Ya.Ia(t)},jI.prototype.oc=function(){this.Qa=new Gm(this),this.Ya.start(),this.Ha.ka()},jI.prototype.rc=function(){return this.Ga()&&!this.Ya.ea()&&0<this.Ua.size},jI.prototype.Ga=function(){return 0===this.Wa.size},jI.prototype.cc=function(){this.Qa=null},jI.prototype.Ja=function(){return js(this,void 0,void 0,(function(){var t=this;return Vs(this,(function(e){return this.Ua.forEach((function(e,n){t.uc(e)})),[2]}))}))},jI.prototype.Xa=function(t){return js(this,void 0,void 0,(function(){return Vs(this,(function(e){return this.cc(),this.rc()?(this.Ha.Oa(t),this.oc()):this.Ha.set("Unknown"),[2]}))}))},jI.prototype.Za=function(t,e){return js(this,void 0,void 0,(function(){var n,r,i;return Vs(this,(function(o){switch(o.label){case 0:if(this.Ha.set("Online"),!(t instanceof jm&&2===t.state&&t.cause))return[3,6];o.label=1;case 1:return o.trys.push([1,3,,5]),[4,this.dc(t)];case 2:return o.sent(),[3,5];case 3:return n=o.sent(),bg("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),[4,this.wc(n)];case 4:return o.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof Fm?this.Qa.ge(t):t instanceof Um?this.Qa.Ce(t):this.Qa.pe(t),e.isEqual(Wg.min()))return[3,13];o.label=7;case 7:return o.trys.push([7,11,,13]),[4,fI(this.La)];case 8:return r=o.sent(),0<=e.o(r)?[4,this.Tc(e)]:[3,10];case 9:o.sent(),o.label=10;case 10:return[3,13];case 11:return bg("RemoteStore","Failed to raise snapshot:",i=o.sent()),[4,this.wc(i)];case 12:return o.sent(),[3,13];case 13:return[2]}}))}))},jI.prototype.wc=function(t,e){return js(this,void 0,void 0,(function(){var n=this;return Vs(this,(function(r){switch(r.label){case 0:if(!bE(t))throw t;return this.Wa.add(1),[4,this.ac()];case 1:return r.sent(),this.Ha.set("Offline"),e=e||function(){return fI(n.La)},this.ei.gi((function(){return js(n,void 0,void 0,(function(){return Vs(this,(function(t){switch(t.label){case 0:return bg("RemoteStore","Retrying IndexedDB access"),[4,e()];case 1:return t.sent(),this.Wa.delete(1),[4,this.ic()];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))},jI.prototype.Ec=function(t){var e=this;return t().catch((function(n){return e.wc(n,t)}))},jI.prototype.Tc=function(t){var e=this,n=this.Qa.ke(t);return n.Wt.forEach((function(n,r){var i;0<n.resumeToken.Y()&&(i=e.Ua.get(r))&&e.Ua.set(r,i.et(n.resumeToken,t))})),n.jt.forEach((function(t){var n,r=e.Ua.get(t);r&&(e.Ua.set(t,r.et(hm.J,r.Z)),e._c(t),n=new ym(r.target,t,1,r.sequenceNumber),e.uc(n))})),this.fc.mc(n)},jI.prototype.dc=function(t){return js(this,void 0,void 0,(function(){var e,n,r,i;return Vs(this,(function(o){switch(o.label){case 0:e=t.cause,n=0,r=t.targetIds,o.label=1;case 1:return n<r.length?(i=r[n],this.Ua.has(i)?[4,this.fc.Ic(i,e)]:[3,3]):[3,5];case 2:o.sent(),this.Ua.delete(i),this.Qa.removeTarget(i),o.label=3;case 3:o.label=4;case 4:return n++,[3,1];case 5:return[2]}}))}))},jI.prototype.hc=function(){return js(this,void 0,void 0,(function(){var t,e,n;return Vs(this,(function(r){switch(r.label){case 0:t=0<this.Ba.length?this.Ba[this.Ba.length-1].batchId:-1,r.label=1;case 1:if(!this.Ac())return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,(i=this.La,o=t,(s=i).persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===o&&(o=-1),s.Gn.gr(t,o)})))];case 3:return null===(e=r.sent())?(0===this.Ba.length&&this.tc.ra(),[3,7]):(t=e.batchId,this.Rc(e),[3,6]);case 4:return n=r.sent(),[4,this.wc(n)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return this.Pc()&&this.gc(),[2]}var i,o,s}))}))},jI.prototype.Ac=function(){return this.Ga()&&this.Ba.length<10},jI.prototype.Vc=function(){return this.Ba.length},jI.prototype.Rc=function(t){this.Ba.push(t),this.tc.na()&&this.tc.Ra&&this.tc.Pa(t.mutations)},jI.prototype.Pc=function(){return this.Ga()&&!this.tc.ea()&&0<this.Ba.length},jI.prototype.gc=function(){this.tc.start()},jI.prototype.ec=function(){return js(this,void 0,void 0,(function(){return Vs(this,(function(t){return this.tc.ya(),[2]}))}))},jI.prototype.sc=function(){return js(this,void 0,void 0,(function(){var t,e,n;return Vs(this,(function(r){for(t=0,e=this.Ba;t<e.length;t++)n=e[t],this.tc.Pa(n.mutations);return[2]}))}))},jI.prototype.ga=function(t,e){return js(this,void 0,void 0,(function(){var n,r,i=this;return Vs(this,(function(o){switch(o.label){case 0:return n=this.Ba.shift(),r=Kw.from(n,t,e),[4,this.Ec((function(){return i.fc.yc(r)}))];case 1:return o.sent(),[4,this.hc()];case 2:return o.sent(),[2]}}))}))},jI.prototype.nc=function(t){return js(this,void 0,void 0,(function(){return Vs(this,(function(e){switch(e.label){case 0:return t&&this.tc.Ra?[4,this.pc(t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.Pc()&&this.gc(),[2]}}))}))},jI.prototype.pc=function(t){return js(this,void 0,void 0,(function(){var e,n,r=this;return Vs(this,(function(i){switch(i.label){case 0:return mm(n=t.code)&&n!==Vg.ABORTED?(e=this.Ba.shift(),this.tc.ia(),[4,this.Ec((function(){return r.fc.bc(e.batchId,t)}))]):[3,3];case 1:return i.sent(),[4,this.hc()];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},jI.prototype.za=function(){return js(this,void 0,void 0,(function(){return Vs(this,(function(t){switch(t.label){case 0:return this.Wa.add(4),[4,this.ac()];case 1:return t.sent(),this.Ha.set("Unknown"),this.tc.ia(),this.Ya.ia(),this.Wa.delete(4),[4,this.ic()];case 2:return t.sent(),[2]}}))}))},jI.prototype.vc=function(t){return js(this,void 0,void 0,(function(){return Vs(this,(function(e){switch(e.label){case 0:return this.ei.pi(),bg("RemoteStore","RemoteStore received new credentials"),this.Wa.add(3),[4,this.ac()];case 1:return e.sent(),this.Ha.set("Unknown"),[4,this.fc.vc(t)];case 2:return e.sent(),this.Wa.delete(3),[4,this.ic()];case 3:return e.sent(),[2]}}))}))},jI.prototype.Sc=function(t){return js(this,void 0,void 0,(function(){return Vs(this,(function(e){switch(e.label){case 0:return t?(this.Wa.delete(2),[4,this.ic()]):[3,2];case 1:return e.sent(),[3,5];case 2:return t?[3,4]:(this.Wa.add(2),[4,this.ac()]);case 3:e.sent(),this.Ha.set("Unknown"),e.label=4;case 4:e.label=5;case 5:return[2]}}))}))},jI);function jI(t,e,n,r,i){var o,s,a,u,c,l,h,f,p=this;this.La=t,this.qa=e,this.ei=n,this.Ba=[],this.Ua=new Map,this.Qa=null,this.Wa=new Set,this.ja=i,this.ja.Ka((function(t){n.ai((function(){return js(p,void 0,void 0,(function(){return Vs(this,(function(t){switch(t.label){case 0:return this.Ga()?(bg("RemoteStore","Restarting streams for network reachability change."),[4,this.za()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Ha=new FI(n,r),this.Ya=(c=this.qa,l=n,h={wa:this.Ja.bind(this),ua:this.Xa.bind(this),Ea:this.Za.bind(this)},(f=c).ba(),new DI(l,f.Jh,f.credentials,f.serializer,h)),this.tc=(o=this.qa,s=n,a={wa:this.ec.bind(this),ua:this.nc.bind(this),Va:this.sc.bind(this),ga:this.ga.bind(this)},(u=o).ba(),new LI(s,u.Jh,u.credentials,u.serializer,a))}function VI(t,e){this.ei=t,this.Da=e,this.state="Unknown",this.Ca=0,this.Na=null,this.Fa=!0}function qI(t,e,n){var r=this;return(r=CI.call(this)||this).credentials=t,r.Jh=e,r.serializer=n,r.pa=!1,r}function BI(t,e,n,r,i){var o=this;return(o=kI.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this).serializer=r,o.Aa=!1,o}function WI(t,e,n,r,i){var o=this;return(o=NI.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this).serializer=r,o}function HI(t,e,n,r,i,o){this.ms=t,this.Yh=n,this.Jh=r,this.Xh=i,this.listener=o,this.state=0,this.Zh=0,this.ta=null,this.stream=null,this.Ti=new hE(t,e)}function zI(t,e){this.Gh=t,this.zh=e}function GI(t,e){this.Gh=t,this.zh=e,this.type="FirstParty",this.user=wI.Oh}function KI(t){var e=this;this.Qh=null,this.currentUser=wI.UNAUTHENTICATED,this.Wh=!1,this.jh=0,this.Lh=null,this.forceRefresh=!1,this.Qh=function(){e.jh++,e.currentUser=e.Kh(),e.Wh=!0,e.Lh&&e.Lh(e.currentUser)},this.jh=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.Qh):(this.Qh(null),t.get().then((function(t){e.auth=t,e.Qh&&e.auth.addAuthTokenListener(e.Qh)}),(function(){})))}function QI(){this.Lh=null}function YI(t,e){return"firestore_clients_"+t+"_"+e}function XI(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.Er()&&(r+="_"+e.uid),r}function $I(t,e){return"firestore_targets_"+t+"_"+e}function JI(t){this.key=t}function ZI(t){this.key=t}function tS(t,e,n){this.query=t,this.targetId=e,this.view=n}function eS(t){this.key=t,this.qu=!1}var nS=(bS.Dc=function(t,e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new qg(r.error.code,r.error.message)),i?new bS(t,e,r.state,o):(_g("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+n),null)},bS.prototype.Cc=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},bS),rS=(mS.Dc=function(t,e){var n=JSON.parse(e),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new qg(n.error.code,n.error.message)),r?new mS(t,n.state,i):(_g("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},mS.prototype.Cc=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},mS),iS=(gS.Dc=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Mm,o=0;r&&o<n.activeTargetIds.length;++o)r=om(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new gS(t,i):(_g("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},gS),oS=(yS.Dc=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new yS(e.clientId,e.onlineState):(_g("SharedClientState","Failed to parse online state: "+t),null)},yS),sS=(vS.prototype.Nc=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},vS.prototype.Fc=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},vS.prototype.Cc=function(){var t={activeTargetIds:this.activeTargetIds.N(),updateTimeMs:Date.now()};return JSON.stringify(t)},vS),aS=(dS.ks=function(t){return!(!t||!t.localStorage)},dS.prototype.start=function(){return js(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,l,h=this;return Vs(this,(function(f){switch(f.label){case 0:return[4,this.fc.rh()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.kc&&(i=this.getItem(YI(this.persistenceKey,r)))&&(o=iS.Dc(r,i))&&(this.Oc=this.Oc.st(o.clientId,o));for(this.jc(),(s=this.storage.getItem(this.Wc))&&(a=this.Kc(s))&&this.Gc(a),u=0,c=this.Mc;u<c.length;u++)l=c[u],this.xc(l);return this.Mc=[],this.window.addEventListener("unload",(function(){return h.th()})),this.tr=!0,[2]}}))}))},dS.prototype.Ts=function(t){this.setItem(this.qc,JSON.stringify(t))},dS.prototype.zc=function(){return this.Hc(this.Oc)},dS.prototype.Yc=function(t){var e=!1;return this.Oc.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},dS.prototype.Jc=function(t){this.Xc(t,"pending")},dS.prototype.Zc=function(t,e,n){this.Xc(t,e,n),this.tu(t)},dS.prototype.eu=function(t){var e,n,r="not-current";return this.Yc(t)&&(!(e=this.storage.getItem($I(this.persistenceKey,t)))||(n=rS.Dc(t,e))&&(r=n.state)),this.nu.Nc(t),this.jc(),r},dS.prototype.su=function(t){this.nu.Fc(t),this.jc()},dS.prototype.iu=function(t){return this.nu.activeTargetIds.has(t)},dS.prototype.ru=function(t){this.removeItem($I(this.persistenceKey,t))},dS.prototype.ou=function(t,e,n){this.hu(t,e,n)},dS.prototype.au=function(t,e,n){var r=this;e.forEach((function(t){r.tu(t)})),this.currentUser=t,n.forEach((function(t){r.Jc(t)}))},dS.prototype.cu=function(t){this.uu(t)},dS.prototype.th=function(){this.tr&&(this.window.removeEventListener("storage",this.$c),this.removeItem(this.Lc),this.tr=!1)},dS.prototype.getItem=function(t){var e=this.storage.getItem(t);return bg("SharedClientState","READ",t,e),e},dS.prototype.setItem=function(t,e){bg("SharedClientState","SET",t,e),this.storage.setItem(t,e)},dS.prototype.removeItem=function(t){bg("SharedClientState","REMOVE",t),this.storage.removeItem(t)},dS.prototype.xc=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(bg("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Lc)return void _g("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ms.gi((function(){return js(e,void 0,void 0,(function(){var t,e,r,i,o,s;return Vs(this,(function(a){if(this.tr){if(null!==n.key)if(this.Bc.test(n.key)){if(null==n.newValue)return t=this.lu(n.key),[2,this._u(t,null)];if(e=this.fu(n.key,n.newValue))return[2,this._u(e.clientId,e)]}else if(this.Uc.test(n.key)){if(null!==n.newValue&&(r=this.du(n.key,n.newValue)))return[2,this.wu(r)]}else if(this.Qc.test(n.key)){if(null!==n.newValue&&(i=this.Tu(n.key,n.newValue)))return[2,this.Eu(i)]}else if(n.key===this.Wc){if(null!==n.newValue&&(o=this.Kc(n.newValue)))return[2,this.Gc(o)]}else n.key===this.qc&&(s=function(t){var e=tE.Es;if(null!=t)try{var n=JSON.parse(t);Ig("number"==typeof n),e=n}catch(t){_g("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==tE.Es&&this.fs(s)}else this.Mc.push(n);return[2]}))}))}))}},Object.defineProperty(dS.prototype,"nu",{get:function(){return this.Oc.get(this.kc)},enumerable:!1,configurable:!0}),dS.prototype.jc=function(){this.setItem(this.Lc,this.nu.Cc())},dS.prototype.Xc=function(t,e,n){var r=new nS(this.currentUser,t,e,n),i=XI(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Cc())},dS.prototype.tu=function(t){var e=XI(this.persistenceKey,this.currentUser,t);this.removeItem(e)},dS.prototype.uu=function(t){var e={clientId:this.kc,onlineState:t};this.storage.setItem(this.Wc,JSON.stringify(e))},dS.prototype.hu=function(t,e,n){var r=$I(this.persistenceKey,t),i=new rS(t,e,n);this.setItem(r,i.Cc())},dS.prototype.lu=function(t){var e=this.Bc.exec(t);return e?e[1]:null},dS.prototype.fu=function(t,e){var n=this.lu(t);return iS.Dc(n,e)},dS.prototype.du=function(t,e){var n=this.Uc.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return nS.Dc(new wI(i),r,e)},dS.prototype.Tu=function(t,e){var n=this.Qc.exec(t),r=Number(n[1]);return rS.Dc(r,e)},dS.prototype.Kc=function(t){return oS.Dc(t)},dS.prototype.wu=function(t){return js(this,void 0,void 0,(function(){return Vs(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.fc.mu(t.batchId,t.state,t.error)]:(bg("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},dS.prototype.Eu=function(t){return this.fc.Iu(t.targetId,t.state,t.error)},dS.prototype._u=function(t,e){var n=this,r=e?this.Oc.st(t,e):this.Oc.remove(t),i=this.Hc(this.Oc),o=this.Hc(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.fc.Au(s,a).then((function(){n.Oc=r}))},dS.prototype.Gc=function(t){this.Oc.get(t.clientId)&&this.Da(t.onlineState)},dS.prototype.Hc=function(t){var e=Mm;return t.forEach((function(t,n){e=e.Nt(n.activeTargetIds)})),e},dS),uS=(pS.prototype.Jc=function(t){},pS.prototype.Zc=function(t,e,n){},pS.prototype.eu=function(t){return this.Ru.Nc(t),this.Pu[t]||"not-current"},pS.prototype.ou=function(t,e,n){this.Pu[t]=e},pS.prototype.su=function(t){this.Ru.Fc(t)},pS.prototype.iu=function(t){return this.Ru.activeTargetIds.has(t)},pS.prototype.ru=function(t){delete this.Pu[t]},pS.prototype.zc=function(){return this.Ru.activeTargetIds},pS.prototype.Yc=function(t){return this.Ru.activeTargetIds.has(t)},pS.prototype.start=function(){return this.Ru=new sS,Promise.resolve()},pS.prototype.au=function(t,e,n){},pS.prototype.cu=function(t){},pS.prototype.th=function(){},pS.prototype.Ts=function(t){},pS),cS=(Object.defineProperty(fS.prototype,"vu",{get:function(){return this.gu},enumerable:!1,configurable:!0}),fS.prototype.Su=function(t,e){var n=this,r=e?e.Du:new qm,i=e?e.bu:this.bu,o=e?e.qt:this.qt,s=i,a=!1,u=this.query.an()&&i.size===this.query.limit?i.last():null,c=this.query.cn()&&i.size===this.query.limit?i.first():null;if(t.ht((function(t,e){var l=i.get(t),h=(h=e instanceof Q_?e:null)&&(dw(n.query,h)?h:null),f=!!l&&n.qt.has(l.key),p=!!h&&(h.Ge||n.qt.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data().isEqual(h.data())?f!==p&&(r.track({type:3,doc:h}),d=!0):n.Cu(l,h)||(r.track({type:2,doc:h}),d=!0,(u&&0<n.pu(h,u)||c&&n.pu(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),d=!0):l&&!h&&(r.track({type:1,doc:l}),d=!0,(u||c)&&(a=!0)),d&&(o=h?(s=s.add(h),p?o.add(t):o.delete(t)):(s=s.delete(t),o.delete(t)))})),this.query.an()||this.query.cn())for(;s.size>this.query.limit;){var l=this.query.an()?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{bu:s,Du:r,Nu:a,qt:o}},fS.prototype.Cu=function(t,e){return t.Ge&&e.hasCommittedMutations&&!e.Ge},fS.prototype.Un=function(t,e,n){var r=this,i=this.bu;this.bu=t.bu,this.qt=t.qt;var o=t.Du.Mt();o.sort((function(t,e){return i=t.type,o=e.type,n(i)-n(o)||r.pu(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Tg()}}var i,o})),this.Fu(n);var s=e?this.ku():[],a=0===this.yu.size&&this.Yt?1:0,u=a!==this.Vu;return this.Vu=a,0!==o.length||u?{snapshot:new Bm(this.query,t.bu,i,o,t.qt,0==a,u,!1),$u:s}:{$u:s}},fS.prototype.xu=function(t){return this.Yt&&"Offline"===t?(this.Yt=!1,this.Un({bu:this.bu,Du:new qm,qt:this.qt,Nu:!1},!1)):{$u:[]}},fS.prototype.Ou=function(t){return!this.gu.has(t)&&!!this.bu.has(t)&&!this.bu.get(t).Ge},fS.prototype.Fu=function(t){var e=this;t&&(t.Jt.forEach((function(t){return e.gu=e.gu.add(t)})),t.Xt.forEach((function(t){})),t.Zt.forEach((function(t){return e.gu=e.gu.delete(t)})),this.Yt=t.Yt)},fS.prototype.ku=function(){var t=this;if(!this.Yt)return[];var e=this.yu;this.yu=Lm(),this.bu.forEach((function(e){t.Ou(e.key)&&(t.yu=t.yu.add(e.key))}));var n=[];return e.forEach((function(e){t.yu.has(e)||n.push(new ZI(e))})),this.yu.forEach((function(t){e.has(t)||n.push(new JI(t))})),n},fS.prototype.Mu=function(t){this.gu=t.gh,this.yu=Lm();var e=this.Su(t.documents);return this.Un(e,!0)},fS.prototype.Lu=function(){return Bm.Qt(this.query,this.bu,this.qt,0===this.Vu)},fS),lS=(Object.defineProperty(hS.prototype,"el",{get:function(){return!0===this.tl},enumerable:!1,configurable:!0}),hS.prototype.subscribe=function(t){this.Wu=t},hS.prototype.listen=function(t){return js(this,void 0,void 0,(function(){var e,n,r,i,o;return Vs(this,(function(s){switch(s.label){case 0:return this.nl("listen()"),(r=this.ju.get(t))?(e=r.targetId,this.Uu.eu(e),n=r.view.Lu(),[3,4]):[3,1];case 1:return[4,dI(this.La,aw(t))];case 2:return i=s.sent(),o=this.Uu.eu(i.targetId),e=i.targetId,[4,this.sl(t,e,"current"===o)];case 3:n=s.sent(),this.el&&this.Bu.listen(i),s.label=4;case 4:return[2,n]}}))}))},hS.prototype.sl=function(t,e,n){return js(this,void 0,void 0,(function(){var r,i,o,s,a,u;return Vs(this,(function(c){switch(c.label){case 0:return[4,yI(this.La,t,!0)];case 1:return r=c.sent(),i=new cS(t,r.gh),o=i.Su(r.documents),s=Hm.Ht(e,n&&"Offline"!==this.onlineState),a=i.Un(o,this.el,s),this.il(e,a.$u),u=new tS(t,e,i),[2,(this.ju.set(t,u),this.Ku.has(e)?this.Ku.get(e).push(t):this.Ku.set(e,[t]),a.snapshot)]}}))}))},hS.prototype.lc=function(t){return js(this,void 0,void 0,(function(){var e,n,r=this;return Vs(this,(function(i){switch(i.label){case 0:return this.nl("unlisten()"),e=this.ju.get(t),1<(n=this.Ku.get(e.targetId)).length?[2,(this.Ku.set(e.targetId,n.filter((function(e){return!hw(e,t)}))),void this.ju.delete(t))]:this.el?(this.Uu.su(e.targetId),this.Uu.Yc(e.targetId)?[3,2]:[4,vI(this.La,e.targetId,!1).then((function(){r.Uu.ru(e.targetId),r.Bu.lc(e.targetId),r.rl(e.targetId)})).catch(mI)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.rl(e.targetId),[4,vI(this.La,e.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},hS.prototype.write=function(t,e){return js(this,void 0,void 0,(function(){var n,r,i;return Vs(this,(function(o){switch(o.label){case 0:this.nl("write()"),o.label=1;case 1:return o.trys.push([1,5,,6]),[4,(s=this.La,a=t,c=s,l=Bg.now(),h=a.reduce((function(t,e){return t.add(e.key)}),Lm()),c.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return c.Rh.Zn(t,h).next((function(e){u=e;for(var n,r,i=[],o=0,s=a;o<s.length;o++){var h=s[o],f=(n=h,r=u.get(h.key),n instanceof P_?function(t){for(var e=null,r=0,i=n.fieldTransforms;r<i.length;r++){var o=i[r],s=t instanceof Q_?t.field(o.field):void 0,a=Qb(o.transform,s||null);null!=a&&(e=null==e?(new j_).set(o.field,a):e.set(o.field,a))}return e?e.ze():null}(r):null);null!=f&&i.push(new C_(h.key,f,function t(e){var n=[];return Dg(e.fields||{},(function(e,r){var i=new Kg([e]);if(bb(r)){var o=t(r.mapValue).fields;if(0===o.length)n.push(i);else for(var s=0,a=o;s<a.length;s++){var u=a[s];n.push(i.child(u))}}else n.push(i)})),new h_(n)}(f.proto.mapValue),v_.exists(!0)))}return c.Gn.Ir(t,l,i,a)}))})).then((function(t){var e=t.An(u);return{batchId:t.batchId,Fn:e}})))];case 2:return n=o.sent(),this.Uu.Jc(n.batchId),this.ol(n.batchId,e),[4,this.hl(n.Fn)];case 3:return o.sent(),[4,this.Bu.hc()];case 4:return o.sent(),[3,6];case 5:return r=o.sent(),i=xE(r,"Failed to persist write"),e.reject(i),[3,6];case 6:return[2]}var s,a,u,c,l,h}))}))},hS.prototype.mc=function(t){return js(this,void 0,void 0,(function(){var e,n=this;return Vs(this,(function(r){switch(r.label){case 0:this.nl("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,pI(this.La,t)];case 2:return e=r.sent(),t.Wt.forEach((function(t,e){var r=n.Hu.get(e);r&&(Ig(t.Jt.size+t.Xt.size+t.Zt.size<=1),0<t.Jt.size?r.qu=!0:0<t.Xt.size?Ig(r.qu):0<t.Zt.size&&(Ig(r.qu),r.qu=!1))})),[4,this.hl(e,t)];case 3:return r.sent(),[3,6];case 4:return[4,mI(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},hS.prototype.xu=function(t,e){var n;(this.el&&0===e||!this.el&&1===e)&&(this.nl("applyOnlineStateChange()"),n=[],this.ju.forEach((function(e,r){var i=r.view.xu(t);i.snapshot&&n.push(i.snapshot)})),this.Wu.al(t),this.Wu.Ea(n),this.onlineState=t,this.el&&this.Uu.cu(t))},hS.prototype.Ic=function(t,e){return js(this,void 0,void 0,(function(){var n,r,i,o,s,a=this;return Vs(this,(function(u){switch(u.label){case 0:return this.nl("rejectListens()"),this.Uu.ou(t,"rejected",e),n=this.Hu.get(t),(r=n&&n.key)?(i=(i=new _m(Qg.P)).st(r,new Y_(r,Wg.min())),o=Lm().add(r),s=new Wm(Wg.min(),new Map,new km(kg),i,o),[4,this.mc(s)]):[3,2];case 1:return u.sent(),this.zu=this.zu.remove(r),this.Hu.delete(t),this.cl(),[3,4];case 2:return[4,vI(this.La,t,!1).then((function(){return a.rl(t,e)})).catch(mI)];case 3:u.sent(),u.label=4;case 4:return[2]}}))}))},hS.prototype.yc=function(t){return js(this,void 0,void 0,(function(){var e,n;return Vs(this,(function(r){switch(r.label){case 0:this.nl("applySuccessfulWrite()"),e=t.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,hI(this.La,t)];case 2:return n=r.sent(),this.ul(e,null),this.ll(e),this.Uu.Zc(e,"acknowledged"),[4,this.hl(n)];case 3:return r.sent(),[3,6];case 4:return[4,mI(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},hS.prototype.bc=function(t,e){return js(this,void 0,void 0,(function(){var n;return Vs(this,(function(r){switch(r.label){case 0:this.nl("rejectFailedWrite()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,(i=this.La,o=t,(s=i).persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var e;return s.Gn.Rr(t,o).next((function(n){return Ig(null!==n),e=n.keys(),s.Gn.br(t,n)})).next((function(){return s.Gn.Cr(t)})).next((function(){return s.Rh.Zn(t,e)}))})))];case 2:return n=r.sent(),this.ul(t,e),this.ll(t),this.Uu.Zc(t,"rejected",e),[4,this.hl(n)];case 3:return r.sent(),[3,6];case 4:return[4,mI(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}var i,o,s}))}))},hS.prototype._l=function(t){return js(this,void 0,void 0,(function(){var e,n,r,i;return Vs(this,(function(o){switch(o.label){case 0:this.Bu.Ga()||bg("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,(s=this.La,(a=s).persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return a.Gn.Vr(t)})))];case 2:return-1===(e=o.sent())?[2,void t.resolve()]:((n=this.Xu.get(e)||[]).push(t),this.Xu.set(e,n),[3,4]);case 3:return r=o.sent(),i=xE(r,"Initialization of waitForPendingWrites() operation failed"),t.reject(i),[3,4];case 4:return[2]}var s,a}))}))},hS.prototype.ll=function(t){(this.Xu.get(t)||[]).forEach((function(t){t.resolve()})),this.Xu.delete(t)},hS.prototype.fl=function(t){this.Xu.forEach((function(e){e.forEach((function(e){e.reject(new qg(Vg.CANCELLED,t))}))})),this.Xu.clear()},hS.prototype.ol=function(t,e){var n=this.Ju[this.currentUser.$h()];n=(n=n||new _m(kg)).st(t,e),this.Ju[this.currentUser.$h()]=n},hS.prototype.ul=function(t,e){var n,r=this.Ju[this.currentUser.$h()];r&&((n=r.get(t))&&(e?n.reject(e):n.resolve(),r=r.remove(t)),this.Ju[this.currentUser.$h()]=r)},hS.prototype.rl=function(t,e){var n=this;void 0===e&&(e=null),this.Uu.su(t);for(var r=0,i=this.Ku.get(t);r<i.length;r++){var o=i[r];this.ju.delete(o),e&&this.Wu.dl(o,e)}this.Ku.delete(t),this.el&&this.Yu.Ch(t).forEach((function(t){n.Yu.Nr(t)||n.wl(t)}))},hS.prototype.wl=function(t){var e=this.zu.get(t);null!==e&&(this.Bu.lc(e),this.zu=this.zu.remove(t),this.Hu.delete(e),this.cl())},hS.prototype.il=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof JI?(this.Yu.Eo(i.key,t),this.Tl(i)):i instanceof ZI?(bg("SyncEngine","Document no longer in limbo: "+i.key),this.Yu.Io(i.key,t),this.Yu.Nr(i.key)||this.wl(i.key)):Tg()}},hS.prototype.Tl=function(t){var e=t.key;this.zu.get(e)||(bg("SyncEngine","New document in limbo: "+e),this.Gu.push(e),this.cl())},hS.prototype.cl=function(){for(;0<this.Gu.length&&this.zu.size<this.Qu;){var t=this.Gu.shift(),e=this.Zu.next();this.Hu.set(e,new eS(t)),this.zu=this.zu.st(t,e),this.Bu.listen(new ym(aw(iw(t.path)),e,2,tE.Es))}},hS.prototype.El=function(){return this.zu},hS.prototype.ml=function(){return this.Gu},hS.prototype.hl=function(t,e){return js(this,void 0,void 0,(function(){var n,r,i,o=this;return Vs(this,(function(s){switch(s.label){case 0:return n=[],r=[],i=[],this.ju.forEach((function(s,a){i.push(Promise.resolve().then((function(){var e=a.view.Su(t);return e.Nu?yI(o.La,a.query,!1).then((function(t){var n=t.documents;return a.view.Su(n,e)})):e})).then((function(t){var i,s=e&&e.Wt.get(a.targetId),u=a.view.Un(t,o.el,s);o.il(a.targetId,u.$u),u.snapshot&&(o.el&&o.Uu.ou(a.targetId,u.snapshot.fromCache?"not-current":"current"),n.push(u.snapshot),i=Zw._s(a.targetId,u.snapshot),r.push(i))})))})),[4,Promise.all(i)];case 1:return s.sent(),this.Wu.Ea(n),[4,function(t,e){return js(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return Vs(this,(function(h){switch(h.label){case 0:n=t,h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Qw.forEach(e,(function(e){return Qw.forEach(e.us,(function(r){return n.persistence.dr.Eo(t,e.targetId,r)})).next((function(){return Qw.forEach(e.ls,(function(r){return n.persistence.dr.Io(t,e.targetId,r)}))}))}))}))];case 2:return h.sent(),[3,4];case 3:if(!bE(r=h.sent()))throw r;return bg("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],a=s.targetId,s.fromCache||(u=n.Eh.get(a),c=u.Z,l=u.nt(c),n.Eh=n.Eh.st(a,l));return[2]}}))}))}(this.La,r)];case 2:return s.sent(),[2]}}))}))},hS.prototype.nl=function(t){},hS.prototype.vc=function(t){return js(this,void 0,void 0,(function(){var e;return Vs(this,(function(n){switch(n.label){case 0:return this.currentUser.isEqual(t)?[3,3]:(bg("SyncEngine","User change. New user:",t.$h()),[4,function(t,e){return js(this,void 0,void 0,(function(){var n,r,i,o;return Vs(this,(function(s){switch(s.label){case 0:return r=(n=t).Gn,i=n.Rh,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.Gn.yr(t).next((function(s){return o=s,r=n.persistence.oh(e),i=new Jw(n.Ah,r,n.persistence.uh()),r.yr(t)})).next((function(e){for(var n=[],r=[],s=Lm(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];s=s.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];s=s.add(m.key)}}return i.Zn(t,s).next((function(t){return{Il:t,Al:n,Rl:r}}))}))}))];case 1:return o=s.sent(),[2,(n.Gn=r,n.Rh=i,n.Th.Ph(n.Rh),o)]}}))}))}(this.La,t)]);case 1:return e=n.sent(),this.currentUser=t,this.fl("'waitForPendingWrites' promise is rejected due to a user change."),this.Uu.au(t,e.Al,e.Rl),[4,this.hl(e.Il)];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},hS.prototype.Oe=function(t){var e=this.Hu.get(t);if(e&&e.qu)return Lm().add(e.key);var n=Lm(),r=this.Ku.get(t);if(!r)return n;for(var i=0,o=r;i<o.length;i++){var s=o[i],a=this.ju.get(s);n=n.Nt(a.view.vu)}return n},hS);function hS(t,e,n,r,i,o){this.La=t,this.Bu=e,this.qa=n,this.Uu=r,this.currentUser=i,this.Qu=o,this.Wu=null,this.ju=new jg(fw,hw),this.Ku=new Map,this.Gu=[],this.zu=new _m(Qg.P),this.Hu=new Map,this.Yu=new bI,this.Ju={},this.Xu=new Map,this.Zu=HT.eo(),this.onlineState="Unknown",this.tl=void 0}function fS(t,e){this.query=t,this.gu=e,this.Vu=null,this.Yt=!1,this.yu=Lm(),this.qt=Lm(),this.pu=vw(t),this.bu=new Vm(this.pu)}function pS(){this.Ru=new sS,this.Pu={},this.Da=null,this.fs=null}function dS(t,e,n,r,i){this.window=t,this.ms=e,this.persistenceKey=n,this.kc=r,this.fc=null,this.Da=null,this.fs=null,this.$c=this.xc.bind(this),this.Oc=new _m(kg),this.tr=!1,this.Mc=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Lc=YI(this.persistenceKey,this.kc),this.qc="firestore_sequence_number_"+this.persistenceKey,this.Oc=this.Oc.st(this.kc,new sS),this.Bc=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Uc=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Qc=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Wc="firestore_online_state_"+this.persistenceKey,this.window.addEventListener("storage",this.$c)}function vS(){this.activeTargetIds=Mm}function yS(t,e){this.clientId=t,this.onlineState=e}function gS(t,e){this.clientId=t,this.activeTargetIds=e}function mS(t,e,n){this.targetId=t,this.state=e,this.error=n}function bS(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}function _S(t,e,n,r){return js(this,void 0,void 0,(function(){var i,o;return Vs(this,(function(s){switch(s.label){case 0:return(i=t).nl("applyBatchState()"),[4,(a=i.La,u=e,l=(c=a).Gn,c.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return l.Pr(t,u).next((function(e){return e?c.Rh.Zn(t,e):Qw.resolve(null)}))})))];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,i.Bu.hc()];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(i.ul(e,r||null),i.La.Gn.Sr(e)):Tg(),s.label=4;case 4:return[4,i.hl(o)];case 5:return s.sent(),[3,7];case 6:bg("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}var a,u,c,l}))}))}function wS(t,e){return js(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return Vs(this,(function(l){switch(l.label){case 0:return n=t,!0!==e||!0===n.tl?[3,3]:(r=n.Uu.zc(),[4,ES(n,r.N())]);case 1:return i=l.sent(),n.tl=!0,[4,n.Bu.Sc(!0)];case 2:for(l.sent(),o=0,s=i;o<s.length;o++)a=s[o],n.Bu.listen(a);return[3,7];case 3:return!1!==e||!1===n.tl?[3,7]:(u=[],c=Promise.resolve(),n.Ku.forEach((function(t,e){n.Uu.iu(e)?u.push(e):c=c.then((function(){return n.rl(e),vI(n.La,e,!0)})),n.Bu.lc(e)})),[4,c]);case 4:return l.sent(),[4,ES(n,u)];case 5:return l.sent(),(h=n).Hu.forEach((function(t,e){h.Bu.lc(e)})),h.Yu.Nh(),h.Hu=new Map,h.zu=new _m(Qg.P),n.tl=!1,[4,n.Bu.Sc(!1)];case 6:l.sent(),l.label=7;case 7:return[2]}var h}))}))}function ES(t,e){return js(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,h,f,p,d,v;return Vs(this,(function(y){switch(y.label){case 0:n=t,r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(a=s[o],u=void 0,(c=n.Ku.get(a))&&0!==c.length?[4,dI(n.La,aw(c[0]))]:[3,7]):[3,13];case 2:u=y.sent(),l=0,h=c,y.label=3;case 3:return l<h.length?(f=h[l],p=n.ju.get(f),[4,function(t,e){return js(this,void 0,void 0,(function(){var n,r,i;return Vs(this,(function(o){switch(o.label){case 0:return[4,yI((n=t).La,e.query,!0)];case 1:return r=o.sent(),i=e.view.Mu(r),[2,(n.el&&n.il(e.targetId,i.$u),i)]}}))}))}(n,p)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,gI(n.La,a)];case 8:return v=y.sent(),[4,dI(n.La,v)];case 9:return u=y.sent(),[4,n.sl(TS(v),a,!1)];case 10:y.sent(),y.label=11;case 11:r.push(u),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.Wu.Ea(i),r)]}}))}))}function TS(t){return rw(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function IS(t,e,n,r){return js(this,void 0,void 0,(function(){var i,o,s;return Vs(this,(function(a){switch(a.label){case 0:return(i=t).tl?(bg("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Ku.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,(u=i.La,c=u.Ah,u.persistence.runTransaction("Get new document changes","readonly",(function(t){return c.Ur(t,u.Ih)})).then((function(t){var e=t.Qr,n=t.readTime;return u.Ih=n,e})))];case 3:return o=a.sent(),s=Wm.zt(e,"current"===n),[4,i.hl(o,s)];case 4:return a.sent(),[3,8];case 5:return[4,vI(i.La,e,!0)];case 6:return a.sent(),i.rl(e,r),[3,8];case 7:Tg(),a.label=8;case 8:return[2]}var u,c}))}))}function SS(){this.Pl=void 0,this.listeners=[]}var CS,kS=(MS.prototype.listen=function(t){return js(this,void 0,void 0,(function(){var e,n,r,i,o,s;return Vs(this,(function(a){switch(a.label){case 0:if(e=t.query,n=!1,(r=this.gl.get(e))||(n=!0,r=new SS),!n)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),i=r,[4,this.fc.listen(e)];case 2:return i.Pl=a.sent(),[3,4];case 3:return o=a.sent(),s=xE(o,"Initialization of query '"+pw(t.query)+"' failed"),[2,void t.onError(s)];case 4:return this.gl.set(e,r),r.listeners.push(t),t.xu(this.onlineState),r.Pl&&t.yl(r.Pl)&&this.pl(),[2]}}))}))},MS.prototype.lc=function(t){return js(this,void 0,void 0,(function(){var e,n,r,i;return Vs(this,(function(o){return e=t.query,n=!1,(r=this.gl.get(e))&&0<=(i=r.listeners.indexOf(t))&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?[2,(this.gl.delete(e),this.fc.lc(e))]:[2]}))}))},MS.prototype.Ea=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=i.query,s=this.gl.get(o);if(s){for(var a=0,u=s.listeners;a<u.length;a++)u[a].yl(i)&&(e=!0);s.Pl=i}}e&&this.pl()},MS.prototype.dl=function(t,e){var n=this.gl.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.gl.delete(t)},MS.prototype.al=function(t){this.onlineState=t;var e=!1;this.gl.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].xu(t)&&(e=!0)})),e&&this.pl()},MS.prototype.bl=function(t){this.Vl.add(t),t.next()},MS.prototype.vl=function(t){this.Vl.delete(t)},MS.prototype.pl=function(){this.Vl.forEach((function(t){t.next()}))},MS),NS=(LS.prototype.yl=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Bm(t.query,t.docs,t.Lt,e,t.qt,t.fromCache,t.Bt,!0)}var o=!1;return this.Dl?this.Nl(t)&&(this.Sl.next(t),o=!0):this.Fl(t,this.onlineState)&&(this.kl(t),o=!0),this.Cl=t,o},LS.prototype.onError=function(t){this.Sl.error(t)},LS.prototype.xu=function(t){this.onlineState=t;var e=!1;return this.Cl&&!this.Dl&&this.Fl(this.Cl,t)&&(this.kl(this.Cl),e=!0),e},LS.prototype.Fl=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.$l&&n||t.docs._()&&"Offline"!==e)},LS.prototype.Nl=function(t){if(0<t.docChanges.length)return!0;var e=this.Cl&&this.Cl.hasPendingWrites!==t.hasPendingWrites;return!(!t.Bt&&!e)&&!0===this.options.includeMetadataChanges},LS.prototype.kl=function(t){t=Bm.Qt(t.query,t.docs,t.qt,t.fromCache),this.Dl=!0,this.Sl.next(t)},LS),AS=(DS.prototype.Ph=function(t){this.xl=t},DS.prototype.ns=function(t,e,n,r){var i=this;return e.hn()||n.isEqual(Wg.min())?this.Ol(t,e):this.xl.Zn(t,r).next((function(o){var s=i.Ml(e,o);return(e.an()||e.cn())&&i.Nu(e.nn,s,r,n)?i.Ol(t,e):(mg()<=Wa.DEBUG&&bg("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),pw(e)),i.xl.ns(t,e,n).next((function(t){return s.forEach((function(e){t=t.st(e.key,e)})),t})))}))},DS.prototype.Ml=function(t,e){var n=new km(vw(t));return e.forEach((function(e,r){r instanceof Q_&&dw(t,r)&&(n=n.add(r))})),n},DS.prototype.Nu=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||0<i.version.o(r))},DS.prototype.Ol=function(t,e){return mg()<=Wa.DEBUG&&bg("IndexFreeQueryEngine","Using full collection scan to execute query:",pw(e)),this.xl.ns(t,e,Wg.min())},DS),OS=(xS.prototype.mr=function(t){return Qw.resolve(0===this.Gn.length)},xS.prototype.Ir=function(t,e,n,r){var i=this.Ll;this.Ll++,0<this.Gn.length&&this.Gn[this.Gn.length-1];var o=new Gw(i,e,n,r);this.Gn.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.ql=this.ql.add(new _I(u.key,i)),this.zn.Ar(t,u.key.path.p())}return Qw.resolve(o)},xS.prototype.Rr=function(t,e){return Qw.resolve(this.Bl(e))},xS.prototype.gr=function(t,e){var n=e+1,r=this.Ul(n),i=r<0?0:r;return Qw.resolve(this.Gn.length>i?this.Gn[i]:null)},xS.prototype.Vr=function(){return Qw.resolve(0===this.Gn.length?-1:this.Ll-1)},xS.prototype.yr=function(t){return Qw.resolve(this.Gn.slice())},xS.prototype.Yn=function(t,e){var n=this,r=new _I(e,0),i=new _I(e,Number.POSITIVE_INFINITY),o=[];return this.ql.St([r,i],(function(t){var e=n.Bl(t.kh);o.push(e)})),Qw.resolve(o)},xS.prototype.es=function(t,e){var n=this,r=new km(kg);return e.forEach((function(t){var e=new _I(t,0),i=new _I(t,Number.POSITIVE_INFINITY);n.ql.St([e,i],(function(t){r=r.add(t.kh)}))})),Qw.resolve(this.Ql(r))},xS.prototype.as=function(t,e){var n=e.path,r=n.length+1,i=n;Qg.j(i)||(i=i.child(""));var o=new _I(new Qg(i),0),s=new km(kg);return this.ql.Dt((function(t){var e=t.key.path;return!!n.D(e)&&(e.length===r&&(s=s.add(t.kh)),!0)}),o),Qw.resolve(this.Ql(s))},xS.prototype.Ql=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Bl(t);null!==r&&n.push(r)})),n},xS.prototype.br=function(t,e){var n=this;Ig(0===this.Wl(e.batchId,"removed")),this.Gn.shift();var r=this.ql;return Qw.forEach(e.mutations,(function(i){var o=new _I(i.key,e.batchId);return r=r.delete(o),n.dr.Dr(t,i.key)})).next((function(){n.ql=r}))},xS.prototype.Sr=function(t){},xS.prototype.Nr=function(t,e){var n=new _I(e,0),r=this.ql.Ct(n);return Qw.resolve(e.isEqual(r&&r.key))},xS.prototype.Cr=function(t){return this.Gn.length,Qw.resolve()},xS.prototype.Wl=function(t,e){return this.Ul(t)},xS.prototype.Ul=function(t){return 0===this.Gn.length?0:t-this.Gn[0].batchId},xS.prototype.Bl=function(t){var e=this.Ul(t);return e<0||e>=this.Gn.length?null:this.Gn[e]},xS),PS=(RS.prototype.xn=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.jl(e);return this.docs=this.docs.st(r,{Or:e,size:s,readTime:n}),this.size+=s-o,this.zn.Ar(t,r.path.p())},RS.prototype.Mn=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},RS.prototype.Ln=function(t,e){var n=this.docs.get(e);return Qw.resolve(n?n.Or:null)},RS.prototype.getEntries=function(t,e){var n=this,r=Am;return e.forEach((function(t){var e=n.docs.get(t);r=r.st(t,e?e.Or:null)})),Qw.resolve(r)},RS.prototype.ns=function(t,e,n){for(var r=Rm,i=new Qg(e.path.child("")),o=this.docs.ut(i);o.Tt();){var s=o.wt(),a=s.key,u=s.value,c=u.Or,l=u.readTime;if(!e.path.D(a.path))break;l.o(n)<=0||c instanceof Q_&&dw(e,c)&&(r=r.st(c.key,c))}return Qw.resolve(r)},RS.prototype.Kl=function(t,e){return Qw.forEach(this.docs,(function(t){return e(t)}))},RS.prototype.jr=function(t){return new RS.Kr(this)},RS.prototype.zr=function(t){return Qw.resolve(this.size)},RS);function RS(t,e){this.zn=t,this.jl=e,this.docs=new _m(Qg.P),this.size=0}function xS(t,e){this.zn=t,this.dr=e,this.Gn=[],this.Ll=1,this.ql=new km(_I.yh)}function DS(){}function LS(t,e,n){this.query=t,this.Sl=e,this.Dl=!1,this.Cl=null,this.onlineState="Unknown",this.options=n||{}}function MS(t){this.fc=t,this.gl=new jg(fw,hw),this.onlineState="Unknown",this.Vl=new Set,this.fc.subscribe(this)}function FS(t){var e=this;return(e=CS.call(this)||this).Hr=t,e}PS.Kr=(Fs(FS,CS=Yw),FS.prototype.Un=function(t){var e=this,n=[];return this.Fn.forEach((function(r,i){i?n.push(e.Hr.xn(t,i,e.readTime)):e.Hr.Mn(r)})),Qw.Cn(n)},FS.prototype.qn=function(t,e){return this.Hr.Ln(t,e)},FS.prototype.Bn=function(t,e){return this.Hr.getEntries(t,e)},FS);var US,jS,VS=(rC.prototype.be=function(t,e){return this.Gl.forEach((function(t,n){return e(n)})),Qw.resolve()},rC.prototype.ro=function(t){return Qw.resolve(this.lastRemoteSnapshotVersion)},rC.prototype.oo=function(t){return Qw.resolve(this.zl)},rC.prototype.no=function(t){return this.highestTargetId=this.Yl.next(),Qw.resolve(this.highestTargetId)},rC.prototype.ho=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.zl&&(this.zl=e),Qw.resolve()},rC.prototype.co=function(t){this.Gl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Yl=new HT(e),this.highestTargetId=e),t.sequenceNumber>this.zl&&(this.zl=t.sequenceNumber)},rC.prototype.ao=function(t,e){return this.co(e),this.targetCount+=1,Qw.resolve()},rC.prototype.lo=function(t,e){return this.co(e),Qw.resolve()},rC.prototype._o=function(t,e){return this.Gl.delete(e.target),this.Hl.Ch(e.targetId),--this.targetCount,Qw.resolve()},rC.prototype.hr=function(t,e,n){var r=this,i=0,o=[];return this.Gl.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Gl.delete(s),o.push(r.fo(t,a.targetId)),i++)})),Qw.Cn(o).next((function(){return i}))},rC.prototype.do=function(t){return Qw.resolve(this.targetCount)},rC.prototype.wo=function(t,e){var n=this.Gl.get(e)||null;return Qw.resolve(n)},rC.prototype.To=function(t,e,n){return this.Hl.vh(e,n),Qw.resolve()},rC.prototype.mo=function(t,e,n){this.Hl.Dh(e,n);var r=this.persistence.dr,i=[];return r&&e.forEach((function(e){i.push(r.Dr(t,e))})),Qw.Cn(i)},rC.prototype.fo=function(t,e){return this.Hl.Ch(e),Qw.resolve()},rC.prototype.Ao=function(t,e){var n=this.Hl.Fh(e);return Qw.resolve(n)},rC.prototype.Nr=function(t,e){return Qw.resolve(this.Hl.Nr(e))},rC),qS=(nC.prototype.start=function(){return Promise.resolve()},nC.prototype.th=function(){return this.po=!1,Promise.resolve()},Object.defineProperty(nC.prototype,"tr",{get:function(){return this.po},enumerable:!1,configurable:!0}),nC.prototype.Bo=function(){},nC.prototype.Uo=function(){},nC.prototype.uh=function(){return this.zn},nC.prototype.oh=function(t){var e=this.Jl[t.$h()];return e||(e=new OS(this.zn,this.dr),this.Jl[t.$h()]=e),e},nC.prototype.hh=function(){return this.ko},nC.prototype.ah=function(){return this.Kn},nC.prototype.runTransaction=function(t,e,n){var r=this;bg("MemoryPersistence","Starting transaction:",t);var i=new BS(this.yo.next());return this.dr.Zl(),n(i).next((function(t){return r.dr.t_(i).next((function(){return t}))})).Sn().then((function(t){return i.jn(),t}))},nC.prototype.e_=function(t,e){return Qw.Nn(Object.values(this.Jl).map((function(n){return function(){return n.Nr(t,e)}})))},nC),BS=(Fs(eC,jS=$w),eC),WS=(tC.i_=function(t){return new tC(t)},Object.defineProperty(tC.prototype,"r_",{get:function(){if(this.s_)return this.s_;throw Tg()},enumerable:!1,configurable:!0}),tC.prototype.Eo=function(t,e,n){return this.n_.Eo(n,e),this.r_.delete(n.toString()),Qw.resolve()},tC.prototype.Io=function(t,e,n){return this.n_.Io(n,e),this.r_.add(n.toString()),Qw.resolve()},tC.prototype.Dr=function(t,e){return this.r_.add(e.toString()),Qw.resolve()},tC.prototype.removeTarget=function(t,e){var n=this;this.n_.Ch(e.targetId).forEach((function(t){return n.r_.add(t.toString())}));var r=this.persistence.hh();return r.Ao(t,e.targetId).next((function(t){t.forEach((function(t){return n.r_.add(t.toString())}))})).next((function(){return r._o(t,e)}))},tC.prototype.Zl=function(){this.s_=new Set},tC.prototype.t_=function(t){var e=this,n=this.persistence.ah().jr();return Qw.forEach(this.r_,(function(r){var i=Qg.B(r);return e.o_(t,i).next((function(t){t||n.Mn(i)}))})).next((function(){return e.s_=null,n.apply(t)}))},tC.prototype.wh=function(t,e){var n=this;return this.o_(t,e).next((function(t){t?n.r_.delete(e.toString()):n.r_.add(e.toString())}))},tC.prototype.Xl=function(t){return 0},tC.prototype.o_=function(t,e){var n=this;return Qw.Nn([function(){return Qw.resolve(n.n_.Nr(e))},function(){return n.persistence.hh().Nr(t,e)},function(){return n.persistence.e_(t,e)}])},tC),HS=(ZS.prototype.wa=function(t){this.c_=t},ZS.prototype.ua=function(t){this.u_=t},ZS.prototype.onMessage=function(t){this.l_=t},ZS.prototype.close=function(){this.a_()},ZS.prototype.send=function(t){this.h_(t)},ZS.prototype.__=function(){this.c_()},ZS.prototype.f_=function(t){this.u_(t)},ZS.prototype.d_=function(t){this.l_(t)},ZS),zS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},GS=(JS.prototype.va=function(t,e,n,r){var i=this.m_(t,e);bg("RestConnection","Sending: ",i,n);var o={};return this.I_(o,r),this.A_(t,i,o,n).then((function(t){return bg("RestConnection","Received: ",t),t}),(function(e){throw wg("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},JS.prototype.Sa=function(t,e,n,r){return this.va(t,e,n,r)},JS.prototype.I_=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/7.19.0",t["Content-Type"]="text/plain",e)for(var n in e.Mh)e.Mh.hasOwnProperty(n)&&(t[n]=e.Mh[n])},JS.prototype.m_=function(t,e){var n=zS[t];return this.T_+"/v1/"+e+":"+n},Fs($S,US=JS),$S.prototype.A_=function(t,e,n,r){return new Promise((function(i,o){var s=new yg;s.listenOnce(dg.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case pg.NO_ERROR:var e=s.getResponseJson();bg("Connection","XHR received:",JSON.stringify(e)),i(e);break;case pg.TIMEOUT:bg("Connection",'RPC "'+t+'" timed out'),o(new qg(Vg.DEADLINE_EXCEEDED,"Request time out"));break;case pg.HTTP_ERROR:var n,r,a=s.getStatus();bg("Connection",'RPC "'+t+'" failed with status:',a,"response text:",s.getResponseText()),0<a?(n=s.getResponseJson().error)&&n.status&&n.message?(u=n.status.toLowerCase().replace("_","-"),r=0<=Object.values(Vg).indexOf(u)?u:Vg.UNKNOWN,o(new qg(r,n.message))):o(new qg(Vg.UNKNOWN,"Server responded with status "+s.getStatus())):o(new qg(Vg.UNAVAILABLE,"Connection failed."));break;default:Tg()}}finally{bg("Connection",'RPC "'+t+'" completed.')}var u}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},$S.prototype.Ta=function(t,e){var n,r=[this.T_,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=fg(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.s.projectId+"/databases/"+this.s.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.I_(o.initMessageHeaders,e),ra()||oa()||0<=na().indexOf("Electron/")||0<=(n=na()).indexOf("MSIE ")||0<=n.indexOf("Trident/")||0<=na().indexOf("MSAppHost/")||ia()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");function a(t,e){u.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))}bg("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),c=!1,l=!1,h=new HS({h_:function(t){l?bg("Connection","Not sending because WebChannel is closed:",t):(c||(bg("Connection","Opening WebChannel transport."),u.open(),c=!0),bg("Connection","WebChannel sending:",t),u.send(t))},a_:function(){return u.close()}});return a(vg.EventType.OPEN,(function(){l||bg("Connection","WebChannel transport opened.")})),a(vg.EventType.CLOSE,(function(){l||(l=!0,bg("Connection","WebChannel transport closed"),h.f_())})),a(vg.EventType.ERROR,(function(t){l||(l=!0,wg("Connection","WebChannel transport errored:",t),h.f_(new qg(Vg.UNAVAILABLE,"The operation could not be completed")))})),a(vg.EventType.MESSAGE,(function(t){var e,n,r,i,o,s;l||(Ig(!!(n=t.data[0])),(r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error))?(bg("Connection","WebChannel received error:",r),i=r.status,o=function(){var t=dm[i];if(void 0!==t)return bm(t)}(),s=r.message,void 0===o&&(o=Vg.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),l=!0,h.f_(new qg(o,s)),u.close()):(bg("Connection","WebChannel received:",n),h.d_(n)))})),setTimeout((function(){h.__()}),0),h},$S),KS=(XS.prototype.Ka=function(t){this.y_.push(t)},XS.prototype.th=function(){window.removeEventListener("online",this.R_),window.removeEventListener("offline",this.g_)},XS.prototype.p_=function(){window.addEventListener("online",this.R_),window.addEventListener("offline",this.g_)},XS.prototype.P_=function(){bg("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.y_;t<e.length;t++)(0,e[t])(0)},XS.prototype.V_=function(){bg("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.y_;t<e.length;t++)(0,e[t])(1)},XS.ks=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},XS),QS=(YS.prototype.Ka=function(t){},YS.prototype.th=function(){},YS);function YS(){}function XS(){var t=this;this.R_=function(){return t.P_()},this.g_=function(){return t.V_()},this.y_=[],this.p_()}function $S(t){var e=this;return(e=US.call(this,t)||this).forceLongPolling=t.forceLongPolling,e}function JS(t){this.w_=t,this.s=t.s;var e=t.ssl?"https":"http";this.T_=e+"://"+t.host,this.E_="projects/"+this.s.projectId+"/databases/"+this.s.database+"/documents"}function ZS(t){this.h_=t.h_,this.a_=t.a_}function tC(t){this.persistence=t,this.n_=new bI,this.s_=null}function eC(t){var e=this;return(e=jS.call(this)||this).Ro=t,e}function nC(t){var e=this;this.Jl={},this.yo=new tE(0),this.po=!1,this.po=!0,this.dr=t(this),this.ko=new VS(this),this.zn=new mT,this.Kn=new PS(this.zn,(function(t){return e.dr.Xl(t)}))}function rC(t){this.persistence=t,this.Gl=new jg(um,cm),this.lastRemoteSnapshotVersion=Wg.min(),this.highestTargetId=0,this.zl=0,this.Hl=new bI,this.targetCount=0,this.Yl=HT.to()}function iC(t){return new Eb(t,!0)}var oC,sC,aC="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",uC=(dC.prototype.initialize=function(t){return js(this,void 0,void 0,(function(){return Vs(this,(function(e){switch(e.label){case 0:return this.Uu=this.b_(t),this.persistence=this.v_(t),[4,this.persistence.start()];case 1:return e.sent(),this.S_=this.D_(t),this.La=this.C_(t),[2]}}))}))},dC.prototype.D_=function(t){return null},dC.prototype.C_=function(t){return e=this.persistence,n=new AS,r=t.N_,new cI(e,n,r);var e,n,r},dC.prototype.v_=function(t){if(t.k_.F_)throw new qg(Vg.FAILED_PRECONDITION,aC);return new qS(WS.i_)},dC.prototype.b_=function(t){return new uS},dC.prototype.terminate=function(){return js(this,void 0,void 0,(function(){return Vs(this,(function(t){switch(t.label){case 0:return this.S_&&this.S_.stop(),[4,this.Uu.th()];case 1:return t.sent(),[4,this.persistence.th()];case 2:return t.sent(),[2]}}))}))},dC.prototype.clearPersistence=function(t,e){throw new qg(Vg.FAILED_PRECONDITION,aC)},dC),cC=(Fs(pC,sC=uC),pC.prototype.initialize=function(t){return js(this,void 0,void 0,(function(){return Vs(this,(function(e){switch(e.label){case 0:return[4,sC.prototype.initialize.call(this,t)];case 1:return e.sent(),[4,function(t){return js(this,void 0,void 0,(function(){var e,n;return Vs(this,(function(r){return n=(e=t).Ah,[2,e.persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return n.Wr(t)})).then((function(t){e.Ih=t}))]}))}))}(this.La)];case 2:return e.sent(),[2]}}))}))},pC.prototype.D_=function(t){var e=this.persistence.dr.Yi;return new VE(e,t.ei)},pC.prototype.v_=function(t){var e=uI(t.w_.s,t.w_.persistenceKey),n=iC(t.w_.s);return new tI(t.k_.synchronizeTabs,e,t.clientId,FE.Ui(t.k_.cacheSizeBytes),t.ei,kE(),NE(),n,this.Uu,t.k_.Vo)},pC.prototype.b_=function(t){return new uS},pC.prototype.clearPersistence=function(t,e){return function(t){return js(this,void 0,void 0,(function(){var e;return Vs(this,(function(n){switch(n.label){case 0:return fE.ks()?(e=t+"main",[4,fE.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(uI(t,e))},Fs(fC,oC=pC),fC.prototype.initialize=function(t){return js(this,void 0,void 0,(function(){var e,n=this;return Vs(this,(function(r){switch(r.label){case 0:return[4,oC.prototype.initialize.call(this,t)];case 1:return r.sent(),[4,this.x_.initialize(this,t)];case 2:return r.sent(),e=this.x_.fc,this.Uu instanceof aS?(this.Uu.fc={mu:_S.bind(null,e),Iu:IS.bind(null,e),Au:function(t,e,n){return js(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,h,f;return Vs(this,(function(p){switch(p.label){case 0:if(!(r=t).tl)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.Ku.has(s)?(bg("SyncEngine","Adding an already active target "+s),[3,5]):[4,gI(r.La,s)]):[3,6];case 2:return a=p.sent(),[4,dI(r.La,a)];case 3:return u=p.sent(),[4,r.sl(TS(a),u.targetId,!1)];case 4:p.sent(),r.Bu.listen(u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Vs(this,(function(e){switch(e.label){case 0:return r.Ku.has(t)?[4,vI(r.La,t,!1).then((function(){r.Bu.lc(t),r.rl(t)})).catch(mI)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,p.label=7;case 7:return l<h.length?(f=h[l],[5,c(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}.bind(null,e),rh:function(t){return t.La.persistence.rh()}.bind(null,e)},[4,this.Uu.start()]):[3,4];case 3:r.sent(),r.label=4;case 4:return[4,this.persistence.qo((function(t){return js(n,void 0,void 0,(function(){return Vs(this,(function(e){switch(e.label){case 0:return[4,wS(this.x_.fc,t)];case 1:return e.sent(),this.S_&&(t&&!this.S_.tr?this.S_.start(this.La):t||this.S_.stop()),[2]}}))}))}))];case 5:return r.sent(),[2]}}))}))},fC.prototype.b_=function(t){if(t.k_.F_&&t.k_.synchronizeTabs){var e=kE();if(!aS.ks(e))throw new qg(Vg.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=uI(t.w_.s,t.w_.persistenceKey);return new aS(e,t.ei,n,t.clientId,t.N_)}return new uS},fC),lC=(hC.prototype.initialize=function(t,e){return js(this,void 0,void 0,(function(){var n=this;return Vs(this,(function(r){switch(r.label){case 0:return this.La?[3,3]:(this.La=t.La,this.Uu=t.Uu,this.qa=this.O_(e),this.Bu=this.M_(e),this.fc=this.L_(e),this.q_=this.B_(e),this.Uu.Da=function(t){return n.fc.xu(t,1)},this.Bu.fc=this.fc,[4,this.Bu.start()]);case 1:return r.sent(),[4,this.Bu.Sc(this.fc.el)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},hC.prototype.B_=function(t){return new kS(this.fc)},hC.prototype.O_=function(t){var e,n,r=iC(t.w_.s),i=(e=t.w_,new GS(e));return n=t.credentials,new MI(n,i,r)},hC.prototype.M_=function(t){var e=this;return new UI(this.La,this.qa,t.ei,(function(t){return e.fc.xu(t,0)}),new(KS.ks()?KS:QS))},hC.prototype.L_=function(t){return e=this.La,n=this.Bu,r=this.qa,i=this.Uu,o=t.N_,s=t.Qu,a=!t.k_.F_||!t.k_.synchronizeTabs,u=new lS(e,n,r,i,o,s),a&&(u.tl=!0),u;var e,n,r,i,o,s,a,u},hC.prototype.terminate=function(){return this.Bu.th()},hC);function hC(){}function fC(t){var e=this;return(e=oC.call(this)||this).x_=t,e}function pC(){return null!==sC&&sC.apply(this,arguments)||this}function dC(){}function vC(t){return function(){if("object"==typeof t&&null!==t)for(var e=t,n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return 1}}()}var yC=(gC.prototype.next=function(t){this.observer.next&&this.U_(this.observer.next,t)},gC.prototype.error=function(t){this.observer.error?this.U_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},gC.prototype.Q_=function(){this.muted=!0},gC.prototype.U_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},gC);function gC(t){this.observer=t,this.muted=!1}function mC(t,e){if(0!==e.length)throw new qg(Vg.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+MC(e.length,"argument")+".")}function bC(t,e,n){if(e.length!==n)throw new qg(Vg.INVALID_ARGUMENT,"Function "+t+"() requires "+MC(n,"argument")+", but was called with "+MC(e.length,"argument")+".")}function _C(t,e,n){if(e.length<n)throw new qg(Vg.INVALID_ARGUMENT,"Function "+t+"() requires at least "+MC(n,"argument")+", but was called with "+MC(e.length,"argument")+".")}function wC(t,e,n,r){if(e.length<n||e.length>r)throw new qg(Vg.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+MC(e.length,"argument")+".")}function EC(t,e,n,r){NC(t,e,LC(n)+" argument",r)}function TC(t,e,n,r){void 0!==r&&EC(t,e,n,r)}function IC(t,e,n,r){NC(t,e,n+" option",r)}function SC(t,e,n,r){void 0!==r&&IC(t,e,n,r)}function CC(t,e,n,r,i){void 0!==r&&function(t,e,n){for(var r=[],o=0,s=i;o<s.length;o++){var a=s[o];if(a===n)return;r.push(OC(a))}var u=OC(n);throw new qg(Vg.INVALID_ARGUMENT,"Invalid value "+u+" provided to function "+t+'() for option "'+e+'". Acceptable values: '+r.join(", "))}(t,n,r)}function kC(t,e,n,r){if(!e.some((function(t){return t===r})))throw new qg(Vg.INVALID_ARGUMENT,"Invalid value "+OC(r)+" provided to function "+t+"() for its "+LC(n)+" argument. Acceptable values: "+e.join(", "));return r}function NC(t,e,n,r){if(!("object"===e?AC(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=OC(r);throw new qg(Vg.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function AC(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function OC(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return 20<t.length&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"!=typeof t)return"function"==typeof t?"a function":Tg();if(t instanceof Array)return"an array";var e=function(){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&1<e.length)return e[1]}return null}();return e?"a custom "+e+" object":"an object"}function PC(t,e,n){if(void 0===n)throw new qg(Vg.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+LC(e)+" argument, but it was undefined.")}function RC(t,e,n){Dg(e,(function(e,r){if(n.indexOf(e)<0)throw new qg(Vg.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function xC(t,e,n,r){var i=OC(r);return new qg(Vg.INVALID_ARGUMENT,"Function "+t+"() requires its "+LC(n)+" argument to be a "+e+", but it was: "+i)}function DC(t,e,n){if(n<=0)throw new qg(Vg.INVALID_ARGUMENT,"Function "+t+"() requires its "+LC(e)+" argument to be a positive number, but it was: "+n+".")}function LC(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function MC(t,e){return t+" "+e+(1===t?"":"s")}function FC(){if("undefined"==typeof Uint8Array)throw new qg(Vg.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function UC(){if("undefined"==typeof atob)throw new qg(Vg.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var jC,VC,qC=(YC.fromBase64String=function(t){bC("Blob.fromBase64String",arguments,1),EC("Blob.fromBase64String","string",1,t),UC();try{return new YC(hm.fromBase64String(t))}catch(t){throw new qg(Vg.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},YC.fromUint8Array=function(t){if(bC("Blob.fromUint8Array",arguments,1),FC(),!(t instanceof Uint8Array))throw xC("Blob.fromUint8Array","Uint8Array",1,t);return new YC(hm.fromUint8Array(t))},YC.prototype.toBase64=function(){return bC("Blob.toBase64",arguments,0),UC(),this.W_.toBase64()},YC.prototype.toUint8Array=function(){return bC("Blob.toUint8Array",arguments,0),FC(),this.W_.toUint8Array()},YC.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},YC.prototype.isEqual=function(t){return this.W_.isEqual(t.W_)},YC),BC=function(t){!function(){if(!(t instanceof Array)||t.length<1)throw new qg(Vg.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least 1 element.")}();for(var e=0;e<t.length;++e)if(EC("FieldPath","string",e,t[e]),0===t[e].length)throw new qg(Vg.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.j_=new Kg(t)},WC=(Fs(QC,VC=BC),QC.documentId=function(){return new QC(Kg.L().F())},QC.prototype.isEqual=function(t){if(!(t instanceof QC))throw xC("isEqual","FieldPath",1,t);return this.j_.isEqual(t.j_)},QC),HC=new RegExp("[~\\*/\\[\\]]"),zC=function(){this.K_=this},GC=(Fs(KC,jC=zC),KC.prototype.z_=function(t){if(2!==t.H_)throw 1===t.H_?t.Y_(this.G_+"() can only appear at the top level of your update data"):t.Y_(this.G_+"() cannot be used with set() unless you pass {merge:true}");return t.qe.push(t.path),null},KC.prototype.isEqual=function(t){return t instanceof KC},KC);function KC(t){var e=this;return(e=jC.call(this)||this).G_=t,e}function QC(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return VC.call(this,t)||this}function YC(t){UC(),this.W_=t}function XC(t,e,n){return new Ik({H_:3,J_:e.settings.J_,methodName:t.G_,X_:n},e.s,e.serializer,e.ignoreUndefinedProperties)}var $C,JC,ZC,tk,ek,nk,rk=(Fs(Ek,nk=zC),Ek.prototype.z_=function(t){return new f_(t.path,new $b)},Ek.prototype.isEqual=function(t){return t instanceof Ek},Ek),ik=(Fs(wk,ek=zC),wk.prototype.z_=function(t){var e=XC(this,t,!0),n=this.Z_.map((function(t){return Rk(t,e)})),r=new Jb(n);return new f_(t.path,r)},wk.prototype.isEqual=function(t){return this===t},wk),ok=(Fs(_k,tk=zC),_k.prototype.z_=function(t){var e=XC(this,t,!0),n=this.Z_.map((function(t){return Rk(t,e)})),r=new r_(n);return new f_(t.path,r)},_k.prototype.isEqual=function(t){return this===t},_k),sk=(Fs(bk,ZC=zC),bk.prototype.z_=function(t){var e=new a_(t.serializer,Sb(t.serializer,this.tf));return new f_(t.path,e)},bk.prototype.isEqual=function(t){return this===t},bk),ak=(Fs(mk,JC=zC),mk.delete=function(){return mC("FieldValue.delete",arguments),new uk(new GC("FieldValue.delete"))},mk.serverTimestamp=function(){return mC("FieldValue.serverTimestamp",arguments),new uk(new rk("FieldValue.serverTimestamp"))},mk.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return _C("FieldValue.arrayUnion",arguments,1),new uk(new ik("FieldValue.arrayUnion",t))},mk.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return _C("FieldValue.arrayRemove",arguments,1),new uk(new ok("FieldValue.arrayRemove",t))},mk.increment=function(t){return EC("FieldValue.increment","number",1,t),bC("FieldValue.increment",arguments,1),new uk(new sk("FieldValue.increment",t))},mk),uk=(Fs(gk,$C=ak),gk.prototype.z_=function(t){return this.K_.z_(t)},gk.prototype.isEqual=function(t){return t instanceof gk&&this.K_.isEqual(t.K_)},gk),ck=(Object.defineProperty(yk.prototype,"latitude",{get:function(){return this.ef},enumerable:!1,configurable:!0}),Object.defineProperty(yk.prototype,"longitude",{get:function(){return this.nf},enumerable:!1,configurable:!0}),yk.prototype.isEqual=function(t){return this.ef===t.ef&&this.nf===t.nf},yk.prototype.toJSON=function(){return{latitude:this.ef,longitude:this.nf}},yk.prototype.T=function(t){return kg(this.ef,t.ef)||kg(this.nf,t.nf)},yk),lk=/^__.*__$/,hk=function(t,e,n){this.sf=t,this.if=e,this.rf=n},fk=(vk.prototype.hf=function(t,e){var n=[];return null!==this.qe?n.push(new C_(t,this.data,this.qe,e)):n.push(new S_(t,this.data,e)),0<this.fieldTransforms.length&&n.push(new P_(t,this.fieldTransforms)),n},vk),pk=(dk.prototype.hf=function(t,e){var n=[new C_(t,this.data,this.qe,e)];return 0<this.fieldTransforms.length&&n.push(new P_(t,this.fieldTransforms)),n},dk);function dk(t,e,n){this.data=t,this.qe=e,this.fieldTransforms=n}function vk(t,e,n){this.data=t,this.qe=e,this.fieldTransforms=n}function yk(t,e){if(bC("GeoPoint",arguments,2),EC("GeoPoint","number",1,t),EC("GeoPoint","number",2,e),!isFinite(t)||t<-90||90<t)throw new qg(Vg.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new qg(Vg.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.ef=t,this.nf=e}function gk(t){var e=this;return(e=$C.call(this)||this).K_=t,e.G_=t.G_,e}function mk(){return JC.call(this)||this}function bk(t,e){var n=this;return(n=ZC.call(this)||this).G_=t,n.tf=e,n}function _k(t,e){var n=this;return(n=tk.call(this)||this).G_=t,n.Z_=e,n}function wk(t,e){var n=this;return(n=ek.call(this)||this).G_=t,n.Z_=e,n}function Ek(t){var e=this;return(e=nk.call(this)||this).G_=t,e}function Tk(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw Tg()}}var Ik=(Object.defineProperty(kk.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(kk.prototype,"H_",{get:function(){return this.settings.H_},enumerable:!1,configurable:!0}),kk.prototype.cf=function(t){return new kk(Object.assign(Object.assign({},this.settings),t),this.s,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.qe)},kk.prototype.uf=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.cf({path:n,X_:!1});return r.lf(t),r},kk.prototype._f=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.cf({path:n,X_:!1});return r.af(),r},kk.prototype.ff=function(t){return this.cf({path:void 0,X_:!0})},kk.prototype.Y_=function(t){return Uk(t,this.settings.methodName,this.settings.df||!1,this.path,this.settings.J_)},kk.prototype.contains=function(t){return void 0!==this.qe.find((function(e){return t.D(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.D(e.field)}))},kk.prototype.af=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.lf(this.path.get(t))},kk.prototype.lf=function(t){if(0===t.length)throw this.Y_("Document fields must not be empty");if(Tk(this.H_)&&lk.test(t))throw this.Y_('Document fields cannot begin and end with "__"')},kk),Sk=(Ck.prototype.wf=function(t,e,n,r){return void 0===r&&(r=!1),new Ik({H_:t,methodName:e,J_:n,path:Kg.$(),X_:!1,df:r},this.s,this.serializer,this.ignoreUndefinedProperties)},Ck);function Ck(t,e,n){this.s=t,this.ignoreUndefinedProperties=e,this.serializer=n||iC(t)}function kk(t,e,n,r,i,o){this.settings=t,this.s=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.af(),this.fieldTransforms=i||[],this.qe=o||[]}function Nk(t,e,n,r,i,o){void 0===o&&(o={});var s=t.wf(o.merge||o.mergeFields?2:0,e,n,i);Lk("Data must be an object, but it was:",s,r);var a,u,c=xk(r,s);if(o.merge)a=new h_(s.qe),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var p=f[h],d=void 0;if(p instanceof BC)d=p.j_;else{if("string"!=typeof p)throw Tg();d=Fk(e,p,n)}if(!s.contains(d))throw new qg(Vg.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");jk(l,d)||l.push(d)}a=new h_(l),u=s.fieldTransforms.filter((function(t){return a.Ke(t.field)}))}else a=null,u=s.fieldTransforms;return new fk(new U_(c),a,u)}function Ak(t,e,n,r){var i=t.wf(1,e,n);Lk("Data must be an object, but it was:",i,r);var o=[],s=new j_;Dg(r,(function(t,r){var a,u=Fk(e,t,n),c=i._f(u);r instanceof zC&&r.K_ instanceof GC?o.push(u):null!=(a=Rk(r,c))&&(o.push(u),s.set(u,a))}));var a=new h_(o);return new pk(s.ze(),a,i.fieldTransforms)}function Ok(t,e,n,r,i,o){var s=t.wf(1,e,n),a=[Mk(e,r,n)],u=[i];if(o.length%2!=0)throw new qg(Vg.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Mk(e,o[c])),u.push(o[c+1]);for(var l,h,f,p,d=[],v=new j_,y=a.length-1;0<=y;--y)jk(d,a[y])||(l=a[y],h=u[y],f=s._f(l),h instanceof zC&&h.K_ instanceof GC?d.push(l):null!=(p=Rk(h,f))&&(d.push(l),v.set(l,p)));var g=new h_(d);return new pk(v.ze(),g,s.fieldTransforms)}function Pk(t,e,n,r){return void 0===r&&(r=!1),Rk(n,t.wf(r?4:3,e))}function Rk(t,e){if(Dk(t))return Lk("Unsupported field value:",e,t),xk(t,e);if(t instanceof zC)return function(t,e){if(!Tk(e.H_))throw e.Y_(t.G_+"() can only be used with update() and set()");if(!e.path)throw e.Y_(t.G_+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.qe.push(e.path),t instanceof Array){if(e.settings.X_&&4!==e.H_)throw e.Y_("Nested arrays are not supported");return function(e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Rk(o[i],e.ff(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(e)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Sb(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Bg.fromDate(t);return{timestampValue:Cb(e.serializer,n)}}if(t instanceof Bg){var r=new Bg(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Cb(e.serializer,r)}}if(t instanceof ck)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof qC)return{bytesValue:kb(e.serializer,t)};if(t instanceof hk){var i=e.s,o=t.sf;if(!o.isEqual(i))throw e.Y_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:Ab(t.sf||e.s,t.if.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.Y_("Unsupported field value: "+OC(t))}(t,e)}function xk(t,e){var n={};return Lg(t)?e.path&&0<e.path.length&&e.qe.push(e.path):Dg(t,(function(t,r){var i=Rk(r,e.uf(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Dk(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Bg||t instanceof ck||t instanceof qC||t instanceof hk||t instanceof zC)}function Lk(t,e,n){if(!Dk(n)||!AC(n)){var r=OC(n);throw"an object"===r?e.Y_(t+" a custom object"):e.Y_(t+" "+r)}}function Mk(t,e,n){if(e instanceof BC)return e.j_;if("string"==typeof e)return Fk(t,e);throw Uk("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}function Fk(t,e,n){try{return function(e){if(0<=e.search(HC))throw new qg(Vg.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(WC.bind.apply(WC,Hs([void 0],e.split("."))))}catch(t){throw new qg(Vg.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).j_}catch(e){throw Uk(e instanceof Error?e.message:e.toString(),t,!1,void 0,n)}}function Uk(t,e,n,r,i){var o=r&&!r._(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new qg(Vg.INVALID_ARGUMENT,(a+=". ")+t+u)}function jk(t,e){return t.some((function(t){return t.isEqual(e)}))}var Vk=(zk.prototype.Af=function(t){return js(this,void 0,void 0,(function(){var e,n=this;return Vs(this,(function(r){switch(r.label){case 0:if(this.Rf(),0<this.mutations.length)throw new qg(Vg.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return js(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Vs(this,(function(u){switch(u.label){case 0:return r=Lb((n=t).serializer)+"/documents",i={documents:e.map((function(t){return Pb(n.serializer,t)}))},[4,n.Sa("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e,r,i=(e=n.serializer,"found"in(r=t)?function(t,e){Ig(!!e.found),e.found.name,e.found.updateTime;var n=Rb(t,e.found.name),r=Nb(e.found.updateTime),i=new U_({mapValue:{fields:e.found.fields}});return new Q_(n,r,i,{})}(e,r):"missing"in r?function(t,e){Ig(!!e.missing),Ig(!!e.readTime);var n=Rb(t,e.missing),r=Nb(e.readTime);return new Y_(n,r)}(e,r):Tg());s.set(i.key.toString(),i)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());Ig(!!e),a.push(e)})),a)]}}))}))}(this.qa,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof Y_||t instanceof Q_?n.Pf(t):Tg()})),e)]}}))}))},zk.prototype.set=function(t,e){this.write(e.hf(t,this.Qe(t))),this.If.add(t.toString())},zk.prototype.update=function(t,e){try{this.write(e.hf(t,this.gf(t)))}catch(t){this.mf=t}this.If.add(t.toString())},zk.prototype.delete=function(t){this.write([new M_(t,this.Qe(t))]),this.If.add(t.toString())},zk.prototype.commit=function(){return js(this,void 0,void 0,(function(){var t,e=this;return Vs(this,(function(n){switch(n.label){case 0:if(this.Rf(),this.mf)throw this.mf;return t=this.Tf,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Qg.B(n);e.mutations.push(new F_(r,e.Qe(r)))})),[4,function(t,e){return js(this,void 0,void 0,(function(){var n,r,i;return Vs(this,(function(o){switch(o.label){case 0:return r=Lb((n=t).serializer)+"/documents",i={writes:e.map((function(t){return Ub(n.serializer,t)}))},[4,n.va("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.qa,this.mutations)];case 1:return n.sent(),this.Ef=!0,[2]}}))}))},zk.prototype.Pf=function(t){var e;if(t instanceof Q_)e=t.version;else{if(!(t instanceof Y_))throw Tg();e=Wg.min()}var n=this.Tf.get(t.key.toString());if(n){if(!e.isEqual(n))throw new qg(Vg.ABORTED,"Document version changed between two reads.")}else this.Tf.set(t.key.toString(),e)},zk.prototype.Qe=function(t){var e=this.Tf.get(t.toString());return!this.If.has(t.toString())&&e?v_.updateTime(e):v_.We()},zk.prototype.gf=function(t){var e=this.Tf.get(t.toString());if(this.If.has(t.toString())||!e)return v_.exists(!0);if(e.isEqual(Wg.min()))throw new qg(Vg.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return v_.updateTime(e)},zk.prototype.write=function(t){this.Rf(),this.mutations=this.mutations.concat(t)},zk.prototype.Rf=function(){},zk),qk=(Hk.prototype.run=function(){this.yf()},Hk.prototype.yf=function(){var t=this;this.Ti.bs((function(){return js(t,void 0,void 0,(function(){var t,e,n=this;return Vs(this,(function(r){return t=new Vk(this.qa),(e=this.pf(t))&&e.then((function(e){n.ei.ai((function(){return t.commit().then((function(){n.ii.resolve(e)})).catch((function(t){n.bf(t)}))}))})).catch((function(t){n.bf(t)})),[2]}))}))}))},Hk.prototype.pf=function(t){try{var e=this.updateFunction(t);return!rm(e)&&e.catch&&e.then?e:(this.ii.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.ii.reject(t),null}},Hk.prototype.bf=function(t){var e=this;0<this.Vf&&this.vf(t)?(--this.Vf,this.ei.ai((function(){return e.yf(),Promise.resolve()}))):this.ii.reject(t)},Hk.prototype.vf=function(t){if("FirebaseError"!==t.name)return!1;var e=t.code;return"aborted"===e||"failed-precondition"===e||!mm(e)},Hk),Bk=(Wk.prototype.start=function(t,e,n,r){var i=this;this.Df(),this.w_=t;var o=new cE,s=!1;return this.credentials.Bh((function(t){return s?void i.ei.gi((function(){return i.Bu.vc(t)})):(s=!0,bg("FirestoreClient","Initializing. user=",t.uid),i.Cf(e,n,r,t,o).then(i.Sf.resolve,i.Sf.reject))})),this.ei.ai((function(){return i.Sf.promise})),o.promise},Wk.prototype.enableNetwork=function(){var t=this;return this.Df(),this.ei.enqueue((function(){return t.persistence.Uo(!0),t.Bu.enableNetwork()}))},Wk.prototype.Cf=function(t,e,n,r,i){return js(this,void 0,void 0,(function(){var o,s,a=this;return Vs(this,(function(u){switch(u.label){case 0:return u.trys.push([0,3,,4]),o={ei:this.ei,w_:this.w_,clientId:this.clientId,credentials:this.credentials,N_:r,Qu:100,k_:n},[4,t.initialize(o)];case 1:return u.sent(),[4,e.initialize(t,o)];case 2:return u.sent(),this.persistence=t.persistence,this.Uu=t.Uu,this.La=t.La,this.S_=t.S_,this.qa=e.qa,this.Bu=e.Bu,this.fc=e.fc,this.Nf=e.q_,this.persistence.Bo((function(){return js(a,void 0,void 0,(function(){return Vs(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))})),i.resolve(),[3,4];case 3:if(s=u.sent(),i.reject(s),!this.Ff(s))throw s;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),this.Cf(new uC,new lC,{F_:!1},r,i))];case 4:return[2]}}))}))},Wk.prototype.Ff=function(t){return"FirebaseError"===t.name?t.code===Vg.FAILED_PRECONDITION||t.code===Vg.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},Wk.prototype.Df=function(){if(this.ei.mi)throw new qg(Vg.FAILED_PRECONDITION,"The client has already been terminated.")},Wk.prototype.disableNetwork=function(){var t=this;return this.Df(),this.ei.enqueue((function(){return t.persistence.Uo(!1),t.Bu.disableNetwork()}))},Wk.prototype.terminate=function(){var t=this;this.ei.Pi();var e=new cE;return this.ei.Ii((function(){return js(t,void 0,void 0,(function(){var t,n;return Vs(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),this.S_&&this.S_.stop(),[4,this.Bu.th()];case 1:return r.sent(),[4,this.Uu.th()];case 2:return r.sent(),[4,this.persistence.th()];case 3:return r.sent(),this.credentials.Uh(),e.resolve(),[3,5];case 4:return t=r.sent(),n=xE(t,"Failed to shutdown persistence"),e.reject(n),[3,5];case 5:return[2]}}))}))})),e.promise},Wk.prototype.waitForPendingWrites=function(){var t=this;this.Df();var e=new cE;return this.ei.ai((function(){return t.fc._l(e)})),e.promise},Wk.prototype.listen=function(t,e,n){var r=this;this.Df();var i=new yC(n),o=new NS(t,i,e);return this.ei.ai((function(){return r.Nf.listen(o)})),function(){i.Q_(),r.ei.ai((function(){return r.Nf.lc(o)}))}},Wk.prototype.kf=function(t){return js(this,void 0,void 0,(function(){return Vs(this,(function(e){switch(e.label){case 0:return this.Df(),[4,this.Sf.promise];case 1:return[2,(e.sent(),function(t,e,n){return js(this,void 0,void 0,(function(){var r,i=this;return Vs(this,(function(o){switch(o.label){case 0:return r=new cE,[4,t.enqueue((function(){return js(i,void 0,void 0,(function(){var t,i,o;return Vs(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,(a=n,(u=e).persistence.runTransaction("read document","readonly",(function(t){return u.Rh.Hn(t,a)})))];case 1:return(t=s.sent())instanceof Q_?r.resolve(t):t instanceof Y_?r.resolve(null):r.reject(new qg(Vg.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return i=s.sent(),o=xE(i,"Failed to get document '"+n+" from cache"),r.reject(o),[3,3];case 3:return[2]}var a,u}))}))}))];case 1:return[2,(o.sent(),r.promise)]}}))}))}(this.ei,this.La,t))]}}))}))},Wk.prototype.$f=function(t,e){return js(this,void 0,void 0,(function(){return Vs(this,(function(n){switch(n.label){case 0:return this.Df(),[4,this.Sf.promise];case 1:return[2,(n.sent(),r=this.ei,i=this.Nf,o=t,s=e,a=new cE,u=Gk(r,i,iw(o.path),{includeMetadataChanges:!0,$l:!0},{next:function(t){u();var e=t.docs.has(o);!e&&t.fromCache?a.reject(new qg(Vg.UNAVAILABLE,"Failed to get document because the client is offline.")):e&&t.fromCache&&s&&"server"===s.source?a.reject(new qg(Vg.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):a.resolve(t)},error:function(t){return a.reject(t)}}),a.promise)]}var r,i,o,s,a,u}))}))},Wk.prototype.xf=function(t){return js(this,void 0,void 0,(function(){return Vs(this,(function(e){switch(e.label){case 0:return this.Df(),[4,this.Sf.promise];case 1:return[2,(e.sent(),function(t,e,n){return js(this,void 0,void 0,(function(){var r,i=this;return Vs(this,(function(o){switch(o.label){case 0:return r=new cE,[4,t.enqueue((function(){return js(i,void 0,void 0,(function(){var t,i,o,s,a,u;return Vs(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,yI(e,n,!0)];case 1:return t=c.sent(),i=new cS(n,t.gh),o=i.Su(t.documents),s=i.Un(o,!1),r.resolve(s.snapshot),[3,3];case 2:return a=c.sent(),u=xE(a,"Failed to execute query '"+n+" against cache"),r.reject(u),[3,3];case 3:return[2]}}))}))}))];case 1:return[2,(o.sent(),r.promise)]}}))}))}(this.ei,this.La,t))]}}))}))},Wk.prototype.Of=function(t,e){return js(this,void 0,void 0,(function(){return Vs(this,(function(n){switch(n.label){case 0:return this.Df(),[4,this.Sf.promise];case 1:return[2,(n.sent(),r=this.ei,i=this.Nf,o=t,s=e,a=new cE,u=Gk(r,i,o,{includeMetadataChanges:!0,$l:!0},{next:function(t){u(),t.fromCache&&s&&"server"===s.source?a.reject(new qg(Vg.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):a.resolve(t)},error:function(t){return a.reject(t)}}),a.promise)]}var r,i,o,s,a,u}))}))},Wk.prototype.write=function(t){var e=this;this.Df();var n=new cE;return this.ei.ai((function(){return e.fc.write(t,n)})),n.promise},Wk.prototype.s=function(){return this.w_.s},Wk.prototype.bl=function(t){var e=this;this.Df();var n=new yC(t);return this.ei.ai((function(){return js(e,void 0,void 0,(function(){return Vs(this,(function(t){return[2,this.Nf.bl(n)]}))}))})),function(){n.Q_(),e.ei.ai((function(){return js(e,void 0,void 0,(function(){return Vs(this,(function(t){return[2,this.Nf.vl(n)]}))}))}))}},Object.defineProperty(Wk.prototype,"Mf",{get:function(){return this.ei.mi},enumerable:!1,configurable:!0}),Wk.prototype.transaction=function(t){var e=this;this.Df();var n=new cE;return this.ei.ai((function(){return new qk(e.ei,e.qa,t,n).run(),Promise.resolve()})),n.promise},Wk);function Wk(t,e){this.credentials=t,this.ei=e,this.clientId=Sg.t(),this.Sf=new cE}function Hk(t,e,n,r){this.ei=t,this.qa=e,this.updateFunction=n,this.ii=r,this.Vf=5,this.Ti=new hE(this.ei,"transaction_retry")}function zk(t){this.qa=t,this.Tf=new Map,this.mutations=[],this.Ef=!1,this.mf=null,this.If=new Set}function Gk(t,e,n,r,i){var o=new yC(i),s=new NS(n,o,r);return t.ai((function(){return e.listen(s)})),function(){o.Q_(),t.ai((function(){return e.lc(s)}))}}var Kk,Qk,Yk=(pN.prototype.Bf=function(t){switch(ob(t)){case 0:return null;case 1:return t.booleanValue;case 2:return fb(t.integerValue||t.doubleValue);case 3:return this.Uf(t.timestampValue);case 4:return this.Qf(t);case 5:return t.stringValue;case 6:return new qC(pb(t.bytesValue));case 7:return this.Wf(t.referenceValue);case 8:return this.jf(t.geoPointValue);case 9:return this.Kf(t.arrayValue);case 10:return this.Gf(t.mapValue);default:throw Tg()}},pN.prototype.Gf=function(t){var e=this,n={};return Dg(t.fields||{},(function(t,r){n[t]=e.Bf(r)})),n},pN.prototype.jf=function(t){return new ck(fb(t.latitude),fb(t.longitude))},pN.prototype.Kf=function(t){var e=this;return(t.values||[]).map((function(t){return e.Bf(t)}))},pN.prototype.Qf=function(t){switch(this.Lf){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return nb(n)?t(n):n}(t);return null==e?null:this.Bf(e);case"estimate":return this.Uf(rb(t));default:return null}},pN.prototype.Uf=function(t){var e=hb(t),n=new Bg(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},pN.prototype.Wf=function(t){var e=zg.k(t);Ig(Gb(e));var n=new Pg(e.get(1),e.get(3)),r=new Qg(e.V(5));return n.isEqual(this.s)||_g("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.s.projectId+"/"+this.s.database+") instead."),this.qf(r)},pN),Xk=FE.ji,$k=(fN.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},fN),Jk=(Object.defineProperty(hN.prototype,"rd",{get:function(){return this.od||(this.od=new Sk(this.sf,this.sd.ignoreUndefinedProperties)),this.od},enumerable:!1,configurable:!0}),hN.prototype.settings=function(t){bC("Firestore.settings",arguments,1),EC("Firestore.settings","object",1,t);var e=new $k(t);if(this.Zf&&!this.sd.isEqual(e))throw new qg(Vg.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this.sd=e).credentials&&(this.nd=function(t){if(!t)return new AI;switch(t.type){case"gapi":var e=t.hd;return Ig(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new RI(e,t.zh||"0");case"provider":return t.hd;default:throw new qg(Vg.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},hN.prototype.enableNetwork=function(){return this.Xf(),this.Zf.enableNetwork()},hN.prototype.disableNetwork=function(){return this.Xf(),this.Zf.disableNetwork()},hN.prototype.enablePersistence=function(t){var e,n;if(this.Zf)throw new qg(Vg.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1,i=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&_g("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n,i=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,r&&i))throw new qg(Vg.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.ad(this.zf,this.Hf,{F_:!0,cacheSizeBytes:this.sd.cacheSizeBytes,synchronizeTabs:r,Vo:i})},hN.prototype.clearPersistence=function(){return js(this,void 0,void 0,(function(){var t,e=this;return Vs(this,(function(n){if(void 0!==this.Zf&&!this.Zf.Mf)throw new qg(Vg.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return t=new cE,[2,(this.Jf.Ii((function(){return js(e,void 0,void 0,(function(){var e;return Vs(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.zf.clearPersistence(this.sf,this.ed)];case 1:return n.sent(),t.resolve(),[3,3];case 2:return e=n.sent(),t.reject(e),[3,3];case 3:return[2]}}))}))})),t.promise)]}))}))},hN.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(hN.prototype,"ud",{get:function(){return this.Xf(),this.Zf.Mf},enumerable:!1,configurable:!0}),hN.prototype.waitForPendingWrites=function(){return this.Xf(),this.Zf.waitForPendingWrites()},hN.prototype.onSnapshotsInSync=function(t){if(this.Xf(),vC(t))return this.Zf.bl(t);EC("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.Zf.bl(e)},hN.prototype.Xf=function(){return this.Zf||this.ad(new uC,new lC,{F_:!1}),this.Zf},hN.prototype.ld=function(){return new Og(this.sf,this.ed,this.sd.host,this.sd.ssl,this.sd.forceLongPolling)},hN.prototype.ad=function(t,e,n){var r=this.ld();return this.Zf=new Bk(this.nd,this.Jf),this.Zf.start(r,t,e,n)},hN.td=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new qg(Vg.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;if(!n||"string"!=typeof n)throw new qg(Vg.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Pg(n)},Object.defineProperty(hN.prototype,"app",{get:function(){if(!this.Yf)throw new qg(Vg.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Yf},enumerable:!1,configurable:!0}),hN.prototype.collection=function(t){return bC("Firestore.collection",arguments,1),EC("Firestore.collection","non-empty string",1,t),this.Xf(),new wN(zg.k(t),this,null)},hN.prototype.doc=function(t){return bC("Firestore.doc",arguments,1),EC("Firestore.doc","non-empty string",1,t),this.Xf(),eN._d(zg.k(t),this,null)},hN.prototype.collectionGroup=function(t){if(bC("Firestore.collectionGroup",arguments,1),EC("Firestore.collectionGroup","non-empty string",1,t),0<=t.indexOf("/"))throw new qg(Vg.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.Xf(),new bN((e=t,new ew(zg.$(),e)),this,null);var e},hN.prototype.runTransaction=function(t){var e=this;return bC("Firestore.runTransaction",arguments,1),EC("Firestore.runTransaction","function",1,t),this.Xf().transaction((function(n){return t(new Zk(e,n))}))},hN.prototype.batch=function(){return this.Xf(),new tN(this)},Object.defineProperty(hN,"logLevel",{get:function(){switch(mg()){case Wa.DEBUG:return"debug";case Wa.ERROR:return"error";case Wa.SILENT:return"silent";case Wa.WARN:return"warn";case Wa.INFO:return"info";case Wa.VERBOSE:return"verbose";default:return"error"}},enumerable:!1,configurable:!0}),hN.setLogLevel=function(t){bC("Firestore.setLogLevel",arguments,1),kC("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),gg.setLogLevel(t)},hN.prototype.fd=function(){return this.sd.timestampsInSnapshots},hN),Zk=(lN.prototype.get=function(t){var e=this;bC("Transaction.get",arguments,1);var n=NN("Transaction.get",t,this.dd);return this.wd.Af([n.if]).then((function(t){if(!t||1!==t.length)return Tg();var r=t[0];if(r instanceof Y_)return new rN(e.dd,n.if,null,!1,!1,n.rf);if(r instanceof Q_)return new rN(e.dd,n.if,r,!1,!1,n.rf);throw Tg()}))},lN.prototype.set=function(t,e,n){wC("Transaction.set",arguments,2,3);var r=NN("Transaction.set",t,this.dd);n=SN("Transaction.set",n);var i=AN(r.rf,e,n),o=Nk(this.dd.rd,"Transaction.set",r.if,i,null!==r.rf,n);return this.wd.set(r.if,o),this},lN.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return i="string"==typeof e||e instanceof WC?(_C("Transaction.update",arguments,3),r=NN("Transaction.update",t,this.dd),Ok(this.dd.rd,"Transaction.update",r.if,e,n,o)):(bC("Transaction.update",arguments,2),r=NN("Transaction.update",t,this.dd),Ak(this.dd.rd,"Transaction.update",r.if,e)),this.wd.update(r.if,i),this},lN.prototype.delete=function(t){bC("Transaction.delete",arguments,1);var e=NN("Transaction.delete",t,this.dd);return this.wd.delete(e.if),this},lN),tN=(cN.prototype.set=function(t,e,n){wC("WriteBatch.set",arguments,2,3),this.md();var r=NN("WriteBatch.set",t,this.dd);n=SN("WriteBatch.set",n);var i=AN(r.rf,e,n),o=Nk(this.dd.rd,"WriteBatch.set",r.if,i,null!==r.rf,n);return this.Td=this.Td.concat(o.hf(r.if,v_.We())),this},cN.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.md(),i="string"==typeof e||e instanceof WC?(_C("WriteBatch.update",arguments,3),r=NN("WriteBatch.update",t,this.dd),Ok(this.dd.rd,"WriteBatch.update",r.if,e,n,o)):(bC("WriteBatch.update",arguments,2),r=NN("WriteBatch.update",t,this.dd),Ak(this.dd.rd,"WriteBatch.update",r.if,e)),this.Td=this.Td.concat(i.hf(r.if,v_.exists(!0))),this},cN.prototype.delete=function(t){bC("WriteBatch.delete",arguments,1),this.md();var e=NN("WriteBatch.delete",t,this.dd);return this.Td=this.Td.concat(new M_(e.if,v_.We())),this},cN.prototype.commit=function(){return this.md(),this.Ed=!0,0<this.Td.length?this.dd.Xf().write(this.Td):Promise.resolve()},cN.prototype.md=function(){if(this.Ed)throw new qg(Vg.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},cN),eN=(Fs(uN,Qk=hk),uN._d=function(t,e,n){if(t.length%2!=0)throw new qg(Vg.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.F()+" has "+t.length);return new uN(new Qg(t),e,n)},Object.defineProperty(uN.prototype,"id",{get:function(){return this.if.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(uN.prototype,"parent",{get:function(){return new wN(this.if.path.p(),this.firestore,this.rf)},enumerable:!1,configurable:!0}),Object.defineProperty(uN.prototype,"path",{get:function(){return this.if.path.F()},enumerable:!1,configurable:!0}),uN.prototype.collection=function(t){if(bC("DocumentReference.collection",arguments,1),EC("DocumentReference.collection","non-empty string",1,t),!t)throw new qg(Vg.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=zg.k(t);return new wN(this.if.path.child(e),this.firestore,null)},uN.prototype.isEqual=function(t){if(!(t instanceof uN))throw xC("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.if.isEqual(t.if)&&this.rf===t.rf},uN.prototype.set=function(t,e){wC("DocumentReference.set",arguments,1,2),e=SN("DocumentReference.set",e);var n=AN(this.rf,t,e),r=Nk(this.firestore.rd,"DocumentReference.set",this.if,n,null!==this.rf,e);return this.Zf.write(r.hf(this.if,v_.We()))},uN.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof t||t instanceof WC?(_C("DocumentReference.update",arguments,2),Ok(this.firestore.rd,"DocumentReference.update",this.if,t,e,r)):(bC("DocumentReference.update",arguments,1),Ak(this.firestore.rd,"DocumentReference.update",this.if,t)),this.Zf.write(n.hf(this.if,v_.exists(!0)))},uN.prototype.delete=function(){return bC("DocumentReference.delete",arguments,0),this.Zf.write([new M_(this.if,v_.We())])},uN.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];wC("DocumentReference.onSnapshot",arguments,1,4);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||vC(i[a])||(RC("DocumentReference.onSnapshot",s=i[a],["includeMetadataChanges"]),SC("DocumentReference.onSnapshot","boolean","includeMetadataChanges",s.includeMetadataChanges),a++);var u,c={includeMetadataChanges:s.includeMetadataChanges};vC(i[a])?(u=i[a],i[a]=null===(t=u.next)||void 0===t?void 0:t.bind(u),i[a+1]=null===(e=u.error)||void 0===e?void 0:e.bind(u),i[a+2]=null===(n=u.complete)||void 0===n?void 0:n.bind(u)):(EC("DocumentReference.onSnapshot","function",a,i[a]),TC("DocumentReference.onSnapshot","function",a+1,i[a+1]),TC("DocumentReference.onSnapshot","function",a+2,i[a+2]));var l={next:function(t){i[a]&&i[a](r.Id(t))},error:i[a+1],complete:i[a+2]};return this.Zf.listen(iw(this.if.path),c,l)},uN.prototype.get=function(t){var e=this;wC("DocumentReference.get",arguments,0,1),kN("DocumentReference.get",t);var n=this.firestore.Xf();return t&&"cache"===t.source?n.kf(this.if).then((function(t){return new rN(e.firestore,e.if,t,!0,t instanceof Q_&&t.Ge,e.rf)})):n.$f(this.if,t).then((function(t){return e.Id(t)}))},uN.prototype.withConverter=function(t){return new uN(this.if,this.firestore,t)},uN.prototype.Id=function(t){var e=t.docs.get(this.if);return new rN(this.firestore,this.if,e,t.fromCache,t.hasPendingWrites,this.rf)},uN),nN=(aN.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},aN),rN=(sN.prototype.data=function(t){var e=this;if(wC("DocumentSnapshot.data",arguments,0,1),t=CN("DocumentSnapshot.data",t),this.Ad){if(this.rf){var n=new iN(this.dd,this.if,this.Ad,this.Rd,this.Pd,null);return this.rf.fromFirestore(n,t)}return new Yk(this.dd.sf,this.dd.fd(),t.serverTimestamps||"none",(function(t){return new eN(t,e.dd,null)})).Bf(this.Ad.tn())}},sN.prototype.get=function(t,e){var n=this;if(wC("DocumentSnapshot.get",arguments,1,2),e=CN("DocumentSnapshot.get",e),this.Ad){var r=this.Ad.data().field(Mk("DocumentSnapshot.get",t,this.if));if(null!==r)return new Yk(this.dd.sf,this.dd.fd(),e.serverTimestamps||"none",(function(t){return new eN(t,n.dd,n.rf)})).Bf(r)}},Object.defineProperty(sN.prototype,"id",{get:function(){return this.if.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(sN.prototype,"ref",{get:function(){return new eN(this.if,this.dd,this.rf)},enumerable:!1,configurable:!0}),Object.defineProperty(sN.prototype,"exists",{get:function(){return null!==this.Ad},enumerable:!1,configurable:!0}),Object.defineProperty(sN.prototype,"metadata",{get:function(){return new nN(this.Pd,this.Rd)},enumerable:!1,configurable:!0}),sN.prototype.isEqual=function(t){if(!(t instanceof sN))throw xC("isEqual","DocumentSnapshot",1,t);return this.dd===t.dd&&this.Rd===t.Rd&&this.if.isEqual(t.if)&&(null===this.Ad?null===t.Ad:this.Ad.isEqual(t.Ad))&&this.rf===t.rf},sN),iN=(Fs(oN,Kk=rN),oN.prototype.data=function(t){return Kk.prototype.data.call(this,t)},oN);function oN(){return null!==Kk&&Kk.apply(this,arguments)||this}function sN(t,e,n,r,i,o){this.dd=t,this.if=e,this.Ad=n,this.Rd=r,this.Pd=i,this.rf=o}function aN(t,e){this.hasPendingWrites=t,this.fromCache=e}function uN(t,e,n){var r=this;return(r=Qk.call(this,e.sf,t,n)||this).if=t,r.firestore=e,r.rf=n,r.Zf=r.firestore.Xf(),r}function cN(t){this.dd=t,this.Td=[],this.Ed=!1}function lN(t,e){this.dd=t,this.wd=e}function hN(t,e,n,r){var i=this;if(void 0===n&&(n=new uC),void 0===r&&(r=new lC),this.zf=n,this.Hf=r,this.Yf=null,this.Jf=new OE,this.INTERNAL={delete:function(){return js(i,void 0,void 0,(function(){return Vs(this,(function(t){switch(t.label){case 0:return this.Xf(),[4,this.Zf.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof t.options){var o=t;this.Yf=o,this.sf=hN.td(o),this.ed=o.name,this.nd=new OI(e)}else{var s=t;if(!s.projectId)throw new qg(Vg.INVALID_ARGUMENT,"Must provide projectId");this.sf=new Pg(s.projectId,s.database),this.ed="[DEFAULT]",this.nd=new AI}this.sd=new $k({})}function fN(t){var e,n,r,i;if(void 0===t.host){if(void 0!==t.ssl)throw new qg(Vg.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else IC("settings","non-empty string","host",t.host),this.host=t.host,SC("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(RC("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","ignoreUndefinedProperties"]),SC("settings","object","credentials",t.credentials),this.credentials=t.credentials,SC("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),SC("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?_g("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&_g("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(r=t.ignoreUndefinedProperties)&&void 0!==r&&r,SC("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=FE.Gi;else{if(t.cacheSizeBytes!==Xk&&t.cacheSizeBytes<FE.Ki)throw new qg(Vg.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+FE.Ki);this.cacheSizeBytes=t.cacheSizeBytes}SC("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=null!==(i=t.experimentalForceLongPolling)&&void 0!==i&&i}function pN(t,e,n,r){this.s=t,this.timestampsInSnapshots=e,this.Lf=n,this.qf=r}function dN(t,e,n){if("string"==typeof n){if(""===n)throw new qg(Vg.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!ow(e)&&-1!==n.indexOf("/"))throw new qg(Vg.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(zg.k(n));if(!Qg.j(r))throw new qg(Vg.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return db(t,new Qg(r))}if(n instanceof hk)return db(t,n.if);throw new qg(Vg.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+OC(n)+".")}function vN(t,e){if(!Array.isArray(t)||0===t.length)throw new qg(Vg.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new qg(Vg.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if("in"===e||"array-contains-any"===e){if(0<=t.indexOf(null))throw new qg(Vg.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(0<t.filter((function(t){return Number.isNaN(t)})).length)throw new qg(Vg.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")}}function yN(t,e,n){if(!n.isEqual(e))throw new qg(Vg.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function gN(t){if(t.cn()&&0===t.en.length)throw new qg(Vg.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var mN,bN=(IN.prototype.where=function(t,e,n){var r;bC("Query.where",arguments,3),PC("Query.where",3,n),r="not-in"===e||"!="===e?e:kC("Query.where",["<","<=","==",">=",">","array-contains","in","array-contains-any"],2,e);var i,o,s=Mk("Query.where",t),a=function(t,e,n,r,i,o,s){var a;if(i.M()){if("array-contains"===o||"array-contains-any"===o)throw new qg(Vg.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){vN(s,o);for(var u=[],c=0,l=s;c<l.length;c++){var h=l[c];u.push(dN(r,t,h))}a={arrayValue:{values:u}}}else a=dN(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||vN(s,o),a=Pk(n,"Query.where",s,"in"===o||"not-in"===o);var f=gw.create(i,o,a);return function(t,e){if(e._n()){var n=t.ln();if(null!==n&&!n.isEqual(e.field))throw new qg(Vg.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=t.un();null!==r&&yN(0,e.field,r)}var i=t.fn(function(){switch(e.op){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}());if(null!==i)throw i===e.op?new qg(Vg.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new qg(Vg.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(this.gd,0,this.firestore.rd,this.firestore.sf,s,r,n);return new IN((o=(i=this.gd).filters.concat([a]),new ew(i.path,i.collectionGroup,i.en.slice(),o,i.limit,i.nn,i.startAt,i.endAt)),this.firestore,this.rf)},IN.prototype.orderBy=function(t,e){var n;if(wC("Query.orderBy",arguments,1,2),TC("Query.orderBy","non-empty string",2,e),void 0===e||"asc"===e)n="asc";else{if("desc"!==e)throw new qg(Vg.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+e+"', expected 'asc' or 'desc'.");n="desc"}var r,i,o=Mk("Query.orderBy",t),s=function(t,e,n){if(null!==t.startAt)throw new qg(Vg.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new qg(Vg.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r,i,o,s=new zw(e,n);return i=s,null!==(r=t).un()||null!==(o=r.ln())&&yN(0,o,i.field),s}(this.gd,o,n);return new IN((i=(r=this.gd).en.concat([s]),new ew(r.path,r.collectionGroup,i,r.filters.slice(),r.limit,r.nn,r.startAt,r.endAt)),this.firestore,this.rf)},IN.prototype.limit=function(t){return bC("Query.limit",arguments,1),EC("Query.limit","number",1,t),DC("Query.limit",1,t),new IN(uw(this.gd,t,"F"),this.firestore,this.rf)},IN.prototype.limitToLast=function(t){return bC("Query.limitToLast",arguments,1),EC("Query.limitToLast","number",1,t),DC("Query.limitToLast",1,t),new IN(uw(this.gd,t,"L"),this.firestore,this.rf)},IN.prototype.startAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];_C("Query.startAt",arguments,1);var r=this.Vd("Query.startAt",t,e,!0);return new IN(cw(this.gd,r),this.firestore,this.rf)},IN.prototype.startAfter=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];_C("Query.startAfter",arguments,1);var r=this.Vd("Query.startAfter",t,e,!1);return new IN(cw(this.gd,r),this.firestore,this.rf)},IN.prototype.endBefore=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];_C("Query.endBefore",arguments,1);var r=this.Vd("Query.endBefore",t,e,!0);return new IN(lw(this.gd,r),this.firestore,this.rf)},IN.prototype.endAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];_C("Query.endAt",arguments,1);var r=this.Vd("Query.endAt",t,e,!1);return new IN(lw(this.gd,r),this.firestore,this.rf)},IN.prototype.isEqual=function(t){if(!(t instanceof IN))throw xC("isEqual","Query",1,t);return this.firestore===t.firestore&&hw(this.gd,t.gd)&&this.rf===t.rf},IN.prototype.withConverter=function(t){return new IN(this.gd,this.firestore,t)},IN.prototype.Vd=function(t,e,n,r){if(PC(t,1,e),e instanceof rN)return bC(t,Hs([e],n),1),function(e,n,r,i){if(!r)throw new qg(Vg.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");for(var o=[],s=0,a=sw(e);s<a.length;s++){var u=a[s];if(u.field.M())o.push(db(n,r.key));else{var c=r.field(u.field);if(nb(c))throw new qg(Vg.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.F();throw new qg(Vg.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Fw(o,i)}(this.gd,this.firestore.sf,e.Ad,r);var i=[e].concat(n);return function(t,e,n,r,i,o){var s=t.en;if(i.length>s.length)throw new qg(Vg.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.M()){if("string"!=typeof c)throw new qg(Vg.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!ow(t)&&-1!==c.indexOf("/"))throw new qg(Vg.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(zg.k(c));if(!Qg.j(l))throw new qg(Vg.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Qg(l);a.push(db(e,h))}else{var f=Pk(n,r,c);a.push(f)}}return new Fw(a,o)}(this.gd,this.firestore.sf,this.firestore.rd,t,i,r)},IN.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];wC("Query.onSnapshot",arguments,1,4);var s,a={},u=0;"object"!=typeof i[u]||vC(i[u])||(RC("Query.onSnapshot",a=i[u],["includeMetadataChanges"]),SC("Query.onSnapshot","boolean","includeMetadataChanges",a.includeMetadataChanges),u++),vC(i[u])?(s=i[u],i[u]=null===(t=s.next)||void 0===t?void 0:t.bind(s),i[u+1]=null===(e=s.error)||void 0===e?void 0:e.bind(s),i[u+2]=null===(n=s.complete)||void 0===n?void 0:n.bind(s)):(EC("Query.onSnapshot","function",u,i[u]),TC("Query.onSnapshot","function",u+1,i[u+1]),TC("Query.onSnapshot","function",u+2,i[u+2]));var c={next:function(t){i[u]&&i[u](new _N(r.firestore,r.gd,t,r.rf))},error:i[u+1],complete:i[u+2]};return gN(this.gd),this.firestore.Xf().listen(this.gd,a,c)},IN.prototype.get=function(t){var e=this;wC("Query.get",arguments,0,1),kN("Query.get",t),gN(this.gd);var n=this.firestore.Xf();return(t&&"cache"===t.source?n.xf(this.gd):n.Of(this.gd,t)).then((function(t){return new _N(e.firestore,e.gd,t,e.rf)}))},IN),_N=(Object.defineProperty(TN.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(TN.prototype,"empty",{get:function(){return this.pd.docs._()},enumerable:!1,configurable:!0}),Object.defineProperty(TN.prototype,"size",{get:function(){return this.pd.docs.size},enumerable:!1,configurable:!0}),TN.prototype.forEach=function(t,e){var n=this;wC("QuerySnapshot.forEach",arguments,1,2),EC("QuerySnapshot.forEach","function",1,t),this.pd.docs.forEach((function(r){t.call(e,n.Sd(r,n.metadata.fromCache,n.pd.qt.has(r.key)))}))},Object.defineProperty(TN.prototype,"query",{get:function(){return new bN(this.yd,this.dd,this.rf)},enumerable:!1,configurable:!0}),TN.prototype.docChanges=function(t){t&&(RC("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),SC("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.pd.Ut)throw new qg(Vg.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.bd&&this.vd===e||(this.bd=function(t,e,n){if(t.Lt._()){var r=0;return t.docChanges.map((function(e){var i=n(e.doc,t.fromCache,t.qt.has(e.doc.key));return e.doc,{type:"added",doc:i,oldIndex:-1,newIndex:r++}}))}var i=t.Lt;return t.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var r=n(e.doc,t.fromCache,t.qt.has(e.doc.key)),o=-1,s=-1;return 0!==e.type&&(o=i.indexOf(e.doc.key),i=i.delete(e.doc.key)),1!==e.type&&(s=(i=i.add(e.doc)).indexOf(e.doc.key)),{type:function(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Tg()}}(e.type),doc:r,oldIndex:o,newIndex:s}}))}(this.pd,e,this.Sd.bind(this)),this.vd=e),this.bd},TN.prototype.isEqual=function(t){if(!(t instanceof TN))throw xC("isEqual","QuerySnapshot",1,t);return this.dd===t.dd&&hw(this.yd,t.yd)&&this.pd.isEqual(t.pd)&&this.rf===t.rf},TN.prototype.Sd=function(t,e,n){return new iN(this.dd,t.key,t,e,n,this.rf)},TN),wN=(Fs(EN,mN=bN),Object.defineProperty(EN.prototype,"id",{get:function(){return this.gd.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(EN.prototype,"parent",{get:function(){var t=this.gd.path.p();return t._()?null:new eN(new Qg(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(EN.prototype,"path",{get:function(){return this.gd.path.F()},enumerable:!1,configurable:!0}),EN.prototype.doc=function(t){wC("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=Sg.t()),EC("CollectionReference.doc","non-empty string",1,t);var e=zg.k(t);return eN._d(this.gd.path.child(e),this.firestore,this.rf)},EN.prototype.add=function(t){bC("CollectionReference.add",arguments,1),EC("CollectionReference.add","object",1,this.rf?this.rf.toFirestore(t):t);var e=this.doc();return e.set(t).then((function(){return e}))},EN.prototype.withConverter=function(t){return new EN(this.Dd,this.firestore,t)},EN);function EN(t,e,n){var r=this;if(((r=mN.call(this,iw(t),e,n)||this).Dd=t).length%2!=1)throw new qg(Vg.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.F()+" has "+t.length);return r}function TN(t,e,n,r){this.dd=t,this.yd=e,this.pd=n,this.rf=r,this.bd=null,this.vd=null,this.metadata=new nN(n.hasPendingWrites,n.fromCache)}function IN(t,e,n){this.gd=t,this.firestore=e,this.rf=n}function SN(t,e){if(void 0===e)return{merge:!1};if(RC(t,e,["merge","mergeFields"]),SC(t,"boolean","merge",e.merge),void 0!==(n=e.mergeFields)&&function(t,e,n,r){if(!(n instanceof Array))throw new qg(Vg.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+OC(n));for(var i=0;i<n.length;++i)if(!r(n[i]))throw new qg(Vg.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+i+" was: "+OC(n[i]))}(t,"mergeFields",n,(function(t){return"string"==typeof t||t instanceof WC})),void 0!==e.mergeFields&&void 0!==e.merge)throw new qg(Vg.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');var n;return e}function CN(t,e){return void 0===e?{}:(RC(t,e,["serverTimestamps"]),CC(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function kN(t,e){TC(t,"object",1,e),e&&(RC(t,e,["source"]),CC(t,0,"source",e.source,["default","server","cache"]))}function NN(t,e,n){if(e instanceof hk){if(e.firestore!==n)throw new qg(Vg.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw xC(t,"DocumentReference",1,e)}function AN(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var ON,PN={Firestore:Jk,GeoPoint:ck,Timestamp:Bg,Blob:qC,Transaction:Zk,WriteBatch:tN,DocumentReference:eN,DocumentSnapshot:rN,Query:bN,QueryDocumentSnapshot:iN,QuerySnapshot:_N,CollectionReference:wN,FieldPath:WC,FieldValue:ak,setLogLevel:Jk.setLogLevel,CACHE_SIZE_UNLIMITED:Xk};(ON=vu).INTERNAL.registerComponent(new Da("firestore",(function(t){return e=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),r=new lC,i=new cC(r),new Jk(e,n,i,r);var e,n,r,i}),"PUBLIC").setServiceProps(Object.assign({},PN))),ON.registerVersion("@firebase/firestore","1.16.5");var RN,xN={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},DN=(Fs(LN,RN=Error),LN);function LN(t,e,n){var r=RN.call(this,e)||this;return Object.setPrototypeOf(r,LN.prototype),r.code=t,r.details=n,r}var MN=(FN.prototype.getAuthToken=function(){return js(this,void 0,void 0,(function(){var t;return Vs(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},FN.prototype.getInstanceIdToken=function(){return js(this,void 0,void 0,(function(){return Vs(this,(function(t){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]}))}))},FN.prototype.getContext=function(){return js(this,void 0,void 0,(function(){var t,e;return Vs(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},FN);function FN(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}function UN(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var jN=(VN.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"==typeof t||"object"==typeof t)return UN(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},VN.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"==typeof t||"object"==typeof t?UN(t,(function(t){return e.decode(t)})):t},VN);function VN(){}var qN,BN=(Object.defineProperty(WN.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),WN.prototype._url=function(t){var e=this.app_.options.projectId,n=this.region_;return null===this.emulatorOrigin?"https://"+n+"-"+e+".cloudfunctions.net/"+t:this.emulatorOrigin+"/"+e+"/"+n+"/"+t},WN.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},WN.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},WN.prototype.postJSON=function(t,e,n){return js(this,void 0,void 0,(function(){var r,i;return Vs(this,(function(o){switch(o.label){case 0:n.append("Content-Type","application/json"),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:i=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return i=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}}))}))},WN.prototype.call=function(t,e,n){return js(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,h,f,p;return Vs(this,(function(d){switch(d.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o=new Headers,[4,this.contextProvider.getContext()];case 1:return(s=d.sent()).authToken&&o.append("Authorization","Bearer "+s.authToken),s.instanceIdToken&&o.append("Firebase-Instance-ID-Token",s.instanceIdToken),a=n.timeout||7e4,v=a,g=new Promise((function(t,e){y=setTimeout((function(){e(new DN("deadline-exceeded","deadline-exceeded"))}),v)})),c=(u={timer:y,promise:g}).timer,l=u.promise,[4,Promise.race([HN(c,this.postJSON(r,i,o)),l,HN(c,this.cancelAllRequests)])];case 2:if(!(h=d.sent()))throw new DN("cancelled","Firebase Functions instance was deleted.");if(f=function(t,e,n){var r=function(t){if(200<=t&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!xN[a])return new DN("internal","internal");r=xN[a],i=a}var u=s.message;"string"==typeof u&&(i=u),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new DN(r,i,o)}(h.status,h.json,this.serializer))throw f;if(!h.json)throw new DN("internal","Response is not valid JSON object.");if(void 0===(p=h.json.data)&&(p=h.json.result),void 0===p)throw new DN("internal","Response is missing data field.");return[2,{data:this.serializer.decode(p)}]}var v,y,g}))}))},WN);function WN(t,e,n,r){var i=this;void 0===r&&(r="us-central1"),this.app_=t,this.region_=r,this.serializer=new jN,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return i.deleteService()}},this.contextProvider=new MN(e,n),this.cancelAllRequests=new Promise((function(t){i.deleteService=function(){return t()}}))}function HN(t,e){return js(this,void 0,void 0,(function(){var n;return Vs(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}}))}))}function zN(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function GN(t,e,n){var r,i=new Promise((function(i,o){zN(r=t[e].apply(t,n)).then(i,o)}));return i.request=r,i}function KN(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function QN(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return GN(this[e],r,arguments)})}))}function YN(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function XN(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return t=this[e],(n=GN(t,r,arguments)).then((function(t){if(t)return new JN(t,n.request)}));var t,n})}))}function $N(t){this._index=t}function JN(t,e){this._cursor=t,this._request=e}function ZN(t){this._store=t}function tA(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function eA(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new tA(n)}function nA(t){this._db=t}function rA(t,e,n){var r=GN(indexedDB,"open",[t,e]),i=r.request;return i&&(i.onupgradeneeded=function(t){n&&n(new eA(i.result,t.oldVersion,i.transaction))}),r.then((function(t){return new nA(t)}))}function iA(t){return GN(indexedDB,"deleteDatabase",[t])}qN={Functions:BN},vu.INTERNAL.registerComponent(new Da("functions",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("messaging");return new BN(n,r,i,e)}),"PUBLIC").setServiceProps(qN).setMultipleInstances(!0)),vu.registerVersion("@firebase/functions","0.4.50"),KN($N,"_index",["name","keyPath","multiEntry","unique"]),QN($N,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),XN($N,"_index",IDBIndex,["openCursor","openKeyCursor"]),KN(JN,"_cursor",["direction","key","primaryKey","value"]),QN(JN,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(JN.prototype[t]=function(){var e=this,n=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,n),zN(e._request).then((function(t){if(t)return new JN(t,e._request)}))}))})})),ZN.prototype.createIndex=function(){return new $N(this._store.createIndex.apply(this._store,arguments))},ZN.prototype.index=function(){return new $N(this._store.index.apply(this._store,arguments))},KN(ZN,"_store",["name","keyPath","indexNames","autoIncrement"]),QN(ZN,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),XN(ZN,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),YN(ZN,"_store",IDBObjectStore,["deleteIndex"]),tA.prototype.objectStore=function(){return new ZN(this._tx.objectStore.apply(this._tx,arguments))},KN(tA,"_tx",["objectStoreNames","mode"]),YN(tA,"_tx",IDBTransaction,["abort"]),eA.prototype.createObjectStore=function(){return new ZN(this._db.createObjectStore.apply(this._db,arguments))},KN(eA,"_db",["name","version","objectStoreNames"]),YN(eA,"_db",IDBDatabase,["deleteObjectStore","close"]),nA.prototype.transaction=function(){return new tA(this._db.transaction.apply(this._db,arguments))},KN(nA,"_db",["name","version","objectStoreNames"]),YN(nA,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[ZN,$N].forEach((function(e){t in e.prototype&&(e.prototype[t.replace("open","iterate")]=function(){var e,n=(e=arguments,Array.prototype.slice.call(e)),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[$N,ZN].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})}));var oA,sA="w:0.4.16",aA=((oA={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',oA["not-registered"]="Firebase Installation is not registered.",oA["installation-not-found"]="Firebase Installation not found.",oA["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',oA["app-offline"]="Could not process request. Application offline.",oA["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",oA),uA=new pa("installations","Installations",aA);function cA(t){return t instanceof ha&&t.code.includes("request-failed")}function lA(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function hA(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function fA(t,e){return js(this,void 0,void 0,(function(){var n,r;return Vs(this,(function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),r=n.error,[2,uA.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function pA(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function dA(t,e){var n=e.refreshToken,r=pA(t);return r.append("Authorization","FIS_v2 "+n),r}function vA(t){return js(this,void 0,void 0,(function(){var e;return Vs(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return 500<=(e=n.sent()).status&&e.status<600?[2,t()]:[2,e]}}))}))}function yA(t){return new Promise((function(e){setTimeout(e,t)}))}var gA=/^[cdef][\w-]{21}$/;function mA(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return btoa(String.fromCharCode.apply(String,Ws(t))).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22);return gA.test(e)?e:""}catch(t){return""}}function bA(t){return t.appName+"!"+t.appId}var _A=new Map;function wA(t,e){var n=bA(t);EA(n,e),function(t,e){var n=IA();n&&n.postMessage({key:t,fid:e}),SA()}(n,e)}function EA(t,e){var n,r,i=_A.get(t);if(i)try{for(var o=qs(i),s=o.next();!s.done;s=o.next())(0,s.value)(e)}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var TA=null;function IA(){return!TA&&"BroadcastChannel"in self&&((TA=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){EA(t.data.key,t.data.fid)}),TA}function SA(){0===_A.size&&TA&&(TA.close(),TA=null)}var CA,kA,NA="firebase-installations-store",AA=null;function OA(){return AA=AA||rA("firebase-installations-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(NA)}}))}function PA(t,e){return js(this,void 0,void 0,(function(){var n,r,i,o,s;return Vs(this,(function(a){switch(a.label){case 0:return n=bA(t),[4,OA()];case 1:return r=a.sent(),i=r.transaction(NA,"readwrite"),[4,(o=i.objectStore(NA)).get(n)];case 2:return s=a.sent(),[4,o.put(e,n)];case 3:return a.sent(),[4,i.complete];case 4:return a.sent(),s&&s.fid===e.fid||wA(t,e.fid),[2,e]}}))}))}function RA(t){return js(this,void 0,void 0,(function(){var e,n,r;return Vs(this,(function(i){switch(i.label){case 0:return e=bA(t),[4,OA()];case 1:return n=i.sent(),[4,(r=n.transaction(NA,"readwrite")).objectStore(NA).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function xA(t,e){return js(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Vs(this,(function(u){switch(u.label){case 0:return n=bA(t),[4,OA()];case 1:return r=u.sent(),i=r.transaction(NA,"readwrite"),[4,(o=i.objectStore(NA)).get(n)];case 2:return s=u.sent(),void 0!==(a=e(s))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(a,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!a||s&&s.fid===a.fid||wA(t,a.fid),[2,a]}}))}))}function DA(t){return js(this,void 0,void 0,(function(){var e,n,r;return Vs(this,(function(i){switch(i.label){case 0:return[4,xA(t,(function(n){var r=MA(n||{fid:mA(),registrationStatus:0}),i=function(t,e){if(0!==e.registrationStatus)return 1===e.registrationStatus?{installationEntry:e,registrationPromise:function(t){return js(this,void 0,void 0,(function(){var e,n,r,i;return Vs(this,(function(o){switch(o.label){case 0:return[4,LA(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,yA(100)];case 3:return o.sent(),[4,LA(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,DA(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}}))}))}(t)}:{installationEntry:e};if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(uA.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function(t,e){return js(this,void 0,void 0,(function(){var n,r;return Vs(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,function(t,e){var n=e.fid;return js(this,void 0,void 0,(function(){var e,r,i,o,s,a;return Vs(this,(function(u){switch(u.label){case 0:return e=lA(t),r=pA(t),i={fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:sA},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,vA((function(){return fetch(e,o)}))];case 1:return(s=u.sent()).ok?[4,s.json()]:[3,3];case 2:return[2,{fid:(a=u.sent()).fid||n,registrationStatus:2,refreshToken:a.refreshToken,authToken:hA(a.authToken)}];case 3:return[4,fA("Create Installation",s)];case 4:throw u.sent()}}))}))}(t,e)];case 1:return n=i.sent(),[2,PA(t,n)];case 2:return cA(r=i.sent())&&409===r.serverCode?[4,RA(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,PA(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(t,n);return{installationEntry:n,registrationPromise:r}}(t,r);return e=i.registrationPromise,i.installationEntry}))];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function LA(t){return xA(t,(function(t){if(!t)throw uA.create("installation-not-found");return MA(t)}))}function MA(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function FA(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return js(this,void 0,void 0,(function(){var t,i,o,s,a,u;return Vs(this,(function(c){switch(c.label){case 0:return l=n,h=e.fid,t=lA(l)+"/"+h+"/authTokens:generate",i=dA(n,e),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),s={installation:{sdkVersion:sA}},a={method:"POST",headers:i,body:JSON.stringify(s)},[4,vA((function(){return fetch(t,a)}))];case 1:return(u=c.sent()).ok?[4,u.json()]:[3,3];case 2:return[2,hA(c.sent())];case 3:return[4,fA("Generate Auth Token",u)];case 4:throw c.sent()}var l,h}))}))}function UA(t,e){return void 0===e&&(e=!1),js(this,void 0,void 0,(function(){var n,r,i;return Vs(this,(function(o){switch(o.label){case 0:return[4,xA(t.appConfig,(function(r){if(!VA(r))throw uA.create("not-registered");var i,o,s,a=r.authToken;if(e||2!==(s=a).requestStatus||function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(s)){if(1===a.requestStatus)return n=function(t,e){return js(this,void 0,void 0,(function(){var n,r;return Vs(this,(function(i){switch(i.label){case 0:return[4,jA(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,yA(100)];case 3:return i.sent(),[4,jA(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,UA(t,e)]:[2,r]}}))}))}(t,e),r;if(!navigator.onLine)throw uA.create("app-offline");var u=(i=r,o={requestStatus:1,requestTime:Date.now()},Us(Us({},i),{authToken:o}));return n=function(t,e){return js(this,void 0,void 0,(function(){var n,r,i;return Vs(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,FA(t,e)];case 1:return n=o.sent(),i=Us(Us({},e),{authToken:n}),[4,PA(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!cA(r=o.sent())||401!==r.serverCode&&404!==r.serverCode?[3,5]:[4,RA(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=Us(Us({},e),{authToken:{requestStatus:0}}),[4,PA(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(t,u),u}return r}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function jA(t){return xA(t,(function(t){if(!VA(t))throw uA.create("not-registered");var e;return 1===(e=t.authToken).requestStatus&&e.requestTime+1e4<Date.now()?Us(Us({},t),{authToken:{requestStatus:0}}):t}))}function VA(t){return void 0!==t&&2===t.registrationStatus}function qA(t,e){return js(this,void 0,void 0,(function(){var n,r,i,o;return Vs(this,(function(s){switch(s.label){case 0:return a=t,u=e.fid,n=lA(a)+"/"+u,r=dA(t,e),i={method:"DELETE",headers:r},[4,vA((function(){return fetch(n,i)}))];case 1:return(o=s.sent()).ok?[3,3]:[4,fA("Delete Installation",o)];case 2:throw s.sent();case 3:return[2]}var a,u}))}))}function BA(t){return uA.create("missing-app-config-values",{valueName:t})}(CA=vu).INTERNAL.registerComponent(new Da("installations",(function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw BA("App Configuration");if(!t.name)throw BA("App Name");try{for(var r=qs(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw BA(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(t){return js(this,void 0,void 0,(function(){var e,n,r;return Vs(this,(function(i){switch(i.label){case 0:return[4,DA(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):UA(t).catch(console.error),[2,n.fid]}}))}))}(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),js(this,void 0,void 0,(function(){return Vs(this,(function(n){switch(n.label){case 0:return[4,function(t){return js(this,void 0,void 0,(function(){var e;return Vs(this,(function(n){switch(n.label){case 0:return[4,DA(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}(t.appConfig)];case 1:return n.sent(),[4,UA(t,e)];case 2:return[2,n.sent().token]}}))}))}(n,t)},delete:function(){return function(t){return js(this,void 0,void 0,(function(){var e,n;return Vs(this,(function(r){switch(r.label){case 0:return[4,xA(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw uA.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw uA.create("app-offline");case 3:return[4,qA(e,n)];case 4:return r.sent(),[4,RA(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)},onIdChange:function(t){return function(t,e){var n=t.appConfig;return function(t,e){IA();var n=bA(t),r=_A.get(n);r||(r=new Set,_A.set(n,r)),r.add(e)}(n,e),function(){var t,r,i;t=e,r=bA(n),(i=_A.get(r))&&(i.delete(t),0===i.size&&_A.delete(r),SA())}}(n,t)}}}),"PUBLIC")),CA.registerVersion("@firebase/installations","0.4.16");var WA,HA,zA=((kA={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',kA["only-available-in-window"]="This method is available in a Window context.",kA["only-available-in-sw"]="This method is available in a service worker context.",kA["permission-default"]="The notification permission was not granted and dismissed instead.",kA["permission-blocked"]="The notification permission was not granted and blocked instead.",kA["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",kA["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",kA["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$errorInfo}",kA["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",kA["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$errorInfo}",kA["token-update-failed"]="A problem occured while updating the user from FCM: {$errorInfo}",kA["token-update-no-token"]="FCM returned no token when updating the user to push.",kA["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",kA["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",kA["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",kA["invalid-vapid-key"]="The public VAPID key must be a string.",kA["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",kA),GA=new pa("messaging","Messaging",zA),KA="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",QA="FCM_MSG",YA="google.c.a.c_id";function XA(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,Ws(e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(HA=WA=WA||{}).PUSH_RECEIVED="push-received",HA.NOTIFICATION_CLICKED="notification-clicked";var $A="fcm_token_details_db",JA="fcm_token_object_Store";function ZA(t){return js(this,void 0,void 0,(function(){var e,n=this;return Vs(this,(function(r){switch(r.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!r.sent().map((function(t){return t.name})).includes($A))return[2,null];r.label=2;case 2:return e=null,[4,rA($A,5,(function(r){return js(n,void 0,void 0,(function(){var n,i,o,s;return Vs(this,(function(a){switch(a.label){case 0:return r.oldVersion<2?[2]:r.objectStoreNames.contains(JA)?[4,(n=r.transaction.objectStore(JA)).index("fcmSenderId").get(t)]:[2];case 1:return i=a.sent(),[4,n.clear()];case 2:if(a.sent(),!i)return[2];if(2===r.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];e={token:o.fcmToken,createTime:null!==(s=o.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:XA(o.vapidKey)}}}else(3===r.oldVersion||4===r.oldVersion)&&(e={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:XA(o.auth),p256dh:XA(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:XA(o.vapidKey)}});return[2]}}))}))}))];case 3:return r.sent().close(),[4,iA($A)];case 4:return r.sent(),[4,iA("fcm_vapid_details_db")];case 5:return r.sent(),[4,iA("undefined")];case 6:return r.sent(),[2,function(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&0<t.createTime&&"string"==typeof t.token&&0<t.token.length&&"string"==typeof e.auth&&0<e.auth.length&&"string"==typeof e.p256dh&&0<e.p256dh.length&&"string"==typeof e.endpoint&&0<e.endpoint.length&&"string"==typeof e.swScope&&0<e.swScope.length&&"string"==typeof e.vapidKey&&0<e.vapidKey.length}(e)?e:null]}}))}))}var tO="firebase-messaging-store",eO=null;function nO(){return eO=eO||rA("firebase-messaging-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(tO)}}))}function rO(t){return js(this,void 0,void 0,(function(){var e,n,r;return Vs(this,(function(i){switch(i.label){case 0:return e=oO(t),[4,nO()];case 1:return[4,i.sent().transaction(tO).objectStore(tO).get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,ZA(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,iO(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}}))}))}function iO(t,e){return js(this,void 0,void 0,(function(){var n,r,i;return Vs(this,(function(o){switch(o.label){case 0:return n=oO(t),[4,nO()];case 1:return r=o.sent(),[4,(i=r.transaction(tO,"readwrite")).objectStore(tO).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}}))}))}function oO(t){return t.appConfig.appId}function sO(t,e){return js(this,void 0,void 0,(function(){var n,r,i,o,s;return Vs(this,(function(a){switch(a.label){case 0:return[4,uO(t)];case 1:n=a.sent(),r={method:"DELETE",headers:n},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(aO(t.appConfig)+"/"+e,r)];case 3:return[4,a.sent().json()];case 4:if((i=a.sent()).error)throw o=i.error.message,GA.create("token-unsubscribe-failed",{errorInfo:o});return[3,6];case 5:throw s=a.sent(),GA.create("token-unsubscribe-failed",{errorInfo:s});case 6:return[2]}}))}))}function aO(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function uO(t){var e=t.appConfig,n=t.installations;return js(this,void 0,void 0,(function(){var t;return Vs(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function cO(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==KA&&(o.web.applicationPubKey=i),o}function lO(t,e,n){return js(this,void 0,void 0,(function(){var r,i,o,s;return Vs(this,(function(a){switch(a.label){case 0:if("granted"!==Notification.permission)throw GA.create("permission-blocked");return[4,function(t,e){return js(this,void 0,void 0,(function(){var n;return Vs(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}(e)})]}}))}))}(e,n)];case 1:return r=a.sent(),[4,rO(t)];case 2:return i=a.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:XA(r.getKey("auth")),p256dh:XA(r.getKey("p256dh"))},i?[3,3]:[2,fO(t,o)];case 3:if(u=i.subscriptionOptions,l=(c=o).vapidKey===u.vapidKey,h=c.endpoint===u.endpoint,f=c.auth===u.auth,p=c.p256dh===u.p256dh,l&&h&&f&&p)return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,sO(t,i.token)];case 5:return a.sent(),[3,7];case 6:return s=a.sent(),console.warn(s),[3,7];case 7:return[2,fO(t,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,function(t,e,n){return js(this,void 0,void 0,(function(){var r,i,o;return Vs(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,5]),[4,function(t,e){return js(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Vs(this,(function(u){switch(u.label){case 0:return[4,uO(t)];case 1:n=u.sent(),r=cO(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(aO(t.appConfig)+"/"+e.token,i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw s=u.sent(),GA.create("token-update-failed",{errorInfo:s});case 6:if(o.error)throw a=o.error.message,GA.create("token-update-failed",{errorInfo:a});if(!o.token)throw GA.create("token-update-no-token");return[2,o.token]}}))}))}(e,t)];case 1:return r=s.sent(),i=Us(Us({},t),{token:r,createTime:Date.now()}),[4,iO(e,i)];case 2:return s.sent(),[2,r];case 3:return o=s.sent(),[4,hO(e,n)];case 4:throw s.sent(),o;case 5:return[2]}}))}))}({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}var u,c,l,h,f,p}))}))}function hO(t,e){return js(this,void 0,void 0,(function(){var n,r;return Vs(this,(function(i){switch(i.label){case 0:return[4,rO(t)];case 1:return(n=i.sent())?[4,sO(t,n.token)]:[3,4];case 2:return i.sent(),[4,function(t){return js(this,void 0,void 0,(function(){var e,n,r;return Vs(this,(function(i){switch(i.label){case 0:return e=oO(t),[4,nO()];case 1:return n=i.sent(),[4,(r=n.transaction(tO,"readwrite")).objectStore(tO).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function fO(t,e){return js(this,void 0,void 0,(function(){var n,r;return Vs(this,(function(i){switch(i.label){case 0:return[4,function(t,e){return js(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Vs(this,(function(u){switch(u.label){case 0:return[4,uO(t)];case 1:n=u.sent(),r=cO(e),i={method:"POST",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(aO(t.appConfig),i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw s=u.sent(),GA.create("token-subscribe-failed",{errorInfo:s});case 6:if(o.error)throw a=o.error.message,GA.create("token-subscribe-failed",{errorInfo:a});if(!o.token)throw GA.create("token-subscribe-no-token");return[2,o.token]}}))}))}(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,iO(t,r)];case 2:return i.sent(),[2,r.token]}}))}))}function pO(t){return"object"==typeof t&&t&&YA in t}var dO=(Object.defineProperty(vO.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),vO.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw GA.create("invalid-bg-handler");this.bgMessageHandler=t},vO.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},vO.prototype.getToken=function(){var t,e;return js(this,void 0,void 0,(function(){var n;return Vs(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,rO(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:KA,r.label=2;case 2:return[2,lO(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},vO.prototype.deleteToken=function(){return hO(this.firebaseDependencies,self.registration)},vO.prototype.requestPermission=function(){throw GA.create("only-available-in-window")},vO.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw GA.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw GA.create("invalid-vapid-key");this.vapidKey=t},vO.prototype.useServiceWorker=function(){throw GA.create("only-available-in-window")},vO.prototype.onMessage=function(){throw GA.create("only-available-in-window")},vO.prototype.onTokenRefresh=function(){throw GA.create("only-available-in-window")},vO.prototype.onPush=function(t){return js(this,void 0,void 0,(function(){var e,n,r,i;return Vs(this,(function(o){switch(o.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(t){return null}}(t))?[4,yO()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return(n=o.sent()).some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))?[2,function(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=WA.PUSH_RECEIVED;try{for(var i=qs(t),o=i.next();!o.done;o=i.next())o.value.postMessage(e)}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(n,e)]:(r=!1,e.notification?[4,function(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}(((u=Us({},(s=e).notification)).data=((a={})[QA]=s,a),u))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed||this.bgMessageHandler&&(i=function(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}(e,t),e}(e),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[2]}var s,a,u}))}))},vO.prototype.onSubChange=function(t){var e,n;return js(this,void 0,void 0,(function(){var r;return Vs(this,(function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,hO(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,rO(this.firebaseDependencies)];case 3:return r=i.sent(),[4,hO(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,lO(this.firebaseDependencies,self.registration,null!==(n=null===(e=null==r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:KA)];case 5:return i.sent(),[2]}}))}))},vO.prototype.onNotificationClick=function(t){var e,n;return js(this,void 0,void 0,(function(){var r,i,o;return Vs(this,(function(s){switch(s.label){case 0:return!(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n[QA])||t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(i=function(t){var e,n,r;return(null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action)||(pO(t.data)?self.location.origin:null)}(r))?[4,function(t){return js(this,void 0,void 0,(function(){var e,n,r,i,o,s,a;return Vs(this,(function(u){switch(u.label){case 0:return e=new URL(t,self.location.href),[4,yO()];case 1:n=u.sent();try{for(r=qs(n),i=r.next();!i.done;i=r.next())if(o=i.value,new URL(o.url,self.location.href).host===e.host)return[2,o]}catch(u){s={error:u}}finally{try{i&&!i.done&&(a=r.return)&&a.call(r)}finally{if(s)throw s.error}}return[2,null]}}))}))}(i)]:[2]);case 1:return(o=s.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return o=s.sent(),[4,new Promise((function(t){setTimeout(t,3e3)}))];case 3:return s.sent(),[3,6];case 4:return[4,o.focus()];case 5:o=s.sent(),s.label=6;case 6:return o?(r.messageType=WA.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,o.postMessage(r)]):[2]}}))}))},vO);function vO(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}function yO(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}var gO=(Object.defineProperty(mO.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),mO.prototype.messageEventListener=function(t){return js(this,void 0,void 0,(function(){var e,n;return Vs(this,(function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===WA.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback((delete(i=Object.assign({},e)).messageType,delete i.isFirebaseMessaging,i)):this.onMessageCallback.next(Object.assign({},e))),pO(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}var i}))}))},mO.prototype.getVapidKey=function(){return this.vapidKey},mO.prototype.getSwReg=function(){return this.swRegistration},mO.prototype.getToken=function(t){return js(this,void 0,void 0,(function(){return Vs(this,(function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw GA.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,lO(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},mO.prototype.updateVapidKey=function(t){return js(this,void 0,void 0,(function(){return Vs(this,(function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=KA),[2]}))}))},mO.prototype.updateSwReg=function(t){return js(this,void 0,void 0,(function(){return Vs(this,(function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw GA.create("invalid-sw-registration");return this.swRegistration=t,[2]}}))}))},mO.prototype.registerDefaultSw=function(){return js(this,void 0,void 0,(function(){var t,e;return Vs(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw e=n.sent(),GA.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}}))}))},mO.prototype.deleteToken=function(){return js(this,void 0,void 0,(function(){return Vs(this,(function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,hO(this.firebaseDependencies,this.swRegistration)]}}))}))},mO.prototype.requestPermission=function(){return js(this,void 0,void 0,(function(){var t;return Vs(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw"denied"===t?GA.create("permission-blocked"):GA.create("permission-default")}}))}))},mO.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw GA.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw GA.create("invalid-vapid-key");this.vapidKey=t},mO.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw GA.create("invalid-sw-registration");if(this.swRegistration)throw GA.create("use-sw-after-get-token");this.swRegistration=t},mO.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},mO.prototype.setBackgroundMessageHandler=function(){throw GA.create("only-available-in-sw")},mO.prototype.onBackgroundMessage=function(){throw GA.create("only-available-in-sw")},mO.prototype.onTokenRefresh=function(){return function(){}},mO.prototype.logEvent=function(t,e){return js(this,void 0,void 0,(function(){var n;return Vs(this,(function(r){switch(r.label){case 0:return n=function(t){switch(t){case WA.NOTIFICATION_CLICKED:return"notification_open";case WA.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e[YA],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},mO);function mO(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}function bO(t){return GA.create("missing-app-config-values",{valueName:t})}var _O={isSupported:wO};function wO(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}vu.INTERNAL.registerComponent(new Da("messaging",(function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw bO("App Configuration Object");if(!t.name)throw bO("App Name");var r=t.options;try{for(var i=qs(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw bO(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!wO())throw GA.create("unsupported-browser");return new(self&&"ServiceWorkerGlobalScope"in self?dO:gO)(n)}),"PUBLIC").setServiceProps(_O));var EO="firebasestorage.googleapis.com",TO=(IO.prototype.codeProp=function(){return this.code},IO.prototype.codeEquals=function(t){return WO(t)===this.codeProp()},IO.prototype.serverResponseProp=function(){return this.serverResponse_},IO.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(IO.prototype,"name",{get:function(){return this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(IO.prototype,"code",{get:function(){return this.code_},enumerable:!1,configurable:!0}),Object.defineProperty(IO.prototype,"message",{get:function(){return this.serverResponse_?this.message_+"\n"+this.serverResponse_:this.message_},enumerable:!1,configurable:!0}),Object.defineProperty(IO.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!1,configurable:!0}),IO);function IO(t,e){this.code_=WO(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}var SO="unknown",CO="object-not-found",kO="quota-exceeded",NO="unauthenticated",AO="unauthorized",OO="retry-limit-exceeded",PO="canceled",RO="invalid-url",xO="invalid-default-bucket",DO="cannot-slice-blob",LO="server-file-wrong-size",MO="no-download-url",FO="invalid-argument",UO="invalid-argument-count",jO="app-deleted",VO="invalid-root-operation",qO="invalid-format",BO="internal-error";function WO(t){return"storage/"+t}function HO(){return new TO(SO,"An unknown error occurred, please check the error payload for server response.")}function zO(){return new TO(PO,"User canceled the upload/download.")}function GO(){return new TO(DO,"Cannot slice blob for upload. Please retry the upload.")}function KO(t,e,n){return new TO(FO,"Invalid argument in `"+e+"` at index "+t+": "+n)}function QO(){return new TO(jO,"The Firebase app was deleted.")}function YO(t,e){return new TO(qO,"String does not match format '"+t+"': "+e)}function XO(t){throw new TO(BO,"Internal error: "+t)}var $O={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function JO(t){switch(t){case $O.RAW:case $O.BASE64:case $O.BASE64URL:case $O.DATA_URL:return;default:throw"Expected one of the event types: ["+$O.RAW+", "+$O.BASE64+", "+$O.BASE64URL+", "+$O.DATA_URL+"]."}}var ZO=function(t,e){this.data=t,this.contentType=e||null};function tP(t,e){switch(t){case $O.RAW:return new ZO(eP(e));case $O.BASE64:case $O.BASE64URL:return new ZO(nP(t,e));case $O.DATA_URL:return new ZO((n=new oP(e)).base64?nP($O.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw YO($O.DATA_URL,"Malformed data URL.")}return eP(e)}(n.rest),new oP(e).contentType)}var n;throw HO()}function eP(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function nP(t,e){switch(t){case $O.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw YO(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case $O.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw YO(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(e){throw YO(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var rP,iP,oP=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw YO($O.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(r=";base64",(n=i).length>=r.length&&n.substring(n.length-r.length)===r),this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)},sP={STATE_CHANGED:"state_changed"},aP="running",uP="pausing",cP="paused",lP="success",hP="canceling",fP="canceled",pP="error",dP={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function vP(t){switch(t){case aP:case uP:case hP:return dP.RUNNING;case cP:return dP.PAUSED;case lP:return dP.SUCCESS;case fP:return dP.CANCELED;case pP:default:return dP.ERROR}}function yP(t){return null!=t}function gP(t){return void 0!==t}function mP(t){return"function"==typeof t}function bP(t){return"object"==typeof t}function _P(t){return"string"==typeof t||t instanceof String}function wP(t){return"number"==typeof t||t instanceof Number}function EP(t){return TP()&&t instanceof Blob}function TP(){return"undefined"!=typeof Blob}(iP=rP=rP||{})[iP.NO_ERROR=0]="NO_ERROR",iP[iP.NETWORK_ERROR=1]="NETWORK_ERROR",iP[iP.ABORT=2]="ABORT";var IP=(SP.prototype.send=function(t,e,n,r){if(this.sent_)throw XO("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),yP(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return yP(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},SP.prototype.getErrorCode=function(){if(!this.sent_)throw XO("cannot .getErrorCode() before sending");return this.errorCode_},SP.prototype.getStatus=function(){if(!this.sent_)throw XO("cannot .getStatus() before sending");try{return this.xhr_.status}catch(i){return-1}},SP.prototype.getResponseText=function(){if(!this.sent_)throw XO("cannot .getResponseText() before sending");return this.xhr_.responseText},SP.prototype.abort=function(){this.xhr_.abort()},SP.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},SP.prototype.addUploadProgressListener=function(t){yP(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},SP.prototype.removeUploadProgressListener=function(t){yP(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},SP);function SP(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=rP.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=rP.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=rP.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}var CP=(kP.prototype.createXhrIo=function(){return new IP},kP);function kP(){}function NP(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(TP())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}var AP=(OP.prototype.size=function(){return this.size_},OP.prototype.type=function(){return this.type_},OP.prototype.slice=function(t,e){if(EP(this.data_)){var n=(i=t,o=e,(r=this.data_).webkitSlice?r.webkitSlice(i,o):r.mozSlice?r.mozSlice(i,o):r.slice?r.slice(i,o):null);return null===n?null:new OP(n)}var r,i,o;return new OP(new Uint8Array(this.data_.buffer,t,e-t),!0)},OP.getBlob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(TP()){var n=t.map((function(t){return t instanceof OP?t.data_:t}));return new OP(NP.apply(null,n))}var r=t.map((function(t){return _P(t)?tP($O.RAW,t).data:t.data_})),i=0;r.forEach((function(t){i+=t.byteLength}));var o=new Uint8Array(i),s=0;return r.forEach((function(t){for(var e=0;e<t.length;e++)o[s++]=t[e]})),new OP(o,!0)},OP.prototype.uploadData=function(){return this.data_},OP);function OP(t,e){var n=0,r="";EP(t)?(n=(this.data_=t).size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}var PP=(Object.defineProperty(RP.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(RP.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),RP.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},RP.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},RP.makeFromBucketSpec=function(t){var e;try{e=RP.makeFromUrl(t)}catch(e){return new RP(t,"")}if(""===e.path)return e;throw new TO(xO,"Invalid default bucket '"+t+"'.")},RP.makeFromUrl=function(t){var e=null,n="([A-Za-z0-9.\\-_]+)",r=new RegExp("^gs://"+n+"(/(.*))?$","i");function i(t){t.path_=decodeURIComponent(t.path)}for(var o=EO.replace(/[.]/g,"\\."),s=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+o+"/v[A-Za-z0-9_]+/b/"+n+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+n+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:i}],a=0;a<s.length;a++){var u=s[a],c=u.regex.exec(t);if(c){e=new RP(c[u.indices.bucket],c[u.indices.path]||""),u.postModify(e);break}}if(null==e)throw new TO(RO,"Invalid URL '"+t+"'.");return e},RP);function RP(t,e){this.bucket=t,this.path_=e}function xP(t){var e,n;try{e=JSON.parse(t)}catch(t){return null}return bP(n=e)&&!Array.isArray(n)?e:null}function DP(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function LP(t){return"https://"+EO+"/v0"+t}function MP(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}function FP(t,e){return e}var UP=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||FP},jP=null;function VP(t,e,n){var r=xP(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new PP(n,r);return e.makeStorageReference(i)}})}(r,t),r}(t,r,n)}function qP(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function BP(t){if(!bP(t)||!t)throw"Expected Metadata object.";for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if("customMetadata"===e){if(!bP(n))throw"Expected object for 'customMetadata' mapping."}else if(bP(r=n)&&null!==r)throw"Mapping for '"+e+"' cannot be an object."}var r}var WP="maxResults",HP="pageToken",zP="prefixes";function GP(t){if(!bP(t)||!t)throw"Expected ListOptions object.";for(var e in t)if(e===WP){if(!wP(n=t[WP])||!Number.isInteger(n)||t[WP]<=0)throw"Expected maxResults to be a positive number.";if(1e3<t[WP])throw"Expected maxResults to be less than or equal to 1000."}else{if(e!==HP)throw"Unknown option: "+e;if(t[HP]&&!_P(t[HP]))throw"Expected pageToken to be string."}var n}var KP=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function QP(t){if(!t)throw HO()}function YP(t,e){return function(n,r){var i=VP(t,r,e);return QP(null!==i),i}}function XP(t,e){return function(n,r){var i=function(t,e,n){var r=xP(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[zP])for(var i=0,o=n[zP];i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new PP(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var l=c[u];a=t.makeStorageReference(new PP(e,l.name)),r.items.push(a)}return r}(t,e,r)}(t,e,r);return QP(null!==i),i}}function $P(t,e){return function(n,r){var i=VP(t,r,e);return QP(null!==i),function(t,e){var n=xP(e);if(null===n)return null;if(!_P(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(e){var n=t.bucket,r=t.fullPath;return LP("/b/"+i(n)+"/o/"+i(r))+MP({alt:"media",token:e})}))[0]}(i,r)}}function JP(t){return function(e,n){var r,i,o=401===e.getStatus()?new TO(NO,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(i=t.bucket,new TO(kO,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(r=t.path,new TO(AO,"User does not have permission to access '"+r+"'.")):n;return o.setServerResponseProp(n.serverResponseProp()),o}}function ZP(t){var e=JP(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new TO(CO,"Object '"+i+"' does not exist.")),o.setServerResponseProp(r.serverResponseProp()),o}}function tR(t,e,n){var r=LP(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new KP(r,"GET",YP(t,n),i);return o.errorHandler=ZP(e),o}function eR(t,e,n){var r,i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=(r=e)&&r.type()||"application/octet-stream"),i}var nR=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function rR(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){QP(!1)}return QP(!!n&&-1!==(e||["active"]).indexOf(n)),n}var iR=function(t,e,n){var r;mP(t)||yP(e)||yP(n)?(this.next=t,this.error=e||null,this.complete=n||null):(r=t,this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null)},oR=function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o};function sR(t,e,n){for(var r,i,o,s,a,u,c=e.length,l=e.length,h=0;h<e.length;h++)if(e[h].optional){c=h;break}if(!(c<=n.length&&n.length<=l))throw r=c,i=l,o=t,s=n.length,u=r===i?1===(a=r)?"argument":"arguments":(a="between "+r+" and "+i,"arguments"),new TO(UO,"Invalid argument count in `"+o+"`: Expected "+a+" "+u+", received "+s+".");for(h=0;h<n.length;h++)try{e[h].validator(n[h])}catch(e){throw e instanceof Error?KO(h,t,e.message):KO(h,t,e)}}var aR=function(t,e){var n=this;this.validator=function(e){n.optional&&!gP(e)||t(e)},this.optional=!!e};function uR(t,e){function n(t){if(!_P(t))throw"Expected string."}var r,i,o=t?(r=n,i=t,function(t){r(t),i(t)}):n;return new aR(o,e)}function cR(){return new aR((function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||TP()&&t instanceof Blob))throw"Expected Blob or File."}))}function lR(t){return new aR(BP,t)}function hR(){return new aR((function(t){if(!(wP(t)&&0<=t))throw"Expected a number 0 or greater."}))}function fR(t,e){return new aR((function(e){if(!(null===e||yP(e)&&e instanceof Object))throw"Expected an Object.";null!=t&&t(e)}),e)}function pR(t){return new aR((function(t){if(null!==t&&!mP(t))throw"Expected a Function."}),t)}function dR(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var vR=(yR.prototype.makeProgressCallback_=function(){var t=this,e=this.transferred_;return function(n){return t.updateProgress_(e+n)}},yR.prototype.shouldDoResumable_=function(t){return 262144<t.size()},yR.prototype.start_=function(){this.state_===aP&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},yR.prototype.resolveToken_=function(t){var e=this;this.service_.getAuthToken().then((function(n){switch(e.state_){case aP:t(n);break;case hP:e.transition_(fP);break;case uP:e.transition_(cP)}}))},yR.prototype.createResumable_=function(){var t=this;this.resolveToken_((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=eR(e,r,i),a={name:s.fullPath},u=LP(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=qP(s,n),h=t.maxUploadRetryTime,f=new KP(u,"POST",(function(t){var e;rR(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){QP(!1)}return QP(_P(e)),e}),h);return f.urlParams=a,f.headers=c,f.body=l,f.errorHandler=JP(e),f}(t.service_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.service_.makeRequest(n,e);(t.request_=r).getPromise().then((function(e){t.request_=null,t.uploadUrl_=e,t.needToFetchStatus_=!1,t.completeTransitions_()}),t.errorHandler_)}))},yR.prototype.fetchStatus_=function(){var t=this,e=this.uploadUrl_;this.resolveToken_((function(n){var r=function(t,e,n,r){var i=t.maxUploadRetryTime,o=new KP(n,"POST",(function(t){var e=rR(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){QP(!1)}n||QP(!1);var i=Number(n);return QP(!isNaN(i)),new nR(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=JP(e),o}(t.service_,t.location_,e,t.blob_),i=t.service_.makeRequest(r,n);(t.request_=i).getPromise().then((function(e){t.request_=null,t.updateProgress_(e.current),t.needToFetchStatus_=!1,e.finalized&&(t.needToFetchMetadata_=!0),t.completeTransitions_()}),t.errorHandler_)}))},yR.prototype.continueUpload_=function(){var t=this,e=262144*this.chunkMultiplier_,n=new nR(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_((function(i){var o;try{o=function(t,e,n,r,i,o,s,a){var u=new nR(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new TO(LO,"Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;0<i&&(l=Math.min(l,i));var h=u.current,f=h+l,p={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(h,f);if(null===d)throw GO();var v=e.maxUploadRetryTime,y=new KP(n,"POST",(function(t,n){var i=rR(t,["active","final"]),s=u.current+l,a=r.size(),c="final"===i?YP(e,o)(t,n):null;return new nR(s,a,"final"===i,c)}),v);return y.headers=p,y.body=d.uploadData(),y.progressCallback=a||null,y.errorHandler=JP(t),y}(t.location_,t.service_,r,t.blob_,e,t.mappings_,n,t.makeProgressCallback_())}catch(i){return t.error_=i,void t.transition_(pP)}var s=t.service_.makeRequest(o,i);(t.request_=s).getPromise().then((function(e){t.increaseMultiplier_(),t.request_=null,t.updateProgress_(e.current),e.finalized?(t.metadata_=e.metadata,t.transition_(lP)):t.completeTransitions_()}),t.errorHandler_)}))},yR.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},yR.prototype.fetchMetadata_=function(){var t=this;this.resolveToken_((function(e){var n=tR(t.service_,t.location_,t.mappings_),r=t.service_.makeRequest(n,e);(t.request_=r).getPromise().then((function(e){t.request_=null,t.metadata_=e,t.transition_(lP)}),t.metadataErrorHandler_)}))},yR.prototype.oneShotUpload_=function(){var t=this;this.resolveToken_((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=eR(e,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+qP(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+a+"--",h=AP.getBlob(c,r,l);if(null===h)throw GO();var f={name:u.fullPath},p=LP(o),d=t.maxUploadRetryTime,v=new KP(p,"POST",YP(t,n),d);return v.urlParams=f,v.headers=s,v.body=h.uploadData(),v.errorHandler=JP(e),v}(t.service_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.service_.makeRequest(n,e);(t.request_=r).getPromise().then((function(e){t.request_=null,t.metadata_=e,t.updateProgress_(t.blob_.size()),t.transition_(lP)}),t.errorHandler_)}))},yR.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},yR.prototype.transition_=function(t){if(this.state_!==t)switch(t){case hP:case uP:this.state_=t,null!==this.request_&&this.request_.cancel();break;case aP:var e=this.state_===cP;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case cP:this.state_=t,this.notifyObservers_();break;case fP:this.error_=zO(),this.state_=t,this.notifyObservers_();break;case pP:case lP:this.state_=t,this.notifyObservers_()}},yR.prototype.completeTransitions_=function(){switch(this.state_){case uP:this.transition_(cP);break;case hP:this.transition_(fP);break;case aP:this.start_()}},Object.defineProperty(yR.prototype,"snapshot",{get:function(){var t=vP(this.state_);return new oR(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!1,configurable:!0}),yR.prototype.on=function(t,e,n,r){var i="Expected a function or an Object with one of `next`, `error`, `complete` properties.",o=pR(!0).validator,s=fR(null,!0).validator;function a(t){try{return void o(t)}catch(t){}try{if(s(t),!(gP(t.next)||gP(t.error)||gP(t.complete)))throw"";return}catch(t){throw i}}sR("on",[uR((function(){if(t!==sP.STATE_CHANGED)throw"Expected one of the event types: ["+sP.STATE_CHANGED+"]."})),fR(a,!0),pR(!0),pR(!0)],arguments);var u=this;function c(t){return function(e,n,i){null!==t&&sR("on",t,arguments);var o=new iR(e,n,r);return u.addObserver_(o),function(){u.removeObserver_(o)}}}var l=[fR((function(t){if(null===t)throw i;a(t)})),pR(!0),pR(!0)];return gP(e)||gP(n)||gP(r)?c(null)(e,n,r):c(l)},yR.prototype.then=function(t,e){return this.promise_.then(t,e)},yR.prototype.catch=function(t){return this.then(null,t)},yR.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},yR.prototype.removeObserver_=function(t){var e=this.observers_.indexOf(t);-1!==e&&this.observers_.splice(e,1)},yR.prototype.notifyObservers_=function(){var t=this;this.finishPromise_(),this.observers_.slice().forEach((function(e){t.notifyObserver_(e)}))},yR.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(vP(this.state_)){case dP.SUCCESS:dR(this.resolve_.bind(null,this.snapshot))();break;case dP.CANCELED:case dP.ERROR:dR(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},yR.prototype.notifyObserver_=function(t){switch(vP(this.state_)){case dP.RUNNING:case dP.PAUSED:t.next&&dR(t.next.bind(t,this.snapshot))();break;case dP.SUCCESS:t.complete&&dR(t.complete.bind(t))();break;case dP.CANCELED:case dP.ERROR:t.error&&dR(t.error.bind(t,this.error_))();break;default:t.error&&dR(t.error.bind(t,this.error_))()}},yR.prototype.resume=function(){sR("resume",[],arguments);var t=this.state_===cP||this.state_===uP;return t&&this.transition_(aP),t},yR.prototype.pause=function(){sR("pause",[],arguments);var t=this.state_===aP;return t&&this.transition_(uP),t},yR.prototype.cancel=function(){sR("cancel",[],arguments);var t=this.state_===aP||this.state_===uP;return t&&this.transition_(hP),t},yR);function yR(t,e,n,r,i,o){var s=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.service_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=aP,this.errorHandler_=function(t){s.request_=null,s.chunkMultiplier_=1,t.codeEquals(PO)?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=t,s.transition_(pP))},this.metadataErrorHandler_=function(t){s.request_=null,t.codeEquals(PO)?s.completeTransitions_():(s.error_=t,s.transition_(pP))},this.promise_=new Promise((function(t,e){s.resolve_=t,s.reject_=e,s.start_()})),this.promise_.then(null,(function(){}))}var gR=(mR.prototype.toString=function(){return sR("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},mR.prototype.newRef=function(t,e){return new mR(t,e)},mR.prototype.mappings=function(){if(jP)return jP;var t=[];t.push(new UP("bucket")),t.push(new UP("generation")),t.push(new UP("metageneration")),t.push(new UP("name","fullPath",!0));var e=new UP("name");e.xform=function(t,e){return!_P(n=e)||n.length<2?n:DP(n);var n},t.push(e);var n=new UP("size");return n.xform=function(t,e){return yP(e)?Number(e):e},t.push(n),t.push(new UP("timeCreated")),t.push(new UP("updated")),t.push(new UP("md5Hash",null,!0)),t.push(new UP("cacheControl",null,!0)),t.push(new UP("contentDisposition",null,!0)),t.push(new UP("contentEncoding",null,!0)),t.push(new UP("contentLanguage",null,!0)),t.push(new UP("contentType",null,!0)),t.push(new UP("metadata","customMetadata",!0)),jP=t},mR.prototype.child=function(t){sR("child",[uR()],arguments);var e,n,r=(e=this.location.path,n=t.split("/").filter((function(t){return 0<t.length})).join("/"),0===e.length?n:e+"/"+n),i=new PP(this.location.bucket,r);return this.newRef(this.service,i)},Object.defineProperty(mR.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new PP(this.location.bucket,t);return this.newRef(this.service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(mR.prototype,"root",{get:function(){var t=new PP(this.location.bucket,"");return this.newRef(this.service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(mR.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(mR.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!1,configurable:!0}),Object.defineProperty(mR.prototype,"name",{get:function(){return DP(this.location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(mR.prototype,"storage",{get:function(){return this.service},enumerable:!1,configurable:!0}),mR.prototype.put=function(t,e){return void 0===e&&(e=null),sR("put",[cR(),lR(!0)],arguments),this.throwIfRoot_("put"),new vR(this,this.service,this.location,this.mappings(),new AP(t),e)},mR.prototype.putString=function(t,e,n){void 0===e&&(e=$O.RAW),sR("putString",[uR(),uR(JO,!0),lR(!0)],arguments),this.throwIfRoot_("putString");var r=tP(e,t),i=Object.assign({},n);return!yP(i.contentType)&&yP(r.contentType)&&(i.contentType=r.contentType),new vR(this,this.service,this.location,this.mappings(),new AP(r.data,!0),i)},mR.prototype.delete=function(){var t=this;return sR("delete",[],arguments),this.throwIfRoot_("delete"),this.service.getAuthToken().then((function(e){var n,r,i,o,s,a=(n=t.service,i=LP((r=t.location).fullServerUrl()),o=n.maxOperationRetryTime,(s=new KP(i,"DELETE",(function(t,e){}),o)).successCodes=[200,204],s.errorHandler=ZP(r),s);return t.service.makeRequest(a,e).getPromise()}))},mR.prototype.listAll=function(){sR("listAll",[],arguments);var t={prefixes:[],items:[]};return this.listAllHelper(t).then((function(){return t}))},mR.prototype.listAllHelper=function(t,e){return js(this,void 0,void 0,(function(){var n,r,i,o;return Vs(this,(function(s){switch(s.label){case 0:return n={pageToken:e},[4,this.list(n)];case 1:return r=s.sent(),(i=t.prefixes).push.apply(i,r.prefixes),(o=t.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,this.listAllHelper(t,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))},mR.prototype.list=function(t){sR("list",[new aR(GP,!0)],arguments);var e=this;return this.service.getAuthToken().then((function(n){var r=t||{},i=function(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",0<"/".length&&(o.delimiter="/"),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=LP(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime,u=new KP(s,"GET",XP(t,e.bucket),a);return u.urlParams=o,u.errorHandler=JP(e),u}(e.service,e.location,0,r.pageToken,r.maxResults);return e.service.makeRequest(i,n).getPromise()}))},mR.prototype.getMetadata=function(){var t=this;return sR("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.service.getAuthToken().then((function(e){var n=tR(t.service,t.location,t.mappings());return t.service.makeRequest(n,e).getPromise()}))},mR.prototype.updateMetadata=function(t){var e=this;return sR("updateMetadata",[lR()],arguments),this.throwIfRoot_("updateMetadata"),this.service.getAuthToken().then((function(n){var r,i,o,s,a,u,c,l,h=(r=e.service,i=e.location,o=t,s=e.mappings(),a=LP(i.fullServerUrl()),u=qP(o,s),c=r.maxOperationRetryTime,(l=new KP(a,"PATCH",YP(r,s),c)).headers={"Content-Type":"application/json; charset=utf-8"},l.body=u,l.errorHandler=ZP(i),l);return e.service.makeRequest(h,n).getPromise()}))},mR.prototype.getDownloadURL=function(){var t=this;return sR("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.service.getAuthToken().then((function(e){var n,r,i,o,s,a,u=(n=t.service,r=t.location,i=t.mappings(),o=LP(r.fullServerUrl()),s=n.maxOperationRetryTime,(a=new KP(o,"GET",$P(n,i),s)).errorHandler=ZP(r),a);return t.service.makeRequest(u,e).getPromise().then((function(t){if(null===t)throw new TO(MO,"The given file does not have any download URLs.");return t}))}))},mR.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw new TO(VO,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")},mR);function mR(t,e){this.service=t,this.location=e instanceof PP?e:PP.makeFromUrl(e)}var bR=(_R.prototype.getPromise=function(){return this.promise_},_R.prototype.cancel=function(t){},_R);function _R(t){this.promise_=Promise.reject(t)}var wR=(ER.prototype.start_=function(){var t,e,n,r,i,o,s,a,u,c=this;function l(t,e){var n,r=c.resolve_,i=c.reject_,o=e.xhr;if(e.wasSuccessCode)try{var s=c.callback_(o,o.getResponseText());gP(s)?r(s):r()}catch(t){i(t)}else null!==o?((n=HO()).setServerResponseProp(o.getResponseText()),c.errorCallback_?i(c.errorCallback_(o,n)):i(n)):e.canceled?i(n=(c.appDelete_?QO:zO)()):i(n=new TO(OO,"Max retry time for operation exceeded, please try again."))}function h(){return 2===s}function f(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];a||(a=!0,e.apply(null,t))}function p(e){i=setTimeout((function(){i=null,t(d,h())}),e)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];a||(t||h()||o?f.call.apply(f,Hs([null,t],e)):(r<64&&(r*=2),p(1===s?(s=2,0):1e3*(r+Math.random()))))}function v(t){u||(u=!0,a||(null!==i?(t||(s=2),clearTimeout(i),p(0)):t||(s=1)))}this.canceled_?l(0,new TR(!1,null,!0)):this.backoffId_=(t=function(t,e){var n;function r(t){var e=t.loaded,n=t.lengthComputable?t.total:-1;null!==c.progressCallback_&&c.progressCallback_(e,n)}e?t(!1,new TR(!1,null,!0)):(n=c.pool_.createXhrIo(),c.pendingXhr_=n,null!==c.progressCallback_&&n.addUploadProgressListener(r),n.send(c.url_,c.method_,c.body_,c.headers_).then((function(e){null!==c.progressCallback_&&e.removeUploadProgressListener(r),c.pendingXhr_=null;var n,i,o=e.getErrorCode()===rP.NO_ERROR,s=e.getStatus();o&&!c.isRetryStatusCode_(s)?(n=-1!==c.successCodes_.indexOf(s),t(!0,new TR(n,e))):(i=e.getErrorCode()===rP.ABORT,t(!1,new TR(!1,null,i)))})))},e=l,n=this.timeout_,i=null,u=a=o=!(r=1),p(s=0),setTimeout((function(){v(o=!0)}),n),v)},ER.prototype.getPromise=function(){return this.promise_},ER.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},ER.prototype.isRetryStatusCode_=function(t){var e=500<=t&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},ER);function ER(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}var TR=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n},IR=(SR.extractBucket_=function(t){var e=null==t?void 0:t.storageBucket;return null==e?null:PP.makeFromBucketSpec(e)},SR.prototype.getAuthToken=function(){return js(this,void 0,void 0,(function(){var t,e;return Vs(this,(function(n){switch(n.label){case 0:return(t=this.authProvider_.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},SR.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requests_.forEach((function(t){return t.cancel()})),this.requests_.clear()},SR.prototype.makeStorageReference=function(t){return new gR(this,t)},SR.prototype.makeRequest=function(t,e){var n=this;if(this.deleted_)return new bR(QO());var r=function(t,e,n,r){var i,o,s,a,u,c=MP(t.urlParams),l=t.url+c,h=Object.assign({},t.headers);return(i=e)&&(h["X-Firebase-GMPID"]=i),o=h,null!==(s=n)&&0<s.length&&(o.Authorization="Firebase "+s),a=h,u=void 0!==vu?vu.SDK_VERSION:"AppManager",a["X-Firebase-Storage-Version"]="webjs/"+u,new wR(l,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}(t,this.appId_,e,this.pool_);return this.requests_.add(r),r.getPromise().then((function(){return n.requests_.delete(r)}),(function(){return n.requests_.delete(r)})),r},SR.prototype.ref=function(t){if(sR("ref",[uR((function(t){if("string"!=typeof t)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."}),!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var e=new gR(this,this.bucket_);return null!=t?e.child(t):e},SR.prototype.refFromURL=function(t){return sR("refFromURL",[uR((function(t){if("string"!=typeof t)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{PP.makeFromUrl(t)}catch(t){throw"Expected valid full URL but got an invalid one."}}),!1)],arguments),new gR(this,t)},Object.defineProperty(SR.prototype,"maxUploadRetryTime",{get:function(){return this.maxUploadRetryTime_},enumerable:!1,configurable:!0}),SR.prototype.setMaxUploadRetryTime=function(t){sR("setMaxUploadRetryTime",[hR()],arguments),this.maxUploadRetryTime_=t},Object.defineProperty(SR.prototype,"maxOperationRetryTime",{get:function(){return this.maxOperationRetryTime_},enumerable:!1,configurable:!0}),SR.prototype.setMaxOperationRetryTime=function(t){sR("setMaxOperationRetryTime",[hR()],arguments),this.maxOperationRetryTime_=t},Object.defineProperty(SR.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),Object.defineProperty(SR.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!1,configurable:!0}),SR);function SR(t,e,n,r){var i;this.bucket_=null,this.appId_=null,this.deleted_=!1,this.app_=t,this.authProvider_=e,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e5,this.requests_=new Set,this.pool_=n,this.bucket_=null!=r?PP.makeFromBucketSpec(r):SR.extractBucket_(null===(i=this.app_)||void 0===i?void 0:i.options),this.internals_=new NR(this)}var CR,kR,NR=(AR.prototype.delete=function(){return this.service_.deleteApp(),Promise.resolve()},AR);function AR(t){this.service_=t}kR={TaskState:dP,TaskEvent:sP,StringFormat:$O,Storage:IR,Reference:gR},(CR=vu).INTERNAL.registerComponent(new Da("storage",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new IR(n,r,new CP,e)}),"PUBLIC").setServiceProps(kR).setMultipleInstances(!0)),CR.registerVersion("@firebase/storage","0.3.42");var OR,PR,RR,xR="FB-PERF-TRACE-MEASURE",DR="@firebase/performance/config",LR="@firebase/performance/configexpire",MR="Performance",FR=((OR={})["trace started"]="Trace {$traceName} was started before.",OR["trace stopped"]="Trace {$traceName} is not running.",OR["no window"]="Window is not available.",OR["no app id"]="App id is not available.",OR["no project id"]="Project id is not available.",OR["no api key"]="Api key is not available.",OR["invalid cc log"]="Attempted to queue invalid cc event",OR["FB not default"]="Performance can only start when Firebase app instance is the default one.",OR["RC response not ok"]="RC response is not ok",OR["invalid attribute name"]="Attribute name {$attributeName} is invalid.",OR["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",OR["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",OR["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",OR),UR=new pa("performance",MR,FR),jR=new $a(MR);jR.logLevel=Wa.INFO;var VR,qR=(BR.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},BR.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},BR.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},BR.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},BR.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},BR.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},BR.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!aa()||(jR.info("IndexedDB is not supported by current browswer"),!1):(jR.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},BR.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++){var i=r[n];e(i)}})).observe({entryTypes:[t]})},BR.getInstance=function(){return void 0===PR&&(PR=new BR(RR)),PR},BR);function BR(t){if(!(this.window=t))throw UR.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}function WR(t,e){var n=t.length-e.length;if(n<0||1<n)throw UR.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var HR,zR,GR,KR=(QR.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw UR.create("no app id");return t},QR.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw UR.create("no project id");return t},QR.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw UR.create("no api key");return t},QR.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},QR.getInstance=function(){return void 0===VR&&(VR=new QR),VR},QR);function QR(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=WR("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=WR("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}(GR=zR=zR||{})[GR.UNKNOWN=0]="UNKNOWN",GR[GR.VISIBLE=1]="VISIBLE",GR[GR.HIDDEN=2]="HIDDEN";var YR=["firebase_","google_","ga_"],XR=new RegExp("^[a-zA-Z]\\w*$");function $R(){switch(qR.getInstance().document.visibilityState){case"visible":return zR.VISIBLE;case"hidden":return zR.HIDDEN;default:return zR.UNKNOWN}}var JR=!0;function ZR(t){var e,n=function(){var t=qR.getInstance().localStorage;if(t){var e=t.getItem(LR);if(e&&function(t){return Number(t)>Date.now()}(e)){var n=t.getItem(DR);if(n)try{return JSON.parse(n)}catch(t){return}}}}();return n?(ex(n),Promise.resolve()):(e=t,function(){var t=KR.getInstance().installationsService.getToken();return t.then((function(t){})),t}().then((function(t){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+KR.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+KR.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+t},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:KR.getInstance().getAppId(),app_version:"0.4.0",sdk_version:"0.0.1"})});return fetch(r).then((function(t){if(t.ok)return t.json();throw UR.create("RC response not ok")}))})).catch((function(){jR.info(tx)})).then(ex).then((function(t){var e=qR.getInstance().localStorage;t&&e&&(e.setItem(DR,JSON.stringify(t)),e.setItem(LR,String(Date.now()+60*KR.getInstance().configTimeToLive*60*1e3)))}),(function(){})))}var tx="Could not fetch config, will use default configs";function ex(t){if(!t)return t;var e=KR.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0!==n.fpr_enabled?"true"===String(n.fpr_enabled):JR,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=nx(e.tracesSamplingRate),e.logNetworkAfterSampling=nx(e.networkRequestsSamplingRate),t}function nx(t){return Math.random()<=t}var rx,ix=1;function ox(){return ix=2,rx=rx||function(){var t=qR.getInstance().document;return new Promise((function(e){var n;t&&"complete"!==t.readyState?(n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())},t.addEventListener("readystatechange",n)):e()}))}().then((function(){return(t=KR.getInstance().installationsService.getId()).then((function(t){HR=t})),t;var t})).then(ZR).then(sx,sx)}function sx(){ix=3}var ax,ux=3,cx=[],lx=!1;function hx(t,e){(ax=ax||function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!function(t){if(!t.eventTime||!t.message)throw UR.create("invalid cc log");cx=Hs(cx,[t])}({message:t.apply(void 0,e),eventTime:Date.now()})}}(dx))(t,e)}function fx(t){var e=KR.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&qR.getInstance().requiredApisAvailable()&&(t.isAuto&&$R()!==zR.VISIBLE||e.loggingEnabled&&e.logTraceAfterSampling&&(3===ix?px(t):ox().then((function(){return px(t)}),(function(){return px(t)}))))}function px(t){HR&&setTimeout((function(){return hx(t,1)}),0)}function dx(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:vx(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:vx(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function vx(){return{google_app_id:KR.getInstance().getAppId(),app_instance_id:HR,web_app_info:{sdk_version:"0.4.0",page_url:qR.getInstance().getUrl(),service_worker_status:"serviceWorker"in(t=qR.getInstance().navigator)?t.serviceWorker.controller?2:3:1,visibility_state:$R(),effective_connection_type:function(){var t=qR.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0};var t}var yx=["_fp","_fcp","_fid"],gx=(mx.prototype.start=function(){if(1!==this.state)throw UR.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},mx.prototype.stop=function(){if(2!==this.state)throw UR.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),fx(this)},mx.prototype.record=function(t,e,n){if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Us({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}fx(this)},mx.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},mx.prototype.putMetric=function(t,e){if(i=t,o=this.name,0===i.length||100<i.length||!(o&&o.startsWith("_wt_")&&-1<yx.indexOf(i))&&i.startsWith("_"))throw UR.create("invalid custom metric name",{customMetricName:t});var n,r,i,o;this.counters[t]=(n=e,(r=Math.floor(n))<n&&jR.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},mx.prototype.getMetric=function(t){return this.counters[t]||0},mx.prototype.putAttribute=function(t,e){var n,r,i=!(0===(n=t).length||40<n.length||YR.some((function(t){return n.startsWith(t)}))||!n.match(XR)),o=0!==(r=e).length&&r.length<=100;if(i&&o)this.customAttributes[t]=e;else{if(!i)throw UR.create("invalid attribute name",{attributeName:t});if(!o)throw UR.create("invalid attribute value",{attributeValue:e})}},mx.prototype.getAttribute=function(t){return this.customAttributes[t]},mx.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},mx.prototype.getAttributes=function(){return Us({},this.customAttributes)},mx.prototype.setStartTime=function(t){this.startTimeUs=t},mx.prototype.setDuration=function(t){this.durationUs=t},mx.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},mx.createOobTrace=function(t,e,n){var r,i,o,s,a=qR.getInstance().getUrl();a&&(r=new mx("_wt_"+a,!0),i=Math.floor(1e3*qR.getInstance().getTimeOrigin()),r.setStartTime(i),t&&t[0]&&(r.setDuration(Math.floor(1e3*t[0].duration)),r.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),r.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),r.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),e&&((o=e.find((function(t){return"first-paint"===t.name})))&&o.startTime&&r.putMetric("_fp",Math.floor(1e3*o.startTime)),(s=e.find((function(t){return"first-contentful-paint"===t.name})))&&s.startTime&&r.putMetric("_fcp",Math.floor(1e3*s.startTime)),n&&r.putMetric("_fid",Math.floor(1e3*n))),fx(r))},mx.createUserTimingTrace=function(t){fx(new mx(t,!1,t))},mx);function mx(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=qR.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||xR+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}function bx(t){var e,n,r,i,o,s,a,u,c,l,h=t;h&&void 0!==h.responseStart&&(e=qR.getInstance().getTimeOrigin(),n=Math.floor(1e3*(h.startTime+e)),r=h.responseStart?Math.floor(1e3*(h.responseStart-h.startTime)):void 0,i=Math.floor(1e3*(h.responseEnd-h.startTime)),o={url:h.name&&h.name.split("?")[0],responsePayloadBytes:h.transferSize,startTimeUs:n,timeToResponseInitiatedUs:r,timeToResponseCompletedUs:i},s=o,(l=KR.getInstance()).instrumentationEnabled&&(a=s.url,u=l.logEndPointUrl.split("?")[0],c=l.flTransportEndpointUrl.split("?")[0],a!==u&&a!==c&&l.loggingEnabled&&l.logNetworkAfterSampling&&setTimeout((function(){return hx(s,0)}),0)))}function _x(){HR&&(setTimeout((function(){var t,e=qR.getInstance(),n=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");e.onFirstInputDelay?(t=setTimeout((function(){gx.createOobTrace(n,r),t=void 0}),5e3),e.onFirstInputDelay((function(e){t&&(clearTimeout(t),gx.createOobTrace(n,r,e))}))):gx.createOobTrace(n,r)}),0),setTimeout((function(){for(var t=qR.getInstance(),e=0,n=t.getEntriesByType("resource");e<n.length;e++)bx(n[e]);t.setupObserver("resource",bx)}),0),setTimeout((function(){for(var t=qR.getInstance(),e=0,n=t.getEntriesByType("measure");e<n.length;e++)wx(n[e]);t.setupObserver("measure",wx)}),0))}function wx(t){var e=t.name;e.substring(0,xR.length)!==xR&&gx.createUserTimingTrace(e)}var Ex,Tx=(Ix.prototype.trace=function(t){return new gx(t)},Object.defineProperty(Ix.prototype,"instrumentationEnabled",{get:function(){return KR.getInstance().instrumentationEnabled},set:function(t){KR.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(Ix.prototype,"dataCollectionEnabled",{get:function(){return KR.getInstance().dataCollectionEnabled},set:function(t){KR.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),Ix);function Ix(t){this.app=t,qR.getInstance().requiredApisAvailable()&&ua().then((function(t){t&&(lx||(function t(e){setTimeout((function(){if(0!==ux)return cx.length?void function(){var e=Hs(cx);cx=[];var n=e.map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}}));(function(e,n){return function(t){var e=KR.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(e).then((function(t){return t.ok||jR.info("Call to Firebase backend failed."),t.json()})).then((function(e){var r=Number(e.nextRequestWaitMillis),i=1e4;isNaN(r)||(i=Math.max(r,i));var o=e.logResponseDetails;Array.isArray(o)&&0<o.length&&"RETRY_REQUEST_LATER"===o[0].responseAction&&(cx=Hs(n,cx),jR.info("Retry transport request later.")),ux=3,t(i)}))})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:KR.getInstance().logSource,log_event:n},e).catch((function(){cx=Hs(e,cx),ux--,jR.info("Tries left: "+ux+"."),t(1e4)}))}():t(1e4)}),e)}(5500),lx=!0),ox().then(_x,_x))})).catch((function(t){jR.info("Environment doesn't support IndexedDB: "+t)}))}(Ex=vu).INTERNAL.registerComponent(new Da("performance",(function(t){return function(t,e){if("[DEFAULT]"!==t.name)throw UR.create("FB not default");if("undefined"==typeof window)throw UR.create("no window");return RR=window,KR.getInstance().firebaseAppInstance=t,KR.getInstance().installationsService=e,new Tx(t)}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC")),Ex.registerVersion("@firebase/performance","0.4.0");var Sx,Cx,kx,Nx,Ax="measurementId",Ox="https://www.googletagmanager.com/gtag/js";(Cx=Sx=Sx||{}).EVENT="event",Cx.SET="set",Cx.CONFIG="config",(Nx=kx=kx||{}).ADD_SHIPPING_INFO="add_shipping_info",Nx.ADD_PAYMENT_INFO="add_payment_info",Nx.ADD_TO_CART="add_to_cart",Nx.ADD_TO_WISHLIST="add_to_wishlist",Nx.BEGIN_CHECKOUT="begin_checkout",Nx.CHECKOUT_PROGRESS="checkout_progress",Nx.EXCEPTION="exception",Nx.GENERATE_LEAD="generate_lead",Nx.LOGIN="login",Nx.PAGE_VIEW="page_view",Nx.PURCHASE="purchase",Nx.REFUND="refund",Nx.REMOVE_FROM_CART="remove_from_cart",Nx.SCREEN_VIEW="screen_view",Nx.SEARCH="search",Nx.SELECT_CONTENT="select_content",Nx.SELECT_ITEM="select_item",Nx.SELECT_PROMOTION="select_promotion",Nx.SET_CHECKOUT_OPTION="set_checkout_option",Nx.SHARE="share",Nx.SIGN_UP="sign_up",Nx.TIMING_COMPLETE="timing_complete",Nx.VIEW_CART="view_cart",Nx.VIEW_ITEM="view_item",Nx.VIEW_ITEM_LIST="view_item_list",Nx.VIEW_PROMOTION="view_promotion",Nx.VIEW_SEARCH_RESULTS="view_search_results";var Px,Rx,xx,Dx=new $a("@firebase/analytics"),Lx=((Px={})["no-ga-id"]='"'+Ax+'" field is empty in Firebase config. Firebase Analytics requires this field to contain a valid measurement ID.',Px["already-exists"]="A Firebase Analytics instance with the measurement ID ${id}  already exists. Only one Firebase Analytics instance can be created for each measurement ID.",Px["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Px["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate",Px["indexedDB-unsupported"]="IndexedDB is not supported by current browswer",Px["invalid-indexedDB-context"]="Environment doesn't support IndexedDB: {$errorInfo}. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments",Px["cookies-not-enabled"]="Cookies are not enabled in this browser environment. Analytics requires cookies to be enabled.",Px["invalid-analytics-context"]="Firebase Analytics is not supported in browser extensions.",Px),Mx=new pa("analytics","Analytics",Lx),Fx={},Ux="dataLayer",jx="gtag",Vx=!1;function qx(t,e){if(ia())throw Mx.create("invalid-analytics-context");if(!ca())throw Mx.create("cookies-not-enabled");if(!aa())throw Mx.create("indexedDB-unsupported");ua().catch((function(t){throw Mx.create("invalid-indexedDB-context",{errorInfo:t})}));var n,r,i,o,s,a,u,c=t.options[Ax];if(!c)throw Mx.create("no-ga-id");if(null!=Fx[c])throw Mx.create("already-exists",{id:c});return Vx||(function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(Ox))return r}}()||(a=Ux,(u=document.createElement("script")).src=Ox+"?l="+a,u.async=!0,document.head.appendChild(u)),o=Ux,s=[],Array.isArray(window[o])?s=window[o]:window[o]=s,r=(n=function(t,e,n){var r,i,o=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];window[e].push(arguments)};return window[n]&&"function"==typeof window[n]&&(o=window[n]),window[n]=(r=o,i=t,function(t,e,n){if(t===Sx.EVENT){var o=[];if(n&&n.send_to){var s=n.send_to;Array.isArray(s)||(s=[s]);for(var a=0,u=s;a<u.length;a++){var c=u[a],l=i[c];if(!l){o=[];break}o.push(l)}}if(0===o.length)for(var h=0,f=Object.values(i);h<f.length;h++){var p=f[h];o.push(p)}Promise.all(o).then((function(){return r(Sx.EVENT,e,n||{})})).catch((function(t){return Dx.error(t)}))}else t===Sx.CONFIG?(i[e]||Promise.resolve()).then((function(){r(Sx.CONFIG,e,n)})).catch((function(t){return Dx.error(t)})):r(Sx.SET,e)}),{gtagCore:o,wrappedGtag:window[n]}}(Fx,Ux,jx)).wrappedGtag,i=n.gtagCore,xx=r,Rx=i,Vx=!0),Fx[c]=function(t,e,n){return js(this,void 0,void 0,(function(){var r,i;return Vs(this,(function(o){switch(o.label){case 0:return[4,e.getId()];case 1:return r=o.sent(),n("js",new Date),n(Sx.CONFIG,t.options[Ax],((i={}).firebase_id=r,i.origin="firebase",i.update=!0,i)),[2]}}))}))}(t,e,Rx),{app:t,logEvent:function(t,e,n){return r=xx,i=c,o=t,u=(s=e)||{},(a=n)&&a.global||(u=Us(Us({},s),{send_to:i})),void r(Sx.EVENT,o,u||{});var r,i,o,s,a,u},setCurrentScreen:function(t,e){return n=xx,r=c,i=t,void((o=e)&&o.global?n(Sx.SET,{screen_name:i}):n(Sx.CONFIG,r,{update:!0,screen_name:i}));var n,r,i,o},setUserId:function(t,e){return n=xx,r=c,i=t,void((o=e)&&o.global?n(Sx.SET,{user_id:i}):n(Sx.CONFIG,r,{update:!0,user_id:i}));var n,r,i,o},setUserProperties:function(t,e){return function(t,e,n,r){if(r&&r.global){for(var i={},o=0,s=Object.keys(n);o<s.length;o++){var a=s[o];i["user_properties."+a]=n[a]}t(Sx.SET,i)}else t(Sx.CONFIG,e,{update:!0,user_properties:n})}(xx,c,t,e)},setAnalyticsCollectionEnabled:function(t){return e=t,void(window["ga-disable-"+c]=!e);var e}}}var Bx,Wx="analytics";(Bx=vu).INTERNAL.registerComponent(new Da(Wx,(function(t){return qx(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:function(t){if(Vx)throw Mx.create("already-initialized");t.dataLayerName&&(Ux=t.dataLayerName),t.gtagName&&(jx=t.gtagName)},EventName:kx,isSupported:function(){return js(this,void 0,void 0,(function(){return Vs(this,(function(t){switch(t.label){case 0:if(ia())return[2,!1];if(!ca())return[2,!1];if(!aa())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,ua()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}})),Bx.INTERNAL.registerComponent(new Da("analytics-internal",(function(t){try{return{logEvent:t.getProvider(Wx).getImmediate().logEvent}}catch(t){throw Mx.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),Bx.registerVersion("@firebase/analytics","0.4.2");var Hx,zx=(Gx.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},Gx.prototype.fetch=function(t){return js(this,void 0,void 0,(function(){var e,n,r,i,o;return Vs(this,(function(s){switch(s.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=s.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=s.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return s.sent(),[2,i]}}))}))},Gx);function Gx(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}var Kx=((Hx={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",Hx["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",Hx["registration-api-key"]="Undefined API key. Check Firebase app initialization.",Hx["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",Hx["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",Hx["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",Hx["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",Hx["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",Hx["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",Hx["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',Hx["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',Hx["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",Hx["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",Hx),Qx=new pa("remoteconfig","Remote Config",Kx),Yx=(Xx.prototype.fetch=function(t){return js(this,void 0,void 0,(function(){var e,n,r,i,o,s,a,u,c,l,h,f,p,d,v,y,g,m,b;return Vs(this,(function(_){switch(_.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=_.sent(),n=e[0],r=e[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:(void 0===w&&(w=navigator),w.languages&&w.languages[0]||w.language)},u={method:"POST",headers:s,body:JSON.stringify(a)},c=fetch(o,u),l=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),_.label=2;case 2:return _.trys.push([2,5,,6]),[4,Promise.race([c,l])];case 3:return _.sent(),[4,c];case 4:return h=_.sent(),[3,6];case 5:throw f=_.sent(),p="fetch-client-network","AbortError"===f.name&&(p="fetch-timeout"),Qx.create(p,{originalErrorMessage:f.message});case 6:if(d=h.status,v=h.headers.get("ETag")||void 0,200!==h.status)return[3,11];m=void 0,_.label=7;case 7:return _.trys.push([7,9,,10]),[4,h.json()];case 8:return m=_.sent(),[3,10];case 9:throw b=_.sent(),Qx.create("fetch-client-parse",{originalErrorMessage:b.message});case 10:y=m.entries,g=m.state,_.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===g?d=500:"NO_CHANGE"===g?d=304:"NO_TEMPLATE"!==g&&"EMPTY_CONFIG"!==g||(y={}),304!==d&&200!==d)throw Qx.create("fetch-status",{httpStatus:d});return[2,{status:d,eTag:v,config:y}]}var w}))}))},Xx);function Xx(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}var $x=(Jx.prototype.addEventListener=function(t){this.listeners.push(t)},Jx.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},Jx);function Jx(){this.listeners=[]}var Zx=["1","true","t","yes","y","on"],tD=(eD.prototype.asString=function(){return this._value},eD.prototype.asBoolean=function(){return"static"!==this._source&&0<=Zx.indexOf(this._value.toLowerCase())},eD.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},eD.prototype.getSource=function(){return this._source},eD);function eD(t,e){void 0===e&&(e=""),this._source=t,this._value=e}var nD=(rD.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=Wa.DEBUG;break;case"silent":this._logger.logLevel=Wa.SILENT;break;default:this._logger.logLevel=Wa.ERROR}},Object.defineProperty(rD.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(rD.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),rD.prototype.activate=function(){return js(this,void 0,void 0,(function(){var t,e,n;return Vs(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),e=t[0],n=t[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},rD.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},rD.prototype.fetch=function(){return js(this,void 0,void 0,(function(){var t,e,n,r=this;return Vs(this,(function(i){switch(i.label){case 0:t=new $x,setTimeout((function(){return js(r,void 0,void 0,(function(){return Vs(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=(o=e)instanceof ha&&-1!==o.code.indexOf("fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}var o}))}))},rD.prototype.fetchAndActivate=function(){return js(this,void 0,void 0,(function(){return Vs(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},rD.prototype.getAll=function(){var t=this;return function(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(Us(Us({},t),e))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(e,n){return e[n]=t.getValue(n),e}),{})},rD.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},rD.prototype.getNumber=function(t){return this.getValue(t).asNumber()},rD.prototype.getString=function(t){return this.getValue(t).asString()},rD.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new tD("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new tD("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new tD("static"))},rD);function rD(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}function iD(t,e){var n=t.target.error||void 0;return Qx.create(e,{originalErrorMessage:n&&n.message})}var oD="app_namespace_store",sD=(aD.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},aD.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},aD.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},aD.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},aD.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},aD.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},aD.prototype.getActiveConfig=function(){return this.get("active_config")},aD.prototype.setActiveConfig=function(t){return this.set("active_config",t)},aD.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},aD.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},aD.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},aD.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},aD.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},aD.prototype.get=function(t){return js(this,void 0,void 0,(function(){var e,n=this;return Vs(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([oD],"readonly").objectStore(oD),s=n.createCompositeKey(t);try{var a=o.get(s);a.onerror=function(t){i(iD(t,"storage-get"))},a.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(o){i(Qx.create("storage-get",{originalErrorMessage:o&&o.message}))}}))]}}))}))},aD.prototype.set=function(t,e){return js(this,void 0,void 0,(function(){var n,r=this;return Vs(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var s=n.transaction([oD],"readwrite").objectStore(oD),a=r.createCompositeKey(t);try{var u=s.put({compositeKey:a,value:e});u.onerror=function(t){o(iD(t,"storage-set"))},u.onsuccess=function(){i()}}catch(i){o(Qx.create("storage-set",{originalErrorMessage:i&&i.message}))}}))]}}))}))},aD.prototype.delete=function(t){return js(this,void 0,void 0,(function(){var e,n=this;return Vs(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([oD],"readwrite").objectStore(oD),s=n.createCompositeKey(t);try{var a=o.delete(s);a.onerror=function(t){i(iD(t,"storage-delete"))},a.onsuccess=function(){r()}}catch(r){i(Qx.create("storage-delete",{originalErrorMessage:r&&r.message}))}}))]}}))}))},aD.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},aD);function aD(t,e,n,r){void 0===r&&(r=new Promise((function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(iD(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(oD,{keyPath:"compositeKey"})}}}))),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}var uD=(cD.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},cD.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},cD.prototype.getActiveConfig=function(){return this.activeConfig},cD.prototype.loadFromStorage=function(){return js(this,void 0,void 0,(function(){var t,e,n,r,i,o;return Vs(this,(function(s){switch(s.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=s.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(i=s.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=s.sent())&&(this.activeConfig=o),[2]}}))}))},cD.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},cD.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},cD.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},cD);function cD(t){this.storage=t}var lD=(hD.prototype.fetch=function(t){return js(this,void 0,void 0,(function(){var e;return Vs(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},hD.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return js(this,void 0,void 0,(function(){var e,i,o;return Vs(this,(function(s){switch(s.label){case 0:return[4,(l=t.signal,h=n,new Promise((function(t,e){var n=Math.max(h-Date.now(),0),r=setTimeout(t,n);l.addEventListener((function(){clearTimeout(r),e(Qx.create("fetch-throttle",{throttleEndTimeMillis:h}))}))})))];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=s.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return s.sent(),[2,e];case 5:if(!function(t){if(t instanceof ha){var e=Number(t.httpStatus);return 429===e||500===e||503===e||504===e}}(i=s.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+(a=r,u=1e3*Math.pow(2,a),c=Math.round(.5*u*(Math.random()-.5)*2),Math.min(144e5,u+c)),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return s.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}var a,u,c,l,h}))}))},hD);function hD(t,e){this.client=t,this.storage=e}var fD,pD="@firebase/remote-config";return(fD=vu).INTERNAL.registerComponent(new Da("remoteConfig",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw Qx.create("registration-window");var i=n.options,o=i.projectId,s=i.apiKey,a=i.appId;if(!o)throw Qx.create("registration-project-id");if(!s)throw Qx.create("registration-api-key");if(!a)throw Qx.create("registration-app-id");e=e||"firebase";var u=new sD(a,n.name,e),c=new uD(u),l=new $a(pD);l.logLevel=Wa.ERROR;var h=new Yx(r,fD.SDK_VERSION,e,o,s,a),f=new lD(h,u),p=new zx(f,u,c,l),d=new nD(n,p,c,u,l);return d.ensureInitialized(),d}),"PUBLIC").setMultipleInstances(!0)),fD.registerVersion(pD,"0.1.27"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the CDN builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nhttps://www.gstatic.com/firebasejs/5.0.0/firebase-<PACKAGE>.js\n"),vu.registerVersion("firebase","7.19.0","cdn"),vu}()}).call(this,n(12),n(15))}]]);
//# sourceMappingURL=2.a5ba9d28.chunk.js.map